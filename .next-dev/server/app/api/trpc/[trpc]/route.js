"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trpc/[trpc]/route";
exports.ids = ["app/api/trpc/[trpc]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "puppeteer":
/*!****************************!*\
  !*** external "puppeteer" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("puppeteer");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "async_hooks":
/*!******************************!*\
  !*** external "async_hooks" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("async_hooks");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:child_process":
/*!*************************************!*\
  !*** external "node:child_process" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("node:child_process");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_henrymascot_Code_CuracelPeople_src_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/trpc/[trpc]/route.ts */ \"(rsc)/./src/app/api/trpc/[trpc]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trpc/[trpc]/route\",\n        pathname: \"/api/trpc/[trpc]\",\n        filename: \"route\",\n        bundlePath: \"app/api/trpc/[trpc]/route\"\n    },\n    resolvedPagePath: \"/Users/henrymascot/Code/CuracelPeople/src/app/api/trpc/[trpc]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_henrymascot_Code_CuracelPeople_src_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/trpc/[trpc]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmhlbnJ5bWFzY290JTJGQ29kZSUyRkN1cmFjZWxQZW9wbGUlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGaGVucnltYXNjb3QlMkZDb2RlJTJGQ3VyYWNlbFBlb3BsZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNzQjtBQUNuRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLz8xMGVmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9oZW5yeW1hc2NvdC9Db2RlL0N1cmFjZWxQZW9wbGUvc3JjL2FwcC9hcGkvdHJwYy9bdHJwY10vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RycGMvW3RycGNdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdHJwYy9bdHJwY11cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2hlbnJ5bWFzY290L0NvZGUvQ3VyYWNlbFBlb3BsZS9zcmMvYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/[...nextauth]/auth-options.ts":
/*!********************************************************!*\
  !*** ./src/app/api/auth/[...nextauth]/auth-options.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/prisma-adapter */ \"(rsc)/./node_modules/@auth/prisma-adapter/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_password__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/password */ \"(rsc)/./src/lib/password.ts\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\",\n                    placeholder: \"admin@company.com\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email) return null;\n                const email = credentials.email.trim().toLowerCase();\n                const password = credentials.password || \"\";\n                const devPasswordless =  true && process.env.DEV_PASSWORDLESS_LOGIN !== \"false\";\n                const devAutoCreateSuperAdmin =  true && process.env.DEV_AUTO_CREATE_SUPER_ADMIN !== \"false\";\n                // Find user in database\n                let user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n                    where: {\n                        email\n                    }\n                });\n                // Optional local bootstrap (development only)\n                if (!user && devAutoCreateSuperAdmin) {\n                    user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.create({\n                        data: {\n                            email,\n                            name: email.split(\"@\")[0],\n                            role: \"SUPER_ADMIN\",\n                            passwordHash: password ? await (0,_lib_password__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(password) : null,\n                            passwordSetAt: password ? new Date() : null\n                        }\n                    });\n                }\n                if (!user) return null;\n                if (user.passwordHash) {\n                    if (!password) return null;\n                    const ok = await (0,_lib_password__WEBPACK_IMPORTED_MODULE_3__.verifyPassword)({\n                        password,\n                        passwordHash: user.passwordHash\n                    });\n                    if (!ok) return null;\n                } else {\n                    // No password set for this user\n                    if (!devPasswordless) return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    callbacks: {\n        async session ({ session, token }) {\n            if (session.user && token.email) {\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n                    where: {\n                        email: token.email\n                    },\n                    include: {\n                        employee: true\n                    }\n                });\n                if (user) {\n                    session.user.id = user.id;\n                    session.user.role = user.role;\n                    session.user.employeeId = user.employeeId;\n                }\n            }\n            return session;\n        },\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n            }\n            return token;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vYXV0aC1vcHRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9EO0FBRWE7QUFDaEM7QUFDNEI7QUFFdEQsTUFBTUssY0FBK0I7SUFDMUNDLFNBQVNOLG1FQUFhQSxDQUFDRSxtREFBTUE7SUFDN0JLLFdBQVc7UUFDVE4sMkVBQW1CQSxDQUFDO1lBQ2xCTyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07b0JBQVNDLGFBQWE7Z0JBQW9CO2dCQUN6RUMsVUFBVTtvQkFBRUgsT0FBTztvQkFBWUMsTUFBTTtnQkFBVztZQUNsRDtZQUNBLE1BQU1HLFdBQVVOLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsT0FBTyxPQUFPO2dCQUNoQyxNQUFNQSxRQUFRRCxZQUFZQyxLQUFLLENBQUNNLElBQUksR0FBR0MsV0FBVztnQkFDbEQsTUFBTUgsV0FBV0wsWUFBWUssUUFBUSxJQUFJO2dCQUV6QyxNQUFNSSxrQkFDSkMsS0FBeUIsSUFDekJBLFFBQVFDLEdBQUcsQ0FBQ0Msc0JBQXNCLEtBQUs7Z0JBQ3pDLE1BQU1DLDBCQUNKSCxLQUF5QixJQUN6QkEsUUFBUUMsR0FBRyxDQUFDRywyQkFBMkIsS0FBSztnQkFFOUMsd0JBQXdCO2dCQUN4QixJQUFJQyxPQUFPLE1BQU10QixtREFBTUEsQ0FBQ3NCLElBQUksQ0FBQ0MsVUFBVSxDQUFDO29CQUFFQyxPQUFPO3dCQUFFaEI7b0JBQU07Z0JBQUU7Z0JBRTNELDhDQUE4QztnQkFDOUMsSUFBSSxDQUFDYyxRQUFRRix5QkFBeUI7b0JBQ3BDRSxPQUFPLE1BQU10QixtREFBTUEsQ0FBQ3NCLElBQUksQ0FBQ0csTUFBTSxDQUFDO3dCQUM5QkMsTUFBTTs0QkFDSmxCOzRCQUNBRixNQUFNRSxNQUFNbUIsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFOzRCQUN6QkMsTUFBTTs0QkFDTkMsY0FBY2pCLFdBQVcsTUFBTVgsMkRBQVlBLENBQUNXLFlBQVk7NEJBQ3hEa0IsZUFBZWxCLFdBQVcsSUFBSW1CLFNBQVM7d0JBQ3pDO29CQUNGO2dCQUNGO2dCQUVBLElBQUksQ0FBQ1QsTUFBTSxPQUFPO2dCQUVsQixJQUFJQSxLQUFLTyxZQUFZLEVBQUU7b0JBQ3JCLElBQUksQ0FBQ2pCLFVBQVUsT0FBTztvQkFDdEIsTUFBTW9CLEtBQUssTUFBTTlCLDZEQUFjQSxDQUFDO3dCQUFFVTt3QkFBVWlCLGNBQWNQLEtBQUtPLFlBQVk7b0JBQUM7b0JBQzVFLElBQUksQ0FBQ0csSUFBSSxPQUFPO2dCQUNsQixPQUFPO29CQUNMLGdDQUFnQztvQkFDaEMsSUFBSSxDQUFDaEIsaUJBQWlCLE9BQU87Z0JBQy9CO2dCQUVBLE9BQU87b0JBQ0xpQixJQUFJWCxLQUFLVyxFQUFFO29CQUNYekIsT0FBT2MsS0FBS2QsS0FBSztvQkFDakJGLE1BQU1nQixLQUFLaEIsSUFBSTtvQkFDZnNCLE1BQU1OLEtBQUtNLElBQUk7Z0JBQ2pCO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RNLFdBQVc7UUFDVCxNQUFNQyxTQUFRLEVBQUVBLE9BQU8sRUFBRUMsS0FBSyxFQUFFO1lBQzlCLElBQUlELFFBQVFiLElBQUksSUFBSWMsTUFBTTVCLEtBQUssRUFBRTtnQkFDL0IsTUFBTWMsT0FBTyxNQUFNdEIsbURBQU1BLENBQUNzQixJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFDeENDLE9BQU87d0JBQUVoQixPQUFPNEIsTUFBTTVCLEtBQUs7b0JBQVc7b0JBQ3RDNkIsU0FBUzt3QkFBRUMsVUFBVTtvQkFBSztnQkFDNUI7Z0JBRUEsSUFBSWhCLE1BQU07b0JBQ1JhLFFBQVFiLElBQUksQ0FBQ1csRUFBRSxHQUFHWCxLQUFLVyxFQUFFO29CQUN6QkUsUUFBUWIsSUFBSSxDQUFDTSxJQUFJLEdBQUdOLEtBQUtNLElBQUk7b0JBQzdCTyxRQUFRYixJQUFJLENBQUNpQixVQUFVLEdBQUdqQixLQUFLaUIsVUFBVTtnQkFDM0M7WUFDRjtZQUNBLE9BQU9KO1FBQ1Q7UUFDQSxNQUFNSyxLQUFJLEVBQUVKLEtBQUssRUFBRWQsSUFBSSxFQUFFO1lBQ3ZCLElBQUlBLE1BQU07Z0JBQ1JjLE1BQU1SLElBQUksR0FBRyxLQUFjQSxJQUFJO1lBQ2pDO1lBQ0EsT0FBT1E7UUFDVDtJQUNGO0lBQ0FLLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxPQUFPO0lBQ1Q7SUFDQVIsU0FBUztRQUNQUyxVQUFVO0lBQ1o7SUFDQUMsUUFBUTVCLFFBQVFDLEdBQUcsQ0FBQzRCLGVBQWU7QUFDckMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL2F1dGgtb3B0aW9ucy50cz9mYjRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tICdAYXV0aC9wcmlzbWEtYWRhcHRlcidcbmltcG9ydCB7IHR5cGUgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJ1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscydcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvcHJpc21hJ1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gJ0AvbGliL3Bhc3N3b3JkJ1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgYWRhcHRlcjogUHJpc21hQWRhcHRlcihwcmlzbWEpIGFzIE5leHRBdXRoT3B0aW9uc1snYWRhcHRlciddLFxuICBwcm92aWRlcnM6IFtcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogJ0VtYWlsJywgdHlwZTogJ2VtYWlsJywgcGxhY2Vob2xkZXI6ICdhZG1pbkBjb21wYW55LmNvbScgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IGVtYWlsID0gY3JlZGVudGlhbHMuZW1haWwudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBjcmVkZW50aWFscy5wYXNzd29yZCB8fCAnJ1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGV2UGFzc3dvcmRsZXNzID1cbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuREVWX1BBU1NXT1JETEVTU19MT0dJTiAhPT0gJ2ZhbHNlJ1xuICAgICAgICBjb25zdCBkZXZBdXRvQ3JlYXRlU3VwZXJBZG1pbiA9XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIHByb2Nlc3MuZW52LkRFVl9BVVRPX0NSRUFURV9TVVBFUl9BRE1JTiAhPT0gJ2ZhbHNlJ1xuXG4gICAgICAgIC8vIEZpbmQgdXNlciBpbiBkYXRhYmFzZVxuICAgICAgICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9IH0pXG5cbiAgICAgICAgLy8gT3B0aW9uYWwgbG9jYWwgYm9vdHN0cmFwIChkZXZlbG9wbWVudCBvbmx5KVxuICAgICAgICBpZiAoIXVzZXIgJiYgZGV2QXV0b0NyZWF0ZVN1cGVyQWRtaW4pIHtcbiAgICAgICAgICB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgIG5hbWU6IGVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgICAgIHJvbGU6ICdTVVBFUl9BRE1JTicsXG4gICAgICAgICAgICAgIHBhc3N3b3JkSGFzaDogcGFzc3dvcmQgPyBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpIDogbnVsbCxcbiAgICAgICAgICAgICAgcGFzc3dvcmRTZXRBdDogcGFzc3dvcmQgPyBuZXcgRGF0ZSgpIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXNlcikgcmV0dXJuIG51bGxcblxuICAgICAgICBpZiAodXNlci5wYXNzd29yZEhhc2gpIHtcbiAgICAgICAgICBpZiAoIXBhc3N3b3JkKSByZXR1cm4gbnVsbFxuICAgICAgICAgIGNvbnN0IG9rID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQoeyBwYXNzd29yZCwgcGFzc3dvcmRIYXNoOiB1c2VyLnBhc3N3b3JkSGFzaCB9KVxuICAgICAgICAgIGlmICghb2spIHJldHVybiBudWxsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gcGFzc3dvcmQgc2V0IGZvciB0aGlzIHVzZXJcbiAgICAgICAgICBpZiAoIWRldlBhc3N3b3JkbGVzcykgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9KSxcbiAgXSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmIChzZXNzaW9uLnVzZXIgJiYgdG9rZW4uZW1haWwpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiB0b2tlbi5lbWFpbCBhcyBzdHJpbmcgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7IGVtcGxveWVlOiB0cnVlIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB1c2VyLmlkXG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB1c2VyLnJvbGVcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuZW1wbG95ZWVJZCA9IHVzZXIuZW1wbG95ZWVJZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvblxuICAgIH0sXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4ucm9sZSA9ICh1c2VyIGFzIGFueSkucm9sZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuXG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvYXV0aC9zaWduaW4nLFxuICAgIGVycm9yOiAnL2F1dGgvZXJyb3InLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6ICdqd3QnLFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFBZGFwdGVyIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsInByaXNtYSIsImhhc2hQYXNzd29yZCIsInZlcmlmeVBhc3N3b3JkIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiZGV2UGFzc3dvcmRsZXNzIiwicHJvY2VzcyIsImVudiIsIkRFVl9QQVNTV09SRExFU1NfTE9HSU4iLCJkZXZBdXRvQ3JlYXRlU3VwZXJBZG1pbiIsIkRFVl9BVVRPX0NSRUFURV9TVVBFUl9BRE1JTiIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJjcmVhdGUiLCJkYXRhIiwic3BsaXQiLCJyb2xlIiwicGFzc3dvcmRIYXNoIiwicGFzc3dvcmRTZXRBdCIsIkRhdGUiLCJvayIsImlkIiwiY2FsbGJhY2tzIiwic2Vzc2lvbiIsInRva2VuIiwiaW5jbHVkZSIsImVtcGxveWVlIiwiZW1wbG95ZWVJZCIsImp3dCIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJzdHJhdGVneSIsInNlY3JldCIsIk5FWFRBVVRIX1NFQ1JFVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/[...nextauth]/auth-options.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/trpc/[trpc]/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/trpc/[trpc]/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server/adapters/fetch */ \"(rsc)/./node_modules/@trpc/server/dist/adapters/fetch/index.mjs\");\n/* harmony import */ var _server_routers_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/server/routers/_app */ \"(rsc)/./src/server/routers/_app.ts\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n\n\n\nconst handler = (req)=>(0,_trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_2__.fetchRequestHandler)({\n        endpoint: \"/api/trpc\",\n        req,\n        router: _server_routers_app__WEBPACK_IMPORTED_MODULE_0__.appRouter,\n        createContext: _lib_trpc__WEBPACK_IMPORTED_MODULE_1__.createContext,\n        onError:  true ? ({ path, error })=>{\n            console.error(`‚ùå tRPC failed on ${path ?? \"<no-path>\"}: ${error.message}`);\n        } : 0\n    });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRTtBQUNoQjtBQUNQO0FBRTFDLE1BQU1HLFVBQVUsQ0FBQ0MsTUFDZkosZ0ZBQW1CQSxDQUFDO1FBQ2xCSyxVQUFVO1FBQ1ZEO1FBQ0FFLFFBQVFMLDBEQUFTQTtRQUNqQkMsYUFBYUEsc0RBQUFBO1FBQ2JLLFNBQ0VDLEtBQXlCLEdBQ3JCLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUU7WUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUVELFFBQVEsWUFBWSxFQUFFLEVBQUVDLE1BQU1FLE9BQU8sQ0FBQyxDQUFDO1FBQzNFLElBQ0FDLENBQVNBO0lBQ2pCO0FBRXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZS50cz80M2Q3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZldGNoUmVxdWVzdEhhbmRsZXIgfSBmcm9tICdAdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvZmV0Y2gnXG5pbXBvcnQgeyBhcHBSb3V0ZXIgfSBmcm9tICdAL3NlcnZlci9yb3V0ZXJzL19hcHAnXG5pbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAnQC9saWIvdHJwYydcblxuY29uc3QgaGFuZGxlciA9IChyZXE6IFJlcXVlc3QpID0+XG4gIGZldGNoUmVxdWVzdEhhbmRsZXIoe1xuICAgIGVuZHBvaW50OiAnL2FwaS90cnBjJyxcbiAgICByZXEsXG4gICAgcm91dGVyOiBhcHBSb3V0ZXIsXG4gICAgY3JlYXRlQ29udGV4dCxcbiAgICBvbkVycm9yOlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCdcbiAgICAgICAgPyAoeyBwYXRoLCBlcnJvciB9KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgdFJQQyBmYWlsZWQgb24gJHtwYXRoID8/ICc8bm8tcGF0aD4nfTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgfSlcblxuZXhwb3J0IHsgaGFuZGxlciBhcyBHRVQsIGhhbmRsZXIgYXMgUE9TVCB9XG5cbiJdLCJuYW1lcyI6WyJmZXRjaFJlcXVlc3RIYW5kbGVyIiwiYXBwUm91dGVyIiwiY3JlYXRlQ29udGV4dCIsImhhbmRsZXIiLCJyZXEiLCJlbmRwb2ludCIsInJvdXRlciIsIm9uRXJyb3IiLCJwcm9jZXNzIiwicGF0aCIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJHRVQiLCJQT1NUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/trpc/[trpc]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/api-tokens.ts":
/*!*******************************!*\
  !*** ./src/lib/api-tokens.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateApiToken: () => (/* binding */ generateApiToken),\n/* harmony export */   hashApiToken: () => (/* binding */ hashApiToken),\n/* harmony export */   normalizeApiToken: () => (/* binding */ normalizeApiToken)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst TOKEN_PREFIX = \"curacel_\";\nconst PREFIX_LENGTH = 10;\nfunction hashApiToken(token) {\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(token).digest(\"hex\");\n}\nfunction generateApiToken() {\n    const token = `${TOKEN_PREFIX}${crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(24).toString(\"hex\")}`;\n    return {\n        token,\n        tokenHash: hashApiToken(token),\n        tokenPrefix: token.slice(0, PREFIX_LENGTH)\n    };\n}\nfunction normalizeApiToken(raw) {\n    return raw.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FwaS10b2tlbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkI7QUFFM0IsTUFBTUMsZUFBZTtBQUNyQixNQUFNQyxnQkFBZ0I7QUFFZixTQUFTQyxhQUFhQyxLQUFhO0lBQ3hDLE9BQU9KLHdEQUFpQixDQUFDLFVBQVVNLE1BQU0sQ0FBQ0YsT0FBT0csTUFBTSxDQUFDO0FBQzFEO0FBRU8sU0FBU0M7SUFLZCxNQUFNSixRQUFRLENBQUMsRUFBRUgsYUFBYSxFQUFFRCx5REFBa0IsQ0FBQyxJQUFJVSxRQUFRLENBQUMsT0FBTyxDQUFDO0lBQ3hFLE9BQU87UUFDTE47UUFDQU8sV0FBV1IsYUFBYUM7UUFDeEJRLGFBQWFSLE1BQU1TLEtBQUssQ0FBQyxHQUFHWDtJQUM5QjtBQUNGO0FBRU8sU0FBU1ksa0JBQWtCQyxHQUFXO0lBQzNDLE9BQU9BLElBQUlDLElBQUk7QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvYXBpLXRva2Vucy50cz80ZTcxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xuXG5jb25zdCBUT0tFTl9QUkVGSVggPSAnY3VyYWNlbF8nXG5jb25zdCBQUkVGSVhfTEVOR1RIID0gMTBcblxuZXhwb3J0IGZ1bmN0aW9uIGhhc2hBcGlUb2tlbih0b2tlbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUodG9rZW4pLmRpZ2VzdCgnaGV4Jylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQXBpVG9rZW4oKToge1xuICB0b2tlbjogc3RyaW5nXG4gIHRva2VuSGFzaDogc3RyaW5nXG4gIHRva2VuUHJlZml4OiBzdHJpbmdcbn0ge1xuICBjb25zdCB0b2tlbiA9IGAke1RPS0VOX1BSRUZJWH0ke2NyeXB0by5yYW5kb21CeXRlcygyNCkudG9TdHJpbmcoJ2hleCcpfWBcbiAgcmV0dXJuIHtcbiAgICB0b2tlbixcbiAgICB0b2tlbkhhc2g6IGhhc2hBcGlUb2tlbih0b2tlbiksXG4gICAgdG9rZW5QcmVmaXg6IHRva2VuLnNsaWNlKDAsIFBSRUZJWF9MRU5HVEgpLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBcGlUb2tlbihyYXc6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiByYXcudHJpbSgpXG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwiVE9LRU5fUFJFRklYIiwiUFJFRklYX0xFTkdUSCIsImhhc2hBcGlUb2tlbiIsInRva2VuIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImdlbmVyYXRlQXBpVG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwidG9rZW5IYXNoIiwidG9rZW5QcmVmaXgiLCJzbGljZSIsIm5vcm1hbGl6ZUFwaVRva2VuIiwicmF3IiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/api-tokens.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/audit.ts":
/*!**************************!*\
  !*** ./src/lib/audit.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuditLog: () => (/* binding */ createAuditLog),\n/* harmony export */   logEmployeeEvent: () => (/* binding */ logEmployeeEvent),\n/* harmony export */   logIntegrationEvent: () => (/* binding */ logIntegrationEvent),\n/* harmony export */   logOfferEvent: () => (/* binding */ logOfferEvent)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _notification_email__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./notification-email */ \"(rsc)/./src/lib/notification-email.ts\");\n/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./notifications */ \"(rsc)/./src/lib/notifications.ts\");\n\n\n\nasync function createAuditLog(params) {\n    const log = await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].auditLog.create({\n        data: {\n            actorId: params.actorId,\n            actorEmail: params.actorEmail,\n            actorType: params.actorType || \"user\",\n            action: params.action,\n            resourceType: params.resourceType,\n            resourceId: params.resourceId,\n            metadata: params.metadata,\n            ipAddress: params.ipAddress,\n            userAgent: params.userAgent\n        },\n        include: {\n            actor: {\n                select: {\n                    name: true,\n                    email: true\n                }\n            }\n        }\n    });\n    void (0,_notification_email__WEBPACK_IMPORTED_MODULE_1__.notifyAdminsOfAuditLog)({\n        id: log.id,\n        action: log.action,\n        resourceType: log.resourceType,\n        resourceId: log.resourceId,\n        actorId: log.actorId,\n        actorEmail: log.actorEmail,\n        actor: log.actor,\n        createdAt: log.createdAt\n    });\n    if ((0,_notifications__WEBPACK_IMPORTED_MODULE_2__.isNotifiableAction)(log.action)) {\n        const notificationClient = _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].notification;\n        if (!notificationClient) {\n            return;\n        }\n        const adminUsers = await _prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findMany({\n            where: {\n                role: {\n                    in: [\n                        ..._notifications__WEBPACK_IMPORTED_MODULE_2__.ADMIN_NOTIFICATION_ROLES\n                    ]\n                }\n            },\n            select: {\n                id: true\n            }\n        });\n        if (adminUsers.length > 0) {\n            await notificationClient.createMany({\n                data: adminUsers.map((user)=>({\n                        userId: user.id,\n                        auditLogId: log.id,\n                        action: log.action,\n                        resourceType: log.resourceType,\n                        resourceId: log.resourceId,\n                        actorName: log.actor?.name ?? null,\n                        actorEmail: log.actorEmail ?? log.actor?.email ?? null\n                    }))\n            });\n        }\n    }\n}\nasync function logOfferEvent(params) {\n    await createAuditLog({\n        actorId: params.actorId,\n        actorEmail: params.actorEmail,\n        action: params.action,\n        resourceType: \"offer\",\n        resourceId: params.offerId,\n        metadata: params.metadata\n    });\n}\nasync function logEmployeeEvent(params) {\n    await createAuditLog({\n        actorId: params.actorId,\n        actorEmail: params.actorEmail,\n        action: params.action,\n        resourceType: \"employee\",\n        resourceId: params.employeeId,\n        metadata: params.metadata\n    });\n}\nasync function logIntegrationEvent(params) {\n    await createAuditLog({\n        actorId: params.actorId,\n        actorEmail: params.actorEmail,\n        actorType: params.actorType,\n        action: params.action,\n        resourceType: \"app_account\",\n        resourceId: params.appAccountId,\n        metadata: {\n            ...params.metadata,\n            employeeId: params.employeeId\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0JDLFdBQVdQLE9BQU9PLFNBQVM7UUFDM0JDLFFBQVFSLE9BQU9RLE1BQU07UUFDckJDLGNBQWM7UUFDZEMsWUFBWVYsT0FBT3dDLFlBQVk7UUFDL0I3QixVQUFVO1lBQ1IsR0FBR1gsT0FBT1csUUFBUTtZQUNsQjJCLFlBQVl0QyxPQUFPc0MsVUFBVTtRQUMvQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvYXVkaXQudHM/ZjQ2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hJ1xuaW1wb3J0IHsgUHJpc21hLCB0eXBlIEF1ZGl0QWN0aW9uIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5pbXBvcnQgeyBub3RpZnlBZG1pbnNPZkF1ZGl0TG9nIH0gZnJvbSAnLi9ub3RpZmljYXRpb24tZW1haWwnXG5pbXBvcnQgeyBBRE1JTl9OT1RJRklDQVRJT05fUk9MRVMsIGlzTm90aWZpYWJsZUFjdGlvbiB9IGZyb20gJy4vbm90aWZpY2F0aW9ucydcblxuaW50ZXJmYWNlIEF1ZGl0TG9nUGFyYW1zIHtcbiAgYWN0b3JJZD86IHN0cmluZ1xuICBhY3RvckVtYWlsPzogc3RyaW5nXG4gIGFjdG9yVHlwZT86ICd1c2VyJyB8ICdzeXN0ZW0nIHwgJ3dlYmhvb2snXG4gIGFjdGlvbjogQXVkaXRBY3Rpb25cbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgcmVzb3VyY2VJZD86IHN0cmluZ1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIGlwQWRkcmVzcz86IHN0cmluZ1xuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1ZGl0TG9nKHBhcmFtczogQXVkaXRMb2dQYXJhbXMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgbG9nID0gYXdhaXQgcHJpc21hLmF1ZGl0TG9nLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgYWN0b3JJZDogcGFyYW1zLmFjdG9ySWQsXG4gICAgICBhY3RvckVtYWlsOiBwYXJhbXMuYWN0b3JFbWFpbCxcbiAgICAgIGFjdG9yVHlwZTogcGFyYW1zLmFjdG9yVHlwZSB8fCAndXNlcicsXG4gICAgICBhY3Rpb246IHBhcmFtcy5hY3Rpb24sXG4gICAgICByZXNvdXJjZVR5cGU6IHBhcmFtcy5yZXNvdXJjZVR5cGUsXG4gICAgICByZXNvdXJjZUlkOiBwYXJhbXMucmVzb3VyY2VJZCxcbiAgICAgIG1ldGFkYXRhOiBwYXJhbXMubWV0YWRhdGEgYXMgUHJpc21hLklucHV0SnNvblZhbHVlIHwgdW5kZWZpbmVkLFxuICAgICAgaXBBZGRyZXNzOiBwYXJhbXMuaXBBZGRyZXNzLFxuICAgICAgdXNlckFnZW50OiBwYXJhbXMudXNlckFnZW50LFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgYWN0b3I6IHsgc2VsZWN0OiB7IG5hbWU6IHRydWUsIGVtYWlsOiB0cnVlIH0gfSxcbiAgICB9LFxuICB9KVxuXG4gIHZvaWQgbm90aWZ5QWRtaW5zT2ZBdWRpdExvZyh7XG4gICAgaWQ6IGxvZy5pZCxcbiAgICBhY3Rpb246IGxvZy5hY3Rpb24sXG4gICAgcmVzb3VyY2VUeXBlOiBsb2cucmVzb3VyY2VUeXBlLFxuICAgIHJlc291cmNlSWQ6IGxvZy5yZXNvdXJjZUlkLFxuICAgIGFjdG9ySWQ6IGxvZy5hY3RvcklkLFxuICAgIGFjdG9yRW1haWw6IGxvZy5hY3RvckVtYWlsLFxuICAgIGFjdG9yOiBsb2cuYWN0b3IsXG4gICAgY3JlYXRlZEF0OiBsb2cuY3JlYXRlZEF0LFxuICB9KVxuXG4gIGlmIChpc05vdGlmaWFibGVBY3Rpb24obG9nLmFjdGlvbikpIHtcbiAgICBjb25zdCBub3RpZmljYXRpb25DbGllbnQgPSAocHJpc21hIGFzIHR5cGVvZiBwcmlzbWEgJiB7IG5vdGlmaWNhdGlvbj86IHR5cGVvZiBwcmlzbWEubm90aWZpY2F0aW9uIH0pLm5vdGlmaWNhdGlvblxuICAgIGlmICghbm90aWZpY2F0aW9uQ2xpZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYWRtaW5Vc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHJvbGU6IHsgaW46IFsuLi5BRE1JTl9OT1RJRklDQVRJT05fUk9MRVNdIH0gfSxcbiAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSB9LFxuICAgIH0pXG5cbiAgICBpZiAoYWRtaW5Vc2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBub3RpZmljYXRpb25DbGllbnQuY3JlYXRlTWFueSh7XG4gICAgICAgIGRhdGE6IGFkbWluVXNlcnMubWFwKCh1c2VyKSA9PiAoe1xuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICBhdWRpdExvZ0lkOiBsb2cuaWQsXG4gICAgICAgICAgYWN0aW9uOiBsb2cuYWN0aW9uLFxuICAgICAgICAgIHJlc291cmNlVHlwZTogbG9nLnJlc291cmNlVHlwZSxcbiAgICAgICAgICByZXNvdXJjZUlkOiBsb2cucmVzb3VyY2VJZCxcbiAgICAgICAgICBhY3Rvck5hbWU6IGxvZy5hY3Rvcj8ubmFtZSA/PyBudWxsLFxuICAgICAgICAgIGFjdG9yRW1haWw6IGxvZy5hY3RvckVtYWlsID8/IGxvZy5hY3Rvcj8uZW1haWwgPz8gbnVsbCxcbiAgICAgICAgfSkpLFxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ09mZmVyRXZlbnQocGFyYW1zOiB7XG4gIGFjdG9ySWQ/OiBzdHJpbmdcbiAgYWN0b3JFbWFpbD86IHN0cmluZ1xuICBhY3Rpb246IEF1ZGl0QWN0aW9uXG4gIG9mZmVySWQ6IHN0cmluZ1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG59KTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICBhY3RvcklkOiBwYXJhbXMuYWN0b3JJZCxcbiAgICBhY3RvckVtYWlsOiBwYXJhbXMuYWN0b3JFbWFpbCxcbiAgICBhY3Rpb246IHBhcmFtcy5hY3Rpb24sXG4gICAgcmVzb3VyY2VUeXBlOiAnb2ZmZXInLFxuICAgIHJlc291cmNlSWQ6IHBhcmFtcy5vZmZlcklkLFxuICAgIG1ldGFkYXRhOiBwYXJhbXMubWV0YWRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dFbXBsb3llZUV2ZW50KHBhcmFtczoge1xuICBhY3RvcklkPzogc3RyaW5nXG4gIGFjdG9yRW1haWw/OiBzdHJpbmdcbiAgYWN0aW9uOiBBdWRpdEFjdGlvblxuICBlbXBsb3llZUlkOiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxufSk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogcGFyYW1zLmFjdG9ySWQsXG4gICAgYWN0b3JFbWFpbDogcGFyYW1zLmFjdG9yRW1haWwsXG4gICAgYWN0aW9uOiBwYXJhbXMuYWN0aW9uLFxuICAgIHJlc291cmNlVHlwZTogJ2VtcGxveWVlJyxcbiAgICByZXNvdXJjZUlkOiBwYXJhbXMuZW1wbG95ZWVJZCxcbiAgICBtZXRhZGF0YTogcGFyYW1zLm1ldGFkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nSW50ZWdyYXRpb25FdmVudChwYXJhbXM6IHtcbiAgYWN0b3JJZD86IHN0cmluZ1xuICBhY3RvckVtYWlsPzogc3RyaW5nXG4gIGFjdG9yVHlwZT86ICd1c2VyJyB8ICdzeXN0ZW0nIHwgJ3dlYmhvb2snXG4gIGFjdGlvbjogQXVkaXRBY3Rpb25cbiAgYXBwQWNjb3VudElkPzogc3RyaW5nXG4gIGVtcGxveWVlSWQ/OiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxufSk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogcGFyYW1zLmFjdG9ySWQsXG4gICAgYWN0b3JFbWFpbDogcGFyYW1zLmFjdG9yRW1haWwsXG4gICAgYWN0b3JUeXBlOiBwYXJhbXMuYWN0b3JUeXBlLFxuICAgIGFjdGlvbjogcGFyYW1zLmFjdGlvbixcbiAgICByZXNvdXJjZVR5cGU6ICdhcHBfYWNjb3VudCcsXG4gICAgcmVzb3VyY2VJZDogcGFyYW1zLmFwcEFjY291bnRJZCxcbiAgICBtZXRhZGF0YToge1xuICAgICAgLi4ucGFyYW1zLm1ldGFkYXRhLFxuICAgICAgZW1wbG95ZWVJZDogcGFyYW1zLmVtcGxveWVlSWQsXG4gICAgfSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJub3RpZnlBZG1pbnNPZkF1ZGl0TG9nIiwiQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVTIiwiaXNOb3RpZmlhYmxlQWN0aW9uIiwiY3JlYXRlQXVkaXRMb2ciLCJwYXJhbXMiLCJsb2ciLCJhdWRpdExvZyIsImNyZWF0ZSIsImRhdGEiLCJhY3RvcklkIiwiYWN0b3JFbWFpbCIsImFjdG9yVHlwZSIsImFjdGlvbiIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJtZXRhZGF0YSIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsImluY2x1ZGUiLCJhY3RvciIsInNlbGVjdCIsIm5hbWUiLCJlbWFpbCIsImlkIiwiY3JlYXRlZEF0Iiwibm90aWZpY2F0aW9uQ2xpZW50Iiwibm90aWZpY2F0aW9uIiwiYWRtaW5Vc2VycyIsInVzZXIiLCJmaW5kTWFueSIsIndoZXJlIiwicm9sZSIsImluIiwibGVuZ3RoIiwiY3JlYXRlTWFueSIsIm1hcCIsInVzZXJJZCIsImF1ZGl0TG9nSWQiLCJhY3Rvck5hbWUiLCJsb2dPZmZlckV2ZW50Iiwib2ZmZXJJZCIsImxvZ0VtcGxveWVlRXZlbnQiLCJlbXBsb3llZUlkIiwibG9nSW50ZWdyYXRpb25FdmVudCIsImFwcEFjY291bnRJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/audit.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/email.ts":
/*!**************************!*\
  !*** ./src/lib/email.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEmailTransportStatus: () => (/* binding */ getEmailTransportStatus),\n/* harmony export */   sendAccountCredentialsEmail: () => (/* binding */ sendAccountCredentialsEmail),\n/* harmony export */   sendEmail: () => (/* binding */ sendEmail),\n/* harmony export */   sendOfferEmail: () => (/* binding */ sendOfferEmail),\n/* harmony export */   sendOnboardingEmail: () => (/* binding */ sendOnboardingEmail),\n/* harmony export */   sendSignedOfferEmail: () => (/* binding */ sendSignedOfferEmail),\n/* harmony export */   sendTeamInviteEmail: () => (/* binding */ sendTeamInviteEmail)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n/* harmony import */ var postmark__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! postmark */ \"(rsc)/./node_modules/postmark/dist/index.js\");\n\n\n\nfunction normalizeEnvValue(value) {\n    if (!value) return \"\";\n    const trimmed = value.trim();\n    return trimmed.replace(/^['\"]|['\"]$/g, \"\").trim();\n}\nfunction readEnv(...keys) {\n    for (const key of keys){\n        const value = normalizeEnvValue(process.env[key]);\n        if (value) return value;\n    }\n    return \"\";\n}\nfunction getEmailTransportStatus() {\n    const postmarkToken = readEnv(\"POSTMARK_SERVER_TOKEN\", \"POSTMARK_API_TOKEN\", \"POSTMARK_TOKEN\", \"POSTMARK_API_KEY\", \"POSTMARK_KEY\");\n    const smtpHost = readEnv(\"SMTP_HOST\");\n    const smtpUser = readEnv(\"SMTP_USER\", \"SMTP_USERNAME\");\n    const smtpPassword = readEnv(\"SMTP_PASSWORD\", \"SMTP_PASS\");\n    const postmarkConfigured = Boolean(postmarkToken);\n    const smtpConfigured = Boolean(smtpHost && smtpUser && smtpPassword);\n    const companyDomain = readEnv(\"COMPANY_DOMAIN\");\n    const defaultFrom = companyDomain ? `people@${companyDomain}` : \"people@curacel.ai\";\n    const from = readEnv(\"POSTMARK_FROM\", \"EMAIL_FROM\") || defaultFrom;\n    const messageStream = readEnv(\"POSTMARK_MESSAGE_STREAM\", \"POSTMARK_STREAM\") || \"outbound\";\n    const kind = postmarkConfigured ? \"postmark\" : smtpConfigured ? \"smtp\" : \"none\";\n    return {\n        kind,\n        postmarkConfigured,\n        smtpConfigured,\n        from,\n        messageStream\n    };\n}\nlet warnedMissingTransport = false;\n// Build transports lazily so new env values are picked up after restart\nfunction getPostmarkClient() {\n    const token = readEnv(\"POSTMARK_SERVER_TOKEN\", \"POSTMARK_API_TOKEN\", \"POSTMARK_TOKEN\", \"POSTMARK_API_KEY\", \"POSTMARK_KEY\");\n    if (!token) return null;\n    return new postmark__WEBPACK_IMPORTED_MODULE_2__.ServerClient(token);\n}\nfunction getSmtpTransporter() {\n    const smtpHost = readEnv(\"SMTP_HOST\");\n    const smtpUser = readEnv(\"SMTP_USER\", \"SMTP_USERNAME\");\n    const smtpPassword = readEnv(\"SMTP_PASSWORD\", \"SMTP_PASS\");\n    const hasSmtpCreds = Boolean(smtpHost && smtpUser && smtpPassword);\n    if (!hasSmtpCreds) return null;\n    const smtpPort = parseInt(readEnv(\"SMTP_PORT\") || \"587\", 10);\n    const secure = readEnv(\"SMTP_SECURE\") === \"true\" || smtpPort === 465;\n    return nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n        host: smtpHost,\n        port: smtpPort,\n        secure,\n        auth: {\n            user: smtpUser,\n            pass: smtpPassword\n        }\n    });\n}\nfunction getAppUrl() {\n    const url = readEnv(\"NEXT_PUBLIC_APP_URL\", \"NEXTAUTH_URL\");\n    return url || \"http://localhost:3000\";\n}\nfunction resolveAbsoluteUrl(rawUrl, appUrl, fallbackPath) {\n    const baseUrl = appUrl.replace(/\\/+$/, \"\");\n    const fallback = fallbackPath.startsWith(\"/\") ? `${baseUrl}${fallbackPath}` : `${baseUrl}/${fallbackPath}`;\n    if (!rawUrl) return fallback;\n    const trimmed = rawUrl.trim();\n    if (!trimmed) return fallback;\n    if (/^https?:\\/\\//i.test(trimmed)) return trimmed;\n    if (trimmed.startsWith(\"/\")) return `${baseUrl}${trimmed}`;\n    return `${baseUrl}/${trimmed}`;\n}\nasync function sendEmail(options) {\n    const { to, subject, html, text, attachments } = options;\n    const status = getEmailTransportStatus();\n    const postmarkFrom = status.from;\n    const messageStream = status.messageStream;\n    let lastError = null;\n    const postmarkClient = getPostmarkClient();\n    if (postmarkClient) {\n        try {\n            const postmarkAttachments = attachments ? await Promise.all(attachments.map(async (file)=>{\n                if (file.content) {\n                    return {\n                        Name: file.filename,\n                        Content: Buffer.isBuffer(file.content) ? file.content.toString(\"base64\") : Buffer.from(file.content).toString(\"base64\"),\n                        ContentType: file.contentType || \"application/octet-stream\",\n                        ContentID: file.filename\n                    };\n                }\n                if (file.path) {\n                    const contentBuffer = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(file.path);\n                    return {\n                        Name: file.filename,\n                        Content: contentBuffer.toString(\"base64\"),\n                        ContentType: file.contentType || \"application/octet-stream\",\n                        ContentID: file.filename\n                    };\n                }\n                return null;\n            })).then((values)=>values.filter(Boolean)) : undefined;\n            await postmarkClient.sendEmail({\n                From: postmarkFrom,\n                To: to,\n                Subject: subject,\n                HtmlBody: html,\n                TextBody: text || html.replace(/<[^>]*>/g, \"\"),\n                MessageStream: messageStream,\n                Attachments: postmarkAttachments\n            });\n            return;\n        } catch (error) {\n            console.warn(\"Postmark send failed, falling back to SMTP (if configured):\", error);\n            lastError = error;\n        }\n    }\n    const transporter = getSmtpTransporter();\n    if (transporter) {\n        await transporter.sendMail({\n            from: postmarkFrom,\n            to,\n            subject,\n            html,\n            text: text || html.replace(/<[^>]*>/g, \"\"),\n            attachments\n        });\n        return;\n    }\n    // No transporter and Postmark failed: surface error instead of silent success\n    if (status.kind === \"none\" && !warnedMissingTransport) {\n        warnedMissingTransport = true;\n        console.error(\"Email transport not configured. Set POSTMARK_SERVER_TOKEN (or POSTMARK_API_TOKEN) or SMTP_HOST/SMTP_USER/SMTP_PASSWORD. If you just changed env vars, restart the server.\");\n    }\n    if (status.kind === \"none\") {\n        throw new Error(\"Email send failed: no email transport configured (set POSTMARK_SERVER_TOKEN / POSTMARK_API_TOKEN or SMTP_HOST/SMTP_USER/SMTP_PASSWORD, then restart the server)\");\n    }\n    throw lastError instanceof Error ? lastError : new Error(\"Email send failed\");\n}\nasync function sendOfferEmail(params) {\n    const { candidateEmail, candidateName, offerLink, companyName, logoUrl: rawLogoUrl } = params;\n    const appUrl = getAppUrl();\n    const logoUrl = resolveAbsoluteUrl(rawLogoUrl, appUrl, \"/logo.png\");\n    const year = new Date().getFullYear();\n    await sendEmail({\n        to: candidateEmail,\n        subject: `Your offer from ${companyName}`,\n        html: `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"UTF-8\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\t        </head>\n\t        <body style=\"margin:0; padding:0; background-color:#eef2f7; font-family: 'Segoe UI', Arial, sans-serif; color:#0f172a;\">\n\t          <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#eef2f7;\">\n              <tr>\n                <td align=\"center\" style=\"padding:32px 16px;\">\n                  <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"max-width:600px; background:#ffffff; border-radius:16px; border:1px solid #e2e8f0; overflow:hidden;\">\n                    <tr>\n                      <td style=\"padding:24px 32px 12px; text-align:center;\">\n                        <img\n                          src=\"${logoUrl}\"\n                          alt=\"${companyName} logo\"\n                          width=\"120\"\n                          style=\"display:block; margin:0 auto; height:auto;\"\n                        />\n                      </td>\n                    </tr>\n                    <tr>\n                      <td style=\"padding:8px 32px 32px;\">\n                        <h1 style=\"margin:0 0 16px; font-size:24px; line-height:1.3; font-weight:700; color:#0f172a;\">\n                          Congratulations, ${candidateName}!\n                        </h1>\n                        <p style=\"margin:0 0 12px; font-size:16px; line-height:1.6; color:#334155;\">\n                          We&#39;re excited to extend an offer to join ${companyName}.\n                        </p>\n                        <p style=\"margin:0 0 24px; font-size:16px; line-height:1.6; color:#334155;\">\n                          Please review and sign your offer letter by clicking the button below.\n                        </p>\n                        <a\n                          href=\"${offerLink}\"\n                          style=\"display:inline-block; background:#1d4ed8; color:#ffffff; text-decoration:none; padding:12px 20px; border-radius:10px; font-weight:600; font-size:15px;\"\n                        >Review &amp; Sign Offer</a>\n                        <p style=\"margin:24px 0 0; font-size:14px; line-height:1.6; color:#64748b; text-align:center;\">\n                          If you have any issues, please reach out to the People team.\n                        </p>\n                      </td>\n                    </tr>\n                  </table>\n                  <p style=\"margin:16px 0 0; font-size:12px; color:#94a3b8; text-align:center;\">\n                    &copy; ${year} ${companyName}\n                  </p>\n                </td>\n              </tr>\n\t          </table>\n\t        </body>\n\t      </html>\n\t    `\n    });\n}\nasync function sendOnboardingEmail(params) {\n    const { employeeEmail, employeeName, onboardingLink, startDate, managerName, companyName } = params;\n    await sendEmail({\n        to: employeeEmail,\n        subject: `Welcome to ${companyName} - Complete your onboarding`,\n        html: `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px; border-radius: 8px 8px 0 0; }\n            .content { background: #f9fafb; padding: 30px; border-radius: 0 0 8px 8px; }\n            .button { display: inline-block; background: #10b981; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; margin-top: 20px; }\n            .info-box { background: white; padding: 15px; border-radius: 6px; margin: 15px 0; }\n            .footer { margin-top: 20px; font-size: 12px; color: #666; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1 style=\"margin: 0;\">Welcome aboard, ${employeeName}!</h1>\n            </div>\n            <div class=\"content\">\n              <p>We're thrilled to have you joining ${companyName}!</p>\n              \n              <div class=\"info-box\">\n                <strong>Start Date:</strong> ${startDate.toLocaleDateString(\"en-US\", {\n            weekday: \"long\",\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\"\n        })}\n                ${managerName ? `<br><strong>Manager:</strong> ${managerName}` : \"\"}\n              </div>\n              \n              <p>To complete your onboarding, please fill out your personal details:</p>\n              <ul>\n                <li>Home address</li>\n                <li>Phone number</li>\n                <li>Emergency contact</li>\n                <li>Bank details</li>\n              </ul>\n              \n              <a href=\"${onboardingLink}\" class=\"button\">Complete Onboarding</a>\n              \n              <p class=\"footer\">\n                This link will expire in 7 days. If you have any questions, please contact HR.\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `\n    });\n}\nasync function sendAccountCredentialsEmail(params) {\n    const { employeeEmail, employeeName, workEmail, temporaryPassword, companyName } = params;\n    await sendEmail({\n        to: employeeEmail,\n        subject: `Your ${companyName} account credentials`,\n        html: `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 30px; border-radius: 8px 8px 0 0; }\n            .content { background: #f9fafb; padding: 30px; border-radius: 0 0 8px 8px; }\n            .credentials { background: white; padding: 20px; border-radius: 6px; margin: 15px 0; font-family: monospace; }\n            .warning { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px; margin: 15px 0; }\n            .footer { margin-top: 20px; font-size: 12px; color: #666; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h1 style=\"margin: 0;\">Your Account is Ready!</h1>\n            </div>\n            <div class=\"content\">\n              <p>Hi ${employeeName},</p>\n              <p>Your ${companyName} Google Workspace account has been created:</p>\n              \n              <div class=\"credentials\">\n                <strong>Email:</strong> ${workEmail}<br>\n                <strong>Temporary Password:</strong> ${temporaryPassword}\n              </div>\n              \n              <div class=\"warning\">\n                <strong>Important:</strong> You will be required to change your password on first login.\n              </div>\n              \n              <p>You can sign in at <a href=\"https://workspace.google.com\">workspace.google.com</a></p>\n              \n              <p class=\"footer\">\n                If you didn't expect this email or have questions, please contact IT.\n              </p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `\n    });\n}\nasync function sendSignedOfferEmail(params) {\n    const { to, candidateName, companyName, signedHtml, signedPdf, signedFileName = signedPdf ? \"signed-offer.pdf\" : \"signed-offer.html\" } = params;\n    await sendEmail({\n        to,\n        subject: `Signed offer copy - ${companyName}`,\n        html: `\n      <!DOCTYPE html>\n      <html>\n        <body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333;\">\n          <h2 style=\"margin-bottom: 8px;\">Signed offer</h2>\n          <p>Hi ${candidateName},</p>\n          <p>Attached is a copy of your signed offer with ${companyName}.</p>\n          <p style=\"margin-top: 16px;\">Thank you!</p>\n        </body>\n      </html>\n    `,\n        attachments: [\n            {\n                filename: signedFileName,\n                content: signedPdf ? signedPdf : Buffer.from(signedHtml),\n                contentType: signedPdf ? \"application/pdf\" : \"text/html\"\n            }\n        ]\n    });\n}\nasync function sendTeamInviteEmail(params) {\n    const { to, invitedByName, role, acceptUrl } = params;\n    await sendEmail({\n        to,\n        subject: `You‚Äôve been invited to Curacel People`,\n        html: `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .content { background: #f9fafb; padding: 24px; border-radius: 8px; }\n            .button { display: inline-block; background: #4f46e5; color: #ffffff; padding: 12px 18px; text-decoration: none; border-radius: 6px; margin-top: 16px; }\n            .meta { color: #6b7280; font-size: 12px; margin-top: 16px; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"content\">\n              <h2 style=\"margin-top: 0;\">You‚Äôve been invited</h2>\n              <p>${invitedByName ? `${invitedByName} has` : \"You have\"} invited you to Curacel People.</p>\n              <p><strong>Role:</strong> ${role}</p>\n              <a class=\"button\" href=\"${acceptUrl}\">Accept invite</a>\n              <p class=\"meta\">If you didn‚Äôt expect this invite, you can ignore this email.</p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQW9CUyxFQUFFdUQsYUFBYTtzQkFDYixFQUFFUixZQUFZOzs7d0NBR0ksRUFBRWlCLFVBQVU7cURBQ0MsRUFBRUMsa0JBQWtCOzs7Ozs7Ozs7Ozs7Ozs7O0lBZ0JyRSxDQUFDO0lBQ0g7QUFDRjtBQUVPLGVBQWVDLHFCQUFxQnZCLE1BTzFDO0lBQ0MsTUFBTSxFQUFFN0MsRUFBRSxFQUFFK0MsYUFBYSxFQUFFRSxXQUFXLEVBQUVvQixVQUFVLEVBQUVDLFNBQVMsRUFBRUMsaUJBQWlCRCxZQUFZLHFCQUFxQixtQkFBbUIsRUFBRSxHQUFHekI7SUFFekksTUFBTS9DLFVBQVU7UUFDZEU7UUFDQUMsU0FBUyxDQUFDLG9CQUFvQixFQUFFZ0QsWUFBWSxDQUFDO1FBQzdDL0MsTUFBTSxDQUFDOzs7OztnQkFLSyxFQUFFNkMsY0FBYzswREFDMEIsRUFBRUUsWUFBWTs7OztJQUlwRSxDQUFDO1FBQ0Q3QyxhQUFhO1lBQ1g7Z0JBQ0VZLFVBQVV1RDtnQkFDVnpELFNBQVN3RCxZQUFZQSxZQUFZcEQsT0FBTy9DLElBQUksQ0FBQ2tHO2dCQUM3Qy9DLGFBQWFnRCxZQUFZLG9CQUFvQjtZQUMvQztTQUNEO0lBQ0g7QUFDRjtBQUVPLGVBQWVFLG9CQUFvQjNCLE1BS3pDO0lBQ0MsTUFBTSxFQUFFN0MsRUFBRSxFQUFFeUUsYUFBYSxFQUFFQyxJQUFJLEVBQUVDLFNBQVMsRUFBRSxHQUFHOUI7SUFFL0MsTUFBTS9DLFVBQVU7UUFDZEU7UUFDQUMsU0FBUyxDQUFDLHFDQUFxQyxDQUFDO1FBQ2hEQyxNQUFNLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7aUJBZ0JNLEVBQUV1RSxnQkFBZ0IsQ0FBQyxFQUFFQSxjQUFjLElBQUksQ0FBQyxHQUFHLFdBQVc7d0NBQy9CLEVBQUVDLEtBQUs7c0NBQ1QsRUFBRUMsVUFBVTs7Ozs7O0lBTTlDLENBQUM7SUFDSDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2VtYWlsLnRzPzRjMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJ1xuaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcidcbmltcG9ydCB7IFNlcnZlckNsaWVudCB9IGZyb20gJ3Bvc3RtYXJrJ1xuXG5mdW5jdGlvbiBub3JtYWxpemVFbnZWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnXG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKClcbiAgcmV0dXJuIHRyaW1tZWQucmVwbGFjZSgvXlsnXCJdfFsnXCJdJC9nLCAnJykudHJpbSgpXG59XG5cbmZ1bmN0aW9uIHJlYWRFbnYoLi4ua2V5czogc3RyaW5nW10pOiBzdHJpbmcge1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgY29uc3QgdmFsdWUgPSBub3JtYWxpemVFbnZWYWx1ZShwcm9jZXNzLmVudltrZXldKVxuICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gIH1cbiAgcmV0dXJuICcnXG59XG5cbmV4cG9ydCB0eXBlIEVtYWlsVHJhbnNwb3J0S2luZCA9ICdwb3N0bWFyaycgfCAnc210cCcgfCAnbm9uZSdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtYWlsVHJhbnNwb3J0U3RhdHVzKCk6IHtcbiAga2luZDogRW1haWxUcmFuc3BvcnRLaW5kXG4gIHBvc3RtYXJrQ29uZmlndXJlZDogYm9vbGVhblxuICBzbXRwQ29uZmlndXJlZDogYm9vbGVhblxuICBmcm9tOiBzdHJpbmdcbiAgbWVzc2FnZVN0cmVhbTogc3RyaW5nXG59IHtcbiAgY29uc3QgcG9zdG1hcmtUb2tlbiA9IHJlYWRFbnYoXG4gICAgJ1BPU1RNQVJLX1NFUlZFUl9UT0tFTicsXG4gICAgJ1BPU1RNQVJLX0FQSV9UT0tFTicsXG4gICAgJ1BPU1RNQVJLX1RPS0VOJyxcbiAgICAnUE9TVE1BUktfQVBJX0tFWScsXG4gICAgJ1BPU1RNQVJLX0tFWSdcbiAgKVxuXG4gIGNvbnN0IHNtdHBIb3N0ID0gcmVhZEVudignU01UUF9IT1NUJylcbiAgY29uc3Qgc210cFVzZXIgPSByZWFkRW52KCdTTVRQX1VTRVInLCAnU01UUF9VU0VSTkFNRScpXG4gIGNvbnN0IHNtdHBQYXNzd29yZCA9IHJlYWRFbnYoJ1NNVFBfUEFTU1dPUkQnLCAnU01UUF9QQVNTJylcblxuICBjb25zdCBwb3N0bWFya0NvbmZpZ3VyZWQgPSBCb29sZWFuKHBvc3RtYXJrVG9rZW4pXG4gIGNvbnN0IHNtdHBDb25maWd1cmVkID0gQm9vbGVhbihzbXRwSG9zdCAmJiBzbXRwVXNlciAmJiBzbXRwUGFzc3dvcmQpXG5cbiAgY29uc3QgY29tcGFueURvbWFpbiA9IHJlYWRFbnYoJ0NPTVBBTllfRE9NQUlOJylcbiAgY29uc3QgZGVmYXVsdEZyb20gPSBjb21wYW55RG9tYWluID8gYHBlb3BsZUAke2NvbXBhbnlEb21haW59YCA6ICdwZW9wbGVAY3VyYWNlbC5haSdcbiAgY29uc3QgZnJvbSA9IHJlYWRFbnYoJ1BPU1RNQVJLX0ZST00nLCAnRU1BSUxfRlJPTScpIHx8IGRlZmF1bHRGcm9tXG4gIGNvbnN0IG1lc3NhZ2VTdHJlYW0gPSByZWFkRW52KCdQT1NUTUFSS19NRVNTQUdFX1NUUkVBTScsICdQT1NUTUFSS19TVFJFQU0nKSB8fCAnb3V0Ym91bmQnXG5cbiAgY29uc3Qga2luZDogRW1haWxUcmFuc3BvcnRLaW5kID0gcG9zdG1hcmtDb25maWd1cmVkID8gJ3Bvc3RtYXJrJyA6IHNtdHBDb25maWd1cmVkID8gJ3NtdHAnIDogJ25vbmUnXG5cbiAgcmV0dXJuIHsga2luZCwgcG9zdG1hcmtDb25maWd1cmVkLCBzbXRwQ29uZmlndXJlZCwgZnJvbSwgbWVzc2FnZVN0cmVhbSB9XG59XG5cbmxldCB3YXJuZWRNaXNzaW5nVHJhbnNwb3J0ID0gZmFsc2VcblxuLy8gQnVpbGQgdHJhbnNwb3J0cyBsYXppbHkgc28gbmV3IGVudiB2YWx1ZXMgYXJlIHBpY2tlZCB1cCBhZnRlciByZXN0YXJ0XG5mdW5jdGlvbiBnZXRQb3N0bWFya0NsaWVudCgpIHtcbiAgY29uc3QgdG9rZW4gPSByZWFkRW52KFxuICAgICdQT1NUTUFSS19TRVJWRVJfVE9LRU4nLFxuICAgICdQT1NUTUFSS19BUElfVE9LRU4nLFxuICAgICdQT1NUTUFSS19UT0tFTicsXG4gICAgJ1BPU1RNQVJLX0FQSV9LRVknLFxuICAgICdQT1NUTUFSS19LRVknXG4gIClcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgcmV0dXJuIG5ldyBTZXJ2ZXJDbGllbnQodG9rZW4pXG59XG5cbmZ1bmN0aW9uIGdldFNtdHBUcmFuc3BvcnRlcigpIHtcbiAgY29uc3Qgc210cEhvc3QgPSByZWFkRW52KCdTTVRQX0hPU1QnKVxuICBjb25zdCBzbXRwVXNlciA9IHJlYWRFbnYoJ1NNVFBfVVNFUicsICdTTVRQX1VTRVJOQU1FJylcbiAgY29uc3Qgc210cFBhc3N3b3JkID0gcmVhZEVudignU01UUF9QQVNTV09SRCcsICdTTVRQX1BBU1MnKVxuICBjb25zdCBoYXNTbXRwQ3JlZHMgPSBCb29sZWFuKHNtdHBIb3N0ICYmIHNtdHBVc2VyICYmIHNtdHBQYXNzd29yZClcbiAgaWYgKCFoYXNTbXRwQ3JlZHMpIHJldHVybiBudWxsXG5cbiAgY29uc3Qgc210cFBvcnQgPSBwYXJzZUludChyZWFkRW52KCdTTVRQX1BPUlQnKSB8fCAnNTg3JywgMTApXG4gIGNvbnN0IHNlY3VyZSA9IHJlYWRFbnYoJ1NNVFBfU0VDVVJFJykgPT09ICd0cnVlJyB8fCBzbXRwUG9ydCA9PT0gNDY1XG5cbiAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICBob3N0OiBzbXRwSG9zdCxcbiAgICBwb3J0OiBzbXRwUG9ydCxcbiAgICBzZWN1cmUsXG4gICAgYXV0aDoge1xuICAgICAgdXNlcjogc210cFVzZXIsXG4gICAgICBwYXNzOiBzbXRwUGFzc3dvcmQsXG4gICAgfSxcbiAgfSlcbn1cblxuaW50ZXJmYWNlIFNlbmRFbWFpbE9wdGlvbnMge1xuICB0bzogc3RyaW5nXG4gIHN1YmplY3Q6IHN0cmluZ1xuICBodG1sOiBzdHJpbmdcbiAgdGV4dD86IHN0cmluZ1xuICBhdHRhY2htZW50cz86IEFycmF5PHtcbiAgICBmaWxlbmFtZTogc3RyaW5nXG4gICAgY29udGVudD86IEJ1ZmZlciB8IHN0cmluZ1xuICAgIHBhdGg/OiBzdHJpbmdcbiAgICBjb250ZW50VHlwZT86IHN0cmluZ1xuICB9PlxufVxuXG5mdW5jdGlvbiBnZXRBcHBVcmwoKTogc3RyaW5nIHtcbiAgY29uc3QgdXJsID0gcmVhZEVudignTkVYVF9QVUJMSUNfQVBQX1VSTCcsICdORVhUQVVUSF9VUkwnKVxuICByZXR1cm4gdXJsIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVBYnNvbHV0ZVVybChyYXdVcmw6IHN0cmluZyB8IHVuZGVmaW5lZCwgYXBwVXJsOiBzdHJpbmcsIGZhbGxiYWNrUGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IGJhc2VVcmwgPSBhcHBVcmwucmVwbGFjZSgvXFwvKyQvLCAnJylcbiAgY29uc3QgZmFsbGJhY2sgPSBmYWxsYmFja1BhdGguc3RhcnRzV2l0aCgnLycpID8gYCR7YmFzZVVybH0ke2ZhbGxiYWNrUGF0aH1gIDogYCR7YmFzZVVybH0vJHtmYWxsYmFja1BhdGh9YFxuICBpZiAoIXJhd1VybCkgcmV0dXJuIGZhbGxiYWNrXG4gIGNvbnN0IHRyaW1tZWQgPSByYXdVcmwudHJpbSgpXG4gIGlmICghdHJpbW1lZCkgcmV0dXJuIGZhbGxiYWNrXG4gIGlmICgvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KHRyaW1tZWQpKSByZXR1cm4gdHJpbW1lZFxuICBpZiAodHJpbW1lZC5zdGFydHNXaXRoKCcvJykpIHJldHVybiBgJHtiYXNlVXJsfSR7dHJpbW1lZH1gXG4gIHJldHVybiBgJHtiYXNlVXJsfS8ke3RyaW1tZWR9YFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsKG9wdGlvbnM6IFNlbmRFbWFpbE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyB0bywgc3ViamVjdCwgaHRtbCwgdGV4dCwgYXR0YWNobWVudHMgfSA9IG9wdGlvbnNcbiAgY29uc3Qgc3RhdHVzID0gZ2V0RW1haWxUcmFuc3BvcnRTdGF0dXMoKVxuICBjb25zdCBwb3N0bWFya0Zyb20gPSBzdGF0dXMuZnJvbVxuICBjb25zdCBtZXNzYWdlU3RyZWFtID0gc3RhdHVzLm1lc3NhZ2VTdHJlYW1cblxuICBsZXQgbGFzdEVycm9yOiB1bmtub3duID0gbnVsbFxuXG4gIGNvbnN0IHBvc3RtYXJrQ2xpZW50ID0gZ2V0UG9zdG1hcmtDbGllbnQoKVxuXG4gIGlmIChwb3N0bWFya0NsaWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwb3N0bWFya0F0dGFjaG1lbnRzID0gYXR0YWNobWVudHNcbiAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIGF0dGFjaG1lbnRzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZmlsZS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIE5hbWU6IGZpbGUuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgICBDb250ZW50OiBCdWZmZXIuaXNCdWZmZXIoZmlsZS5jb250ZW50KVxuICAgICAgICAgICAgICAgICAgICA/IGZpbGUuY29udGVudC50b1N0cmluZygnYmFzZTY0JylcbiAgICAgICAgICAgICAgICAgICAgOiBCdWZmZXIuZnJvbShmaWxlLmNvbnRlbnQpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgICAgICAgICAgICAgIENvbnRlbnRUeXBlOiBmaWxlLmNvbnRlbnRUeXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxuICAgICAgICAgICAgICAgICAgQ29udGVudElEOiBmaWxlLmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50QnVmZmVyID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICBOYW1lOiBmaWxlLmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgQ29udGVudDogY29udGVudEJ1ZmZlci50b1N0cmluZygnYmFzZTY0JyksXG4gICAgICAgICAgICAgICAgICBDb250ZW50VHlwZTogZmlsZS5jb250ZW50VHlwZSB8fCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcbiAgICAgICAgICAgICAgICAgIENvbnRlbnRJRDogZmlsZS5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApLnRoZW4oXG4gICAgICAgICAgICAodmFsdWVzKSA9PlxuICAgICAgICAgICAgICB2YWx1ZXMuZmlsdGVyKEJvb2xlYW4pIGFzIEFycmF5PHsgTmFtZTogc3RyaW5nOyBDb250ZW50OiBzdHJpbmc7IENvbnRlbnRUeXBlOiBzdHJpbmc7IENvbnRlbnRJRDogc3RyaW5nIH0+XG4gICAgICAgICAgKVxuICAgICAgICA6IHVuZGVmaW5lZFxuXG4gICAgICBhd2FpdCBwb3N0bWFya0NsaWVudC5zZW5kRW1haWwoe1xuICAgICAgICBGcm9tOiBwb3N0bWFya0Zyb20sXG4gICAgICAgIFRvOiB0byxcbiAgICAgICAgU3ViamVjdDogc3ViamVjdCxcbiAgICAgICAgSHRtbEJvZHk6IGh0bWwsXG4gICAgICAgIFRleHRCb2R5OiB0ZXh0IHx8IGh0bWwucmVwbGFjZSgvPFtePl0qPi9nLCAnJyksXG4gICAgICAgIE1lc3NhZ2VTdHJlYW06IG1lc3NhZ2VTdHJlYW0sXG4gICAgICAgIEF0dGFjaG1lbnRzOiBwb3N0bWFya0F0dGFjaG1lbnRzLFxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1Bvc3RtYXJrIHNlbmQgZmFpbGVkLCBmYWxsaW5nIGJhY2sgdG8gU01UUCAoaWYgY29uZmlndXJlZCk6JywgZXJyb3IpXG4gICAgICBsYXN0RXJyb3IgPSBlcnJvclxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRyYW5zcG9ydGVyID0gZ2V0U210cFRyYW5zcG9ydGVyKClcblxuICBpZiAodHJhbnNwb3J0ZXIpIHtcbiAgICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgICBmcm9tOiBwb3N0bWFya0Zyb20sXG4gICAgICB0byxcbiAgICAgIHN1YmplY3QsXG4gICAgICBodG1sLFxuICAgICAgdGV4dDogdGV4dCB8fCBodG1sLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpLFxuICAgICAgYXR0YWNobWVudHMsXG4gICAgfSlcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIE5vIHRyYW5zcG9ydGVyIGFuZCBQb3N0bWFyayBmYWlsZWQ6IHN1cmZhY2UgZXJyb3IgaW5zdGVhZCBvZiBzaWxlbnQgc3VjY2Vzc1xuICBpZiAoc3RhdHVzLmtpbmQgPT09ICdub25lJyAmJiAhd2FybmVkTWlzc2luZ1RyYW5zcG9ydCkge1xuICAgIHdhcm5lZE1pc3NpbmdUcmFuc3BvcnQgPSB0cnVlXG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgICdFbWFpbCB0cmFuc3BvcnQgbm90IGNvbmZpZ3VyZWQuIFNldCBQT1NUTUFSS19TRVJWRVJfVE9LRU4gKG9yIFBPU1RNQVJLX0FQSV9UT0tFTikgb3IgU01UUF9IT1NUL1NNVFBfVVNFUi9TTVRQX1BBU1NXT1JELiBJZiB5b3UganVzdCBjaGFuZ2VkIGVudiB2YXJzLCByZXN0YXJ0IHRoZSBzZXJ2ZXIuJ1xuICAgIClcbiAgfVxuICBpZiAoc3RhdHVzLmtpbmQgPT09ICdub25lJykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdFbWFpbCBzZW5kIGZhaWxlZDogbm8gZW1haWwgdHJhbnNwb3J0IGNvbmZpZ3VyZWQgKHNldCBQT1NUTUFSS19TRVJWRVJfVE9LRU4gLyBQT1NUTUFSS19BUElfVE9LRU4gb3IgU01UUF9IT1NUL1NNVFBfVVNFUi9TTVRQX1BBU1NXT1JELCB0aGVuIHJlc3RhcnQgdGhlIHNlcnZlciknXG4gICAgKVxuICB9XG5cbiAgdGhyb3cgbGFzdEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBsYXN0RXJyb3IgOiBuZXcgRXJyb3IoJ0VtYWlsIHNlbmQgZmFpbGVkJylcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRPZmZlckVtYWlsKHBhcmFtczoge1xuICBjYW5kaWRhdGVFbWFpbDogc3RyaW5nXG4gIGNhbmRpZGF0ZU5hbWU6IHN0cmluZ1xuICBvZmZlckxpbms6IHN0cmluZ1xuICBjb21wYW55TmFtZTogc3RyaW5nXG4gIGxvZ29Vcmw/OiBzdHJpbmdcbn0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBjYW5kaWRhdGVFbWFpbCwgY2FuZGlkYXRlTmFtZSwgb2ZmZXJMaW5rLCBjb21wYW55TmFtZSwgbG9nb1VybDogcmF3TG9nb1VybCB9ID0gcGFyYW1zXG4gIGNvbnN0IGFwcFVybCA9IGdldEFwcFVybCgpXG4gIGNvbnN0IGxvZ29VcmwgPSByZXNvbHZlQWJzb2x1dGVVcmwocmF3TG9nb1VybCwgYXBwVXJsLCAnL2xvZ28ucG5nJylcbiAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuXG4gIGF3YWl0IHNlbmRFbWFpbCh7XG4gICAgdG86IGNhbmRpZGF0ZUVtYWlsLFxuICAgIHN1YmplY3Q6IGBZb3VyIG9mZmVyIGZyb20gJHtjb21wYW55TmFtZX1gLFxuICAgIGh0bWw6IGBcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxuICAgICAgPGh0bWw+XG4gICAgICAgIDxoZWFkPlxuICAgICAgICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiIC8+XG4gICAgICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIiAvPlxuXHQgICAgICAgIDwvaGVhZD5cblx0ICAgICAgICA8Ym9keSBzdHlsZT1cIm1hcmdpbjowOyBwYWRkaW5nOjA7IGJhY2tncm91bmQtY29sb3I6I2VlZjJmNzsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmOyBjb2xvcjojMGYxNzJhO1wiPlxuXHQgICAgICAgICAgPHRhYmxlIHJvbGU9XCJwcmVzZW50YXRpb25cIiB3aWR0aD1cIjEwMCVcIiBjZWxsc3BhY2luZz1cIjBcIiBjZWxscGFkZGluZz1cIjBcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2VlZjJmNztcIj5cbiAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0ZCBhbGlnbj1cImNlbnRlclwiIHN0eWxlPVwicGFkZGluZzozMnB4IDE2cHg7XCI+XG4gICAgICAgICAgICAgICAgICA8dGFibGUgcm9sZT1cInByZXNlbnRhdGlvblwiIHdpZHRoPVwiMTAwJVwiIGNlbGxzcGFjaW5nPVwiMFwiIGNlbGxwYWRkaW5nPVwiMFwiIHN0eWxlPVwibWF4LXdpZHRoOjYwMHB4OyBiYWNrZ3JvdW5kOiNmZmZmZmY7IGJvcmRlci1yYWRpdXM6MTZweDsgYm9yZGVyOjFweCBzb2xpZCAjZTJlOGYwOyBvdmVyZmxvdzpoaWRkZW47XCI+XG4gICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOjI0cHggMzJweCAxMnB4OyB0ZXh0LWFsaWduOmNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwiJHtsb2dvVXJsfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIiR7Y29tcGFueU5hbWV9IGxvZ29cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjEyMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwiZGlzcGxheTpibG9jazsgbWFyZ2luOjAgYXV0bzsgaGVpZ2h0OmF1dG87XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6OHB4IDMycHggMzJweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBzdHlsZT1cIm1hcmdpbjowIDAgMTZweDsgZm9udC1zaXplOjI0cHg7IGxpbmUtaGVpZ2h0OjEuMzsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjojMGYxNzJhO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBDb25ncmF0dWxhdGlvbnMsICR7Y2FuZGlkYXRlTmFtZX0hXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46MCAwIDEycHg7IGZvbnQtc2l6ZToxNnB4OyBsaW5lLWhlaWdodDoxLjY7IGNvbG9yOiMzMzQxNTU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFdlJiMzOTtyZSBleGNpdGVkIHRvIGV4dGVuZCBhbiBvZmZlciB0byBqb2luICR7Y29tcGFueU5hbWV9LlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46MCAwIDI0cHg7IGZvbnQtc2l6ZToxNnB4OyBsaW5lLWhlaWdodDoxLjY7IGNvbG9yOiMzMzQxNTU7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFBsZWFzZSByZXZpZXcgYW5kIHNpZ24geW91ciBvZmZlciBsZXR0ZXIgYnkgY2xpY2tpbmcgdGhlIGJ1dHRvbiBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIke29mZmVyTGlua31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiMxZDRlZDg7IGNvbG9yOiNmZmZmZmY7IHRleHQtZGVjb3JhdGlvbjpub25lOyBwYWRkaW5nOjEycHggMjBweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXdlaWdodDo2MDA7IGZvbnQtc2l6ZToxNXB4O1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+UmV2aWV3ICZhbXA7IFNpZ24gT2ZmZXI8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjoyNHB4IDAgMDsgZm9udC1zaXplOjE0cHg7IGxpbmUtaGVpZ2h0OjEuNjsgY29sb3I6IzY0NzQ4YjsgdGV4dC1hbGlnbjpjZW50ZXI7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIElmIHlvdSBoYXZlIGFueSBpc3N1ZXMsIHBsZWFzZSByZWFjaCBvdXQgdG8gdGhlIFBlb3BsZSB0ZWFtLlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46MTZweCAwIDA7IGZvbnQtc2l6ZToxMnB4OyBjb2xvcjojOTRhM2I4OyB0ZXh0LWFsaWduOmNlbnRlcjtcIj5cbiAgICAgICAgICAgICAgICAgICAgJmNvcHk7ICR7eWVhcn0gJHtjb21wYW55TmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICA8L3RyPlxuXHQgICAgICAgICAgPC90YWJsZT5cblx0ICAgICAgICA8L2JvZHk+XG5cdCAgICAgIDwvaHRtbD5cblx0ICAgIGAsXG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kT25ib2FyZGluZ0VtYWlsKHBhcmFtczoge1xuICBlbXBsb3llZUVtYWlsOiBzdHJpbmdcbiAgZW1wbG95ZWVOYW1lOiBzdHJpbmdcbiAgb25ib2FyZGluZ0xpbms6IHN0cmluZ1xuICBzdGFydERhdGU6IERhdGVcbiAgbWFuYWdlck5hbWU/OiBzdHJpbmdcbiAgY29tcGFueU5hbWU6IHN0cmluZ1xufSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IGVtcGxveWVlRW1haWwsIGVtcGxveWVlTmFtZSwgb25ib2FyZGluZ0xpbmssIHN0YXJ0RGF0ZSwgbWFuYWdlck5hbWUsIGNvbXBhbnlOYW1lIH0gPSBwYXJhbXNcblxuICBhd2FpdCBzZW5kRW1haWwoe1xuICAgIHRvOiBlbXBsb3llZUVtYWlsLFxuICAgIHN1YmplY3Q6IGBXZWxjb21lIHRvICR7Y29tcGFueU5hbWV9IC0gQ29tcGxldGUgeW91ciBvbmJvYXJkaW5nYCxcbiAgICBodG1sOiBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgICA8aGVhZD5cbiAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMzsgfVxuICAgICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XG4gICAgICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzEwYjk4MSAwJSwgIzA1OTY2OSAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHggOHB4IDAgMDsgfVxuICAgICAgICAgICAgLmNvbnRlbnQgeyBiYWNrZ3JvdW5kOiAjZjlmYWZiOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAwIDAgOHB4IDhweDsgfVxuICAgICAgICAgICAgLmJ1dHRvbiB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgYmFja2dyb3VuZDogIzEwYjk4MTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMnB4IDI0cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tdG9wOiAyMHB4OyB9XG4gICAgICAgICAgICAuaW5mby1ib3ggeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW46IDE1cHggMDsgfVxuICAgICAgICAgICAgLmZvb3RlciB7IG1hcmdpbi10b3A6IDIwcHg7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwibWFyZ2luOiAwO1wiPldlbGNvbWUgYWJvYXJkLCAke2VtcGxveWVlTmFtZX0hPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgPHA+V2UncmUgdGhyaWxsZWQgdG8gaGF2ZSB5b3Ugam9pbmluZyAke2NvbXBhbnlOYW1lfSE8L3A+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mby1ib3hcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPlN0YXJ0IERhdGU6PC9zdHJvbmc+ICR7c3RhcnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdsb25nJywgeWVhcjogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCBkYXk6ICdudW1lcmljJyB9KX1cbiAgICAgICAgICAgICAgICAke21hbmFnZXJOYW1lID8gYDxicj48c3Ryb25nPk1hbmFnZXI6PC9zdHJvbmc+ICR7bWFuYWdlck5hbWV9YCA6ICcnfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxwPlRvIGNvbXBsZXRlIHlvdXIgb25ib2FyZGluZywgcGxlYXNlIGZpbGwgb3V0IHlvdXIgcGVyc29uYWwgZGV0YWlsczo8L3A+XG4gICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8bGk+SG9tZSBhZGRyZXNzPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+UGhvbmUgbnVtYmVyPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+RW1lcmdlbmN5IGNvbnRhY3Q8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT5CYW5rIGRldGFpbHM8L2xpPlxuICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7b25ib2FyZGluZ0xpbmt9XCIgY2xhc3M9XCJidXR0b25cIj5Db21wbGV0ZSBPbmJvYXJkaW5nPC9hPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmb290ZXJcIj5cbiAgICAgICAgICAgICAgICBUaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gNyBkYXlzLiBJZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zLCBwbGVhc2UgY29udGFjdCBIUi5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvYm9keT5cbiAgICAgIDwvaHRtbD5cbiAgICBgLFxuICB9KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZEFjY291bnRDcmVkZW50aWFsc0VtYWlsKHBhcmFtczoge1xuICBlbXBsb3llZUVtYWlsOiBzdHJpbmdcbiAgZW1wbG95ZWVOYW1lOiBzdHJpbmdcbiAgd29ya0VtYWlsOiBzdHJpbmdcbiAgdGVtcG9yYXJ5UGFzc3dvcmQ6IHN0cmluZ1xuICBjb21wYW55TmFtZTogc3RyaW5nXG59KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgZW1wbG95ZWVFbWFpbCwgZW1wbG95ZWVOYW1lLCB3b3JrRW1haWwsIHRlbXBvcmFyeVBhc3N3b3JkLCBjb21wYW55TmFtZSB9ID0gcGFyYW1zXG5cbiAgYXdhaXQgc2VuZEVtYWlsKHtcbiAgICB0bzogZW1wbG95ZWVFbWFpbCxcbiAgICBzdWJqZWN0OiBgWW91ciAke2NvbXBhbnlOYW1lfSBhY2NvdW50IGNyZWRlbnRpYWxzYCxcbiAgICBodG1sOiBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgICA8aGVhZD5cbiAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMzsgfVxuICAgICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XG4gICAgICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzNiODJmNiAwJSwgIzFkNGVkOCAxMDAlKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHggOHB4IDAgMDsgfVxuICAgICAgICAgICAgLmNvbnRlbnQgeyBiYWNrZ3JvdW5kOiAjZjlmYWZiOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAwIDAgOHB4IDhweDsgfVxuICAgICAgICAgICAgLmNyZWRlbnRpYWxzIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luOiAxNXB4IDA7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IH1cbiAgICAgICAgICAgIC53YXJuaW5nIHsgYmFja2dyb3VuZDogI2ZlZjNjNzsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjU5ZTBiOyBwYWRkaW5nOiAxMnB4OyBtYXJnaW46IDE1cHggMDsgfVxuICAgICAgICAgICAgLmZvb3RlciB7IG1hcmdpbi10b3A6IDIwcHg7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgxIHN0eWxlPVwibWFyZ2luOiAwO1wiPllvdXIgQWNjb3VudCBpcyBSZWFkeSE8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgICA8cD5IaSAke2VtcGxveWVlTmFtZX0sPC9wPlxuICAgICAgICAgICAgICA8cD5Zb3VyICR7Y29tcGFueU5hbWV9IEdvb2dsZSBXb3Jrc3BhY2UgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkOjwvcD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjcmVkZW50aWFsc1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+RW1haWw6PC9zdHJvbmc+ICR7d29ya0VtYWlsfTxicj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPlRlbXBvcmFyeSBQYXNzd29yZDo8L3N0cm9uZz4gJHt0ZW1wb3JhcnlQYXNzd29yZH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2FybmluZ1wiPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+SW1wb3J0YW50Ojwvc3Ryb25nPiBZb3Ugd2lsbCBiZSByZXF1aXJlZCB0byBjaGFuZ2UgeW91ciBwYXNzd29yZCBvbiBmaXJzdCBsb2dpbi5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8cD5Zb3UgY2FuIHNpZ24gaW4gYXQgPGEgaHJlZj1cImh0dHBzOi8vd29ya3NwYWNlLmdvb2dsZS5jb21cIj53b3Jrc3BhY2UuZ29vZ2xlLmNvbTwvYT48L3A+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8cCBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIElmIHlvdSBkaWRuJ3QgZXhwZWN0IHRoaXMgZW1haWwgb3IgaGF2ZSBxdWVzdGlvbnMsIHBsZWFzZSBjb250YWN0IElULlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGAsXG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kU2lnbmVkT2ZmZXJFbWFpbChwYXJhbXM6IHtcbiAgdG86IHN0cmluZ1xuICBjYW5kaWRhdGVOYW1lOiBzdHJpbmdcbiAgY29tcGFueU5hbWU6IHN0cmluZ1xuICBzaWduZWRIdG1sOiBzdHJpbmdcbiAgc2lnbmVkUGRmPzogQnVmZmVyXG4gIHNpZ25lZEZpbGVOYW1lPzogc3RyaW5nXG59KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgdG8sIGNhbmRpZGF0ZU5hbWUsIGNvbXBhbnlOYW1lLCBzaWduZWRIdG1sLCBzaWduZWRQZGYsIHNpZ25lZEZpbGVOYW1lID0gc2lnbmVkUGRmID8gJ3NpZ25lZC1vZmZlci5wZGYnIDogJ3NpZ25lZC1vZmZlci5odG1sJyB9ID0gcGFyYW1zXG5cbiAgYXdhaXQgc2VuZEVtYWlsKHtcbiAgICB0byxcbiAgICBzdWJqZWN0OiBgU2lnbmVkIG9mZmVyIGNvcHkgLSAke2NvbXBhbnlOYW1lfWAsXG4gICAgaHRtbDogYFxuICAgICAgPCFET0NUWVBFIGh0bWw+XG4gICAgICA8aHRtbD5cbiAgICAgICAgPGJvZHkgc3R5bGU9XCJmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzO1wiPlxuICAgICAgICAgIDxoMiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDhweDtcIj5TaWduZWQgb2ZmZXI8L2gyPlxuICAgICAgICAgIDxwPkhpICR7Y2FuZGlkYXRlTmFtZX0sPC9wPlxuICAgICAgICAgIDxwPkF0dGFjaGVkIGlzIGEgY29weSBvZiB5b3VyIHNpZ25lZCBvZmZlciB3aXRoICR7Y29tcGFueU5hbWV9LjwvcD5cbiAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbi10b3A6IDE2cHg7XCI+VGhhbmsgeW91ITwvcD5cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGAsXG4gICAgYXR0YWNobWVudHM6IFtcbiAgICAgIHtcbiAgICAgICAgZmlsZW5hbWU6IHNpZ25lZEZpbGVOYW1lLFxuICAgICAgICBjb250ZW50OiBzaWduZWRQZGYgPyBzaWduZWRQZGYgOiBCdWZmZXIuZnJvbShzaWduZWRIdG1sKSxcbiAgICAgICAgY29udGVudFR5cGU6IHNpZ25lZFBkZiA/ICdhcHBsaWNhdGlvbi9wZGYnIDogJ3RleHQvaHRtbCcsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kVGVhbUludml0ZUVtYWlsKHBhcmFtczoge1xuICB0bzogc3RyaW5nXG4gIGludml0ZWRCeU5hbWU/OiBzdHJpbmcgfCBudWxsXG4gIHJvbGU6IHN0cmluZ1xuICBhY2NlcHRVcmw6IHN0cmluZ1xufSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHRvLCBpbnZpdGVkQnlOYW1lLCByb2xlLCBhY2NlcHRVcmwgfSA9IHBhcmFtc1xuXG4gIGF3YWl0IHNlbmRFbWFpbCh7XG4gICAgdG8sXG4gICAgc3ViamVjdDogYFlvdeKAmXZlIGJlZW4gaW52aXRlZCB0byBDdXJhY2VsIFBlb3BsZWAsXG4gICAgaHRtbDogYFxuICAgICAgPCFET0NUWVBFIGh0bWw+XG4gICAgICA8aHRtbD5cbiAgICAgICAgPGhlYWQ+XG4gICAgICAgICAgPHN0eWxlPlxuICAgICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICdTZWdvZSBVSScsIFJvYm90bywgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6ICMzMzM7IH1cbiAgICAgICAgICAgIC5jb250YWluZXIgeyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjBweDsgfVxuICAgICAgICAgICAgLmNvbnRlbnQgeyBiYWNrZ3JvdW5kOiAjZjlmYWZiOyBwYWRkaW5nOiAyNHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IH1cbiAgICAgICAgICAgIC5idXR0b24geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGJhY2tncm91bmQ6ICM0ZjQ2ZTU7IGNvbG9yOiAjZmZmZmZmOyBwYWRkaW5nOiAxMnB4IDE4cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tdG9wOiAxNnB4OyB9XG4gICAgICAgICAgICAubWV0YSB7IGNvbG9yOiAjNmI3MjgwOyBmb250LXNpemU6IDEycHg7IG1hcmdpbi10b3A6IDE2cHg7IH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgIDxoMiBzdHlsZT1cIm1hcmdpbi10b3A6IDA7XCI+WW914oCZdmUgYmVlbiBpbnZpdGVkPC9oMj5cbiAgICAgICAgICAgICAgPHA+JHtpbnZpdGVkQnlOYW1lID8gYCR7aW52aXRlZEJ5TmFtZX0gaGFzYCA6ICdZb3UgaGF2ZSd9IGludml0ZWQgeW91IHRvIEN1cmFjZWwgUGVvcGxlLjwvcD5cbiAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Sb2xlOjwvc3Ryb25nPiAke3JvbGV9PC9wPlxuICAgICAgICAgICAgICA8YSBjbGFzcz1cImJ1dHRvblwiIGhyZWY9XCIke2FjY2VwdFVybH1cIj5BY2NlcHQgaW52aXRlPC9hPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cIm1ldGFcIj5JZiB5b3UgZGlkbuKAmXQgZXhwZWN0IHRoaXMgaW52aXRlLCB5b3UgY2FuIGlnbm9yZSB0aGlzIGVtYWlsLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2JvZHk+XG4gICAgICA8L2h0bWw+XG4gICAgYCxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJmcyIsIm5vZGVtYWlsZXIiLCJTZXJ2ZXJDbGllbnQiLCJub3JtYWxpemVFbnZWYWx1ZSIsInZhbHVlIiwidHJpbW1lZCIsInRyaW0iLCJyZXBsYWNlIiwicmVhZEVudiIsImtleXMiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiZ2V0RW1haWxUcmFuc3BvcnRTdGF0dXMiLCJwb3N0bWFya1Rva2VuIiwic210cEhvc3QiLCJzbXRwVXNlciIsInNtdHBQYXNzd29yZCIsInBvc3RtYXJrQ29uZmlndXJlZCIsIkJvb2xlYW4iLCJzbXRwQ29uZmlndXJlZCIsImNvbXBhbnlEb21haW4iLCJkZWZhdWx0RnJvbSIsImZyb20iLCJtZXNzYWdlU3RyZWFtIiwia2luZCIsIndhcm5lZE1pc3NpbmdUcmFuc3BvcnQiLCJnZXRQb3N0bWFya0NsaWVudCIsInRva2VuIiwiZ2V0U210cFRyYW5zcG9ydGVyIiwiaGFzU210cENyZWRzIiwic210cFBvcnQiLCJwYXJzZUludCIsInNlY3VyZSIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwb3J0IiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiZ2V0QXBwVXJsIiwidXJsIiwicmVzb2x2ZUFic29sdXRlVXJsIiwicmF3VXJsIiwiYXBwVXJsIiwiZmFsbGJhY2tQYXRoIiwiYmFzZVVybCIsImZhbGxiYWNrIiwic3RhcnRzV2l0aCIsInRlc3QiLCJzZW5kRW1haWwiLCJvcHRpb25zIiwidG8iLCJzdWJqZWN0IiwiaHRtbCIsInRleHQiLCJhdHRhY2htZW50cyIsInN0YXR1cyIsInBvc3RtYXJrRnJvbSIsImxhc3RFcnJvciIsInBvc3RtYXJrQ2xpZW50IiwicG9zdG1hcmtBdHRhY2htZW50cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmaWxlIiwiY29udGVudCIsIk5hbWUiLCJmaWxlbmFtZSIsIkNvbnRlbnQiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiQ29udGVudFR5cGUiLCJjb250ZW50VHlwZSIsIkNvbnRlbnRJRCIsInBhdGgiLCJjb250ZW50QnVmZmVyIiwicmVhZEZpbGUiLCJ0aGVuIiwidmFsdWVzIiwiZmlsdGVyIiwidW5kZWZpbmVkIiwiRnJvbSIsIlRvIiwiU3ViamVjdCIsIkh0bWxCb2R5IiwiVGV4dEJvZHkiLCJNZXNzYWdlU3RyZWFtIiwiQXR0YWNobWVudHMiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwidHJhbnNwb3J0ZXIiLCJzZW5kTWFpbCIsIkVycm9yIiwic2VuZE9mZmVyRW1haWwiLCJwYXJhbXMiLCJjYW5kaWRhdGVFbWFpbCIsImNhbmRpZGF0ZU5hbWUiLCJvZmZlckxpbmsiLCJjb21wYW55TmFtZSIsImxvZ29VcmwiLCJyYXdMb2dvVXJsIiwieWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInNlbmRPbmJvYXJkaW5nRW1haWwiLCJlbXBsb3llZUVtYWlsIiwiZW1wbG95ZWVOYW1lIiwib25ib2FyZGluZ0xpbmsiLCJzdGFydERhdGUiLCJtYW5hZ2VyTmFtZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIndlZWtkYXkiLCJtb250aCIsImRheSIsInNlbmRBY2NvdW50Q3JlZGVudGlhbHNFbWFpbCIsIndvcmtFbWFpbCIsInRlbXBvcmFyeVBhc3N3b3JkIiwic2VuZFNpZ25lZE9mZmVyRW1haWwiLCJzaWduZWRIdG1sIiwic2lnbmVkUGRmIiwic2lnbmVkRmlsZU5hbWUiLCJzZW5kVGVhbUludml0ZUVtYWlsIiwiaW52aXRlZEJ5TmFtZSIsInJvbGUiLCJhY2NlcHRVcmwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/encryption.ts":
/*!*******************************!*\
  !*** ./src/lib/encryption.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   decryptJson: () => (/* binding */ decryptJson),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   encryptJson: () => (/* binding */ encryptJson)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nconst ALGORITHM = \"aes-256-gcm\";\nconst IV_LENGTH = 16;\nconst AUTH_TAG_LENGTH = 16;\nfunction deriveDevKey() {\n    const seed = process.env.NEXTAUTH_SECRET || \"dev-insecure-key\";\n    console.warn(\"ENCRYPTION_KEY is not set; using a derived development key. Set ENCRYPTION_KEY to persist encrypted secrets safely.\");\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(`dev:${seed}`).digest();\n}\nfunction getKey() {\n    const key = process.env.ENCRYPTION_KEY;\n    if (!key) {\n        if (false) {}\n        // Development fallback:\n        // Derive a stable key from NEXTAUTH_SECRET (or a constant) so local dev can function\n        // without extra setup. This is not intended for production.\n        return deriveDevKey();\n    }\n    // If the key is hex-encoded, convert it\n    if (key.length === 64) {\n        return Buffer.from(key, \"hex\");\n    }\n    // Otherwise, hash it to get 32 bytes\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash(\"sha256\").update(key).digest();\n}\nfunction encrypt(text) {\n    const key = getKey();\n    const iv = crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(IV_LENGTH);\n    const cipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createCipheriv(ALGORITHM, key, iv);\n    let encrypted = cipher.update(text, \"utf8\", \"hex\");\n    encrypted += cipher.final(\"hex\");\n    const authTag = cipher.getAuthTag();\n    // Format: iv:authTag:encryptedData\n    return `${iv.toString(\"hex\")}:${authTag.toString(\"hex\")}:${encrypted}`;\n}\nfunction decryptWithKey(encryptedText, key) {\n    const [ivHex, authTagHex, encrypted] = encryptedText.split(\":\");\n    if (!ivHex || !authTagHex || !encrypted) {\n        throw new Error(\"Invalid encrypted text format\");\n    }\n    const iv = Buffer.from(ivHex, \"hex\");\n    const authTag = Buffer.from(authTagHex, \"hex\");\n    const decipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createDecipheriv(ALGORITHM, key, iv);\n    decipher.setAuthTag(authTag);\n    let decrypted = decipher.update(encrypted, \"hex\", \"utf8\");\n    decrypted += decipher.final(\"utf8\");\n    return decrypted;\n}\nfunction decrypt(encryptedText) {\n    const key = getKey();\n    try {\n        return decryptWithKey(encryptedText, key);\n    } catch (e) {\n        // Backward-compat for local dev: if secrets were encrypted before ENCRYPTION_KEY existed,\n        // they used the derived dev key. Try it as a fallback.\n        if ( true && process.env.ENCRYPTION_KEY) {\n            return decryptWithKey(encryptedText, deriveDevKey());\n        }\n        throw e;\n    }\n}\nfunction encryptJson(data) {\n    return encrypt(JSON.stringify(data));\n}\nfunction decryptJson(encryptedText) {\n    return JSON.parse(decrypt(encryptedText));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2VuY3J5cHRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJCO0FBRTNCLE1BQU1DLFlBQVk7QUFDbEIsTUFBTUMsWUFBWTtBQUNsQixNQUFNQyxrQkFBa0I7QUFFeEIsU0FBU0M7SUFDUCxNQUFNQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNDLGVBQWUsSUFBSTtJQUM1Q0MsUUFBUUMsSUFBSSxDQUNWO0lBRUYsT0FBT1Ysd0RBQWlCLENBQUMsVUFBVVksTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFUCxLQUFLLENBQUMsRUFBRVEsTUFBTTtBQUNqRTtBQUVBLFNBQVNDO0lBQ1AsTUFBTUMsTUFBTVQsUUFBUUMsR0FBRyxDQUFDUyxjQUFjO0lBQ3RDLElBQUksQ0FBQ0QsS0FBSztRQUNSLElBQUlULEtBQXlCLEVBQWMsRUFFMUM7UUFFRCx3QkFBd0I7UUFDeEIscUZBQXFGO1FBQ3JGLDREQUE0RDtRQUM1RCxPQUFPRjtJQUNUO0lBQ0Esd0NBQXdDO0lBQ3hDLElBQUlXLElBQUlHLE1BQU0sS0FBSyxJQUFJO1FBQ3JCLE9BQU9DLE9BQU9DLElBQUksQ0FBQ0wsS0FBSztJQUMxQjtJQUNBLHFDQUFxQztJQUNyQyxPQUFPZix3REFBaUIsQ0FBQyxVQUFVWSxNQUFNLENBQUNHLEtBQUtGLE1BQU07QUFDdkQ7QUFFTyxTQUFTUSxRQUFRQyxJQUFZO0lBQ2xDLE1BQU1QLE1BQU1EO0lBQ1osTUFBTVMsS0FBS3ZCLHlEQUFrQixDQUFDRTtJQUM5QixNQUFNdUIsU0FBU3pCLDREQUFxQixDQUFDQyxXQUFXYyxLQUFLUTtJQUVyRCxJQUFJSSxZQUFZRixPQUFPYixNQUFNLENBQUNVLE1BQU0sUUFBUTtJQUM1Q0ssYUFBYUYsT0FBT0csS0FBSyxDQUFDO0lBRTFCLE1BQU1DLFVBQVVKLE9BQU9LLFVBQVU7SUFFakMsbUNBQW1DO0lBQ25DLE9BQU8sQ0FBQyxFQUFFUCxHQUFHUSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUVGLFFBQVFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRUosVUFBVSxDQUFDO0FBQ3hFO0FBRUEsU0FBU0ssZUFBZUMsYUFBcUIsRUFBRWxCLEdBQVc7SUFDeEQsTUFBTSxDQUFDbUIsT0FBT0MsWUFBWVIsVUFBVSxHQUFHTSxjQUFjRyxLQUFLLENBQUM7SUFFM0QsSUFBSSxDQUFDRixTQUFTLENBQUNDLGNBQWMsQ0FBQ1IsV0FBVztRQUN2QyxNQUFNLElBQUlWLE1BQU07SUFDbEI7SUFFQSxNQUFNTSxLQUFLSixPQUFPQyxJQUFJLENBQUNjLE9BQU87SUFDOUIsTUFBTUwsVUFBVVYsT0FBT0MsSUFBSSxDQUFDZSxZQUFZO0lBRXhDLE1BQU1FLFdBQVdyQyw4REFBdUIsQ0FBQ0MsV0FBV2MsS0FBS1E7SUFDekRjLFNBQVNFLFVBQVUsQ0FBQ1Y7SUFFcEIsSUFBSVcsWUFBWUgsU0FBU3pCLE1BQU0sQ0FBQ2UsV0FBVyxPQUFPO0lBQ2xEYSxhQUFhSCxTQUFTVCxLQUFLLENBQUM7SUFFNUIsT0FBT1k7QUFDVDtBQUVPLFNBQVNDLFFBQVFSLGFBQXFCO0lBQzNDLE1BQU1sQixNQUFNRDtJQUVaLElBQUk7UUFDRixPQUFPa0IsZUFBZUMsZUFBZWxCO0lBQ3ZDLEVBQUUsT0FBTzJCLEdBQUc7UUFDViwwRkFBMEY7UUFDMUYsdURBQXVEO1FBQ3ZELElBQUlwQyxLQUF5QixJQUFnQkEsUUFBUUMsR0FBRyxDQUFDUyxjQUFjLEVBQUU7WUFDdkUsT0FBT2dCLGVBQWVDLGVBQWU3QjtRQUN2QztRQUNBLE1BQU1zQztJQUNSO0FBQ0Y7QUFFTyxTQUFTQyxZQUFlQyxJQUFPO0lBQ3BDLE9BQU92QixRQUFRd0IsS0FBS0MsU0FBUyxDQUFDRjtBQUNoQztBQUVPLFNBQVNHLFlBQWVkLGFBQXFCO0lBQ2xELE9BQU9ZLEtBQUtHLEtBQUssQ0FBQ1AsUUFBUVI7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvZW5jcnlwdGlvbi50cz80OTFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xuXG5jb25zdCBBTEdPUklUSE0gPSAnYWVzLTI1Ni1nY20nXG5jb25zdCBJVl9MRU5HVEggPSAxNlxuY29uc3QgQVVUSF9UQUdfTEVOR1RIID0gMTZcblxuZnVuY3Rpb24gZGVyaXZlRGV2S2V5KCk6IEJ1ZmZlciB7XG4gIGNvbnN0IHNlZWQgPSBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfHwgJ2Rldi1pbnNlY3VyZS1rZXknXG4gIGNvbnNvbGUud2FybihcbiAgICAnRU5DUllQVElPTl9LRVkgaXMgbm90IHNldDsgdXNpbmcgYSBkZXJpdmVkIGRldmVsb3BtZW50IGtleS4gU2V0IEVOQ1JZUFRJT05fS0VZIHRvIHBlcnNpc3QgZW5jcnlwdGVkIHNlY3JldHMgc2FmZWx5LidcbiAgKVxuICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShgZGV2OiR7c2VlZH1gKS5kaWdlc3QoKVxufVxuXG5mdW5jdGlvbiBnZXRLZXkoKTogQnVmZmVyIHtcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuRU5DUllQVElPTl9LRVlcbiAgaWYgKCFrZXkpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFTkNSWVBUSU9OX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBub3Qgc2V0JylcbiAgICB9XG5cbiAgICAvLyBEZXZlbG9wbWVudCBmYWxsYmFjazpcbiAgICAvLyBEZXJpdmUgYSBzdGFibGUga2V5IGZyb20gTkVYVEFVVEhfU0VDUkVUIChvciBhIGNvbnN0YW50KSBzbyBsb2NhbCBkZXYgY2FuIGZ1bmN0aW9uXG4gICAgLy8gd2l0aG91dCBleHRyYSBzZXR1cC4gVGhpcyBpcyBub3QgaW50ZW5kZWQgZm9yIHByb2R1Y3Rpb24uXG4gICAgcmV0dXJuIGRlcml2ZURldktleSgpXG4gIH1cbiAgLy8gSWYgdGhlIGtleSBpcyBoZXgtZW5jb2RlZCwgY29udmVydCBpdFxuICBpZiAoa2V5Lmxlbmd0aCA9PT0gNjQpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oa2V5LCAnaGV4JylcbiAgfVxuICAvLyBPdGhlcndpc2UsIGhhc2ggaXQgdG8gZ2V0IDMyIGJ5dGVzXG4gIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGtleSkuZGlnZXN0KClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KClcbiAgY29uc3QgaXYgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoSVZfTEVOR1RIKVxuICBjb25zdCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoQUxHT1JJVEhNLCBrZXksIGl2KVxuICBcbiAgbGV0IGVuY3J5cHRlZCA9IGNpcGhlci51cGRhdGUodGV4dCwgJ3V0ZjgnLCAnaGV4JylcbiAgZW5jcnlwdGVkICs9IGNpcGhlci5maW5hbCgnaGV4JylcbiAgXG4gIGNvbnN0IGF1dGhUYWcgPSBjaXBoZXIuZ2V0QXV0aFRhZygpXG4gIFxuICAvLyBGb3JtYXQ6IGl2OmF1dGhUYWc6ZW5jcnlwdGVkRGF0YVxuICByZXR1cm4gYCR7aXYudG9TdHJpbmcoJ2hleCcpfToke2F1dGhUYWcudG9TdHJpbmcoJ2hleCcpfToke2VuY3J5cHRlZH1gXG59XG5cbmZ1bmN0aW9uIGRlY3J5cHRXaXRoS2V5KGVuY3J5cHRlZFRleHQ6IHN0cmluZywga2V5OiBCdWZmZXIpOiBzdHJpbmcge1xuICBjb25zdCBbaXZIZXgsIGF1dGhUYWdIZXgsIGVuY3J5cHRlZF0gPSBlbmNyeXB0ZWRUZXh0LnNwbGl0KCc6JylcblxuICBpZiAoIWl2SGV4IHx8ICFhdXRoVGFnSGV4IHx8ICFlbmNyeXB0ZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW5jcnlwdGVkIHRleHQgZm9ybWF0JylcbiAgfVxuXG4gIGNvbnN0IGl2ID0gQnVmZmVyLmZyb20oaXZIZXgsICdoZXgnKVxuICBjb25zdCBhdXRoVGFnID0gQnVmZmVyLmZyb20oYXV0aFRhZ0hleCwgJ2hleCcpXG5cbiAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdihBTEdPUklUSE0sIGtleSwgaXYpXG4gIGRlY2lwaGVyLnNldEF1dGhUYWcoYXV0aFRhZylcblxuICBsZXQgZGVjcnlwdGVkID0gZGVjaXBoZXIudXBkYXRlKGVuY3J5cHRlZCwgJ2hleCcsICd1dGY4JylcbiAgZGVjcnlwdGVkICs9IGRlY2lwaGVyLmZpbmFsKCd1dGY4JylcblxuICByZXR1cm4gZGVjcnlwdGVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0KGVuY3J5cHRlZFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGtleSA9IGdldEtleSgpXG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjcnlwdFdpdGhLZXkoZW5jcnlwdGVkVGV4dCwga2V5KVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gQmFja3dhcmQtY29tcGF0IGZvciBsb2NhbCBkZXY6IGlmIHNlY3JldHMgd2VyZSBlbmNyeXB0ZWQgYmVmb3JlIEVOQ1JZUFRJT05fS0VZIGV4aXN0ZWQsXG4gICAgLy8gdGhleSB1c2VkIHRoZSBkZXJpdmVkIGRldiBrZXkuIFRyeSBpdCBhcyBhIGZhbGxiYWNrLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb2Nlc3MuZW52LkVOQ1JZUFRJT05fS0VZKSB7XG4gICAgICByZXR1cm4gZGVjcnlwdFdpdGhLZXkoZW5jcnlwdGVkVGV4dCwgZGVyaXZlRGV2S2V5KCkpXG4gICAgfVxuICAgIHRocm93IGVcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdEpzb248VD4oZGF0YTogVCk6IHN0cmluZyB7XG4gIHJldHVybiBlbmNyeXB0KEpTT04uc3RyaW5naWZ5KGRhdGEpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVjcnlwdEpzb248VD4oZW5jcnlwdGVkVGV4dDogc3RyaW5nKTogVCB7XG4gIHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHQoZW5jcnlwdGVkVGV4dCkpXG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwiQUxHT1JJVEhNIiwiSVZfTEVOR1RIIiwiQVVUSF9UQUdfTEVOR1RIIiwiZGVyaXZlRGV2S2V5Iiwic2VlZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9TRUNSRVQiLCJjb25zb2xlIiwid2FybiIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiLCJnZXRLZXkiLCJrZXkiLCJFTkNSWVBUSU9OX0tFWSIsIkVycm9yIiwibGVuZ3RoIiwiQnVmZmVyIiwiZnJvbSIsImVuY3J5cHQiLCJ0ZXh0IiwiaXYiLCJyYW5kb21CeXRlcyIsImNpcGhlciIsImNyZWF0ZUNpcGhlcml2IiwiZW5jcnlwdGVkIiwiZmluYWwiLCJhdXRoVGFnIiwiZ2V0QXV0aFRhZyIsInRvU3RyaW5nIiwiZGVjcnlwdFdpdGhLZXkiLCJlbmNyeXB0ZWRUZXh0IiwiaXZIZXgiLCJhdXRoVGFnSGV4Iiwic3BsaXQiLCJkZWNpcGhlciIsImNyZWF0ZURlY2lwaGVyaXYiLCJzZXRBdXRoVGFnIiwiZGVjcnlwdGVkIiwiZGVjcnlwdCIsImUiLCJlbmNyeXB0SnNvbiIsImRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVjcnlwdEpzb24iLCJwYXJzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/encryption.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/google-sheets.ts":
/*!**********************************!*\
  !*** ./src/lib/google-sheets.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SHEET_CONFIG: () => (/* binding */ DEFAULT_SHEET_CONFIG),\n/* harmony export */   GoogleSheetsService: () => (/* binding */ GoogleSheetsService),\n/* harmony export */   getGoogleSheetsService: () => (/* binding */ getGoogleSheetsService)\n/* harmony export */ });\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! googleapis */ \"(rsc)/./node_modules/googleapis/build/src/index.js\");\n\n// Default configuration - can be overridden via environment variables\nconst DEFAULT_SHEET_CONFIG = {\n    spreadsheetId: process.env.ONBOARDING_SHEET_ID || \"1O2HGf186pgHLVpuZ1nMnI7OkJTEpIRxpT8dn8fJP_No\",\n    rosterRange: process.env.ONBOARDING_ROSTER_RANGE || \"Status!A2:J\",\n    refreshIntervalMs: parseInt(process.env.ONBOARDING_REFRESH_INTERVAL || \"30000\", 10)\n};\nclass GoogleSheetsService {\n    constructor(config = {}){\n        this.sheets = null;\n        this.config = {\n            ...DEFAULT_SHEET_CONFIG,\n            ...config\n        };\n    }\n    async getSheetsClient() {\n        if (this.sheets) return this.sheets;\n        // Use the same Google Workspace service account as the provisioning integration\n        const serviceAccountKey = process.env.GOOGLE_SERVICE_ACCOUNT_KEY;\n        if (!serviceAccountKey) {\n            throw new Error(\"GOOGLE_SERVICE_ACCOUNT_KEY environment variable is not set. Configure Google Workspace integration in Settings.\");\n        }\n        const serviceAccount = JSON.parse(serviceAccountKey);\n        // Use the same admin email as Google Workspace integration\n        const adminEmail = process.env.GOOGLE_WORKSPACE_ADMIN_EMAIL;\n        const auth = new googleapis__WEBPACK_IMPORTED_MODULE_0__.google.auth.JWT({\n            email: serviceAccount.client_email,\n            key: serviceAccount.private_key,\n            scopes: [\n                \"https://www.googleapis.com/auth/spreadsheets.readonly\"\n            ],\n            subject: adminEmail\n        });\n        this.sheets = googleapis__WEBPACK_IMPORTED_MODULE_0__.google.sheets({\n            version: \"v4\",\n            auth\n        });\n        return this.sheets;\n    }\n    async fetchOnboardingRoster() {\n        const sheets = await this.getSheetsClient();\n        const response = await sheets.spreadsheets.values.get({\n            spreadsheetId: this.config.spreadsheetId,\n            range: this.config.rosterRange\n        });\n        const rows = response.data.values || [];\n        return rows.map((row)=>{\n            // Columns: User ID, Name, Location, Team, Start Date, Completion %, Last Reminder, Reminder Count, Last Updated, Status\n            const completionRaw = row[5] || \"0\";\n            const completionPercent = parseInt(String(completionRaw).replace(\"%\", \"\"), 10) || 0;\n            const reminderCount = parseInt(row[7] || \"0\", 10) || 0;\n            let status = \"Not Started\";\n            const statusRaw = (row[9] || \"\").toLowerCase();\n            if (statusRaw.includes(\"completed\")) status = \"Completed\";\n            else if (statusRaw.includes(\"progress\")) status = \"In Progress\";\n            return {\n                userId: row[0] || \"\",\n                name: row[1] || \"\",\n                location: row[2] || \"\",\n                team: row[3] || \"\",\n                startDate: row[4] || \"\",\n                completionPercent,\n                lastReminder: row[6] || \"\",\n                reminderCount,\n                lastUpdated: row[8] || \"\",\n                status\n            };\n        }).filter((row)=>row.userId && row.name) // Filter out empty rows\n        ;\n    }\n}\n// Singleton instance for server-side usage\nlet sheetsService = null;\nfunction getGoogleSheetsService(config) {\n    // If custom config is provided, create a new instance (don't use singleton)\n    if (config?.spreadsheetId) {\n        return new GoogleSheetsService(config);\n    }\n    // Use singleton for default config\n    if (!sheetsService) {\n        sheetsService = new GoogleSheetsService();\n    }\n    return sheetsService;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxJQUFJO2dCQUN2Qk07WUFDRjtRQUNGLEdBQUdXLE1BQU0sQ0FBQ2pCLENBQUFBLE1BQU9BLElBQUlVLE1BQU0sSUFBSVYsSUFBSVcsSUFBSSxFQUFFLHdCQUF3Qjs7SUFDbkU7QUFxQkY7QUFFQSwyQ0FBMkM7QUFDM0MsSUFBSU8sZ0JBQTRDO0FBRXpDLFNBQVNDLHVCQUF1QmhELE1BQTZCO0lBQ2xFLDRFQUE0RTtJQUM1RSxJQUFJQSxRQUFRWCxlQUFlO1FBQ3pCLE9BQU8sSUFBSVMsb0JBQW9CRTtJQUNqQztJQUNBLG1DQUFtQztJQUNuQyxJQUFJLENBQUMrQyxlQUFlO1FBQ2xCQSxnQkFBZ0IsSUFBSWpEO0lBQ3RCO0lBQ0EsT0FBT2lEO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvZ29vZ2xlLXNoZWV0cy50cz8xOGM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdvb2dsZSwgc2hlZXRzX3Y0IH0gZnJvbSAnZ29vZ2xlYXBpcydcblxuZXhwb3J0IGludGVyZmFjZSBPbmJvYXJkaW5nUm9zdGVyUm93IHtcbiAgdXNlcklkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGxvY2F0aW9uOiBzdHJpbmdcbiAgdGVhbTogc3RyaW5nXG4gIHN0YXJ0RGF0ZTogc3RyaW5nXG4gIGNvbXBsZXRpb25QZXJjZW50OiBudW1iZXJcbiAgbGFzdFJlbWluZGVyOiBzdHJpbmdcbiAgcmVtaW5kZXJDb3VudDogbnVtYmVyXG4gIGxhc3RVcGRhdGVkOiBzdHJpbmdcbiAgc3RhdHVzOiAnQ29tcGxldGVkJyB8ICdJbiBQcm9ncmVzcycgfCAnTm90IFN0YXJ0ZWQnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hlZXRDb25maWcge1xuICBzcHJlYWRzaGVldElkOiBzdHJpbmdcbiAgcm9zdGVyUmFuZ2U6IHN0cmluZyAvLyBlLmcuLCAnU3RhdHVzIUEyOkonIGZvciB0aGUgcm9zdGVyL292ZXJ2aWV3IHRhYlxuICByZWZyZXNoSW50ZXJ2YWxNczogbnVtYmVyXG59XG5cbi8vIERlZmF1bHQgY29uZmlndXJhdGlvbiAtIGNhbiBiZSBvdmVycmlkZGVuIHZpYSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NIRUVUX0NPTkZJRzogU2hlZXRDb25maWcgPSB7XG4gIHNwcmVhZHNoZWV0SWQ6IHByb2Nlc3MuZW52Lk9OQk9BUkRJTkdfU0hFRVRfSUQgfHwgJzFPMkhHZjE4NnBnSExWcHVaMW5Nbkk3T2tKVEVwSVJ4cFQ4ZG44ZkpQX05vJyxcbiAgcm9zdGVyUmFuZ2U6IHByb2Nlc3MuZW52Lk9OQk9BUkRJTkdfUk9TVEVSX1JBTkdFIHx8ICdTdGF0dXMhQTI6SicsXG4gIHJlZnJlc2hJbnRlcnZhbE1zOiBwYXJzZUludChwcm9jZXNzLmVudi5PTkJPQVJESU5HX1JFRlJFU0hfSU5URVJWQUwgfHwgJzMwMDAwJywgMTApLFxufVxuXG5leHBvcnQgY2xhc3MgR29vZ2xlU2hlZXRzU2VydmljZSB7XG4gIHByaXZhdGUgc2hlZXRzOiBzaGVldHNfdjQuU2hlZXRzIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBjb25maWc6IFNoZWV0Q29uZmlnXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPFNoZWV0Q29uZmlnPiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLkRFRkFVTFRfU0hFRVRfQ09ORklHLCAuLi5jb25maWcgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRTaGVldHNDbGllbnQoKTogUHJvbWlzZTxzaGVldHNfdjQuU2hlZXRzPiB7XG4gICAgaWYgKHRoaXMuc2hlZXRzKSByZXR1cm4gdGhpcy5zaGVldHNcblxuICAgIC8vIFVzZSB0aGUgc2FtZSBHb29nbGUgV29ya3NwYWNlIHNlcnZpY2UgYWNjb3VudCBhcyB0aGUgcHJvdmlzaW9uaW5nIGludGVncmF0aW9uXG4gICAgY29uc3Qgc2VydmljZUFjY291bnRLZXkgPSBwcm9jZXNzLmVudi5HT09HTEVfU0VSVklDRV9BQ0NPVU5UX0tFWVxuICAgIGlmICghc2VydmljZUFjY291bnRLZXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldC4gQ29uZmlndXJlIEdvb2dsZSBXb3Jrc3BhY2UgaW50ZWdyYXRpb24gaW4gU2V0dGluZ3MuJylcbiAgICB9XG5cbiAgICBjb25zdCBzZXJ2aWNlQWNjb3VudCA9IEpTT04ucGFyc2Uoc2VydmljZUFjY291bnRLZXkpXG4gICAgLy8gVXNlIHRoZSBzYW1lIGFkbWluIGVtYWlsIGFzIEdvb2dsZSBXb3Jrc3BhY2UgaW50ZWdyYXRpb25cbiAgICBjb25zdCBhZG1pbkVtYWlsID0gcHJvY2Vzcy5lbnYuR09PR0xFX1dPUktTUEFDRV9BRE1JTl9FTUFJTFxuXG4gICAgY29uc3QgYXV0aCA9IG5ldyBnb29nbGUuYXV0aC5KV1Qoe1xuICAgICAgZW1haWw6IHNlcnZpY2VBY2NvdW50LmNsaWVudF9lbWFpbCxcbiAgICAgIGtleTogc2VydmljZUFjY291bnQucHJpdmF0ZV9rZXksXG4gICAgICBzY29wZXM6IFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9zcHJlYWRzaGVldHMucmVhZG9ubHknXSxcbiAgICAgIHN1YmplY3Q6IGFkbWluRW1haWwsIC8vIEltcGVyc29uYXRlIGFkbWluIGZvciBkb21haW4td2lkZSBhY2Nlc3NcbiAgICB9KVxuXG4gICAgdGhpcy5zaGVldHMgPSBnb29nbGUuc2hlZXRzKHsgdmVyc2lvbjogJ3Y0JywgYXV0aCB9KVxuICAgIHJldHVybiB0aGlzLnNoZWV0c1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hPbmJvYXJkaW5nUm9zdGVyKCk6IFByb21pc2U8T25ib2FyZGluZ1Jvc3RlclJvd1tdPiB7XG4gICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgdGhpcy5nZXRTaGVldHNDbGllbnQoKVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaGVldHMuc3ByZWFkc2hlZXRzLnZhbHVlcy5nZXQoe1xuICAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5jb25maWcuc3ByZWFkc2hlZXRJZCxcbiAgICAgIHJhbmdlOiB0aGlzLmNvbmZpZy5yb3N0ZXJSYW5nZSxcbiAgICB9KVxuXG4gICAgY29uc3Qgcm93cyA9IHJlc3BvbnNlLmRhdGEudmFsdWVzIHx8IFtdXG5cbiAgICByZXR1cm4gcm93cy5tYXAoKHJvdyk6IE9uYm9hcmRpbmdSb3N0ZXJSb3cgPT4ge1xuICAgICAgLy8gQ29sdW1uczogVXNlciBJRCwgTmFtZSwgTG9jYXRpb24sIFRlYW0sIFN0YXJ0IERhdGUsIENvbXBsZXRpb24gJSwgTGFzdCBSZW1pbmRlciwgUmVtaW5kZXIgQ291bnQsIExhc3QgVXBkYXRlZCwgU3RhdHVzXG4gICAgICBjb25zdCBjb21wbGV0aW9uUmF3ID0gcm93WzVdIHx8ICcwJ1xuICAgICAgY29uc3QgY29tcGxldGlvblBlcmNlbnQgPSBwYXJzZUludChTdHJpbmcoY29tcGxldGlvblJhdykucmVwbGFjZSgnJScsICcnKSwgMTApIHx8IDBcbiAgICAgIGNvbnN0IHJlbWluZGVyQ291bnQgPSBwYXJzZUludChyb3dbN10gfHwgJzAnLCAxMCkgfHwgMFxuXG4gICAgICBsZXQgc3RhdHVzOiBPbmJvYXJkaW5nUm9zdGVyUm93WydzdGF0dXMnXSA9ICdOb3QgU3RhcnRlZCdcbiAgICAgIGNvbnN0IHN0YXR1c1JhdyA9IChyb3dbOV0gfHwgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgIGlmIChzdGF0dXNSYXcuaW5jbHVkZXMoJ2NvbXBsZXRlZCcpKSBzdGF0dXMgPSAnQ29tcGxldGVkJ1xuICAgICAgZWxzZSBpZiAoc3RhdHVzUmF3LmluY2x1ZGVzKCdwcm9ncmVzcycpKSBzdGF0dXMgPSAnSW4gUHJvZ3Jlc3MnXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJJZDogcm93WzBdIHx8ICcnLFxuICAgICAgICBuYW1lOiByb3dbMV0gfHwgJycsXG4gICAgICAgIGxvY2F0aW9uOiByb3dbMl0gfHwgJycsXG4gICAgICAgIHRlYW06IHJvd1szXSB8fCAnJyxcbiAgICAgICAgc3RhcnREYXRlOiByb3dbNF0gfHwgJycsXG4gICAgICAgIGNvbXBsZXRpb25QZXJjZW50LFxuICAgICAgICBsYXN0UmVtaW5kZXI6IHJvd1s2XSB8fCAnJyxcbiAgICAgICAgcmVtaW5kZXJDb3VudCxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IHJvd1s4XSB8fCAnJyxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgfVxuICAgIH0pLmZpbHRlcihyb3cgPT4gcm93LnVzZXJJZCAmJiByb3cubmFtZSkgLy8gRmlsdGVyIG91dCBlbXB0eSByb3dzXG4gIH1cblxuICAvLyBQaGFzZSAyOiBGZXRjaCB0YXNrIGNhdGFsb2cgZnJvbSBzaGVldCAod2hlbiBhdmFpbGFibGUpXG4gIC8vIGFzeW5jIGZldGNoVGFza0NhdGFsb2coKTogUHJvbWlzZTxUYXNrQ2F0YWxvZ1Jvd1tdPiB7XG4gIC8vICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgdGhpcy5nZXRTaGVldHNDbGllbnQoKVxuICAvLyAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuZ2V0KHtcbiAgLy8gICAgIHNwcmVhZHNoZWV0SWQ6IHRoaXMuY29uZmlnLnNwcmVhZHNoZWV0SWQsXG4gIC8vICAgICByYW5nZTogJ1Rhc2sgQ2F0YWxvZyFBMjpIJyxcbiAgLy8gICB9KVxuICAvLyAgIC8vIFBhcnNlIGFuZCByZXR1cm4gdGFzayBjYXRhbG9nXG4gIC8vIH1cblxuICAvLyBQaGFzZSAyOiBGZXRjaCB0YXNrIHByb2dyZXNzIGZyb20gc2hlZXQgKHdoZW4gYXZhaWxhYmxlKVxuICAvLyBhc3luYyBmZXRjaFRhc2tQcm9ncmVzcyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VGFza1Byb2dyZXNzUm93W10+IHtcbiAgLy8gICBjb25zdCBzaGVldHMgPSBhd2FpdCB0aGlzLmdldFNoZWV0c0NsaWVudCgpXG4gIC8vICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaGVldHMuc3ByZWFkc2hlZXRzLnZhbHVlcy5nZXQoe1xuICAvLyAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5jb25maWcuc3ByZWFkc2hlZXRJZCxcbiAgLy8gICAgIHJhbmdlOiAnVGFzayBQcm9ncmVzcyFBMjpEJyxcbiAgLy8gICB9KVxuICAvLyAgIC8vIEZpbHRlciBieSB1c2VySWQgYW5kIHJldHVybiBwcm9ncmVzc1xuICAvLyB9XG59XG5cbi8vIFNpbmdsZXRvbiBpbnN0YW5jZSBmb3Igc2VydmVyLXNpZGUgdXNhZ2VcbmxldCBzaGVldHNTZXJ2aWNlOiBHb29nbGVTaGVldHNTZXJ2aWNlIHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdvb2dsZVNoZWV0c1NlcnZpY2UoY29uZmlnPzogUGFydGlhbDxTaGVldENvbmZpZz4pOiBHb29nbGVTaGVldHNTZXJ2aWNlIHtcbiAgLy8gSWYgY3VzdG9tIGNvbmZpZyBpcyBwcm92aWRlZCwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIChkb24ndCB1c2Ugc2luZ2xldG9uKVxuICBpZiAoY29uZmlnPy5zcHJlYWRzaGVldElkKSB7XG4gICAgcmV0dXJuIG5ldyBHb29nbGVTaGVldHNTZXJ2aWNlKGNvbmZpZylcbiAgfVxuICAvLyBVc2Ugc2luZ2xldG9uIGZvciBkZWZhdWx0IGNvbmZpZ1xuICBpZiAoIXNoZWV0c1NlcnZpY2UpIHtcbiAgICBzaGVldHNTZXJ2aWNlID0gbmV3IEdvb2dsZVNoZWV0c1NlcnZpY2UoKVxuICB9XG4gIHJldHVybiBzaGVldHNTZXJ2aWNlXG59XG4iXSwibmFtZXMiOlsiZ29vZ2xlIiwiREVGQVVMVF9TSEVFVF9DT05GSUciLCJzcHJlYWRzaGVldElkIiwicHJvY2VzcyIsImVudiIsIk9OQk9BUkRJTkdfU0hFRVRfSUQiLCJyb3N0ZXJSYW5nZSIsIk9OQk9BUkRJTkdfUk9TVEVSX1JBTkdFIiwicmVmcmVzaEludGVydmFsTXMiLCJwYXJzZUludCIsIk9OQk9BUkRJTkdfUkVGUkVTSF9JTlRFUlZBTCIsIkdvb2dsZVNoZWV0c1NlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsInNoZWV0cyIsImdldFNoZWV0c0NsaWVudCIsInNlcnZpY2VBY2NvdW50S2V5IiwiR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9LRVkiLCJFcnJvciIsInNlcnZpY2VBY2NvdW50IiwiSlNPTiIsInBhcnNlIiwiYWRtaW5FbWFpbCIsIkdPT0dMRV9XT1JLU1BBQ0VfQURNSU5fRU1BSUwiLCJhdXRoIiwiSldUIiwiZW1haWwiLCJjbGllbnRfZW1haWwiLCJrZXkiLCJwcml2YXRlX2tleSIsInNjb3BlcyIsInN1YmplY3QiLCJ2ZXJzaW9uIiwiZmV0Y2hPbmJvYXJkaW5nUm9zdGVyIiwicmVzcG9uc2UiLCJzcHJlYWRzaGVldHMiLCJ2YWx1ZXMiLCJnZXQiLCJyYW5nZSIsInJvd3MiLCJkYXRhIiwibWFwIiwicm93IiwiY29tcGxldGlvblJhdyIsImNvbXBsZXRpb25QZXJjZW50IiwiU3RyaW5nIiwicmVwbGFjZSIsInJlbWluZGVyQ291bnQiLCJzdGF0dXMiLCJzdGF0dXNSYXciLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwidXNlcklkIiwibmFtZSIsImxvY2F0aW9uIiwidGVhbSIsInN0YXJ0RGF0ZSIsImxhc3RSZW1pbmRlciIsImxhc3RVcGRhdGVkIiwiZmlsdGVyIiwic2hlZXRzU2VydmljZSIsImdldEdvb2dsZVNoZWV0c1NlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/google-sheets.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/bitbucket.ts":
/*!*******************************************!*\
  !*** ./src/lib/integrations/bitbucket.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BitbucketConnector: () => (/* binding */ BitbucketConnector)\n/* harmony export */ });\nconst BITBUCKET_API_BASE = \"https://api.bitbucket.org/2.0\";\nconst BITBUCKET_API_V1_BASE = \"https://api.bitbucket.org/1.0\";\nfunction basicAuth(username, password) {\n    return Buffer.from(`${username}:${password}`).toString(\"base64\");\n}\nfunction matchesCondition(employee, condition) {\n    for (const [key, value] of Object.entries(condition)){\n        if (value === undefined || value === null) continue;\n        const employeeValue = employee[key];\n        if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n            if (employeeValue.toLowerCase() !== value.toLowerCase()) return false;\n        } else if (employeeValue !== value) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction mergeProvisionData(employee, rules) {\n    const result = {\n        repositories: [],\n        groups: []\n    };\n    const sortedRules = [\n        ...rules\n    ].sort((a, b)=>b.priority - a.priority);\n    for (const rule of sortedRules){\n        if (!rule.isActive) continue;\n        const condition = rule.condition;\n        if (!matchesCondition(employee, condition)) continue;\n        const data = rule.provisionData;\n        if (data.groups?.length) {\n            result.groups = [\n                ...result.groups || [],\n                ...data.groups\n            ];\n        }\n        if (data.repositories?.length) {\n            result.repositories = [\n                ...result.repositories || [],\n                ...data.repositories\n            ];\n        }\n    }\n    // Dedupe groups while keeping order\n    result.groups = result.groups ? Array.from(new Set(result.groups.filter(Boolean))) : [];\n    // Dedupe by repoSlug (keep highest permission if duplicates, order matters)\n    const byRepo = new Map();\n    const rank = {\n        read: 1,\n        write: 2,\n        admin: 3\n    };\n    for (const r of result.repositories || []){\n        if (!r?.repoSlug) continue;\n        const prev = byRepo.get(r.repoSlug);\n        if (!prev || rank[r.permission] > rank[prev.permission]) byRepo.set(r.repoSlug, r);\n    }\n    result.repositories = Array.from(byRepo.values());\n    return result;\n}\nasync function requestJsonWithAuth(url, init, expectedOk = [\n    200\n], authHeaders = []) {\n    if (authHeaders.length === 0) {\n        throw new Error(\"Bitbucket credentials are not configured.\");\n    }\n    let lastError = null;\n    for (const authHeader of authHeaders){\n        const res = await fetch(url, {\n            ...init,\n            headers: {\n                ...init.headers || {},\n                Authorization: authHeader\n            }\n        });\n        if (expectedOk.includes(res.status)) {\n            if (res.status === 204) return {};\n            return await res.json();\n        }\n        const text = await res.text().catch(()=>\"\");\n        const error = new Error(`Bitbucket API error (${res.status}): ${text || res.statusText}`);\n        if (res.status === 401 || res.status === 403) {\n            lastError = error;\n            continue;\n        }\n        throw error;\n    }\n    throw lastError || new Error(\"Bitbucket API error (401): Unauthorized\");\n}\nasync function requestPaginatedWithAuth(url, init, maxPages, authHeaders) {\n    const items = [];\n    let nextUrl = url;\n    let page = 0;\n    while(nextUrl && page < maxPages){\n        const data = await requestJsonWithAuth(nextUrl, init, [\n            200\n        ], authHeaders);\n        if (Array.isArray(data.values)) {\n            items.push(...data.values);\n        }\n        nextUrl = typeof data.next === \"string\" ? data.next : null;\n        page += 1;\n    }\n    return items;\n}\nclass BitbucketConnector {\n    constructor(config){\n        this.config = config;\n        const headers = [];\n        // Bitbucket has two types of tokens:\n        // 1. Account-level API tokens: Basic Auth with email:token\n        // 2. Repository/Workspace Access Tokens: Bearer auth\n        // We try both methods to support either token type.\n        if (config.apiToken) {\n            // Try Bearer auth for Repository/Workspace Access Tokens\n            headers.push(`Bearer ${config.apiToken}`);\n        }\n        if (config.username && config.apiToken) {\n            // Try Basic Auth for Account-level API tokens (email:token)\n            headers.push(`Basic ${basicAuth(config.username, config.apiToken)}`);\n        }\n        if (config.username && config.appPassword) {\n            headers.push(`Basic ${basicAuth(config.username, config.appPassword)}`);\n        }\n        this.authHeaders = Array.from(new Set(headers));\n    }\n    async listGroups() {\n        // Bitbucket Cloud uses 1.0 API for groups (2.0 doesn't have groups endpoint yet)\n        const url = `${BITBUCKET_API_V1_BASE}/groups/${encodeURIComponent(this.config.workspace)}`;\n        const data = await requestJsonWithAuth(url, {\n            method: \"GET\",\n            headers: {\n                Accept: \"application/json\"\n            }\n        }, [\n            200\n        ], this.authHeaders);\n        const groups = Array.isArray(data) ? data : [];\n        return groups.filter((group)=>typeof group.slug === \"string\" && group.slug.length > 0).map((group)=>({\n                slug: group.slug,\n                name: typeof group.name === \"string\" && group.name.length > 0 ? group.name : group.slug\n            }));\n    }\n    async listRepositories() {\n        const url = `${BITBUCKET_API_BASE}/repositories/${encodeURIComponent(this.config.workspace)}?pagelen=100`;\n        const values = await requestPaginatedWithAuth(url, {\n            method: \"GET\",\n            headers: {\n                Accept: \"application/json\"\n            }\n        }, 10, this.authHeaders);\n        return values.filter((repo)=>typeof repo.slug === \"string\" && repo.slug.length > 0).map((repo)=>({\n                slug: repo.slug,\n                name: typeof repo.name === \"string\" && repo.name.length > 0 ? repo.name : repo.slug\n            }));\n    }\n    async testConnection() {\n        try {\n            if (this.config.workspace) {\n                await requestJsonWithAuth(`${BITBUCKET_API_BASE}/repositories/${encodeURIComponent(this.config.workspace)}?pagelen=1`, {\n                    method: \"GET\",\n                    headers: {\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    200\n                ], this.authHeaders);\n            } else {\n                await requestJsonWithAuth(`${BITBUCKET_API_BASE}/user`, {\n                    method: \"GET\",\n                    headers: {\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    200\n                ], this.authHeaders);\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to Bitbucket\"\n            };\n        }\n    }\n    async lookupWorkspaceMemberAccountId(email) {\n        const params = new URLSearchParams();\n        params.set(\"q\", `user.email IN (\"${email}\")`);\n        params.set(\"fields\", \"values.user.account_id,values.user.email\");\n        const url = `${BITBUCKET_API_BASE}/workspaces/${encodeURIComponent(this.config.workspace)}/members?${params.toString()}`;\n        const data = await requestJsonWithAuth(url, {\n            method: \"GET\",\n            headers: {\n                Accept: \"application/json\"\n            }\n        }, [\n            200\n        ], this.authHeaders);\n        const accountId = data.values?.find((v)=>v.user?.account_id)?.user?.account_id;\n        return accountId ?? null;\n    }\n    async provisionEmployee(employee, app, rules, existingAccount) {\n        try {\n            const email = employee.workEmail || employee.personalEmail;\n            if (!email) return {\n                success: false,\n                error: \"Email is required to provision Bitbucket\"\n            };\n            const provisionData = mergeProvisionData(employee, rules);\n            const hasGroups = Boolean(provisionData.groups && provisionData.groups.length > 0);\n            const hasRepos = Boolean(provisionData.repositories && provisionData.repositories.length > 0);\n            if (!hasGroups && !hasRepos) {\n                return {\n                    success: false,\n                    error: \"No Bitbucket provisioning rules found. Add rules with groups or repositories + permissions.\"\n                };\n            }\n            const accountId = existingAccount?.externalUserId || await this.lookupWorkspaceMemberAccountId(email);\n            if (!accountId) {\n                return {\n                    success: false,\n                    error: `Bitbucket user not found in workspace \"${this.config.workspace}\". Invite them to the workspace first, then retry.`\n                };\n            }\n            const appliedGroups = [];\n            for (const groupSlug of provisionData.groups || []){\n                const url = `${BITBUCKET_API_BASE}/workspaces/${encodeURIComponent(this.config.workspace)}/permissions-config/groups/${encodeURIComponent(groupSlug)}/members/${encodeURIComponent(accountId)}`;\n                await requestJsonWithAuth(url, {\n                    method: \"PUT\",\n                    headers: {\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    200,\n                    204\n                ], this.authHeaders);\n                appliedGroups.push(groupSlug);\n            }\n            const applied = [];\n            for (const repo of provisionData.repositories || []){\n                const url = `${BITBUCKET_API_BASE}/repositories/${encodeURIComponent(this.config.workspace)}/${encodeURIComponent(repo.repoSlug)}/permissions-config/users/${encodeURIComponent(accountId)}`;\n                await requestJsonWithAuth(url, {\n                    method: \"PUT\",\n                    headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        permission: repo.permission\n                    })\n                }, [\n                    200\n                ], this.authHeaders);\n                applied.push({\n                    repoSlug: repo.repoSlug,\n                    permission: repo.permission\n                });\n            }\n            return {\n                success: true,\n                externalUserId: accountId,\n                externalEmail: email,\n                provisionedResources: {\n                    repositories: applied,\n                    groups: appliedGroups\n                }\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to provision Bitbucket access\"\n            };\n        }\n    }\n    async deprovisionEmployee(employee, app, account, _options) {\n        try {\n            const accountId = account.externalUserId;\n            if (!accountId) return {\n                success: false,\n                error: \"No Bitbucket user id found\"\n            };\n            const resources = account.provisionedResources || {};\n            const groups = resources.groups || [];\n            const repos = resources.repositories || [];\n            if (!groups.length && !repos.length) return {\n                success: true\n            };\n            for (const groupSlug of groups){\n                if (!groupSlug) continue;\n                const url = `${BITBUCKET_API_BASE}/workspaces/${encodeURIComponent(this.config.workspace)}/permissions-config/groups/${encodeURIComponent(groupSlug)}/members/${encodeURIComponent(accountId)}`;\n                await requestJsonWithAuth(url, {\n                    method: \"DELETE\",\n                    headers: {\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    204\n                ], this.authHeaders);\n            }\n            for (const repo of repos){\n                if (!repo.repoSlug) continue;\n                const url = `${BITBUCKET_API_BASE}/repositories/${encodeURIComponent(this.config.workspace)}/${encodeURIComponent(repo.repoSlug)}/permissions-config/users/${encodeURIComponent(accountId)}`;\n                await requestJsonWithAuth(url, {\n                    method: \"DELETE\",\n                    headers: {\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    204\n                ], this.authHeaders);\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to deprovision Bitbucket access\"\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNKLE1BQU0sQ0FBQ0ssU0FBUyxFQUFFLENBQUMsRUFBRUQsbUJBQzdGUyxLQUFLaEQsUUFBUSxFQUNiLDBCQUEwQixFQUFFdUMsbUJBQW1CaUIsV0FBVyxDQUFDO2dCQUM3RCxNQUFNbEQsb0JBQ0pDLEtBQ0E7b0JBQ0VrQyxRQUFRO29CQUNSekIsU0FBUzt3QkFBRTBCLFFBQVE7b0JBQW1CO2dCQUN4QyxHQUNBO29CQUFDO2lCQUFJLEVBQ0wsSUFBSSxDQUFDaEMsV0FBVztZQUVwQjtZQUVBLE9BQU87Z0JBQUV3QyxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPM0IsT0FBTztZQUNkLE9BQU87Z0JBQ0wyQixTQUFTO2dCQUNUM0IsT0FBT0EsaUJBQWlCWixRQUFRWSxNQUFNNEIsT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2ludGVncmF0aW9ucy9iaXRidWNrZXQudHM/NzZjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEVtcGxveWVlLCBBcHAsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCB0eXBlIHtcbiAgSW50ZWdyYXRpb25Db25uZWN0b3IsXG4gIFByb3Zpc2lvblJlc3VsdCxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgQml0YnVja2V0Q29uZmlnLFxuICBCaXRidWNrZXRQcm92aXNpb25EYXRhLFxuICBQcm92aXNpb25pbmdDb25kaXRpb24sXG59IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IEJJVEJVQ0tFVF9BUElfQkFTRSA9ICdodHRwczovL2FwaS5iaXRidWNrZXQub3JnLzIuMCdcbmNvbnN0IEJJVEJVQ0tFVF9BUElfVjFfQkFTRSA9ICdodHRwczovL2FwaS5iaXRidWNrZXQub3JnLzEuMCdcblxuZnVuY3Rpb24gYmFzaWNBdXRoKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGAke3VzZXJuYW1lfToke3Bhc3N3b3JkfWApLnRvU3RyaW5nKCdiYXNlNjQnKVxufVxuXG5mdW5jdGlvbiBtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlOiBFbXBsb3llZSwgY29uZGl0aW9uOiBQcm92aXNpb25pbmdDb25kaXRpb24pOiBib29sZWFuIHtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZGl0aW9uKSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSBjb250aW51ZVxuICAgIGNvbnN0IGVtcGxveWVlVmFsdWUgPSAoZW1wbG95ZWUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleV1cbiAgICBpZiAodHlwZW9mIGVtcGxveWVlVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChlbXBsb3llZVZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSBpZiAoZW1wbG95ZWVWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBtZXJnZVByb3Zpc2lvbkRhdGEoZW1wbG95ZWU6IEVtcGxveWVlLCBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdKTogQml0YnVja2V0UHJvdmlzaW9uRGF0YSB7XG4gIGNvbnN0IHJlc3VsdDogQml0YnVja2V0UHJvdmlzaW9uRGF0YSA9IHsgcmVwb3NpdG9yaWVzOiBbXSwgZ3JvdXBzOiBbXSB9XG4gIGNvbnN0IHNvcnRlZFJ1bGVzID0gWy4uLnJ1bGVzXS5zb3J0KChhLCBiKSA9PiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSlcblxuICBmb3IgKGNvbnN0IHJ1bGUgb2Ygc29ydGVkUnVsZXMpIHtcbiAgICBpZiAoIXJ1bGUuaXNBY3RpdmUpIGNvbnRpbnVlXG4gICAgY29uc3QgY29uZGl0aW9uID0gcnVsZS5jb25kaXRpb24gYXMgUHJvdmlzaW9uaW5nQ29uZGl0aW9uXG4gICAgaWYgKCFtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlLCBjb25kaXRpb24pKSBjb250aW51ZVxuICAgIGNvbnN0IGRhdGEgPSBydWxlLnByb3Zpc2lvbkRhdGEgYXMgQml0YnVja2V0UHJvdmlzaW9uRGF0YVxuICAgIGlmIChkYXRhLmdyb3Vwcz8ubGVuZ3RoKSB7XG4gICAgICByZXN1bHQuZ3JvdXBzID0gWy4uLihyZXN1bHQuZ3JvdXBzIHx8IFtdKSwgLi4uZGF0YS5ncm91cHNdXG4gICAgfVxuICAgIGlmIChkYXRhLnJlcG9zaXRvcmllcz8ubGVuZ3RoKSB7XG4gICAgICByZXN1bHQucmVwb3NpdG9yaWVzID0gWy4uLihyZXN1bHQucmVwb3NpdG9yaWVzIHx8IFtdKSwgLi4uZGF0YS5yZXBvc2l0b3JpZXNdXG4gICAgfVxuICB9XG5cbiAgLy8gRGVkdXBlIGdyb3VwcyB3aGlsZSBrZWVwaW5nIG9yZGVyXG4gIHJlc3VsdC5ncm91cHMgPSByZXN1bHQuZ3JvdXBzID8gQXJyYXkuZnJvbShuZXcgU2V0KHJlc3VsdC5ncm91cHMuZmlsdGVyKEJvb2xlYW4pKSkgOiBbXVxuXG4gIC8vIERlZHVwZSBieSByZXBvU2x1ZyAoa2VlcCBoaWdoZXN0IHBlcm1pc3Npb24gaWYgZHVwbGljYXRlcywgb3JkZXIgbWF0dGVycylcbiAgY29uc3QgYnlSZXBvID0gbmV3IE1hcDxzdHJpbmcsIHsgcmVwb1NsdWc6IHN0cmluZzsgcGVybWlzc2lvbjogJ3JlYWQnIHwgJ3dyaXRlJyB8ICdhZG1pbicgfT4oKVxuICBjb25zdCByYW5rOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0geyByZWFkOiAxLCB3cml0ZTogMiwgYWRtaW46IDMgfVxuICBmb3IgKGNvbnN0IHIgb2YgcmVzdWx0LnJlcG9zaXRvcmllcyB8fCBbXSkge1xuICAgIGlmICghcj8ucmVwb1NsdWcpIGNvbnRpbnVlXG4gICAgY29uc3QgcHJldiA9IGJ5UmVwby5nZXQoci5yZXBvU2x1ZylcbiAgICBpZiAoIXByZXYgfHwgcmFua1tyLnBlcm1pc3Npb25dID4gcmFua1twcmV2LnBlcm1pc3Npb25dKSBieVJlcG8uc2V0KHIucmVwb1NsdWcsIHIpXG4gIH1cbiAgcmVzdWx0LnJlcG9zaXRvcmllcyA9IEFycmF5LmZyb20oYnlSZXBvLnZhbHVlcygpKVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RKc29uV2l0aEF1dGg8VD4oXG4gIHVybDogc3RyaW5nLFxuICBpbml0OiBSZXF1ZXN0SW5pdCxcbiAgZXhwZWN0ZWRPazogbnVtYmVyW10gPSBbMjAwXSxcbiAgYXV0aEhlYWRlcnM6IHN0cmluZ1tdID0gW11cbik6IFByb21pc2U8VD4ge1xuICBpZiAoYXV0aEhlYWRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCaXRidWNrZXQgY3JlZGVudGlhbHMgYXJlIG5vdCBjb25maWd1cmVkLicpXG4gIH1cblxuICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsXG4gIGZvciAoY29uc3QgYXV0aEhlYWRlciBvZiBhdXRoSGVhZGVycykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgLi4uaW5pdCxcbiAgICAgIGhlYWRlcnM6IHsgLi4uKGluaXQuaGVhZGVycyB8fCB7fSksIEF1dGhvcml6YXRpb246IGF1dGhIZWFkZXIgfSxcbiAgICB9KVxuICAgIGlmIChleHBlY3RlZE9rLmluY2x1ZGVzKHJlcy5zdGF0dXMpKSB7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4ge30gYXMgVFxuICAgICAgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUXG4gICAgfVxuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpLmNhdGNoKCgpID0+ICcnKVxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBCaXRidWNrZXQgQVBJIGVycm9yICgke3Jlcy5zdGF0dXN9KTogJHt0ZXh0IHx8IHJlcy5zdGF0dXNUZXh0fWApXG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSB8fCByZXMuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yXG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICB0aHJvdyBlcnJvclxuICB9XG5cbiAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcignQml0YnVja2V0IEFQSSBlcnJvciAoNDAxKTogVW5hdXRob3JpemVkJylcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFBhZ2luYXRlZFdpdGhBdXRoPFQ+KFxuICB1cmw6IHN0cmluZyxcbiAgaW5pdDogUmVxdWVzdEluaXQsXG4gIG1heFBhZ2VzOiBudW1iZXIsXG4gIGF1dGhIZWFkZXJzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxUW10+IHtcbiAgY29uc3QgaXRlbXM6IFRbXSA9IFtdXG4gIGxldCBuZXh0VXJsOiBzdHJpbmcgfCBudWxsID0gdXJsXG4gIGxldCBwYWdlID0gMFxuXG4gIHdoaWxlIChuZXh0VXJsICYmIHBhZ2UgPCBtYXhQYWdlcykge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0SnNvbldpdGhBdXRoPHsgdmFsdWVzPzogVFtdOyBuZXh0Pzogc3RyaW5nIH0+KFxuICAgICAgbmV4dFVybCxcbiAgICAgIGluaXQsXG4gICAgICBbMjAwXSxcbiAgICAgIGF1dGhIZWFkZXJzXG4gICAgKVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEudmFsdWVzKSkge1xuICAgICAgaXRlbXMucHVzaCguLi5kYXRhLnZhbHVlcylcbiAgICB9XG4gICAgbmV4dFVybCA9IHR5cGVvZiBkYXRhLm5leHQgPT09ICdzdHJpbmcnID8gZGF0YS5uZXh0IDogbnVsbFxuICAgIHBhZ2UgKz0gMVxuICB9XG5cbiAgcmV0dXJuIGl0ZW1zXG59XG5cbmV4cG9ydCBjbGFzcyBCaXRidWNrZXRDb25uZWN0b3IgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbkNvbm5lY3RvciB7XG4gIHByaXZhdGUgY29uZmlnOiBCaXRidWNrZXRDb25maWdcbiAgcHJpdmF0ZSBhdXRoSGVhZGVyczogc3RyaW5nW11cblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEJpdGJ1Y2tldENvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gICAgY29uc3QgaGVhZGVyczogc3RyaW5nW10gPSBbXVxuICAgIC8vIEJpdGJ1Y2tldCBoYXMgdHdvIHR5cGVzIG9mIHRva2VuczpcbiAgICAvLyAxLiBBY2NvdW50LWxldmVsIEFQSSB0b2tlbnM6IEJhc2ljIEF1dGggd2l0aCBlbWFpbDp0b2tlblxuICAgIC8vIDIuIFJlcG9zaXRvcnkvV29ya3NwYWNlIEFjY2VzcyBUb2tlbnM6IEJlYXJlciBhdXRoXG4gICAgLy8gV2UgdHJ5IGJvdGggbWV0aG9kcyB0byBzdXBwb3J0IGVpdGhlciB0b2tlbiB0eXBlLlxuICAgIGlmIChjb25maWcuYXBpVG9rZW4pIHtcbiAgICAgIC8vIFRyeSBCZWFyZXIgYXV0aCBmb3IgUmVwb3NpdG9yeS9Xb3Jrc3BhY2UgQWNjZXNzIFRva2Vuc1xuICAgICAgaGVhZGVycy5wdXNoKGBCZWFyZXIgJHtjb25maWcuYXBpVG9rZW59YClcbiAgICB9XG4gICAgaWYgKGNvbmZpZy51c2VybmFtZSAmJiBjb25maWcuYXBpVG9rZW4pIHtcbiAgICAgIC8vIFRyeSBCYXNpYyBBdXRoIGZvciBBY2NvdW50LWxldmVsIEFQSSB0b2tlbnMgKGVtYWlsOnRva2VuKVxuICAgICAgaGVhZGVycy5wdXNoKGBCYXNpYyAke2Jhc2ljQXV0aChjb25maWcudXNlcm5hbWUsIGNvbmZpZy5hcGlUb2tlbil9YClcbiAgICB9XG4gICAgaWYgKGNvbmZpZy51c2VybmFtZSAmJiBjb25maWcuYXBwUGFzc3dvcmQpIHtcbiAgICAgIGhlYWRlcnMucHVzaChgQmFzaWMgJHtiYXNpY0F1dGgoY29uZmlnLnVzZXJuYW1lLCBjb25maWcuYXBwUGFzc3dvcmQpfWApXG4gICAgfVxuICAgIHRoaXMuYXV0aEhlYWRlcnMgPSBBcnJheS5mcm9tKG5ldyBTZXQoaGVhZGVycykpXG4gIH1cblxuICBhc3luYyBsaXN0R3JvdXBzKCk6IFByb21pc2U8QXJyYXk8eyBzbHVnOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9Pj4ge1xuICAgIC8vIEJpdGJ1Y2tldCBDbG91ZCB1c2VzIDEuMCBBUEkgZm9yIGdyb3VwcyAoMi4wIGRvZXNuJ3QgaGF2ZSBncm91cHMgZW5kcG9pbnQgeWV0KVxuICAgIGNvbnN0IHVybCA9IGAke0JJVEJVQ0tFVF9BUElfVjFfQkFTRX0vZ3JvdXBzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY29uZmlnLndvcmtzcGFjZSl9YFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0SnNvbldpdGhBdXRoPEFycmF5PHsgc2x1Zz86IHN0cmluZzsgbmFtZT86IHN0cmluZyB9Pj4oXG4gICAgICB1cmwsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0sXG4gICAgICBbMjAwXSxcbiAgICAgIHRoaXMuYXV0aEhlYWRlcnNcbiAgICApXG4gICAgY29uc3QgZ3JvdXBzID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbXVxuICAgIHJldHVybiBncm91cHNcbiAgICAgIC5maWx0ZXIoKGdyb3VwKSA9PiB0eXBlb2YgZ3JvdXAuc2x1ZyA9PT0gJ3N0cmluZycgJiYgZ3JvdXAuc2x1Zy5sZW5ndGggPiAwKVxuICAgICAgLm1hcCgoZ3JvdXApID0+ICh7XG4gICAgICAgIHNsdWc6IGdyb3VwLnNsdWcgYXMgc3RyaW5nLFxuICAgICAgICBuYW1lOiB0eXBlb2YgZ3JvdXAubmFtZSA9PT0gJ3N0cmluZycgJiYgZ3JvdXAubmFtZS5sZW5ndGggPiAwID8gZ3JvdXAubmFtZSA6IChncm91cC5zbHVnIGFzIHN0cmluZyksXG4gICAgICB9KSlcbiAgfVxuXG4gIGFzeW5jIGxpc3RSZXBvc2l0b3JpZXMoKTogUHJvbWlzZTxBcnJheTx7IHNsdWc6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PiB7XG4gICAgY29uc3QgdXJsID0gYCR7QklUQlVDS0VUX0FQSV9CQVNFfS9yZXBvc2l0b3JpZXMvJHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWcud29ya3NwYWNlKX0/cGFnZWxlbj0xMDBgXG4gICAgY29uc3QgdmFsdWVzID0gYXdhaXQgcmVxdWVzdFBhZ2luYXRlZFdpdGhBdXRoPHsgc2x1Zz86IHN0cmluZzsgbmFtZT86IHN0cmluZyB9PihcbiAgICAgIHVybCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgfSxcbiAgICAgIDEwLFxuICAgICAgdGhpcy5hdXRoSGVhZGVyc1xuICAgIClcbiAgICByZXR1cm4gdmFsdWVzXG4gICAgICAuZmlsdGVyKChyZXBvKSA9PiB0eXBlb2YgcmVwby5zbHVnID09PSAnc3RyaW5nJyAmJiByZXBvLnNsdWcubGVuZ3RoID4gMClcbiAgICAgIC5tYXAoKHJlcG8pID0+ICh7XG4gICAgICAgIHNsdWc6IHJlcG8uc2x1ZyBhcyBzdHJpbmcsXG4gICAgICAgIG5hbWU6IHR5cGVvZiByZXBvLm5hbWUgPT09ICdzdHJpbmcnICYmIHJlcG8ubmFtZS5sZW5ndGggPiAwID8gcmVwby5uYW1lIDogKHJlcG8uc2x1ZyBhcyBzdHJpbmcpLFxuICAgICAgfSkpXG4gIH1cblxuICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5jb25maWcud29ya3NwYWNlKSB7XG4gICAgICAgIGF3YWl0IHJlcXVlc3RKc29uV2l0aEF1dGgoXG4gICAgICAgICAgYCR7QklUQlVDS0VUX0FQSV9CQVNFfS9yZXBvc2l0b3JpZXMvJHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWcud29ya3NwYWNlKX0/cGFnZWxlbj0xYCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgWzIwMF0sXG4gICAgICAgICAgdGhpcy5hdXRoSGVhZGVyc1xuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCByZXF1ZXN0SnNvbldpdGhBdXRoKFxuICAgICAgICAgIGAke0JJVEJVQ0tFVF9BUElfQkFTRX0vdXNlcmAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFsyMDBdLFxuICAgICAgICAgIHRoaXMuYXV0aEhlYWRlcnNcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gQml0YnVja2V0JyB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb29rdXBXb3Jrc3BhY2VNZW1iZXJBY2NvdW50SWQoZW1haWw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICAgIHBhcmFtcy5zZXQoJ3EnLCBgdXNlci5lbWFpbCBJTiAoXCIke2VtYWlsfVwiKWApXG4gICAgcGFyYW1zLnNldCgnZmllbGRzJywgJ3ZhbHVlcy51c2VyLmFjY291bnRfaWQsdmFsdWVzLnVzZXIuZW1haWwnKVxuICAgIGNvbnN0IHVybCA9IGAke0JJVEJVQ0tFVF9BUElfQkFTRX0vd29ya3NwYWNlcy8ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbmZpZy53b3Jrc3BhY2UpfS9tZW1iZXJzPyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0SnNvbldpdGhBdXRoPHsgdmFsdWVzPzogQXJyYXk8eyB1c2VyPzogeyBhY2NvdW50X2lkPzogc3RyaW5nOyBlbWFpbD86IHN0cmluZyB9IH0+IH0+KFxuICAgICAgdXJsLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9LFxuICAgICAgWzIwMF0sXG4gICAgICB0aGlzLmF1dGhIZWFkZXJzXG4gICAgKVxuICAgIGNvbnN0IGFjY291bnRJZCA9IGRhdGEudmFsdWVzPy5maW5kKCh2KSA9PiB2LnVzZXI/LmFjY291bnRfaWQpPy51c2VyPy5hY2NvdW50X2lkXG4gICAgcmV0dXJuIGFjY291bnRJZCA/PyBudWxsXG4gIH1cblxuICBhc3luYyBwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgYXBwOiBBcHAsXG4gICAgcnVsZXM6IEFwcFByb3Zpc2lvbmluZ1J1bGVbXSxcbiAgICBleGlzdGluZ0FjY291bnQ/OiBBcHBBY2NvdW50IHwgbnVsbFxuICApOiBQcm9taXNlPFByb3Zpc2lvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbWFpbCA9IGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsXG4gICAgICBpZiAoIWVtYWlsKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdFbWFpbCBpcyByZXF1aXJlZCB0byBwcm92aXNpb24gQml0YnVja2V0JyB9XG5cbiAgICAgIGNvbnN0IHByb3Zpc2lvbkRhdGEgPSBtZXJnZVByb3Zpc2lvbkRhdGEoZW1wbG95ZWUsIHJ1bGVzKVxuICAgICAgY29uc3QgaGFzR3JvdXBzID0gQm9vbGVhbihwcm92aXNpb25EYXRhLmdyb3VwcyAmJiBwcm92aXNpb25EYXRhLmdyb3Vwcy5sZW5ndGggPiAwKVxuICAgICAgY29uc3QgaGFzUmVwb3MgPSBCb29sZWFuKHByb3Zpc2lvbkRhdGEucmVwb3NpdG9yaWVzICYmIHByb3Zpc2lvbkRhdGEucmVwb3NpdG9yaWVzLmxlbmd0aCA+IDApXG4gICAgICBpZiAoIWhhc0dyb3VwcyAmJiAhaGFzUmVwb3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ05vIEJpdGJ1Y2tldCBwcm92aXNpb25pbmcgcnVsZXMgZm91bmQuIEFkZCBydWxlcyB3aXRoIGdyb3VwcyBvciByZXBvc2l0b3JpZXMgKyBwZXJtaXNzaW9ucy4nLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFjY291bnRJZCA9XG4gICAgICAgIGV4aXN0aW5nQWNjb3VudD8uZXh0ZXJuYWxVc2VySWQgfHwgKGF3YWl0IHRoaXMubG9va3VwV29ya3NwYWNlTWVtYmVyQWNjb3VudElkKGVtYWlsKSlcbiAgICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBCaXRidWNrZXQgdXNlciBub3QgZm91bmQgaW4gd29ya3NwYWNlIFwiJHt0aGlzLmNvbmZpZy53b3Jrc3BhY2V9XCIuIEludml0ZSB0aGVtIHRvIHRoZSB3b3Jrc3BhY2UgZmlyc3QsIHRoZW4gcmV0cnkuYCxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhcHBsaWVkR3JvdXBzOiBzdHJpbmdbXSA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGdyb3VwU2x1ZyBvZiBwcm92aXNpb25EYXRhLmdyb3VwcyB8fCBbXSkge1xuICAgICAgICBjb25zdCB1cmwgPSBgJHtCSVRCVUNLRVRfQVBJX0JBU0V9L3dvcmtzcGFjZXMvJHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWcud29ya3NwYWNlKX0vcGVybWlzc2lvbnMtY29uZmlnL2dyb3Vwcy8ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBncm91cFNsdWdcbiAgICAgICAgKX0vbWVtYmVycy8ke2VuY29kZVVSSUNvbXBvbmVudChhY2NvdW50SWQpfWBcbiAgICAgICAgYXdhaXQgcmVxdWVzdEpzb25XaXRoQXV0aChcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFsyMDAsIDIwNF0sXG4gICAgICAgICAgdGhpcy5hdXRoSGVhZGVyc1xuICAgICAgICApXG4gICAgICAgIGFwcGxpZWRHcm91cHMucHVzaChncm91cFNsdWcpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFwcGxpZWQ6IEFycmF5PHsgcmVwb1NsdWc6IHN0cmluZzsgcGVybWlzc2lvbjogc3RyaW5nIH0+ID0gW11cbiAgICAgIGZvciAoY29uc3QgcmVwbyBvZiBwcm92aXNpb25EYXRhLnJlcG9zaXRvcmllcyB8fCBbXSkge1xuICAgICAgICBjb25zdCB1cmwgPSBgJHtCSVRCVUNLRVRfQVBJX0JBU0V9L3JlcG9zaXRvcmllcy8ke2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbmZpZy53b3Jrc3BhY2UpfS8ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICByZXBvLnJlcG9TbHVnXG4gICAgICAgICl9L3Blcm1pc3Npb25zLWNvbmZpZy91c2Vycy8ke2VuY29kZVVSSUNvbXBvbmVudChhY2NvdW50SWQpfWBcbiAgICAgICAgYXdhaXQgcmVxdWVzdEpzb25XaXRoQXV0aChcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwZXJtaXNzaW9uOiByZXBvLnBlcm1pc3Npb24gfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbMjAwXSxcbiAgICAgICAgICB0aGlzLmF1dGhIZWFkZXJzXG4gICAgICAgIClcbiAgICAgICAgYXBwbGllZC5wdXNoKHsgcmVwb1NsdWc6IHJlcG8ucmVwb1NsdWcsIHBlcm1pc3Npb246IHJlcG8ucGVybWlzc2lvbiB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBleHRlcm5hbFVzZXJJZDogYWNjb3VudElkLFxuICAgICAgICBleHRlcm5hbEVtYWlsOiBlbWFpbCxcbiAgICAgICAgcHJvdmlzaW9uZWRSZXNvdXJjZXM6IHsgcmVwb3NpdG9yaWVzOiBhcHBsaWVkLCBncm91cHM6IGFwcGxpZWRHcm91cHMgfSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcHJvdmlzaW9uIEJpdGJ1Y2tldCBhY2Nlc3MnLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlcHJvdmlzaW9uRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIGFwcDogQXBwLFxuICAgIGFjY291bnQ6IEFwcEFjY291bnQsXG4gICAgX29wdGlvbnM/OiBEZXByb3Zpc2lvbk9wdGlvbnNcbiAgKTogUHJvbWlzZTxEZXByb3Zpc2lvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhY2NvdW50SWQgPSBhY2NvdW50LmV4dGVybmFsVXNlcklkXG4gICAgICBpZiAoIWFjY291bnRJZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gQml0YnVja2V0IHVzZXIgaWQgZm91bmQnIH1cblxuICAgICAgY29uc3QgcmVzb3VyY2VzID0gKGFjY291bnQucHJvdmlzaW9uZWRSZXNvdXJjZXMgYXMgYW55KSB8fCB7fVxuICAgICAgY29uc3QgZ3JvdXBzOiBzdHJpbmdbXSA9IHJlc291cmNlcy5ncm91cHMgfHwgW11cbiAgICAgIGNvbnN0IHJlcG9zOiBBcnJheTx7IHJlcG9TbHVnOiBzdHJpbmcgfT4gPSByZXNvdXJjZXMucmVwb3NpdG9yaWVzIHx8IFtdXG4gICAgICBpZiAoIWdyb3Vwcy5sZW5ndGggJiYgIXJlcG9zLmxlbmd0aCkgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG5cbiAgICAgIGZvciAoY29uc3QgZ3JvdXBTbHVnIG9mIGdyb3Vwcykge1xuICAgICAgICBpZiAoIWdyb3VwU2x1ZykgY29udGludWVcbiAgICAgICAgY29uc3QgdXJsID0gYCR7QklUQlVDS0VUX0FQSV9CQVNFfS93b3Jrc3BhY2VzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY29uZmlnLndvcmtzcGFjZSl9L3Blcm1pc3Npb25zLWNvbmZpZy9ncm91cHMvJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgZ3JvdXBTbHVnXG4gICAgICAgICl9L21lbWJlcnMvJHtlbmNvZGVVUklDb21wb25lbnQoYWNjb3VudElkKX1gXG4gICAgICAgIGF3YWl0IHJlcXVlc3RKc29uV2l0aEF1dGgoXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbMjA0XSxcbiAgICAgICAgICB0aGlzLmF1dGhIZWFkZXJzXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCByZXBvIG9mIHJlcG9zKSB7XG4gICAgICAgIGlmICghcmVwby5yZXBvU2x1ZykgY29udGludWVcbiAgICAgICAgY29uc3QgdXJsID0gYCR7QklUQlVDS0VUX0FQSV9CQVNFfS9yZXBvc2l0b3JpZXMvJHtlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWcud29ya3NwYWNlKX0vJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgcmVwby5yZXBvU2x1Z1xuICAgICAgICApfS9wZXJtaXNzaW9ucy1jb25maWcvdXNlcnMvJHtlbmNvZGVVUklDb21wb25lbnQoYWNjb3VudElkKX1gXG4gICAgICAgIGF3YWl0IHJlcXVlc3RKc29uV2l0aEF1dGgoXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbMjA0XSxcbiAgICAgICAgICB0aGlzLmF1dGhIZWFkZXJzXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlcHJvdmlzaW9uIEJpdGJ1Y2tldCBhY2Nlc3MnLFxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJJVEJVQ0tFVF9BUElfQkFTRSIsIkJJVEJVQ0tFVF9BUElfVjFfQkFTRSIsImJhc2ljQXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJtYXRjaGVzQ29uZGl0aW9uIiwiZW1wbG95ZWUiLCJjb25kaXRpb24iLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJlbXBsb3llZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJtZXJnZVByb3Zpc2lvbkRhdGEiLCJydWxlcyIsInJlc3VsdCIsInJlcG9zaXRvcmllcyIsImdyb3VwcyIsInNvcnRlZFJ1bGVzIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJydWxlIiwiaXNBY3RpdmUiLCJkYXRhIiwicHJvdmlzaW9uRGF0YSIsImxlbmd0aCIsIkFycmF5IiwiU2V0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImJ5UmVwbyIsIk1hcCIsInJhbmsiLCJyZWFkIiwid3JpdGUiLCJhZG1pbiIsInIiLCJyZXBvU2x1ZyIsInByZXYiLCJnZXQiLCJwZXJtaXNzaW9uIiwic2V0IiwidmFsdWVzIiwicmVxdWVzdEpzb25XaXRoQXV0aCIsInVybCIsImluaXQiLCJleHBlY3RlZE9rIiwiYXV0aEhlYWRlcnMiLCJFcnJvciIsImxhc3RFcnJvciIsImF1dGhIZWFkZXIiLCJyZXMiLCJmZXRjaCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJqc29uIiwidGV4dCIsImNhdGNoIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwicmVxdWVzdFBhZ2luYXRlZFdpdGhBdXRoIiwibWF4UGFnZXMiLCJpdGVtcyIsIm5leHRVcmwiLCJwYWdlIiwiaXNBcnJheSIsInB1c2giLCJuZXh0IiwiQml0YnVja2V0Q29ubmVjdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJhcGlUb2tlbiIsImFwcFBhc3N3b3JkIiwibGlzdEdyb3VwcyIsImVuY29kZVVSSUNvbXBvbmVudCIsIndvcmtzcGFjZSIsIm1ldGhvZCIsIkFjY2VwdCIsImdyb3VwIiwic2x1ZyIsIm1hcCIsIm5hbWUiLCJsaXN0UmVwb3NpdG9yaWVzIiwicmVwbyIsInRlc3RDb25uZWN0aW9uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJsb29rdXBXb3Jrc3BhY2VNZW1iZXJBY2NvdW50SWQiLCJlbWFpbCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImFjY291bnRJZCIsImZpbmQiLCJ2IiwidXNlciIsImFjY291bnRfaWQiLCJwcm92aXNpb25FbXBsb3llZSIsImFwcCIsImV4aXN0aW5nQWNjb3VudCIsIndvcmtFbWFpbCIsInBlcnNvbmFsRW1haWwiLCJoYXNHcm91cHMiLCJoYXNSZXBvcyIsImV4dGVybmFsVXNlcklkIiwiYXBwbGllZEdyb3VwcyIsImdyb3VwU2x1ZyIsImFwcGxpZWQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImV4dGVybmFsRW1haWwiLCJwcm92aXNpb25lZFJlc291cmNlcyIsImRlcHJvdmlzaW9uRW1wbG95ZWUiLCJhY2NvdW50IiwiX29wdGlvbnMiLCJyZXNvdXJjZXMiLCJyZXBvcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/bitbucket.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/docusign.ts":
/*!******************************************!*\
  !*** ./src/lib/integrations/docusign.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocuSignConnector: () => (/* binding */ DocuSignConnector),\n/* harmony export */   createDocuSignConnector: () => (/* binding */ createDocuSignConnector),\n/* harmony export */   verifyDocuSignWebhook: () => (/* binding */ verifyDocuSignWebhook)\n/* harmony export */ });\n// DocuSign Integration (Placeholder)\n// The docusign-esign SDK has import issues with Next.js\n// Configure DOCUSIGN_* env vars and install a working SDK version to enable\nclass DocuSignConnector {\n    constructor(config){\n        this.config = config;\n    }\n    async testConnection() {\n        // Placeholder - DocuSign SDK not configured\n        return {\n            success: false,\n            error: \"DocuSign integration not configured. Set DOCUSIGN_* environment variables.\"\n        };\n    }\n    async sendEnvelope(params) {\n        throw new Error(\"DocuSign integration not configured\");\n    }\n    async getSigningUrl(envelopeId, signerEmail, signerName, returnUrl) {\n        throw new Error(\"DocuSign integration not configured\");\n    }\n    async getEnvelopeStatus(envelopeId) {\n        throw new Error(\"DocuSign integration not configured\");\n    }\n    async getSignedDocument(envelopeId) {\n        throw new Error(\"DocuSign integration not configured\");\n    }\n    async voidEnvelope(envelopeId, reason) {\n        throw new Error(\"DocuSign integration not configured\");\n    }\n}\nfunction createDocuSignConnector() {\n    const integrationKey = process.env.DOCUSIGN_INTEGRATION_KEY;\n    const userId = process.env.DOCUSIGN_USER_ID;\n    const accountId = process.env.DOCUSIGN_ACCOUNT_ID;\n    const basePath = process.env.DOCUSIGN_BASE_PATH || \"https://demo.docusign.net/restapi\";\n    const privateKey = process.env.DOCUSIGN_PRIVATE_KEY;\n    if (!integrationKey || !userId || !accountId || !privateKey) {\n        // DocuSign not configured - this is fine, offers can still be sent via email\n        return null;\n    }\n    return new DocuSignConnector({\n        integrationKey,\n        userId,\n        accountId,\n        basePath,\n        privateKey: privateKey.replace(/\\\\n/g, \"\\n\")\n    });\n}\nfunction verifyDocuSignWebhook(payload, signature, secret) {\n    const crypto = __webpack_require__(/*! crypto */ \"crypto\");\n    const hmac = crypto.createHmac(\"sha256\", secret);\n    hmac.update(payload);\n    const expectedSignature = hmac.digest(\"base64\");\n    return signature === expectedSignature;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy9kb2N1c2lnbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxxQ0FBcUM7QUFDckMsd0RBQXdEO0FBQ3hELDRFQUE0RTtBQXdCckUsTUFBTUE7SUFHWEMsWUFBWUMsTUFBc0IsQ0FBRTtRQUNsQyxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDaEI7SUFFQSxNQUFNQyxpQkFBZ0U7UUFDcEUsNENBQTRDO1FBQzVDLE9BQU87WUFDTEMsU0FBUztZQUNUQyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE1BQU1DLGFBQWFDLE1BQTBCLEVBQTJCO1FBQ3RFLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE1BQU1DLGNBQWNDLFVBQWtCLEVBQUVDLFdBQW1CLEVBQUVDLFVBQWtCLEVBQUVDLFNBQWlCLEVBQW1CO1FBQ25ILE1BQU0sSUFBSUwsTUFBTTtJQUNsQjtJQUVBLE1BQU1NLGtCQUFrQkosVUFBa0IsRUFBbUQ7UUFDM0YsTUFBTSxJQUFJRixNQUFNO0lBQ2xCO0lBRUEsTUFBTU8sa0JBQWtCTCxVQUFrQixFQUFtQjtRQUMzRCxNQUFNLElBQUlGLE1BQU07SUFDbEI7SUFFQSxNQUFNUSxhQUFhTixVQUFrQixFQUFFTyxNQUFjLEVBQWlCO1FBQ3BFLE1BQU0sSUFBSVQsTUFBTTtJQUNsQjtBQUNGO0FBRU8sU0FBU1U7SUFDZCxNQUFNQyxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCO0lBQzNELE1BQU1DLFNBQVNILFFBQVFDLEdBQUcsQ0FBQ0csZ0JBQWdCO0lBQzNDLE1BQU1DLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQ0ssbUJBQW1CO0lBQ2pELE1BQU1DLFdBQVdQLFFBQVFDLEdBQUcsQ0FBQ08sa0JBQWtCLElBQUk7SUFDbkQsTUFBTUMsYUFBYVQsUUFBUUMsR0FBRyxDQUFDUyxvQkFBb0I7SUFFbkQsSUFBSSxDQUFDWCxrQkFBa0IsQ0FBQ0ksVUFBVSxDQUFDRSxhQUFhLENBQUNJLFlBQVk7UUFDM0QsNkVBQTZFO1FBQzdFLE9BQU87SUFDVDtJQUVBLE9BQU8sSUFBSTdCLGtCQUFrQjtRQUMzQm1CO1FBQ0FJO1FBQ0FFO1FBQ0FFO1FBQ0FFLFlBQVlBLFdBQVdFLE9BQU8sQ0FBQyxRQUFRO0lBQ3pDO0FBQ0Y7QUFFTyxTQUFTQyxzQkFDZEMsT0FBZSxFQUNmQyxTQUFpQixFQUNqQkMsTUFBYztJQUVkLE1BQU1DLFNBQVNDLG1CQUFPQSxDQUFDO0lBQ3ZCLE1BQU1DLE9BQU9GLE9BQU9HLFVBQVUsQ0FBQyxVQUFVSjtJQUN6Q0csS0FBS0UsTUFBTSxDQUFDUDtJQUNaLE1BQU1RLG9CQUFvQkgsS0FBS0ksTUFBTSxDQUFDO0lBQ3RDLE9BQU9SLGNBQWNPO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2ludGVncmF0aW9ucy9kb2N1c2lnbi50cz9kM2JjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERvY3VTaWduIEludGVncmF0aW9uIChQbGFjZWhvbGRlcilcbi8vIFRoZSBkb2N1c2lnbi1lc2lnbiBTREsgaGFzIGltcG9ydCBpc3N1ZXMgd2l0aCBOZXh0LmpzXG4vLyBDb25maWd1cmUgRE9DVVNJR05fKiBlbnYgdmFycyBhbmQgaW5zdGFsbCBhIHdvcmtpbmcgU0RLIHZlcnNpb24gdG8gZW5hYmxlXG5cbmludGVyZmFjZSBEb2N1U2lnbkNvbmZpZyB7XG4gIGludGVncmF0aW9uS2V5OiBzdHJpbmdcbiAgdXNlcklkOiBzdHJpbmdcbiAgYWNjb3VudElkOiBzdHJpbmdcbiAgYmFzZVBhdGg6IHN0cmluZ1xuICBwcml2YXRlS2V5OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFNlbmRFbnZlbG9wZVBhcmFtcyB7XG4gIHNpZ25lckVtYWlsOiBzdHJpbmdcbiAgc2lnbmVyTmFtZTogc3RyaW5nXG4gIHN1YmplY3Q6IHN0cmluZ1xuICBkb2N1bWVudEh0bWw6IHN0cmluZ1xuICBjYWxsYmFja1VybD86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgRW52ZWxvcGVSZXN1bHQge1xuICBlbnZlbG9wZUlkOiBzdHJpbmdcbiAgc3RhdHVzOiBzdHJpbmdcbiAgc2lnbmluZ1VybD86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgRG9jdVNpZ25Db25uZWN0b3Ige1xuICBwcml2YXRlIGNvbmZpZzogRG9jdVNpZ25Db25maWdcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IERvY3VTaWduQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgfVxuXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgLy8gUGxhY2Vob2xkZXIgLSBEb2N1U2lnbiBTREsgbm90IGNvbmZpZ3VyZWRcbiAgICByZXR1cm4geyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIGVycm9yOiAnRG9jdVNpZ24gaW50ZWdyYXRpb24gbm90IGNvbmZpZ3VyZWQuIFNldCBET0NVU0lHTl8qIGVudmlyb25tZW50IHZhcmlhYmxlcy4nIFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbmRFbnZlbG9wZShwYXJhbXM6IFNlbmRFbnZlbG9wZVBhcmFtcyk6IFByb21pc2U8RW52ZWxvcGVSZXN1bHQ+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RvY3VTaWduIGludGVncmF0aW9uIG5vdCBjb25maWd1cmVkJylcbiAgfVxuXG4gIGFzeW5jIGdldFNpZ25pbmdVcmwoZW52ZWxvcGVJZDogc3RyaW5nLCBzaWduZXJFbWFpbDogc3RyaW5nLCBzaWduZXJOYW1lOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RvY3VTaWduIGludGVncmF0aW9uIG5vdCBjb25maWd1cmVkJylcbiAgfVxuXG4gIGFzeW5jIGdldEVudmVsb3BlU3RhdHVzKGVudmVsb3BlSWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZzsgY29tcGxldGVkQXQ/OiBEYXRlIH0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RvY3VTaWduIGludGVncmF0aW9uIG5vdCBjb25maWd1cmVkJylcbiAgfVxuXG4gIGFzeW5jIGdldFNpZ25lZERvY3VtZW50KGVudmVsb3BlSWQ6IHN0cmluZyk6IFByb21pc2U8QnVmZmVyPiB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEb2N1U2lnbiBpbnRlZ3JhdGlvbiBub3QgY29uZmlndXJlZCcpXG4gIH1cblxuICBhc3luYyB2b2lkRW52ZWxvcGUoZW52ZWxvcGVJZDogc3RyaW5nLCByZWFzb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignRG9jdVNpZ24gaW50ZWdyYXRpb24gbm90IGNvbmZpZ3VyZWQnKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpOiBEb2N1U2lnbkNvbm5lY3RvciB8IG51bGwge1xuICBjb25zdCBpbnRlZ3JhdGlvbktleSA9IHByb2Nlc3MuZW52LkRPQ1VTSUdOX0lOVEVHUkFUSU9OX0tFWVxuICBjb25zdCB1c2VySWQgPSBwcm9jZXNzLmVudi5ET0NVU0lHTl9VU0VSX0lEXG4gIGNvbnN0IGFjY291bnRJZCA9IHByb2Nlc3MuZW52LkRPQ1VTSUdOX0FDQ09VTlRfSURcbiAgY29uc3QgYmFzZVBhdGggPSBwcm9jZXNzLmVudi5ET0NVU0lHTl9CQVNFX1BBVEggfHwgJ2h0dHBzOi8vZGVtby5kb2N1c2lnbi5uZXQvcmVzdGFwaSdcbiAgY29uc3QgcHJpdmF0ZUtleSA9IHByb2Nlc3MuZW52LkRPQ1VTSUdOX1BSSVZBVEVfS0VZXG5cbiAgaWYgKCFpbnRlZ3JhdGlvbktleSB8fCAhdXNlcklkIHx8ICFhY2NvdW50SWQgfHwgIXByaXZhdGVLZXkpIHtcbiAgICAvLyBEb2N1U2lnbiBub3QgY29uZmlndXJlZCAtIHRoaXMgaXMgZmluZSwgb2ZmZXJzIGNhbiBzdGlsbCBiZSBzZW50IHZpYSBlbWFpbFxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gbmV3IERvY3VTaWduQ29ubmVjdG9yKHtcbiAgICBpbnRlZ3JhdGlvbktleSxcbiAgICB1c2VySWQsXG4gICAgYWNjb3VudElkLFxuICAgIGJhc2VQYXRoLFxuICAgIHByaXZhdGVLZXk6IHByaXZhdGVLZXkucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5RG9jdVNpZ25XZWJob29rKFxuICBwYXlsb2FkOiBzdHJpbmcsXG4gIHNpZ25hdHVyZTogc3RyaW5nLFxuICBzZWNyZXQ6IHN0cmluZ1xuKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpXG4gIGNvbnN0IGhtYWMgPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2Jywgc2VjcmV0KVxuICBobWFjLnVwZGF0ZShwYXlsb2FkKVxuICBjb25zdCBleHBlY3RlZFNpZ25hdHVyZSA9IGhtYWMuZGlnZXN0KCdiYXNlNjQnKVxuICByZXR1cm4gc2lnbmF0dXJlID09PSBleHBlY3RlZFNpZ25hdHVyZVxufVxuIl0sIm5hbWVzIjpbIkRvY3VTaWduQ29ubmVjdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJ0ZXN0Q29ubmVjdGlvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInNlbmRFbnZlbG9wZSIsInBhcmFtcyIsIkVycm9yIiwiZ2V0U2lnbmluZ1VybCIsImVudmVsb3BlSWQiLCJzaWduZXJFbWFpbCIsInNpZ25lck5hbWUiLCJyZXR1cm5VcmwiLCJnZXRFbnZlbG9wZVN0YXR1cyIsImdldFNpZ25lZERvY3VtZW50Iiwidm9pZEVudmVsb3BlIiwicmVhc29uIiwiY3JlYXRlRG9jdVNpZ25Db25uZWN0b3IiLCJpbnRlZ3JhdGlvbktleSIsInByb2Nlc3MiLCJlbnYiLCJET0NVU0lHTl9JTlRFR1JBVElPTl9LRVkiLCJ1c2VySWQiLCJET0NVU0lHTl9VU0VSX0lEIiwiYWNjb3VudElkIiwiRE9DVVNJR05fQUNDT1VOVF9JRCIsImJhc2VQYXRoIiwiRE9DVVNJR05fQkFTRV9QQVRIIiwicHJpdmF0ZUtleSIsIkRPQ1VTSUdOX1BSSVZBVEVfS0VZIiwicmVwbGFjZSIsInZlcmlmeURvY3VTaWduV2ViaG9vayIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJzZWNyZXQiLCJjcnlwdG8iLCJyZXF1aXJlIiwiaG1hYyIsImNyZWF0ZUhtYWMiLCJ1cGRhdGUiLCJleHBlY3RlZFNpZ25hdHVyZSIsImRpZ2VzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/docusign.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/google-workspace.ts":
/*!**************************************************!*\
  !*** ./src/lib/integrations/google-workspace.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleWorkspaceConnector: () => (/* binding */ GoogleWorkspaceConnector),\n/* harmony export */   createGoogleWorkspaceConnector: () => (/* binding */ createGoogleWorkspaceConnector)\n/* harmony export */ });\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! googleapis */ \"(rsc)/./node_modules/googleapis/build/src/index.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n\n\n\n\nclass GoogleWorkspaceConnector {\n    constructor(config){\n        this.admin = null;\n        this.dataTransfer = null;\n        this.auth = null;\n        this.config = config;\n    }\n    async getAdminClient() {\n        if (this.admin) return this.admin;\n        const serviceAccount = JSON.parse(this.config.serviceAccountKey);\n        if (!this.auth) {\n            this.auth = new googleapis__WEBPACK_IMPORTED_MODULE_3__.google.auth.JWT({\n                email: serviceAccount.client_email,\n                key: serviceAccount.private_key,\n                scopes: [\n                    \"https://www.googleapis.com/auth/admin.directory.user\",\n                    \"https://www.googleapis.com/auth/admin.directory.group\",\n                    \"https://www.googleapis.com/auth/admin.datatransfer\"\n                ],\n                subject: this.config.adminEmail\n            });\n        }\n        this.admin = googleapis__WEBPACK_IMPORTED_MODULE_3__.google.admin({\n            version: \"directory_v1\",\n            auth: this.auth\n        });\n        return this.admin;\n    }\n    async getDataTransferClient() {\n        if (this.dataTransfer) return this.dataTransfer;\n        await this.getAdminClient();\n        this.dataTransfer = googleapis__WEBPACK_IMPORTED_MODULE_3__.google.admin({\n            version: \"datatransfer_v1\",\n            auth: this.auth\n        });\n        return this.dataTransfer;\n    }\n    async testConnection() {\n        try {\n            const admin = await this.getAdminClient();\n            // Try to list users (limited to 1)\n            await admin.users.list({\n                domain: this.config.domain,\n                maxResults: 1\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to Google Workspace\"\n            };\n        }\n    }\n    async listGroups() {\n        const admin = await this.getAdminClient();\n        const groups = [];\n        let pageToken;\n        do {\n            const response = await admin.groups.list({\n                domain: this.config.domain,\n                maxResults: 200,\n                pageToken\n            });\n            const batch = response.data.groups || [];\n            for (const group of batch){\n                if (!group.email) continue;\n                groups.push({\n                    email: group.email,\n                    name: group.name || group.email\n                });\n            }\n            pageToken = response.data.nextPageToken || undefined;\n        }while (pageToken);\n        return groups;\n    }\n    async listUsers() {\n        const admin = await this.getAdminClient();\n        const users = [];\n        let pageToken;\n        do {\n            const response = await admin.users.list({\n                domain: this.config.domain,\n                maxResults: 200,\n                pageToken,\n                orderBy: \"email\"\n            });\n            const batch = response.data.users || [];\n            for (const user of batch){\n                if (!user.primaryEmail) continue;\n                const fullName = user.name?.fullName || user.primaryEmail;\n                users.push({\n                    email: user.primaryEmail,\n                    name: fullName\n                });\n            }\n            pageToken = response.data.nextPageToken || undefined;\n        }while (pageToken);\n        return users;\n    }\n    matchesCondition(employee, condition) {\n        for (const [key, value] of Object.entries(condition)){\n            if (value === undefined || value === null) continue;\n            const employeeValue = employee[key];\n            if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n                // Case-insensitive match\n                if (employeeValue.toLowerCase() !== value.toLowerCase()) {\n                    return false;\n                }\n            } else if (employeeValue !== value) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getProvisionDataForEmployee(employee, rules) {\n        const result = {\n            groups: []\n        };\n        // Sort rules by priority (higher priority first)\n        const sortedRules = [\n            ...rules\n        ].sort((a, b)=>b.priority - a.priority);\n        for (const rule of sortedRules){\n            if (!rule.isActive) continue;\n            const condition = rule.condition;\n            if (this.matchesCondition(employee, condition)) {\n                const data = rule.provisionData;\n                if (data.orgUnitPath && !result.orgUnitPath) {\n                    result.orgUnitPath = data.orgUnitPath;\n                }\n                if (data.groups) {\n                    result.groups = [\n                        ...result.groups || [],\n                        ...data.groups\n                    ];\n                }\n            }\n        }\n        // Dedupe groups\n        result.groups = [\n            ...new Set(result.groups)\n        ];\n        return result;\n    }\n    async provisionEmployee(employee, app, rules, existingAccount) {\n        try {\n            const admin = await this.getAdminClient();\n            const provisionData = this.getProvisionDataForEmployee(employee, rules);\n            // Generate work email if not exists\n            const workEmail = employee.workEmail || (0,_lib_utils__WEBPACK_IMPORTED_MODULE_0__.generateWorkEmail)(employee.fullName, this.config.domain);\n            const tempPassword = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_0__.generateTemporaryPassword)();\n            // Split name\n            const nameParts = employee.fullName.trim().split(/\\s+/);\n            const givenName = nameParts[0];\n            const familyName = nameParts.slice(1).join(\" \") || nameParts[0];\n            let externalUserId;\n            // Check if user already exists (e.g., reactivating)\n            if (existingAccount?.externalUserId) {\n                try {\n                    // Try to reactivate existing user\n                    await admin.users.update({\n                        userKey: existingAccount.externalUserId,\n                        requestBody: {\n                            suspended: false\n                        }\n                    });\n                    externalUserId = existingAccount.externalUserId;\n                } catch  {\n                    // User doesn't exist, create new\n                    externalUserId = await this.createUser(admin, {\n                        workEmail,\n                        givenName,\n                        familyName,\n                        tempPassword,\n                        orgUnitPath: provisionData.orgUnitPath\n                    });\n                }\n            } else {\n                // Check if user exists by email\n                try {\n                    const existingUser = await admin.users.get({\n                        userKey: workEmail\n                    });\n                    if (existingUser.data.id) {\n                        // Reactivate if suspended\n                        if (existingUser.data.suspended) {\n                            await admin.users.update({\n                                userKey: workEmail,\n                                requestBody: {\n                                    suspended: false\n                                }\n                            });\n                        }\n                        externalUserId = existingUser.data.id;\n                    } else {\n                        throw new Error(\"User not found\");\n                    }\n                } catch  {\n                    // Create new user\n                    externalUserId = await this.createUser(admin, {\n                        workEmail,\n                        givenName,\n                        familyName,\n                        tempPassword,\n                        orgUnitPath: provisionData.orgUnitPath\n                    });\n                    // Send credentials email\n                    await (0,_lib_email__WEBPACK_IMPORTED_MODULE_1__.sendAccountCredentialsEmail)({\n                        employeeEmail: employee.personalEmail,\n                        employeeName: employee.fullName,\n                        workEmail,\n                        temporaryPassword: tempPassword,\n                        companyName: await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_2__.getOrganizationName)()\n                    });\n                }\n            }\n            // Add to groups\n            const addedGroups = [];\n            for (const groupEmail of provisionData.groups || []){\n                try {\n                    await admin.members.insert({\n                        groupKey: groupEmail,\n                        requestBody: {\n                            email: workEmail,\n                            role: \"MEMBER\"\n                        }\n                    });\n                    addedGroups.push(groupEmail);\n                } catch (error) {\n                    // Group might not exist or user already member - log but don't fail\n                    console.warn(`Failed to add user to group ${groupEmail}:`, error);\n                }\n            }\n            return {\n                success: true,\n                externalUserId,\n                externalEmail: workEmail,\n                provisionedResources: {\n                    orgUnitPath: provisionData.orgUnitPath,\n                    groups: addedGroups\n                }\n            };\n        } catch (error) {\n            console.error(\"Google Workspace provisioning error:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to provision Google Workspace account\"\n            };\n        }\n    }\n    async createUser(admin, params) {\n        const response = await admin.users.insert({\n            requestBody: {\n                primaryEmail: params.workEmail,\n                name: {\n                    givenName: params.givenName,\n                    familyName: params.familyName\n                },\n                password: params.tempPassword,\n                changePasswordAtNextLogin: true,\n                orgUnitPath: params.orgUnitPath || \"/\"\n            }\n        });\n        if (!response.data.id) {\n            throw new Error(\"Failed to create user - no ID returned\");\n        }\n        return response.data.id;\n    }\n    async deprovisionEmployee(employee, app, account, options) {\n        try {\n            const admin = await this.getAdminClient();\n            const userKey = account.externalUserId || account.externalEmail || employee.workEmail;\n            if (!userKey) {\n                return {\n                    success: false,\n                    error: \"No external user ID or email found\"\n                };\n            }\n            const deleteAccount = Boolean(options?.deleteAccount);\n            const transferToEmail = options?.transferToEmail?.trim();\n            const transferApps = options?.transferApps?.length ? options.transferApps : [\n                \"drive\"\n            ];\n            const aliasToEmail = options?.aliasToEmail?.trim();\n            const aliasEmail = account.externalEmail || employee.workEmail;\n            if (aliasToEmail && !deleteAccount) {\n                return {\n                    success: false,\n                    error: \"Email alias mapping requires deleting the Google account.\"\n                };\n            }\n            if (aliasToEmail && !aliasEmail) {\n                return {\n                    success: false,\n                    error: \"No source email available for alias mapping.\"\n                };\n            }\n            if (transferToEmail) {\n                await this.transferDataOwnership(userKey, transferToEmail, transferApps);\n            }\n            if (deleteAccount) {\n                await admin.users.delete({\n                    userKey\n                });\n                if (aliasToEmail && aliasEmail) {\n                    await admin.users.aliases.insert({\n                        userKey: aliasToEmail,\n                        requestBody: {\n                            alias: aliasEmail\n                        }\n                    });\n                }\n            } else {\n                // Suspend user (don't delete - preserves data)\n                await admin.users.update({\n                    userKey,\n                    requestBody: {\n                        suspended: true\n                    }\n                });\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Google Workspace deprovisioning error:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to deprovision Google Workspace account\"\n            };\n        }\n    }\n    async transferDataOwnership(oldOwner, newOwner, apps) {\n        const dataTransfer = await this.getDataTransferClient();\n        const response = await dataTransfer.applications.list({\n            customerId: \"my_customer\"\n        });\n        const availableApps = response.data.applications || [];\n        const applicationDataTransfers = apps.map((appName)=>{\n            const match = availableApps.find((app)=>(app.name || \"\").toLowerCase().includes(appName.toLowerCase()));\n            if (!match?.id) {\n                console.warn(`Google Workspace transfer app not found: ${appName}`);\n                return null;\n            }\n            return {\n                applicationId: match.id\n            };\n        }).filter(Boolean);\n        if (!applicationDataTransfers.length) {\n            throw new Error(\"No valid Google apps selected for data transfer.\");\n        }\n        await dataTransfer.transfers.insert({\n            requestBody: {\n                oldOwnerUserId: oldOwner,\n                newOwnerUserId: newOwner,\n                applicationDataTransfers\n            }\n        });\n    }\n}\nfunction createGoogleWorkspaceConnector() {\n    const domain = process.env.GOOGLE_WORKSPACE_DOMAIN;\n    const adminEmail = process.env.GOOGLE_WORKSPACE_ADMIN_EMAIL;\n    const serviceAccountKey = process.env.GOOGLE_SERVICE_ACCOUNT_KEY;\n    if (!domain || !adminEmail || !serviceAccountKey) {\n        console.warn(\"Google Workspace integration not configured\");\n        return null;\n    }\n    return new GoogleWorkspaceConnector({\n        domain,\n        adminEmail,\n        serviceAccountKey\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy9nb29nbGUtd29ya3NwYWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4RTtBQUVKO0FBQ2pCO0FBQ0Q7QUFXakQsTUFBTUs7SUFNWEMsWUFBWUMsTUFBNkIsQ0FBRTthQUpuQ0MsUUFBeUM7YUFDekNDLGVBQW1EO2FBQ25EQyxPQUFvRDtRQUcxRCxJQUFJLENBQUNILE1BQU0sR0FBR0E7SUFDaEI7SUFFQSxNQUFjSSxpQkFBb0Q7UUFDaEUsSUFBSSxJQUFJLENBQUNILEtBQUssRUFBRSxPQUFPLElBQUksQ0FBQ0EsS0FBSztRQUVqQyxNQUFNSSxpQkFBaUJDLEtBQUtDLEtBQUssQ0FBQyxJQUFJLENBQUNQLE1BQU0sQ0FBQ1EsaUJBQWlCO1FBRS9ELElBQUksQ0FBQyxJQUFJLENBQUNMLElBQUksRUFBRTtZQUNkLElBQUksQ0FBQ0EsSUFBSSxHQUFHLElBQUlWLDhDQUFNQSxDQUFDVSxJQUFJLENBQUNNLEdBQUcsQ0FBQztnQkFDOUJDLE9BQU9MLGVBQWVNLFlBQVk7Z0JBQ2xDQyxLQUFLUCxlQUFlUSxXQUFXO2dCQUMvQkMsUUFBUTtvQkFDTjtvQkFDQTtvQkFDQTtpQkFDRDtnQkFDREMsU0FBUyxJQUFJLENBQUNmLE1BQU0sQ0FBQ2dCLFVBQVU7WUFDakM7UUFDRjtRQUVBLElBQUksQ0FBQ2YsS0FBSyxHQUFHUiw4Q0FBTUEsQ0FBQ1EsS0FBSyxDQUFDO1lBQUVnQixTQUFTO1lBQWdCZCxNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUFDO1FBQ3JFLE9BQU8sSUFBSSxDQUFDRixLQUFLO0lBQ25CO0lBRUEsTUFBY2lCLHdCQUE4RDtRQUMxRSxJQUFJLElBQUksQ0FBQ2hCLFlBQVksRUFBRSxPQUFPLElBQUksQ0FBQ0EsWUFBWTtRQUMvQyxNQUFNLElBQUksQ0FBQ0UsY0FBYztRQUN6QixJQUFJLENBQUNGLFlBQVksR0FBR1QsOENBQU1BLENBQUNRLEtBQUssQ0FBQztZQUFFZ0IsU0FBUztZQUFtQmQsTUFB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Y2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvaW50ZWdyYXRpb25zL2dvb2dsZS13b3Jrc3BhY2UudHM/MmI5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnb29nbGUsIGFkbWluX2RpcmVjdG9yeV92MSwgYWRtaW5fZGF0YXRyYW5zZmVyX3YxIH0gZnJvbSAnZ29vZ2xlYXBpcydcbmltcG9ydCB0eXBlIHsgRW1wbG95ZWUsIEFwcCwgQXBwQWNjb3VudCwgQXBwUHJvdmlzaW9uaW5nUnVsZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHsgZ2VuZXJhdGVXb3JrRW1haWwsIGdlbmVyYXRlVGVtcG9yYXJ5UGFzc3dvcmQgfSBmcm9tICdAL2xpYi91dGlscydcbmltcG9ydCB7IHNlbmRBY2NvdW50Q3JlZGVudGlhbHNFbWFpbCB9IGZyb20gJ0AvbGliL2VtYWlsJ1xuaW1wb3J0IHsgZ2V0T3JnYW5pemF0aW9uTmFtZSB9IGZyb20gJ0AvbGliL29yZ2FuaXphdGlvbidcbmltcG9ydCB0eXBlIHtcbiAgSW50ZWdyYXRpb25Db25uZWN0b3IsXG4gIFByb3Zpc2lvblJlc3VsdCxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgR29vZ2xlV29ya3NwYWNlQ29uZmlnLFxuICBHb29nbGVQcm92aXNpb25EYXRhLFxuICBQcm92aXNpb25pbmdDb25kaXRpb24sXG59IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCBjbGFzcyBHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3IgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbkNvbm5lY3RvciB7XG4gIHByaXZhdGUgY29uZmlnOiBHb29nbGVXb3Jrc3BhY2VDb25maWdcbiAgcHJpdmF0ZSBhZG1pbjogYWRtaW5fZGlyZWN0b3J5X3YxLkFkbWluIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBkYXRhVHJhbnNmZXI6IGFkbWluX2RhdGF0cmFuc2Zlcl92MS5BZG1pbiB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgYXV0aDogSW5zdGFuY2VUeXBlPHR5cGVvZiBnb29nbGUuYXV0aC5KV1Q+IHwgbnVsbCA9IG51bGxcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEdvb2dsZVdvcmtzcGFjZUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldEFkbWluQ2xpZW50KCk6IFByb21pc2U8YWRtaW5fZGlyZWN0b3J5X3YxLkFkbWluPiB7XG4gICAgaWYgKHRoaXMuYWRtaW4pIHJldHVybiB0aGlzLmFkbWluXG5cbiAgICBjb25zdCBzZXJ2aWNlQWNjb3VudCA9IEpTT04ucGFyc2UodGhpcy5jb25maWcuc2VydmljZUFjY291bnRLZXkpXG4gICAgXG4gICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgIHRoaXMuYXV0aCA9IG5ldyBnb29nbGUuYXV0aC5KV1Qoe1xuICAgICAgICBlbWFpbDogc2VydmljZUFjY291bnQuY2xpZW50X2VtYWlsLFxuICAgICAgICBrZXk6IHNlcnZpY2VBY2NvdW50LnByaXZhdGVfa2V5LFxuICAgICAgICBzY29wZXM6IFtcbiAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9hZG1pbi5kaXJlY3RvcnkudXNlcicsXG4gICAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvYWRtaW4uZGlyZWN0b3J5Lmdyb3VwJyxcbiAgICAgICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9hZG1pbi5kYXRhdHJhbnNmZXInLFxuICAgICAgICBdLFxuICAgICAgICBzdWJqZWN0OiB0aGlzLmNvbmZpZy5hZG1pbkVtYWlsLCAvLyBJbXBlcnNvbmF0ZSBhZG1pblxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLmFkbWluID0gZ29vZ2xlLmFkbWluKHsgdmVyc2lvbjogJ2RpcmVjdG9yeV92MScsIGF1dGg6IHRoaXMuYXV0aCB9KVxuICAgIHJldHVybiB0aGlzLmFkbWluXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldERhdGFUcmFuc2ZlckNsaWVudCgpOiBQcm9taXNlPGFkbWluX2RhdGF0cmFuc2Zlcl92MS5BZG1pbj4ge1xuICAgIGlmICh0aGlzLmRhdGFUcmFuc2ZlcikgcmV0dXJuIHRoaXMuZGF0YVRyYW5zZmVyXG4gICAgYXdhaXQgdGhpcy5nZXRBZG1pbkNsaWVudCgpXG4gICAgdGhpcy5kYXRhVHJhbnNmZXIgPSBnb29nbGUuYWRtaW4oeyB2ZXJzaW9uOiAnZGF0YXRyYW5zZmVyX3YxJywgYXV0aDogdGhpcy5hdXRoISB9KVxuICAgIHJldHVybiB0aGlzLmRhdGFUcmFuc2ZlclxuICB9XG5cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWRtaW4gPSBhd2FpdCB0aGlzLmdldEFkbWluQ2xpZW50KClcbiAgICAgIC8vIFRyeSB0byBsaXN0IHVzZXJzIChsaW1pdGVkIHRvIDEpXG4gICAgICBhd2FpdCBhZG1pbi51c2Vycy5saXN0KHtcbiAgICAgICAgZG9tYWluOiB0aGlzLmNvbmZpZy5kb21haW4sXG4gICAgICAgIG1heFJlc3VsdHM6IDEsXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gR29vZ2xlIFdvcmtzcGFjZScsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbGlzdEdyb3VwcygpOiBQcm9taXNlPEFycmF5PHsgZW1haWw6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PiB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCB0aGlzLmdldEFkbWluQ2xpZW50KClcbiAgICBjb25zdCBncm91cHM6IEFycmF5PHsgZW1haWw6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+ID0gW11cbiAgICBsZXQgcGFnZVRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWRcblxuICAgIGRvIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW4uZ3JvdXBzLmxpc3Qoe1xuICAgICAgICBkb21haW46IHRoaXMuY29uZmlnLmRvbWFpbixcbiAgICAgICAgbWF4UmVzdWx0czogMjAwLFxuICAgICAgICBwYWdlVG9rZW4sXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBiYXRjaCA9IHJlc3BvbnNlLmRhdGEuZ3JvdXBzIHx8IFtdXG4gICAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIGJhdGNoKSB7XG4gICAgICAgIGlmICghZ3JvdXAuZW1haWwpIGNvbnRpbnVlXG4gICAgICAgIGdyb3Vwcy5wdXNoKHtcbiAgICAgICAgICBlbWFpbDogZ3JvdXAuZW1haWwsXG4gICAgICAgICAgbmFtZTogZ3JvdXAubmFtZSB8fCBncm91cC5lbWFpbCxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcGFnZVRva2VuID0gcmVzcG9uc2UuZGF0YS5uZXh0UGFnZVRva2VuIHx8IHVuZGVmaW5lZFxuICAgIH0gd2hpbGUgKHBhZ2VUb2tlbilcblxuICAgIHJldHVybiBncm91cHNcbiAgfVxuXG4gIGFzeW5jIGxpc3RVc2VycygpOiBQcm9taXNlPEFycmF5PHsgZW1haWw6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+PiB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCB0aGlzLmdldEFkbWluQ2xpZW50KClcbiAgICBjb25zdCB1c2VyczogQXJyYXk8eyBlbWFpbDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4gPSBbXVxuICAgIGxldCBwYWdlVG9rZW46IHN0cmluZyB8IHVuZGVmaW5lZFxuXG4gICAgZG8ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbi51c2Vycy5saXN0KHtcbiAgICAgICAgZG9tYWluOiB0aGlzLmNvbmZpZy5kb21haW4sXG4gICAgICAgIG1heFJlc3VsdHM6IDIwMCxcbiAgICAgICAgcGFnZVRva2VuLFxuICAgICAgICBvcmRlckJ5OiAnZW1haWwnLFxuICAgICAgfSlcbiAgICAgIGNvbnN0IGJhdGNoID0gcmVzcG9uc2UuZGF0YS51c2VycyB8fCBbXVxuICAgICAgZm9yIChjb25zdCB1c2VyIG9mIGJhdGNoKSB7XG4gICAgICAgIGlmICghdXNlci5wcmltYXJ5RW1haWwpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gdXNlci5uYW1lPy5mdWxsTmFtZSB8fCB1c2VyLnByaW1hcnlFbWFpbFxuICAgICAgICB1c2Vycy5wdXNoKHsgZW1haWw6IHVzZXIucHJpbWFyeUVtYWlsLCBuYW1lOiBmdWxsTmFtZSB9KVxuICAgICAgfVxuICAgICAgcGFnZVRva2VuID0gcmVzcG9uc2UuZGF0YS5uZXh0UGFnZVRva2VuIHx8IHVuZGVmaW5lZFxuICAgIH0gd2hpbGUgKHBhZ2VUb2tlbilcblxuICAgIHJldHVybiB1c2Vyc1xuICB9XG5cbiAgcHJpdmF0ZSBtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlOiBFbXBsb3llZSwgY29uZGl0aW9uOiBQcm92aXNpb25pbmdDb25kaXRpb24pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb25kaXRpb24pKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgY29udGludWVcbiAgICAgIFxuICAgICAgY29uc3QgZW1wbG95ZWVWYWx1ZSA9IChlbXBsb3llZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilba2V5XVxuICAgICAgaWYgKHR5cGVvZiBlbXBsb3llZVZhbHVlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIENhc2UtaW5zZW5zaXRpdmUgbWF0Y2hcbiAgICAgICAgaWYgKGVtcGxveWVlVmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gdmFsdWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVtcGxveWVlVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRQcm92aXNpb25EYXRhRm9yRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW11cbiAgKTogR29vZ2xlUHJvdmlzaW9uRGF0YSB7XG4gICAgY29uc3QgcmVzdWx0OiBHb29nbGVQcm92aXNpb25EYXRhID0ge1xuICAgICAgZ3JvdXBzOiBbXSxcbiAgICB9XG5cbiAgICAvLyBTb3J0IHJ1bGVzIGJ5IHByaW9yaXR5IChoaWdoZXIgcHJpb3JpdHkgZmlyc3QpXG4gICAgY29uc3Qgc29ydGVkUnVsZXMgPSBbLi4ucnVsZXNdLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KVxuXG4gICAgZm9yIChjb25zdCBydWxlIG9mIHNvcnRlZFJ1bGVzKSB7XG4gICAgICBpZiAoIXJ1bGUuaXNBY3RpdmUpIGNvbnRpbnVlXG4gICAgICBcbiAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IHJ1bGUuY29uZGl0aW9uIGFzIFByb3Zpc2lvbmluZ0NvbmRpdGlvblxuICAgICAgaWYgKHRoaXMubWF0Y2hlc0NvbmRpdGlvbihlbXBsb3llZSwgY29uZGl0aW9uKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gcnVsZS5wcm92aXNpb25EYXRhIGFzIEdvb2dsZVByb3Zpc2lvbkRhdGFcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhLm9yZ1VuaXRQYXRoICYmICFyZXN1bHQub3JnVW5pdFBhdGgpIHtcbiAgICAgICAgICByZXN1bHQub3JnVW5pdFBhdGggPSBkYXRhLm9yZ1VuaXRQYXRoXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhLmdyb3Vwcykge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMgPSBbLi4uKHJlc3VsdC5ncm91cHMgfHwgW10pLCAuLi5kYXRhLmdyb3Vwc11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlZHVwZSBncm91cHNcbiAgICByZXN1bHQuZ3JvdXBzID0gWy4uLm5ldyBTZXQocmVzdWx0Lmdyb3VwcyldXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgYXN5bmMgcHJvdmlzaW9uRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIGFwcDogQXBwLFxuICAgIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW10sXG4gICAgZXhpc3RpbmdBY2NvdW50PzogQXBwQWNjb3VudCB8IG51bGxcbiAgKTogUHJvbWlzZTxQcm92aXNpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYWRtaW4gPSBhd2FpdCB0aGlzLmdldEFkbWluQ2xpZW50KClcbiAgICAgIGNvbnN0IHByb3Zpc2lvbkRhdGEgPSB0aGlzLmdldFByb3Zpc2lvbkRhdGFGb3JFbXBsb3llZShlbXBsb3llZSwgcnVsZXMpXG4gICAgICBcbiAgICAgIC8vIEdlbmVyYXRlIHdvcmsgZW1haWwgaWYgbm90IGV4aXN0c1xuICAgICAgY29uc3Qgd29ya0VtYWlsID0gZW1wbG95ZWUud29ya0VtYWlsIHx8IGdlbmVyYXRlV29ya0VtYWlsKGVtcGxveWVlLmZ1bGxOYW1lLCB0aGlzLmNvbmZpZy5kb21haW4pXG4gICAgICBjb25zdCB0ZW1wUGFzc3dvcmQgPSBnZW5lcmF0ZVRlbXBvcmFyeVBhc3N3b3JkKClcbiAgICAgIFxuICAgICAgLy8gU3BsaXQgbmFtZVxuICAgICAgY29uc3QgbmFtZVBhcnRzID0gZW1wbG95ZWUuZnVsbE5hbWUudHJpbSgpLnNwbGl0KC9cXHMrLylcbiAgICAgIGNvbnN0IGdpdmVuTmFtZSA9IG5hbWVQYXJ0c1swXVxuICAgICAgY29uc3QgZmFtaWx5TmFtZSA9IG5hbWVQYXJ0cy5zbGljZSgxKS5qb2luKCcgJykgfHwgbmFtZVBhcnRzWzBdXG5cbiAgICAgIGxldCBleHRlcm5hbFVzZXJJZDogc3RyaW5nXG5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHMgKGUuZy4sIHJlYWN0aXZhdGluZylcbiAgICAgIGlmIChleGlzdGluZ0FjY291bnQ/LmV4dGVybmFsVXNlcklkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVHJ5IHRvIHJlYWN0aXZhdGUgZXhpc3RpbmcgdXNlclxuICAgICAgICAgIGF3YWl0IGFkbWluLnVzZXJzLnVwZGF0ZSh7XG4gICAgICAgICAgICB1c2VyS2V5OiBleGlzdGluZ0FjY291bnQuZXh0ZXJuYWxVc2VySWQsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICAgICAgICBzdXNwZW5kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGV4dGVybmFsVXNlcklkID0gZXhpc3RpbmdBY2NvdW50LmV4dGVybmFsVXNlcklkXG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIFVzZXIgZG9lc24ndCBleGlzdCwgY3JlYXRlIG5ld1xuICAgICAgICAgIGV4dGVybmFsVXNlcklkID0gYXdhaXQgdGhpcy5jcmVhdGVVc2VyKGFkbWluLCB7XG4gICAgICAgICAgICB3b3JrRW1haWwsXG4gICAgICAgICAgICBnaXZlbk5hbWUsXG4gICAgICAgICAgICBmYW1pbHlOYW1lLFxuICAgICAgICAgICAgdGVtcFBhc3N3b3JkLFxuICAgICAgICAgICAgb3JnVW5pdFBhdGg6IHByb3Zpc2lvbkRhdGEub3JnVW5pdFBhdGgsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHMgYnkgZW1haWxcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBhZG1pbi51c2Vycy5nZXQoeyB1c2VyS2V5OiB3b3JrRW1haWwgfSlcbiAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyLmRhdGEuaWQpIHtcbiAgICAgICAgICAgIC8vIFJlYWN0aXZhdGUgaWYgc3VzcGVuZGVkXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdVc2VyLmRhdGEuc3VzcGVuZGVkKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGFkbWluLnVzZXJzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgdXNlcktleTogd29ya0VtYWlsLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RCb2R5OiB7IHN1c3BlbmRlZDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4dGVybmFsVXNlcklkID0gZXhpc3RpbmdVc2VyLmRhdGEuaWRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBDcmVhdGUgbmV3IHVzZXJcbiAgICAgICAgICBleHRlcm5hbFVzZXJJZCA9IGF3YWl0IHRoaXMuY3JlYXRlVXNlcihhZG1pbiwge1xuICAgICAgICAgICAgd29ya0VtYWlsLFxuICAgICAgICAgICAgZ2l2ZW5OYW1lLFxuICAgICAgICAgICAgZmFtaWx5TmFtZSxcbiAgICAgICAgICAgIHRlbXBQYXNzd29yZCxcbiAgICAgICAgICAgIG9yZ1VuaXRQYXRoOiBwcm92aXNpb25EYXRhLm9yZ1VuaXRQYXRoLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2VuZCBjcmVkZW50aWFscyBlbWFpbFxuICAgICAgICAgIGF3YWl0IHNlbmRBY2NvdW50Q3JlZGVudGlhbHNFbWFpbCh7XG4gICAgICAgICAgICBlbXBsb3llZUVtYWlsOiBlbXBsb3llZS5wZXJzb25hbEVtYWlsLFxuICAgICAgICAgICAgZW1wbG95ZWVOYW1lOiBlbXBsb3llZS5mdWxsTmFtZSxcbiAgICAgICAgICAgIHdvcmtFbWFpbCxcbiAgICAgICAgICAgIHRlbXBvcmFyeVBhc3N3b3JkOiB0ZW1wUGFzc3dvcmQsXG4gICAgICAgICAgICBjb21wYW55TmFtZTogKGF3YWl0IGdldE9yZ2FuaXphdGlvbk5hbWUoKSksXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdG8gZ3JvdXBzXG4gICAgICBjb25zdCBhZGRlZEdyb3Vwczogc3RyaW5nW10gPSBbXVxuICAgICAgZm9yIChjb25zdCBncm91cEVtYWlsIG9mIHByb3Zpc2lvbkRhdGEuZ3JvdXBzIHx8IFtdKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgYWRtaW4ubWVtYmVycy5pbnNlcnQoe1xuICAgICAgICAgICAgZ3JvdXBLZXk6IGdyb3VwRW1haWwsXG4gICAgICAgICAgICByZXF1ZXN0Qm9keToge1xuICAgICAgICAgICAgICBlbWFpbDogd29ya0VtYWlsLFxuICAgICAgICAgICAgICByb2xlOiAnTUVNQkVSJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhZGRlZEdyb3Vwcy5wdXNoKGdyb3VwRW1haWwpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gR3JvdXAgbWlnaHQgbm90IGV4aXN0IG9yIHVzZXIgYWxyZWFkeSBtZW1iZXIgLSBsb2cgYnV0IGRvbid0IGZhaWxcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBhZGQgdXNlciB0byBncm91cCAke2dyb3VwRW1haWx9OmAsIGVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGV4dGVybmFsVXNlcklkLFxuICAgICAgICBleHRlcm5hbEVtYWlsOiB3b3JrRW1haWwsXG4gICAgICAgIHByb3Zpc2lvbmVkUmVzb3VyY2VzOiB7XG4gICAgICAgICAgb3JnVW5pdFBhdGg6IHByb3Zpc2lvbkRhdGEub3JnVW5pdFBhdGgsXG4gICAgICAgICAgZ3JvdXBzOiBhZGRlZEdyb3VwcyxcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIFdvcmtzcGFjZSBwcm92aXNpb25pbmcgZXJyb3I6JywgZXJyb3IpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm92aXNpb24gR29vZ2xlIFdvcmtzcGFjZSBhY2NvdW50JyxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVVzZXIoXG4gICAgYWRtaW46IGFkbWluX2RpcmVjdG9yeV92MS5BZG1pbixcbiAgICBwYXJhbXM6IHtcbiAgICAgIHdvcmtFbWFpbDogc3RyaW5nXG4gICAgICBnaXZlbk5hbWU6IHN0cmluZ1xuICAgICAgZmFtaWx5TmFtZTogc3RyaW5nXG4gICAgICB0ZW1wUGFzc3dvcmQ6IHN0cmluZ1xuICAgICAgb3JnVW5pdFBhdGg/OiBzdHJpbmdcbiAgICB9XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbi51c2Vycy5pbnNlcnQoe1xuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgcHJpbWFyeUVtYWlsOiBwYXJhbXMud29ya0VtYWlsLFxuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgZ2l2ZW5OYW1lOiBwYXJhbXMuZ2l2ZW5OYW1lLFxuICAgICAgICAgIGZhbWlseU5hbWU6IHBhcmFtcy5mYW1pbHlOYW1lLFxuICAgICAgICB9LFxuICAgICAgICBwYXNzd29yZDogcGFyYW1zLnRlbXBQYXNzd29yZCxcbiAgICAgICAgY2hhbmdlUGFzc3dvcmRBdE5leHRMb2dpbjogdHJ1ZSxcbiAgICAgICAgb3JnVW5pdFBhdGg6IHBhcmFtcy5vcmdVbml0UGF0aCB8fCAnLycsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3BvbnNlLmRhdGEuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIC0gbm8gSUQgcmV0dXJuZWQnKVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5kYXRhLmlkXG4gIH1cblxuICBhc3luYyBkZXByb3Zpc2lvbkVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBhcHA6IEFwcCxcbiAgICBhY2NvdW50OiBBcHBBY2NvdW50LFxuICAgIG9wdGlvbnM/OiBEZXByb3Zpc2lvbk9wdGlvbnNcbiAgKTogUHJvbWlzZTxEZXByb3Zpc2lvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhZG1pbiA9IGF3YWl0IHRoaXMuZ2V0QWRtaW5DbGllbnQoKVxuICAgICAgXG4gICAgICBjb25zdCB1c2VyS2V5ID0gYWNjb3VudC5leHRlcm5hbFVzZXJJZCB8fCBhY2NvdW50LmV4dGVybmFsRW1haWwgfHwgZW1wbG95ZWUud29ya0VtYWlsXG4gICAgICBpZiAoIXVzZXJLZXkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gZXh0ZXJuYWwgdXNlciBJRCBvciBlbWFpbCBmb3VuZCcgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWxldGVBY2NvdW50ID0gQm9vbGVhbihvcHRpb25zPy5kZWxldGVBY2NvdW50KVxuICAgICAgY29uc3QgdHJhbnNmZXJUb0VtYWlsID0gb3B0aW9ucz8udHJhbnNmZXJUb0VtYWlsPy50cmltKClcbiAgICAgIGNvbnN0IHRyYW5zZmVyQXBwcyA9IG9wdGlvbnM/LnRyYW5zZmVyQXBwcz8ubGVuZ3RoID8gb3B0aW9ucy50cmFuc2ZlckFwcHMgOiBbJ2RyaXZlJ11cbiAgICAgIGNvbnN0IGFsaWFzVG9FbWFpbCA9IG9wdGlvbnM/LmFsaWFzVG9FbWFpbD8udHJpbSgpXG4gICAgICBjb25zdCBhbGlhc0VtYWlsID0gYWNjb3VudC5leHRlcm5hbEVtYWlsIHx8IGVtcGxveWVlLndvcmtFbWFpbFxuXG4gICAgICBpZiAoYWxpYXNUb0VtYWlsICYmICFkZWxldGVBY2NvdW50KSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIGFsaWFzIG1hcHBpbmcgcmVxdWlyZXMgZGVsZXRpbmcgdGhlIEdvb2dsZSBhY2NvdW50LicgfVxuICAgICAgfVxuICAgICAgaWYgKGFsaWFzVG9FbWFpbCAmJiAhYWxpYXNFbWFpbCkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBzb3VyY2UgZW1haWwgYXZhaWxhYmxlIGZvciBhbGlhcyBtYXBwaW5nLicgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHJhbnNmZXJUb0VtYWlsKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudHJhbnNmZXJEYXRhT3duZXJzaGlwKHVzZXJLZXksIHRyYW5zZmVyVG9FbWFpbCwgdHJhbnNmZXJBcHBzKVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVsZXRlQWNjb3VudCkge1xuICAgICAgICBhd2FpdCBhZG1pbi51c2Vycy5kZWxldGUoeyB1c2VyS2V5IH0pXG4gICAgICAgIGlmIChhbGlhc1RvRW1haWwgJiYgYWxpYXNFbWFpbCkge1xuICAgICAgICAgIGF3YWl0IGFkbWluLnVzZXJzLmFsaWFzZXMuaW5zZXJ0KHtcbiAgICAgICAgICAgIHVzZXJLZXk6IGFsaWFzVG9FbWFpbCxcbiAgICAgICAgICAgIHJlcXVlc3RCb2R5OiB7IGFsaWFzOiBhbGlhc0VtYWlsIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU3VzcGVuZCB1c2VyIChkb24ndCBkZWxldGUgLSBwcmVzZXJ2ZXMgZGF0YSlcbiAgICAgICAgYXdhaXQgYWRtaW4udXNlcnMudXBkYXRlKHtcbiAgICAgICAgICB1c2VyS2V5LFxuICAgICAgICAgIHJlcXVlc3RCb2R5OiB7XG4gICAgICAgICAgICBzdXNwZW5kZWQ6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBXb3Jrc3BhY2UgZGVwcm92aXNpb25pbmcgZXJyb3I6JywgZXJyb3IpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZXByb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlIGFjY291bnQnLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHJhbnNmZXJEYXRhT3duZXJzaGlwKG9sZE93bmVyOiBzdHJpbmcsIG5ld093bmVyOiBzdHJpbmcsIGFwcHM6IHN0cmluZ1tdKSB7XG4gICAgY29uc3QgZGF0YVRyYW5zZmVyID0gYXdhaXQgdGhpcy5nZXREYXRhVHJhbnNmZXJDbGllbnQoKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZGF0YVRyYW5zZmVyLmFwcGxpY2F0aW9ucy5saXN0KHsgY3VzdG9tZXJJZDogJ215X2N1c3RvbWVyJyB9KVxuICAgIGNvbnN0IGF2YWlsYWJsZUFwcHMgPSByZXNwb25zZS5kYXRhLmFwcGxpY2F0aW9ucyB8fCBbXVxuXG4gICAgY29uc3QgYXBwbGljYXRpb25EYXRhVHJhbnNmZXJzID0gYXBwc1xuICAgICAgLm1hcCgoYXBwTmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGF2YWlsYWJsZUFwcHMuZmluZCgoYXBwKSA9PlxuICAgICAgICAgIChhcHAubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhhcHBOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIClcbiAgICAgICAgaWYgKCFtYXRjaD8uaWQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEdvb2dsZSBXb3Jrc3BhY2UgdHJhbnNmZXIgYXBwIG5vdCBmb3VuZDogJHthcHBOYW1lfWApXG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBhcHBsaWNhdGlvbklkOiBtYXRjaC5pZCB9XG4gICAgICB9KVxuICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBBcnJheTx7IGFwcGxpY2F0aW9uSWQ6IHN0cmluZyB9PlxuXG4gICAgaWYgKCFhcHBsaWNhdGlvbkRhdGFUcmFuc2ZlcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHZhbGlkIEdvb2dsZSBhcHBzIHNlbGVjdGVkIGZvciBkYXRhIHRyYW5zZmVyLicpXG4gICAgfVxuXG4gICAgYXdhaXQgZGF0YVRyYW5zZmVyLnRyYW5zZmVycy5pbnNlcnQoe1xuICAgICAgcmVxdWVzdEJvZHk6IHtcbiAgICAgICAgb2xkT3duZXJVc2VySWQ6IG9sZE93bmVyLFxuICAgICAgICBuZXdPd25lclVzZXJJZDogbmV3T3duZXIsXG4gICAgICAgIGFwcGxpY2F0aW9uRGF0YVRyYW5zZmVycyxcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR29vZ2xlV29ya3NwYWNlQ29ubmVjdG9yKCk6IEdvb2dsZVdvcmtzcGFjZUNvbm5lY3RvciB8IG51bGwge1xuICBjb25zdCBkb21haW4gPSBwcm9jZXNzLmVudi5HT09HTEVfV09SS1NQQUNFX0RPTUFJTlxuICBjb25zdCBhZG1pbkVtYWlsID0gcHJvY2Vzcy5lbnYuR09PR0xFX1dPUktTUEFDRV9BRE1JTl9FTUFJTFxuICBjb25zdCBzZXJ2aWNlQWNjb3VudEtleSA9IHByb2Nlc3MuZW52LkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfS0VZXG5cbiAgaWYgKCFkb21haW4gfHwgIWFkbWluRW1haWwgfHwgIXNlcnZpY2VBY2NvdW50S2V5KSB7XG4gICAgY29uc29sZS53YXJuKCdHb29nbGUgV29ya3NwYWNlIGludGVncmF0aW9uIG5vdCBjb25maWd1cmVkJylcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIG5ldyBHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3Ioe1xuICAgIGRvbWFpbixcbiAgICBhZG1pbkVtYWlsLFxuICAgIHNlcnZpY2VBY2NvdW50S2V5LFxuICB9KVxufVxuIl0sIm5hbWVzIjpbImdvb2dsZSIsImdlbmVyYXRlV29ya0VtYWlsIiwiZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCIsInNlbmRBY2NvdW50Q3JlZGVudGlhbHNFbWFpbCIsImdldE9yZ2FuaXphdGlvbk5hbWUiLCJHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImFkbWluIiwiZGF0YVRyYW5zZmVyIiwiYXV0aCIsImdldEFkbWluQ2xpZW50Iiwic2VydmljZUFjY291bnQiLCJKU09OIiwicGFyc2UiLCJzZXJ2aWNlQWNjb3VudEtleSIsIkpXVCIsImVtYWlsIiwiY2xpZW50X2VtYWlsIiwia2V5IiwicHJpdmF0ZV9rZXkiLCJzY29wZXMiLCJzdWJqZWN0IiwiYWRtaW5FbWFpbCIsInZlcnNpb24iLCJnZXREYXRhVHJhbnNmZXJDbGllbnQiLCJ0ZXN0Q29ubmVjdGlvbiIsInVzZXJzIiwibGlzdCIsImRvbWFpbiIsIm1heFJlc3VsdHMiLCJzdWNjZXNzIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJsaXN0R3JvdXBzIiwiZ3JvdXBzIiwicGFnZVRva2VuIiwicmVzcG9uc2UiLCJiYXRjaCIsImRhdGEiLCJncm91cCIsInB1c2giLCJuYW1lIiwibmV4dFBhZ2VUb2tlbiIsInVuZGVmaW5lZCIsImxpc3RVc2VycyIsIm9yZGVyQnkiLCJ1c2VyIiwicHJpbWFyeUVtYWlsIiwiZnVsbE5hbWUiLCJtYXRjaGVzQ29uZGl0aW9uIiwiZW1wbG95ZWUiLCJjb25kaXRpb24iLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJlbXBsb3llZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJnZXRQcm92aXNpb25EYXRhRm9yRW1wbG95ZWUiLCJydWxlcyIsInJlc3VsdCIsInNvcnRlZFJ1bGVzIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJydWxlIiwiaXNBY3RpdmUiLCJwcm92aXNpb25EYXRhIiwib3JnVW5pdFBhdGgiLCJTZXQiLCJwcm92aXNpb25FbXBsb3llZSIsImFwcCIsImV4aXN0aW5nQWNjb3VudCIsIndvcmtFbWFpbCIsInRlbXBQYXNzd29yZCIsIm5hbWVQYXJ0cyIsInRyaW0iLCJzcGxpdCIsImdpdmVuTmFtZSIsImZhbWlseU5hbWUiLCJzbGljZSIsImpvaW4iLCJleHRlcm5hbFVzZXJJZCIsInVwZGF0ZSIsInVzZXJLZXkiLCJyZXF1ZXN0Qm9keSIsInN1c3BlbmRlZCIsImNyZWF0ZVVzZXIiLCJleGlzdGluZ1VzZXIiLCJnZXQiLCJpZCIsImVtcGxveWVlRW1haWwiLCJwZXJzb25hbEVtYWlsIiwiZW1wbG95ZWVOYW1lIiwidGVtcG9yYXJ5UGFzc3dvcmQiLCJjb21wYW55TmFtZSIsImFkZGVkR3JvdXBzIiwiZ3JvdXBFbWFpbCIsIm1lbWJlcnMiLCJpbnNlcnQiLCJncm91cEtleSIsInJvbGUiLCJjb25zb2xlIiwid2FybiIsImV4dGVybmFsRW1haWwiLCJwcm92aXNpb25lZFJlc291cmNlcyIsInBhcmFtcyIsInBhc3N3b3JkIiwiY2hhbmdlUGFzc3dvcmRBdE5leHRMb2dpbiIsImRlcHJvdmlzaW9uRW1wbG95ZWUiLCJhY2NvdW50Iiwib3B0aW9ucyIsImRlbGV0ZUFjY291bnQiLCJCb29sZWFuIiwidHJhbnNmZXJUb0VtYWlsIiwidHJhbnNmZXJBcHBzIiwibGVuZ3RoIiwiYWxpYXNUb0VtYWlsIiwiYWxpYXNFbWFpbCIsInRyYW5zZmVyRGF0YU93bmVyc2hpcCIsImRlbGV0ZSIsImFsaWFzZXMiLCJhbGlhcyIsIm9sZE93bmVyIiwibmV3T3duZXIiLCJhcHBzIiwiYXBwbGljYXRpb25zIiwiY3VzdG9tZXJJZCIsImF2YWlsYWJsZUFwcHMiLCJhcHBsaWNhdGlvbkRhdGFUcmFuc2ZlcnMiLCJtYXAiLCJhcHBOYW1lIiwibWF0Y2giLCJmaW5kIiwiaW5jbHVkZXMiLCJhcHBsaWNhdGlvbklkIiwiZmlsdGVyIiwidHJhbnNmZXJzIiwib2xkT3duZXJVc2VySWQiLCJuZXdPd25lclVzZXJJZCIsImNyZWF0ZUdvb2dsZVdvcmtzcGFjZUNvbm5lY3RvciIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfV09SS1NQQUNFX0RPTUFJTiIsIkdPT0dMRV9XT1JLU1BBQ0VfQURNSU5fRU1BSUwiLCJHT09HTEVfU0VSVklDRV9BQ0NPVU5UX0tFWSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/google-workspace.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/hubspot.ts":
/*!*****************************************!*\
  !*** ./src/lib/integrations/hubspot.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HubSpotConnector: () => (/* binding */ HubSpotConnector)\n/* harmony export */ });\nfunction normalizeBaseUrl(url) {\n    return url.replace(/\\/+$/, \"\");\n}\nasync function requestHubSpot(url, init, okStatuses = [\n    200\n]) {\n    const res = await fetch(url, init);\n    if (!okStatuses.includes(res.status)) {\n        const text = await res.text().catch(()=>\"\");\n        throw new Error(`HubSpot API error (${res.status}): ${text || res.statusText}`);\n    }\n    if (res.status === 204) return {};\n    return await res.json();\n}\nclass HubSpotConnector {\n    constructor(config){\n        this.config = config;\n        this.baseUrl = normalizeBaseUrl(config.baseUrl || \"https://api.hubapi.com\");\n        this.authHeader = `Bearer ${config.scimToken}`;\n    }\n    async testConnection() {\n        try {\n            await requestHubSpot(`${this.baseUrl}/settings/v3/users/?limit=1`, {\n                method: \"GET\",\n                headers: {\n                    Authorization: this.authHeader,\n                    Accept: \"application/json\"\n                }\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to HubSpot\"\n            };\n        }\n    }\n    async findUserIdByEmail(email) {\n        const url = `${this.baseUrl}/settings/v3/users/?${new URLSearchParams({\n            email\n        }).toString()}`;\n        try {\n            const data = await requestHubSpot(url, {\n                method: \"GET\",\n                headers: {\n                    Authorization: this.authHeader,\n                    Accept: \"application/json\"\n                }\n            });\n            const users = data.results || data.users || [];\n            const match = users.find((u)=>(u.email || \"\").toLowerCase() === email.toLowerCase());\n            const candidate = match || users[0];\n            const id = candidate?.id ?? candidate?.userId;\n            return id ? String(id) : null;\n        } catch  {\n            return null;\n        }\n    }\n    async provisionEmployee(employee, app, rules, existingAccount) {\n        try {\n            const email = employee.workEmail || employee.personalEmail;\n            if (!email) return {\n                success: false,\n                error: \"Email is required for HubSpot provisioning\"\n            };\n            const existingId = existingAccount?.externalUserId || await this.findUserIdByEmail(email);\n            if (existingId) {\n                return {\n                    success: true,\n                    externalUserId: existingId,\n                    externalEmail: email\n                };\n            }\n            const created = await requestHubSpot(`${this.baseUrl}/settings/v3/users/`, {\n                method: \"POST\",\n                headers: {\n                    Authorization: this.authHeader,\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    email,\n                    sendWelcomeEmail: true\n                })\n            }, [\n                201,\n                200\n            ]);\n            const createdId = created.id ?? created.userId;\n            if (!createdId) {\n                return {\n                    success: true,\n                    externalEmail: email\n                };\n            }\n            return {\n                success: true,\n                externalUserId: String(createdId),\n                externalEmail: email\n            };\n        } catch (error) {\n            const message = error instanceof Error ? error.message : \"Failed to provision HubSpot user\";\n            if (message.includes(\"(409)\")) {\n                const fallbackId = await this.findUserIdByEmail(employee.workEmail || employee.personalEmail || \"\");\n                return {\n                    success: true,\n                    externalUserId: fallbackId ?? undefined,\n                    externalEmail: employee.workEmail || employee.personalEmail || undefined\n                };\n            }\n            return {\n                success: false,\n                error: message\n            };\n        }\n    }\n    async deprovisionEmployee(employee, app, account, _options) {\n        try {\n            const email = employee.workEmail || employee.personalEmail || account.externalEmail;\n            const userId = account.externalUserId || (email ? await this.findUserIdByEmail(email) : null);\n            if (!userId && !email) return {\n                success: false,\n                error: \"HubSpot user not found\"\n            };\n            const target = userId ?? email;\n            const url = userId ? `${this.baseUrl}/settings/v3/users/${encodeURIComponent(target)}` : `${this.baseUrl}/settings/v3/users/${encodeURIComponent(target)}?idProperty=EMAIL`;\n            await requestHubSpot(url, {\n                method: \"DELETE\",\n                headers: {\n                    Authorization: this.authHeader,\n                    Accept: \"application/json\"\n                }\n            }, [\n                204,\n                200\n            ]);\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to deprovision HubSpot user\"\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBUSxFQUNSaUIsT0FBbUIsRUFDbkJDLFFBQTZCLEVBQ0Q7UUFDNUIsSUFBSTtZQUNGLE1BQU1sQyxRQUFRZSxTQUFTSSxTQUFTLElBQUlKLFNBQVNLLGFBQWEsSUFBSWEsUUFBUVYsYUFBYTtZQUNuRixNQUFNWCxTQUFTcUIsUUFBUVgsY0FBYyxJQUFLdEIsQ0FBQUEsUUFBUSxNQUFNLElBQUksQ0FBQ0QsaUJBQWlCLENBQUNDLFNBQVMsSUFBRztZQUMzRixJQUFJLENBQUNZLFVBQVUsQ0FBQ1osT0FBTyxPQUFPO2dCQUFFSixTQUFTO2dCQUFPQyxPQUFPO1lBQXlCO1lBQ2hGLE1BQU1zQyxTQUFTdkIsVUFBVVo7WUFDekIsTUFBTTdCLE1BQU15QyxTQUNSLENBQUMsRUFBRSxJQUFJLENBQUN4QixPQUFPLENBQUMsbUJBQW1CLEVBQUVnRCxtQkFBbUJELFFBQVEsQ0FBQyxHQUNqRSxDQUFDLEVBQUUsSUFBSSxDQUFDL0MsT0FBTyxDQUFDLG1CQUFtQixFQUFFZ0QsbUJBQW1CRCxRQUFRLGlCQUFpQixDQUFDO1lBQ3RGLE1BQU05RCxlQUNKRixLQUNBO2dCQUNFcUIsUUFBUTtnQkFDUkMsU0FBUztvQkFBRUMsZUFBZSxJQUFJLENBQUNMLFVBQVU7b0JBQUVNLFFBQVE7Z0JBQW1CO1lBQ3hFLEdBQ0E7Z0JBQUM7Z0JBQUs7YUFBSTtZQUVaLE9BQU87Z0JBQUVDLFNBQVM7WUFBSztRQUN6QixFQUFFLE9BQU9DLE9BQU87WUFDZCxPQUFPO2dCQUFFRCxTQUFTO2dCQUFPQyxPQUFPQSxpQkFBaUJmLFFBQVFlLE1BQU1DLE9BQU8sR0FBRztZQUFxQztRQUNoSDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvaW50ZWdyYXRpb25zL2h1YnNwb3QudHM/ZDgzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEVtcGxveWVlLCBBcHAsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCB0eXBlIHtcbiAgSW50ZWdyYXRpb25Db25uZWN0b3IsXG4gIFByb3Zpc2lvblJlc3VsdCxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgSHViU3BvdENvbmZpZyxcbn0gZnJvbSAnLi90eXBlcydcblxuZnVuY3Rpb24gbm9ybWFsaXplQmFzZVVybCh1cmw6IHN0cmluZykge1xuICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcLyskLywgJycpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RIdWJTcG90PFQ+KHVybDogc3RyaW5nLCBpbml0OiBSZXF1ZXN0SW5pdCwgb2tTdGF0dXNlczogbnVtYmVyW10gPSBbMjAwXSkge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIGluaXQpXG4gIGlmICghb2tTdGF0dXNlcy5pbmNsdWRlcyhyZXMuc3RhdHVzKSkge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpLmNhdGNoKCgpID0+ICcnKVxuICAgIHRocm93IG5ldyBFcnJvcihgSHViU3BvdCBBUEkgZXJyb3IgKCR7cmVzLnN0YXR1c30pOiAke3RleHQgfHwgcmVzLnN0YXR1c1RleHR9YClcbiAgfVxuICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4ge30gYXMgVFxuICByZXR1cm4gKGF3YWl0IHJlcy5qc29uKCkpIGFzIFRcbn1cblxudHlwZSBIdWJTcG90VXNlciA9IHtcbiAgaWQ/OiBzdHJpbmcgfCBudW1iZXJcbiAgZW1haWw/OiBzdHJpbmdcbiAgdXNlcklkPzogc3RyaW5nIHwgbnVtYmVyXG59XG5cbmV4cG9ydCBjbGFzcyBIdWJTcG90Q29ubmVjdG9yIGltcGxlbWVudHMgSW50ZWdyYXRpb25Db25uZWN0b3Ige1xuICBwcml2YXRlIGNvbmZpZzogSHViU3BvdENvbmZpZ1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZ1xuICBwcml2YXRlIGF1dGhIZWFkZXI6IHN0cmluZ1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogSHViU3BvdENvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gICAgdGhpcy5iYXNlVXJsID0gbm9ybWFsaXplQmFzZVVybChjb25maWcuYmFzZVVybCB8fCAnaHR0cHM6Ly9hcGkuaHViYXBpLmNvbScpXG4gICAgdGhpcy5hdXRoSGVhZGVyID0gYEJlYXJlciAke2NvbmZpZy5zY2ltVG9rZW59YFxuICB9XG5cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcmVxdWVzdEh1YlNwb3QoYCR7dGhpcy5iYXNlVXJsfS9zZXR0aW5ncy92My91c2Vycy8/bGltaXQ9MWAsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiB0aGlzLmF1dGhIZWFkZXIsIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gSHViU3BvdCcgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmluZFVzZXJJZEJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vc2V0dGluZ3MvdjMvdXNlcnMvPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7IGVtYWlsIH0pLnRvU3RyaW5nKCl9YFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdEh1YlNwb3Q8eyByZXN1bHRzPzogSHViU3BvdFVzZXJbXTsgdXNlcnM/OiBIdWJTcG90VXNlcltdIH0+KHVybCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgICBjb25zdCB1c2VycyA9IGRhdGEucmVzdWx0cyB8fCBkYXRhLnVzZXJzIHx8IFtdXG4gICAgICBjb25zdCBtYXRjaCA9IHVzZXJzLmZpbmQoKHUpID0+ICh1LmVtYWlsIHx8ICcnKS50b0xvd2VyQ2FzZSgpID09PSBlbWFpbC50b0xvd2VyQ2FzZSgpKVxuICAgICAgY29uc3QgY2FuZGlkYXRlID0gbWF0Y2ggfHwgdXNlcnNbMF1cbiAgICAgIGNvbnN0IGlkID0gY2FuZGlkYXRlPy5pZCA/PyBjYW5kaWRhdGU/LnVzZXJJZFxuICAgICAgcmV0dXJuIGlkID8gU3RyaW5nKGlkKSA6IG51bGxcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcHJvdmlzaW9uRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIGFwcDogQXBwLFxuICAgIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW10sXG4gICAgZXhpc3RpbmdBY2NvdW50PzogQXBwQWNjb3VudCB8IG51bGxcbiAgKTogUHJvbWlzZTxQcm92aXNpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW1haWwgPSBlbXBsb3llZS53b3JrRW1haWwgfHwgZW1wbG95ZWUucGVyc29uYWxFbWFpbFxuICAgICAgaWYgKCFlbWFpbCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRW1haWwgaXMgcmVxdWlyZWQgZm9yIEh1YlNwb3QgcHJvdmlzaW9uaW5nJyB9XG5cbiAgICAgIGNvbnN0IGV4aXN0aW5nSWQgPSBleGlzdGluZ0FjY291bnQ/LmV4dGVybmFsVXNlcklkIHx8IChhd2FpdCB0aGlzLmZpbmRVc2VySWRCeUVtYWlsKGVtYWlsKSlcbiAgICAgIGlmIChleGlzdGluZ0lkKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGV4dGVybmFsVXNlcklkOiBleGlzdGluZ0lkLCBleHRlcm5hbEVtYWlsOiBlbWFpbCB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCByZXF1ZXN0SHViU3BvdDxIdWJTcG90VXNlcj4oXG4gICAgICAgIGAke3RoaXMuYmFzZVVybH0vc2V0dGluZ3MvdjMvdXNlcnMvYCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlcixcbiAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgc2VuZFdlbGNvbWVFbWFpbDogdHJ1ZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgWzIwMSwgMjAwXVxuICAgICAgKVxuICAgICAgY29uc3QgY3JlYXRlZElkID0gY3JlYXRlZC5pZCA/PyBjcmVhdGVkLnVzZXJJZFxuICAgICAgaWYgKCFjcmVhdGVkSWQpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZXh0ZXJuYWxFbWFpbDogZW1haWwgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZXh0ZXJuYWxVc2VySWQ6IFN0cmluZyhjcmVhdGVkSWQpLCBleHRlcm5hbEVtYWlsOiBlbWFpbCB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcHJvdmlzaW9uIEh1YlNwb3QgdXNlcidcbiAgICAgIGlmIChtZXNzYWdlLmluY2x1ZGVzKCcoNDA5KScpKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmZpbmRVc2VySWRCeUVtYWlsKGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsIHx8ICcnKVxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBleHRlcm5hbFVzZXJJZDogZmFsbGJhY2tJZCA/PyB1bmRlZmluZWQsIGV4dGVybmFsRW1haWw6IGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsIHx8IHVuZGVmaW5lZCB9XG4gICAgICB9XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IG1lc3NhZ2UgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlcHJvdmlzaW9uRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIGFwcDogQXBwLFxuICAgIGFjY291bnQ6IEFwcEFjY291bnQsXG4gICAgX29wdGlvbnM/OiBEZXByb3Zpc2lvbk9wdGlvbnNcbiAgKTogUHJvbWlzZTxEZXByb3Zpc2lvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbWFpbCA9IGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsIHx8IGFjY291bnQuZXh0ZXJuYWxFbWFpbFxuICAgICAgY29uc3QgdXNlcklkID0gYWNjb3VudC5leHRlcm5hbFVzZXJJZCB8fCAoZW1haWwgPyBhd2FpdCB0aGlzLmZpbmRVc2VySWRCeUVtYWlsKGVtYWlsKSA6IG51bGwpXG4gICAgICBpZiAoIXVzZXJJZCAmJiAhZW1haWwpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0h1YlNwb3QgdXNlciBub3QgZm91bmQnIH1cbiAgICAgIGNvbnN0IHRhcmdldCA9IHVzZXJJZCA/PyBlbWFpbCFcbiAgICAgIGNvbnN0IHVybCA9IHVzZXJJZFxuICAgICAgICA/IGAke3RoaXMuYmFzZVVybH0vc2V0dGluZ3MvdjMvdXNlcnMvJHtlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0KX1gXG4gICAgICAgIDogYCR7dGhpcy5iYXNlVXJsfS9zZXR0aW5ncy92My91c2Vycy8ke2VuY29kZVVSSUNvbXBvbmVudCh0YXJnZXQpfT9pZFByb3BlcnR5PUVNQUlMYFxuICAgICAgYXdhaXQgcmVxdWVzdEh1YlNwb3QoXG4gICAgICAgIHVybCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiB0aGlzLmF1dGhIZWFkZXIsIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFsyMDQsIDIwMF1cbiAgICAgIClcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBkZXByb3Zpc2lvbiBIdWJTcG90IHVzZXInIH1cbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJub3JtYWxpemVCYXNlVXJsIiwidXJsIiwicmVwbGFjZSIsInJlcXVlc3RIdWJTcG90IiwiaW5pdCIsIm9rU3RhdHVzZXMiLCJyZXMiLCJmZXRjaCIsImluY2x1ZGVzIiwic3RhdHVzIiwidGV4dCIsImNhdGNoIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwianNvbiIsIkh1YlNwb3RDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImJhc2VVcmwiLCJhdXRoSGVhZGVyIiwic2NpbVRva2VuIiwidGVzdENvbm5lY3Rpb24iLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsIkFjY2VwdCIsInN1Y2Nlc3MiLCJlcnJvciIsIm1lc3NhZ2UiLCJmaW5kVXNlcklkQnlFbWFpbCIsImVtYWlsIiwiVVJMU2VhcmNoUGFyYW1zIiwidG9TdHJpbmciLCJkYXRhIiwidXNlcnMiLCJyZXN1bHRzIiwibWF0Y2giLCJmaW5kIiwidSIsInRvTG93ZXJDYXNlIiwiY2FuZGlkYXRlIiwiaWQiLCJ1c2VySWQiLCJTdHJpbmciLCJwcm92aXNpb25FbXBsb3llZSIsImVtcGxveWVlIiwiYXBwIiwicnVsZXMiLCJleGlzdGluZ0FjY291bnQiLCJ3b3JrRW1haWwiLCJwZXJzb25hbEVtYWlsIiwiZXhpc3RpbmdJZCIsImV4dGVybmFsVXNlcklkIiwiZXh0ZXJuYWxFbWFpbCIsImNyZWF0ZWQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNlbmRXZWxjb21lRW1haWwiLCJjcmVhdGVkSWQiLCJmYWxsYmFja0lkIiwidW5kZWZpbmVkIiwiZGVwcm92aXNpb25FbXBsb3llZSIsImFjY291bnQiLCJfb3B0aW9ucyIsInRhcmdldCIsImVuY29kZVVSSUNvbXBvbmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/hubspot.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/index.ts":
/*!***************************************!*\
  !*** ./src/lib/integrations/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BitbucketConnector: () => (/* reexport safe */ _bitbucket__WEBPACK_IMPORTED_MODULE_5__.BitbucketConnector),\n/* harmony export */   GoogleWorkspaceConnector: () => (/* reexport safe */ _google_workspace__WEBPACK_IMPORTED_MODULE_3__.GoogleWorkspaceConnector),\n/* harmony export */   HubSpotConnector: () => (/* reexport safe */ _hubspot__WEBPACK_IMPORTED_MODULE_7__.HubSpotConnector),\n/* harmony export */   JiraConnector: () => (/* reexport safe */ _jira__WEBPACK_IMPORTED_MODULE_6__.JiraConnector),\n/* harmony export */   PassboltConnector: () => (/* reexport safe */ _passbolt__WEBPACK_IMPORTED_MODULE_8__.PassboltConnector),\n/* harmony export */   SlackConnector: () => (/* reexport safe */ _slack__WEBPACK_IMPORTED_MODULE_4__.SlackConnector),\n/* harmony export */   createGoogleWorkspaceConnector: () => (/* reexport safe */ _google_workspace__WEBPACK_IMPORTED_MODULE_3__.createGoogleWorkspaceConnector),\n/* harmony export */   createPassboltConnector: () => (/* reexport safe */ _passbolt__WEBPACK_IMPORTED_MODULE_8__.createPassboltConnector),\n/* harmony export */   createSlackConnector: () => (/* reexport safe */ _slack__WEBPACK_IMPORTED_MODULE_4__.createSlackConnector),\n/* harmony export */   deprovisionEmployeeFromAllApps: () => (/* binding */ deprovisionEmployeeFromAllApps),\n/* harmony export */   deprovisionEmployeeInApp: () => (/* binding */ deprovisionEmployeeInApp),\n/* harmony export */   deprovisionEmployeeInAppById: () => (/* binding */ deprovisionEmployeeInAppById),\n/* harmony export */   getConnector: () => (/* binding */ getConnector),\n/* harmony export */   provisionEmployeeInApp: () => (/* binding */ provisionEmployeeInApp),\n/* harmony export */   provisionEmployeeInAppById: () => (/* binding */ provisionEmployeeInAppById)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/encryption */ \"(rsc)/./src/lib/encryption.ts\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n/* harmony import */ var _google_workspace__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./google-workspace */ \"(rsc)/./src/lib/integrations/google-workspace.ts\");\n/* harmony import */ var _slack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./slack */ \"(rsc)/./src/lib/integrations/slack.ts\");\n/* harmony import */ var _bitbucket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./bitbucket */ \"(rsc)/./src/lib/integrations/bitbucket.ts\");\n/* harmony import */ var _jira__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./jira */ \"(rsc)/./src/lib/integrations/jira.ts\");\n/* harmony import */ var _hubspot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./hubspot */ \"(rsc)/./src/lib/integrations/hubspot.ts\");\n/* harmony import */ var _passbolt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./passbolt */ \"(rsc)/./src/lib/integrations/passbolt.ts\");\n/* harmony import */ var _webhook__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./webhook */ \"(rsc)/./src/lib/integrations/webhook.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./types */ \"(rsc)/./src/lib/integrations/types.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nasync function getConnector(app) {\n    const connection = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appConnection.findFirst({\n        where: {\n            appId: app.id,\n            isActive: true\n        }\n    });\n    if (!connection) {\n        return null;\n    }\n    // Decrypt config\n    let config;\n    try {\n        config = JSON.parse((0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(connection.configEncrypted));\n    } catch  {\n        // Config might be stored in plain for dev\n        try {\n            config = JSON.parse(connection.configEncrypted);\n        } catch  {\n            // If config cannot be parsed, allow env-based fallbacks (e.g. Google Workspace).\n            config = {};\n        }\n    }\n    const webhook = (0,_webhook__WEBPACK_IMPORTED_MODULE_9__.hasWebhookConfig)(config) ? new _webhook__WEBPACK_IMPORTED_MODULE_9__.WebhookConnector(config) : null;\n    const webhookConfigured = Boolean(webhook?.isConfigured());\n    if (app.type !== \"PASSBOLT\" && webhookConfigured) {\n        return webhook;\n    }\n    switch(app.type){\n        case \"GOOGLE_WORKSPACE\":\n            return new _google_workspace__WEBPACK_IMPORTED_MODULE_3__.GoogleWorkspaceConnector({\n                domain: config.domain || process.env.GOOGLE_WORKSPACE_DOMAIN || \"\",\n                adminEmail: config.adminEmail || process.env.GOOGLE_WORKSPACE_ADMIN_EMAIL || \"\",\n                serviceAccountKey: config.serviceAccountKey || process.env.GOOGLE_SERVICE_ACCOUNT_KEY || \"\"\n            });\n        case \"SLACK\":\n            if (!config.botToken || typeof config.botToken !== \"string\") return null;\n            return new _slack__WEBPACK_IMPORTED_MODULE_4__.SlackConnector({\n                botToken: config.botToken,\n                adminToken: config.adminToken,\n                teamId: config.teamId,\n                defaultChannels: Array.isArray(config.defaultChannels) ? config.defaultChannels : undefined,\n                signingSecret: config.signingSecret\n            });\n        case \"BITBUCKET\":\n            if (!config.workspace) return null;\n            if (!config.apiToken && !(config.username && config.appPassword)) return null;\n            return new _bitbucket__WEBPACK_IMPORTED_MODULE_5__.BitbucketConnector({\n                workspace: config.workspace,\n                username: typeof config.username === \"string\" ? config.username : undefined,\n                appPassword: typeof config.appPassword === \"string\" ? config.appPassword : undefined,\n                apiToken: typeof config.apiToken === \"string\" ? config.apiToken : undefined\n            });\n        case \"JIRA\":\n            if (!config.baseUrl || !config.adminEmail || !config.apiToken) return null;\n            return new _jira__WEBPACK_IMPORTED_MODULE_6__.JiraConnector({\n                baseUrl: config.baseUrl,\n                adminEmail: config.adminEmail,\n                apiToken: config.apiToken,\n                products: Array.isArray(config.products) ? config.products : undefined,\n                defaultGroups: Array.isArray(config.defaultGroups) ? config.defaultGroups : undefined,\n                deleteOnDeprovision: Boolean(config.deleteOnDeprovision)\n            });\n        case \"HUBSPOT\":\n            if (!config.scimToken) return null;\n            return new _hubspot__WEBPACK_IMPORTED_MODULE_7__.HubSpotConnector({\n                scimToken: config.scimToken,\n                baseUrl: typeof config.baseUrl === \"string\" ? config.baseUrl : undefined\n            });\n        case \"PASSBOLT\":\n            {\n                const connector = (0,_passbolt__WEBPACK_IMPORTED_MODULE_8__.createPassboltConnector)(config);\n                if (connector) return connector;\n                return webhookConfigured ? webhook : null;\n            }\n        default:\n            return webhookConfigured ? webhook : null;\n    }\n}\nasync function provisionEmployeeWithApp(employee, app, actorId) {\n    if (!app.isEnabled) {\n        return {\n            success: false,\n            error: `App ${app.name} is not enabled`\n        };\n    }\n    const connector = await getConnector(app);\n    if (!connector) {\n        return {\n            success: false,\n            error: `No active connection for ${app.name}`\n        };\n    }\n    const rules = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appProvisioningRule.findMany({\n        where: {\n            appId: app.id,\n            isActive: true\n        },\n        orderBy: {\n            priority: \"desc\"\n        }\n    });\n    const existingAccount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.findUnique({\n        where: {\n            employeeId_appId: {\n                employeeId: employee.id,\n                appId: app.id\n            }\n        }\n    });\n    const account = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.upsert({\n        where: {\n            employeeId_appId: {\n                employeeId: employee.id,\n                appId: app.id\n            }\n        },\n        create: {\n            employeeId: employee.id,\n            appId: app.id,\n            status: \"PROVISIONING\"\n        },\n        update: {\n            status: \"PROVISIONING\",\n            statusMessage: null\n        }\n    });\n    const result = await connector.provisionEmployee(employee, app, rules, existingAccount);\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.update({\n        where: {\n            id: account.id\n        },\n        data: {\n            status: result.success ? app.type === \"SLACK\" && !result.externalUserId ? \"PENDING\" : \"ACTIVE\" : \"FAILED\",\n            statusMessage: result.error,\n            externalUserId: result.externalUserId,\n            externalEmail: result.externalEmail,\n            externalUsername: result.externalUsername,\n            provisionedResources: result.provisionedResources,\n            provisionedAt: result.success ? new Date() : undefined,\n            lastSyncAt: new Date()\n        }\n    });\n    if (result.success && app.type === \"GOOGLE_WORKSPACE\" && result.externalEmail) {\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].employee.update({\n            where: {\n                id: employee.id\n            },\n            data: {\n                workEmail: result.externalEmail\n            }\n        });\n    }\n    const auditAction = app.type === \"GOOGLE_WORKSPACE\" ? \"GOOGLE_USER_CREATED\" : app.type === \"SLACK\" ? \"SLACK_USER_CREATED\" : \"APP_ACCOUNT_PROVISIONED\";\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logIntegrationEvent)({\n        actorId,\n        actorType: \"system\",\n        action: auditAction,\n        appAccountId: account.id,\n        employeeId: employee.id,\n        metadata: {\n            app: app.type,\n            appId: app.id,\n            success: result.success,\n            error: result.error,\n            externalUserId: result.externalUserId,\n            externalEmail: result.externalEmail\n        }\n    });\n    return {\n        ...result,\n        appAccountId: account.id\n    };\n}\nasync function provisionEmployeeInApp(employee, appType, actorId) {\n    const app = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app.findFirst({\n        where: {\n            type: appType\n        }\n    });\n    if (!app) {\n        return {\n            success: false,\n            error: `App ${appType} is not configured or enabled`\n        };\n    }\n    return provisionEmployeeWithApp(employee, app, actorId);\n}\nasync function provisionEmployeeInAppById(employee, appId, actorId) {\n    const app = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app.findUnique({\n        where: {\n            id: appId\n        }\n    });\n    if (!app) return {\n        success: false,\n        error: \"App not found\"\n    };\n    if (app.archivedAt) return {\n        success: false,\n        error: \"App is archived\"\n    };\n    return provisionEmployeeWithApp(employee, app, actorId);\n}\nasync function deprovisionEmployeeInApp(employee, appType, actorId, options) {\n    const app = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app.findFirst({\n        where: {\n            type: appType\n        }\n    });\n    if (!app) return {\n        success: false,\n        error: `App ${appType} not found`\n    };\n    return deprovisionEmployeeInAppById(employee, app.id, actorId, options);\n}\nasync function deprovisionEmployeeInAppById(employee, appId, actorId, options) {\n    const app = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app.findUnique({\n        where: {\n            id: appId\n        }\n    });\n    if (!app) return {\n        success: false,\n        error: \"App not found\"\n    };\n    if (app.archivedAt) return {\n        success: false,\n        error: \"App is archived\"\n    };\n    const account = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.findUnique({\n        where: {\n            employeeId_appId: {\n                employeeId: employee.id,\n                appId: app.id\n            }\n        }\n    });\n    if (!account) {\n        return {\n            success: true\n        } // Nothing to deprovision\n        ;\n    }\n    if (account.status === \"DEPROVISIONED\" || account.status === \"DISABLED\") {\n        return {\n            success: true\n        } // Already deprovisioned\n        ;\n    }\n    const connector = await getConnector(app);\n    if (!connector) {\n        // No connector but we still want to mark as disabled\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.update({\n            where: {\n                id: account.id\n            },\n            data: {\n                status: \"DISABLED\",\n                statusMessage: \"No connector available - marked as disabled\",\n                deprovisionedAt: new Date()\n            }\n        });\n        return {\n            success: true\n        };\n    }\n    // Deprovision\n    const result = await connector.deprovisionEmployee(employee, app, account, options);\n    // Update account\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.update({\n        where: {\n            id: account.id\n        },\n        data: {\n            status: result.success ? \"DEPROVISIONED\" : \"FAILED\",\n            statusMessage: result.error,\n            deprovisionedAt: result.success ? new Date() : undefined,\n            lastSyncAt: new Date()\n        }\n    });\n    // Audit log\n    const auditAction = app.type === \"GOOGLE_WORKSPACE\" ? \"GOOGLE_USER_DISABLED\" : app.type === \"SLACK\" ? \"SLACK_USER_DISABLED\" : \"APP_ACCOUNT_DEPROVISIONED\";\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logIntegrationEvent)({\n        actorId,\n        actorType: \"system\",\n        action: auditAction,\n        appAccountId: account.id,\n        employeeId: employee.id,\n        metadata: {\n            app: app.type,\n            appId: app.id,\n            success: result.success,\n            error: result.error\n        }\n    });\n    return result;\n}\nasync function deprovisionEmployeeFromAllApps(employee, actorId) {\n    const accounts = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].appAccount.findMany({\n        where: {\n            employeeId: employee.id,\n            status: {\n                in: [\n                    \"ACTIVE\",\n                    \"PENDING\",\n                    \"PROVISIONING\"\n                ]\n            }\n        },\n        include: {\n            app: true\n        }\n    });\n    const results = {};\n    for (const account of accounts){\n        results[account.appId] = await deprovisionEmployeeInAppById(employee, account.appId, actorId);\n    }\n    return results;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2ludGVncmF0aW9ucy9pbmRleC50cz9lYmNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXBwLCBBcHBUeXBlLCBFbXBsb3llZSwgQXBwQWNjb3VudCwgQXBwUHJvdmlzaW9uaW5nUnVsZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBkZWNyeXB0IH0gZnJvbSAnQC9saWIvZW5jcnlwdGlvbidcbmltcG9ydCB7IGxvZ0ludGVncmF0aW9uRXZlbnQgfSBmcm9tICdAL2xpYi9hdWRpdCdcbmltcG9ydCB7IEdvb2dsZVdvcmtzcGFjZUNvbm5lY3RvciB9IGZyb20gJy4vZ29vZ2xlLXdvcmtzcGFjZSdcbmltcG9ydCB7IFNsYWNrQ29ubmVjdG9yIH0gZnJvbSAnLi9zbGFjaydcbmltcG9ydCB7IEJpdGJ1Y2tldENvbm5lY3RvciB9IGZyb20gJy4vYml0YnVja2V0J1xuaW1wb3J0IHsgSmlyYUNvbm5lY3RvciB9IGZyb20gJy4vamlyYSdcbmltcG9ydCB7IEh1YlNwb3RDb25uZWN0b3IgfSBmcm9tICcuL2h1YnNwb3QnXG5pbXBvcnQgeyBQYXNzYm9sdENvbm5lY3RvciwgY3JlYXRlUGFzc2JvbHRDb25uZWN0b3IgfSBmcm9tICcuL3Bhc3Nib2x0J1xuaW1wb3J0IHsgV2ViaG9va0Nvbm5lY3RvciwgaGFzV2ViaG9va0NvbmZpZyB9IGZyb20gJy4vd2ViaG9vaydcbmltcG9ydCB0eXBlIHsgSW50ZWdyYXRpb25Db25uZWN0b3IsIFByb3Zpc2lvblJlc3VsdCwgRGVwcm92aXNpb25SZXN1bHQsIERlcHJvdmlzaW9uT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnXG5leHBvcnQgeyBHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3IsIGNyZWF0ZUdvb2dsZVdvcmtzcGFjZUNvbm5lY3RvciB9IGZyb20gJy4vZ29vZ2xlLXdvcmtzcGFjZSdcbmV4cG9ydCB7IFNsYWNrQ29ubmVjdG9yLCBjcmVhdGVTbGFja0Nvbm5lY3RvciB9IGZyb20gJy4vc2xhY2snXG5leHBvcnQgeyBCaXRidWNrZXRDb25uZWN0b3IgfSBmcm9tICcuL2JpdGJ1Y2tldCdcbmV4cG9ydCB7IEppcmFDb25uZWN0b3IgfSBmcm9tICcuL2ppcmEnXG5leHBvcnQgeyBIdWJTcG90Q29ubmVjdG9yIH0gZnJvbSAnLi9odWJzcG90J1xuZXhwb3J0IHsgUGFzc2JvbHRDb25uZWN0b3IsIGNyZWF0ZVBhc3Nib2x0Q29ubmVjdG9yIH0gZnJvbSAnLi9wYXNzYm9sdCdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3RvcihhcHA6IEFwcCk6IFByb21pc2U8SW50ZWdyYXRpb25Db25uZWN0b3IgfCBudWxsPiB7XG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwcmlzbWEuYXBwQ29ubmVjdGlvbi5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IGFwcElkOiBhcHAuaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIERlY3J5cHQgY29uZmlnXG4gIGxldCBjb25maWc6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4gIHRyeSB7XG4gICAgY29uZmlnID0gSlNPTi5wYXJzZShkZWNyeXB0KGNvbm5lY3Rpb24uY29uZmlnRW5jcnlwdGVkKSlcbiAgfSBjYXRjaCB7XG4gICAgLy8gQ29uZmlnIG1pZ2h0IGJlIHN0b3JlZCBpbiBwbGFpbiBmb3IgZGV2XG4gICAgdHJ5IHtcbiAgICAgIGNvbmZpZyA9IEpTT04ucGFyc2UoY29ubmVjdGlvbi5jb25maWdFbmNyeXB0ZWQpXG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBJZiBjb25maWcgY2Fubm90IGJlIHBhcnNlZCwgYWxsb3cgZW52LWJhc2VkIGZhbGxiYWNrcyAoZS5nLiBHb29nbGUgV29ya3NwYWNlKS5cbiAgICAgIGNvbmZpZyA9IHt9XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgd2ViaG9vayA9IGhhc1dlYmhvb2tDb25maWcoY29uZmlnKSA/IG5ldyBXZWJob29rQ29ubmVjdG9yKGNvbmZpZykgOiBudWxsXG4gIGNvbnN0IHdlYmhvb2tDb25maWd1cmVkID0gQm9vbGVhbih3ZWJob29rPy5pc0NvbmZpZ3VyZWQoKSlcbiAgaWYgKGFwcC50eXBlICE9PSAnUEFTU0JPTFQnICYmIHdlYmhvb2tDb25maWd1cmVkKSB7XG4gICAgcmV0dXJuIHdlYmhvb2tcbiAgfVxuXG4gIHN3aXRjaCAoYXBwLnR5cGUpIHtcbiAgICBjYXNlICdHT09HTEVfV09SS1NQQUNFJzpcbiAgICAgIHJldHVybiBuZXcgR29vZ2xlV29ya3NwYWNlQ29ubmVjdG9yKHtcbiAgICAgICAgZG9tYWluOiAoY29uZmlnLmRvbWFpbiBhcyBzdHJpbmcpIHx8IHByb2Nlc3MuZW52LkdPT0dMRV9XT1JLU1BBQ0VfRE9NQUlOIHx8ICcnLFxuICAgICAgICBhZG1pbkVtYWlsOiAoY29uZmlnLmFkbWluRW1haWwgYXMgc3RyaW5nKSB8fCBwcm9jZXNzLmVudi5HT09HTEVfV09SS1NQQUNFX0FETUlOX0VNQUlMIHx8ICcnLFxuICAgICAgICBzZXJ2aWNlQWNjb3VudEtleTogKGNvbmZpZy5zZXJ2aWNlQWNjb3VudEtleSBhcyBzdHJpbmcpIHx8IHByb2Nlc3MuZW52LkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfS0VZIHx8ICcnLFxuICAgICAgfSlcbiAgICBcbiAgICBjYXNlICdTTEFDSyc6XG4gICAgICBpZiAoIWNvbmZpZy5ib3RUb2tlbiB8fCB0eXBlb2YgY29uZmlnLmJvdFRva2VuICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGxcbiAgICAgIHJldHVybiBuZXcgU2xhY2tDb25uZWN0b3Ioe1xuICAgICAgICBib3RUb2tlbjogY29uZmlnLmJvdFRva2VuIGFzIHN0cmluZyxcbiAgICAgICAgYWRtaW5Ub2tlbjogY29uZmlnLmFkbWluVG9rZW4gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICB0ZWFtSWQ6IGNvbmZpZy50ZWFtSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICBkZWZhdWx0Q2hhbm5lbHM6IEFycmF5LmlzQXJyYXkoY29uZmlnLmRlZmF1bHRDaGFubmVscykgPyAoY29uZmlnLmRlZmF1bHRDaGFubmVscyBhcyBzdHJpbmdbXSkgOiB1bmRlZmluZWQsXG4gICAgICAgIHNpZ25pbmdTZWNyZXQ6IGNvbmZpZy5zaWduaW5nU2VjcmV0IGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgIH0pXG5cbiAgICBjYXNlICdCSVRCVUNLRVQnOlxuICAgICAgaWYgKCFjb25maWcud29ya3NwYWNlKSByZXR1cm4gbnVsbFxuICAgICAgaWYgKCFjb25maWcuYXBpVG9rZW4gJiYgIShjb25maWcudXNlcm5hbWUgJiYgY29uZmlnLmFwcFBhc3N3b3JkKSkgcmV0dXJuIG51bGxcbiAgICAgIHJldHVybiBuZXcgQml0YnVja2V0Q29ubmVjdG9yKHtcbiAgICAgICAgd29ya3NwYWNlOiBjb25maWcud29ya3NwYWNlIGFzIHN0cmluZyxcbiAgICAgICAgdXNlcm5hbWU6IHR5cGVvZiBjb25maWcudXNlcm5hbWUgPT09ICdzdHJpbmcnID8gKGNvbmZpZy51c2VybmFtZSBhcyBzdHJpbmcpIDogdW5kZWZpbmVkLFxuICAgICAgICBhcHBQYXNzd29yZDogdHlwZW9mIGNvbmZpZy5hcHBQYXNzd29yZCA9PT0gJ3N0cmluZycgPyAoY29uZmlnLmFwcFBhc3N3b3JkIGFzIHN0cmluZykgOiB1bmRlZmluZWQsXG4gICAgICAgIGFwaVRva2VuOiB0eXBlb2YgY29uZmlnLmFwaVRva2VuID09PSAnc3RyaW5nJyA/IChjb25maWcuYXBpVG9rZW4gYXMgc3RyaW5nKSA6IHVuZGVmaW5lZCxcbiAgICAgIH0pXG5cbiAgICBjYXNlICdKSVJBJzpcbiAgICAgIGlmICghY29uZmlnLmJhc2VVcmwgfHwgIWNvbmZpZy5hZG1pbkVtYWlsIHx8ICFjb25maWcuYXBpVG9rZW4pIHJldHVybiBudWxsXG4gICAgICByZXR1cm4gbmV3IEppcmFDb25uZWN0b3Ioe1xuICAgICAgICBiYXNlVXJsOiBjb25maWcuYmFzZVVybCBhcyBzdHJpbmcsXG4gICAgICAgIGFkbWluRW1haWw6IGNvbmZpZy5hZG1pbkVtYWlsIGFzIHN0cmluZyxcbiAgICAgICAgYXBpVG9rZW46IGNvbmZpZy5hcGlUb2tlbiBhcyBzdHJpbmcsXG4gICAgICAgIHByb2R1Y3RzOiBBcnJheS5pc0FycmF5KGNvbmZpZy5wcm9kdWN0cykgPyAoY29uZmlnLnByb2R1Y3RzIGFzIHN0cmluZ1tdKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZGVmYXVsdEdyb3VwczogQXJyYXkuaXNBcnJheShjb25maWcuZGVmYXVsdEdyb3VwcykgPyAoY29uZmlnLmRlZmF1bHRHcm91cHMgYXMgc3RyaW5nW10pIDogdW5kZWZpbmVkLFxuICAgICAgICBkZWxldGVPbkRlcHJvdmlzaW9uOiBCb29sZWFuKGNvbmZpZy5kZWxldGVPbkRlcHJvdmlzaW9uKSxcbiAgICAgIH0pXG5cbiAgICBjYXNlICdIVUJTUE9UJzpcbiAgICAgIGlmICghY29uZmlnLnNjaW1Ub2tlbikgcmV0dXJuIG51bGxcbiAgICAgIHJldHVybiBuZXcgSHViU3BvdENvbm5lY3Rvcih7XG4gICAgICAgIHNjaW1Ub2tlbjogY29uZmlnLnNjaW1Ub2tlbiBhcyBzdHJpbmcsXG4gICAgICAgIGJhc2VVcmw6IHR5cGVvZiBjb25maWcuYmFzZVVybCA9PT0gJ3N0cmluZycgPyAoY29uZmlnLmJhc2VVcmwgYXMgc3RyaW5nKSA6IHVuZGVmaW5lZCxcbiAgICAgIH0pXG5cbiAgICBjYXNlICdQQVNTQk9MVCc6IHtcbiAgICAgIGNvbnN0IGNvbm5lY3RvciA9IGNyZWF0ZVBhc3Nib2x0Q29ubmVjdG9yKGNvbmZpZylcbiAgICAgIGlmIChjb25uZWN0b3IpIHJldHVybiBjb25uZWN0b3JcbiAgICAgIHJldHVybiB3ZWJob29rQ29uZmlndXJlZCA/IHdlYmhvb2sgOiBudWxsXG4gICAgfVxuICAgIFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gd2ViaG9va0NvbmZpZ3VyZWQgPyB3ZWJob29rIDogbnVsbFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByb3Zpc2lvbkVtcGxveWVlV2l0aEFwcChcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBhcHA6IEFwcCxcbiAgYWN0b3JJZD86IHN0cmluZ1xuKTogUHJvbWlzZTxQcm92aXNpb25SZXN1bHQgJiB7IGFwcEFjY291bnRJZD86IHN0cmluZyB9PiB7XG4gIGlmICghYXBwLmlzRW5hYmxlZCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEFwcCAke2FwcC5uYW1lfSBpcyBub3QgZW5hYmxlZGAgfVxuICB9XG5cbiAgY29uc3QgY29ubmVjdG9yID0gYXdhaXQgZ2V0Q29ubmVjdG9yKGFwcClcbiAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBObyBhY3RpdmUgY29ubmVjdGlvbiBmb3IgJHthcHAubmFtZX1gIH1cbiAgfVxuXG4gIGNvbnN0IHJ1bGVzID0gYXdhaXQgcHJpc21hLmFwcFByb3Zpc2lvbmluZ1J1bGUuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IGFwcElkOiBhcHAuaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgb3JkZXJCeTogeyBwcmlvcml0eTogJ2Rlc2MnIH0sXG4gIH0pXG5cbiAgY29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgcHJpc21hLmFwcEFjY291bnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGVtcGxveWVlSWRfYXBwSWQ6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogZW1wbG95ZWUuaWQsXG4gICAgICAgIGFwcElkOiBhcHAuaWQsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG5cbiAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHByaXNtYS5hcHBBY2NvdW50LnVwc2VydCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGVtcGxveWVlSWRfYXBwSWQ6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogZW1wbG95ZWUuaWQsXG4gICAgICAgIGFwcElkOiBhcHAuaWQsXG4gICAgICB9LFxuICAgIH0sXG4gICAgY3JlYXRlOiB7XG4gICAgICBlbXBsb3llZUlkOiBlbXBsb3llZS5pZCxcbiAgICAgIGFwcElkOiBhcHAuaWQsXG4gICAgICBzdGF0dXM6ICdQUk9WSVNJT05JTkcnLFxuICAgIH0sXG4gICAgdXBkYXRlOiB7XG4gICAgICBzdGF0dXM6ICdQUk9WSVNJT05JTkcnLFxuICAgICAgc3RhdHVzTWVzc2FnZTogbnVsbCxcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rvci5wcm92aXNpb25FbXBsb3llZShlbXBsb3llZSwgYXBwLCBydWxlcywgZXhpc3RpbmdBY2NvdW50KVxuXG4gIGF3YWl0IHByaXNtYS5hcHBBY2NvdW50LnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGFjY291bnQuaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6IHJlc3VsdC5zdWNjZXNzID8gKGFwcC50eXBlID09PSAnU0xBQ0snICYmICFyZXN1bHQuZXh0ZXJuYWxVc2VySWQgPyAnUEVORElORycgOiAnQUNUSVZFJykgOiAnRkFJTEVEJyxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IHJlc3VsdC5lcnJvcixcbiAgICAgIGV4dGVybmFsVXNlcklkOiByZXN1bHQuZXh0ZXJuYWxVc2VySWQsXG4gICAgICBleHRlcm5hbEVtYWlsOiByZXN1bHQuZXh0ZXJuYWxFbWFpbCxcbiAgICAgIGV4dGVybmFsVXNlcm5hbWU6IHJlc3VsdC5leHRlcm5hbFVzZXJuYW1lLFxuICAgICAgcHJvdmlzaW9uZWRSZXNvdXJjZXM6IHJlc3VsdC5wcm92aXNpb25lZFJlc291cmNlcyBhcyBvYmplY3QsXG4gICAgICBwcm92aXNpb25lZEF0OiByZXN1bHQuc3VjY2VzcyA/IG5ldyBEYXRlKCkgOiB1bmRlZmluZWQsXG4gICAgICBsYXN0U3luY0F0OiBuZXcgRGF0ZSgpLFxuICAgIH0sXG4gIH0pXG5cbiAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIGFwcC50eXBlID09PSAnR09PR0xFX1dPUktTUEFDRScgJiYgcmVzdWx0LmV4dGVybmFsRW1haWwpIHtcbiAgICBhd2FpdCBwcmlzbWEuZW1wbG95ZWUudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBlbXBsb3llZS5pZCB9LFxuICAgICAgZGF0YTogeyB3b3JrRW1haWw6IHJlc3VsdC5leHRlcm5hbEVtYWlsIH0sXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGF1ZGl0QWN0aW9uID1cbiAgICBhcHAudHlwZSA9PT0gJ0dPT0dMRV9XT1JLU1BBQ0UnXG4gICAgICA/ICdHT09HTEVfVVNFUl9DUkVBVEVEJ1xuICAgICAgOiBhcHAudHlwZSA9PT0gJ1NMQUNLJ1xuICAgICAgICA/ICdTTEFDS19VU0VSX0NSRUFURUQnXG4gICAgICAgIDogJ0FQUF9BQ0NPVU5UX1BST1ZJU0lPTkVEJ1xuXG4gIGF3YWl0IGxvZ0ludGVncmF0aW9uRXZlbnQoe1xuICAgIGFjdG9ySWQsXG4gICAgYWN0b3JUeXBlOiAnc3lzdGVtJyxcbiAgICBhY3Rpb246IGF1ZGl0QWN0aW9uLFxuICAgIGFwcEFjY291bnRJZDogYWNjb3VudC5pZCxcbiAgICBlbXBsb3llZUlkOiBlbXBsb3llZS5pZCxcbiAgICBtZXRhZGF0YToge1xuICAgICAgYXBwOiBhcHAudHlwZSxcbiAgICAgIGFwcElkOiBhcHAuaWQsXG4gICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICBleHRlcm5hbFVzZXJJZDogcmVzdWx0LmV4dGVybmFsVXNlcklkLFxuICAgICAgZXh0ZXJuYWxFbWFpbDogcmVzdWx0LmV4dGVybmFsRW1haWwsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4geyAuLi5yZXN1bHQsIGFwcEFjY291bnRJZDogYWNjb3VudC5pZCB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm92aXNpb25FbXBsb3llZUluQXBwKFxuICBlbXBsb3llZTogRW1wbG95ZWUsXG4gIGFwcFR5cGU6IEFwcFR5cGUsXG4gIGFjdG9ySWQ/OiBzdHJpbmdcbik6IFByb21pc2U8UHJvdmlzaW9uUmVzdWx0ICYgeyBhcHBBY2NvdW50SWQ/OiBzdHJpbmcgfT4ge1xuICBjb25zdCBhcHAgPSBhd2FpdCBwcmlzbWEuYXBwLmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6IGFwcFR5cGUgfSB9KVxuICBpZiAoIWFwcCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEFwcCAke2FwcFR5cGV9IGlzIG5vdCBjb25maWd1cmVkIG9yIGVuYWJsZWRgIH1cbiAgfVxuICByZXR1cm4gcHJvdmlzaW9uRW1wbG95ZWVXaXRoQXBwKGVtcGxveWVlLCBhcHAsIGFjdG9ySWQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBhcHBJZDogc3RyaW5nLFxuICBhY3RvcklkPzogc3RyaW5nXG4pOiBQcm9taXNlPFByb3Zpc2lvblJlc3VsdCAmIHsgYXBwQWNjb3VudElkPzogc3RyaW5nIH0+IHtcbiAgY29uc3QgYXBwID0gYXdhaXQgcHJpc21hLmFwcC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGFwcElkIH0gfSlcbiAgaWYgKCFhcHApIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FwcCBub3QgZm91bmQnIH1cbiAgaWYgKGFwcC5hcmNoaXZlZEF0KSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBcHAgaXMgYXJjaGl2ZWQnIH1cbiAgcmV0dXJuIHByb3Zpc2lvbkVtcGxveWVlV2l0aEFwcChlbXBsb3llZSwgYXBwLCBhY3RvcklkKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwcm92aXNpb25FbXBsb3llZUluQXBwKFxuICBlbXBsb3llZTogRW1wbG95ZWUsXG4gIGFwcFR5cGU6IEFwcFR5cGUsXG4gIGFjdG9ySWQ/OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBEZXByb3Zpc2lvbk9wdGlvbnNcbik6IFByb21pc2U8RGVwcm92aXNpb25SZXN1bHQ+IHtcbiAgY29uc3QgYXBwID0gYXdhaXQgcHJpc21hLmFwcC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiBhcHBUeXBlIH0gfSlcbiAgaWYgKCFhcHApIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEFwcCAke2FwcFR5cGV9IG5vdCBmb3VuZGAgfVxuICByZXR1cm4gZGVwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChlbXBsb3llZSwgYXBwLmlkLCBhY3RvcklkLCBvcHRpb25zKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBhcHBJZDogc3RyaW5nLFxuICBhY3RvcklkPzogc3RyaW5nLFxuICBvcHRpb25zPzogRGVwcm92aXNpb25PcHRpb25zXG4pOiBQcm9taXNlPERlcHJvdmlzaW9uUmVzdWx0PiB7XG4gIGNvbnN0IGFwcCA9IGF3YWl0IHByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBhcHBJZCB9IH0pXG4gIGlmICghYXBwKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBcHAgbm90IGZvdW5kJyB9XG4gIGlmIChhcHAuYXJjaGl2ZWRBdCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXBwIGlzIGFyY2hpdmVkJyB9XG5cbiAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHByaXNtYS5hcHBBY2NvdW50LmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBlbXBsb3llZUlkX2FwcElkOiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgICAgICBhcHBJZDogYXBwLmlkLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmICghYWNjb3VudCkge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfSAvLyBOb3RoaW5nIHRvIGRlcHJvdmlzaW9uXG4gIH1cblxuICBpZiAoYWNjb3VudC5zdGF0dXMgPT09ICdERVBST1ZJU0lPTkVEJyB8fCBhY2NvdW50LnN0YXR1cyA9PT0gJ0RJU0FCTEVEJykge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfSAvLyBBbHJlYWR5IGRlcHJvdmlzaW9uZWRcbiAgfVxuXG4gIGNvbnN0IGNvbm5lY3RvciA9IGF3YWl0IGdldENvbm5lY3RvcihhcHApXG4gIGlmICghY29ubmVjdG9yKSB7XG4gICAgLy8gTm8gY29ubmVjdG9yIGJ1dCB3ZSBzdGlsbCB3YW50IHRvIG1hcmsgYXMgZGlzYWJsZWRcbiAgICBhd2FpdCBwcmlzbWEuYXBwQWNjb3VudC51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGFjY291bnQuaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3RhdHVzOiAnRElTQUJMRUQnLFxuICAgICAgICBzdGF0dXNNZXNzYWdlOiAnTm8gY29ubmVjdG9yIGF2YWlsYWJsZSAtIG1hcmtlZCBhcyBkaXNhYmxlZCcsXG4gICAgICAgIGRlcHJvdmlzaW9uZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIC8vIERlcHJvdmlzaW9uXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rvci5kZXByb3Zpc2lvbkVtcGxveWVlKGVtcGxveWVlLCBhcHAsIGFjY291bnQsIG9wdGlvbnMpXG5cbiAgLy8gVXBkYXRlIGFjY291bnRcbiAgYXdhaXQgcHJpc21hLmFwcEFjY291bnQudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogYWNjb3VudC5pZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHN0YXR1czogcmVzdWx0LnN1Y2Nlc3MgPyAnREVQUk9WSVNJT05FRCcgOiAnRkFJTEVEJyxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IHJlc3VsdC5lcnJvcixcbiAgICAgIGRlcHJvdmlzaW9uZWRBdDogcmVzdWx0LnN1Y2Nlc3MgPyBuZXcgRGF0ZSgpIDogdW5kZWZpbmVkLFxuICAgICAgbGFzdFN5bmNBdDogbmV3IERhdGUoKSxcbiAgICB9LFxuICB9KVxuXG4gIC8vIEF1ZGl0IGxvZ1xuICBjb25zdCBhdWRpdEFjdGlvbiA9XG4gICAgYXBwLnR5cGUgPT09ICdHT09HTEVfV09SS1NQQUNFJ1xuICAgICAgPyAnR09PR0xFX1VTRVJfRElTQUJMRUQnXG4gICAgICA6IGFwcC50eXBlID09PSAnU0xBQ0snXG4gICAgICAgID8gJ1NMQUNLX1VTRVJfRElTQUJMRUQnXG4gICAgICAgIDogJ0FQUF9BQ0NPVU5UX0RFUFJPVklTSU9ORUQnXG5cbiAgYXdhaXQgbG9nSW50ZWdyYXRpb25FdmVudCh7XG4gICAgYWN0b3JJZCxcbiAgICBhY3RvclR5cGU6ICdzeXN0ZW0nLFxuICAgIGFjdGlvbjogYXVkaXRBY3Rpb24sXG4gICAgYXBwQWNjb3VudElkOiBhY2NvdW50LmlkLFxuICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICBhcHA6IGFwcC50eXBlLFxuICAgICAgYXBwSWQ6IGFwcC5pZCxcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgZXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcHJvdmlzaW9uRW1wbG95ZWVGcm9tQWxsQXBwcyhcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBhY3RvcklkPzogc3RyaW5nXG4pOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIERlcHJvdmlzaW9uUmVzdWx0Pj4ge1xuICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHByaXNtYS5hcHBBY2NvdW50LmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyBcbiAgICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgICAgc3RhdHVzOiB7IGluOiBbJ0FDVElWRScsICdQRU5ESU5HJywgJ1BST1ZJU0lPTklORyddIH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7IGFwcDogdHJ1ZSB9LFxuICB9KVxuXG4gIGNvbnN0IHJlc3VsdHM6IFJlY29yZDxzdHJpbmcsIERlcHJvdmlzaW9uUmVzdWx0PiA9IHt9XG5cbiAgZm9yIChjb25zdCBhY2NvdW50IG9mIGFjY291bnRzKSB7XG4gICAgcmVzdWx0c1thY2NvdW50LmFwcElkXSA9IGF3YWl0IGRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQoZW1wbG95ZWUsIGFjY291bnQuYXBwSWQsIGFjdG9ySWQpXG4gIH1cblxuICByZXR1cm4gcmVzdWx0c1xufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImRlY3J5cHQiLCJsb2dJbnRlZ3JhdGlvbkV2ZW50IiwiR29vZ2xlV29ya3NwYWNlQ29ubmVjdG9yIiwiU2xhY2tDb25uZWN0b3IiLCJCaXRidWNrZXRDb25uZWN0b3IiLCJKaXJhQ29ubmVjdG9yIiwiSHViU3BvdENvbm5lY3RvciIsImNyZWF0ZVBhc3Nib2x0Q29ubmVjdG9yIiwiV2ViaG9va0Nvbm5lY3RvciIsImhhc1dlYmhvb2tDb25maWciLCJjcmVhdGVHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3IiLCJjcmVhdGVTbGFja0Nvbm5lY3RvciIsIlBhc3Nib2x0Q29ubmVjdG9yIiwiZ2V0Q29ubmVjdG9yIiwiYXBwIiwiY29ubmVjdGlvbiIsImFwcENvbm5lY3Rpb24iLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImFwcElkIiwiaWQiLCJpc0FjdGl2ZSIsImNvbmZpZyIsIkpTT04iLCJwYXJzZSIsImNvbmZpZ0VuY3J5cHRlZCIsIndlYmhvb2siLCJ3ZWJob29rQ29uZmlndXJlZCIsIkJvb2xlYW4iLCJpc0NvbmZpZ3VyZWQiLCJ0eXBlIiwiZG9tYWluIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9XT1JLU1BBQ0VfRE9NQUlOIiwiYWRtaW5FbWFpbCIsIkdPT0dMRV9XT1JLU1BBQ0VfQURNSU5fRU1BSUwiLCJzZXJ2aWNlQWNjb3VudEtleSIsIkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfS0VZIiwiYm90VG9rZW4iLCJhZG1pblRva2VuIiwidGVhbUlkIiwiZGVmYXVsdENoYW5uZWxzIiwiQXJyYXkiLCJpc0FycmF5IiwidW5kZWZpbmVkIiwic2lnbmluZ1NlY3JldCIsIndvcmtzcGFjZSIsImFwaVRva2VuIiwidXNlcm5hbWUiLCJhcHBQYXNzd29yZCIsImJhc2VVcmwiLCJwcm9kdWN0cyIsImRlZmF1bHRHcm91cHMiLCJkZWxldGVPbkRlcHJvdmlzaW9uIiwic2NpbVRva2VuIiwiY29ubmVjdG9yIiwicHJvdmlzaW9uRW1wbG95ZWVXaXRoQXBwIiwiZW1wbG95ZWUiLCJhY3RvcklkIiwiaXNFbmFibGVkIiwic3VjY2VzcyIsImVycm9yIiwibmFtZSIsInJ1bGVzIiwiYXBwUHJvdmlzaW9uaW5nUnVsZSIsImZpbmRNYW55Iiwib3JkZXJCeSIsInByaW9yaXR5IiwiZXhpc3RpbmdBY2NvdW50IiwiYXBwQWNjb3VudCIsImZpbmRVbmlxdWUiLCJlbXBsb3llZUlkX2FwcElkIiwiZW1wbG95ZWVJZCIsImFjY291bnQiLCJ1cHNlcnQiLCJjcmVhdGUiLCJzdGF0dXMiLCJ1cGRhdGUiLCJzdGF0dXNNZXNzYWdlIiwicmVzdWx0IiwicHJvdmlzaW9uRW1wbG95ZWUiLCJkYXRhIiwiZXh0ZXJuYWxVc2VySWQiLCJleHRlcm5hbEVtYWlsIiwiZXh0ZXJuYWxVc2VybmFtZSIsInByb3Zpc2lvbmVkUmVzb3VyY2VzIiwicHJvdmlzaW9uZWRBdCIsIkRhdGUiLCJsYXN0U3luY0F0Iiwid29ya0VtYWlsIiwiYXVkaXRBY3Rpb24iLCJhY3RvclR5cGUiLCJhY3Rpb24iLCJhcHBBY2NvdW50SWQiLCJtZXRhZGF0YSIsInByb3Zpc2lvbkVtcGxveWVlSW5BcHAiLCJhcHBUeXBlIiwicHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQiLCJhcmNoaXZlZEF0IiwiZGVwcm92aXNpb25FbXBsb3llZUluQXBwIiwib3B0aW9ucyIsImRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQiLCJkZXByb3Zpc2lvbmVkQXQiLCJkZXByb3Zpc2lvbkVtcGxveWVlIiwiZGVwcm92aXNpb25FbXBsb3llZUZyb21BbGxBcHBzIiwiYWNjb3VudHMiLCJpbiIsImluY2x1ZGUiLCJyZXN1bHRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/jira.ts":
/*!**************************************!*\
  !*** ./src/lib/integrations/jira.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JiraConnector: () => (/* binding */ JiraConnector)\n/* harmony export */ });\nfunction basicAuth(email, apiToken) {\n    return Buffer.from(`${email}:${apiToken}`).toString(\"base64\");\n}\nfunction normalizeBaseUrl(url) {\n    return url.replace(/\\/+$/, \"\");\n}\nfunction matchesCondition(employee, condition) {\n    const meta = employee.meta ?? {};\n    for (const [key, value] of Object.entries(condition)){\n        if (value === undefined || value === null) continue;\n        const employeeValue = employee[key] !== undefined ? employee[key] : meta[key];\n        if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n            if (employeeValue.toLowerCase() !== value.toLowerCase()) return false;\n        } else if (employeeValue !== value) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction mergeProvisionData(employee, rules) {\n    const result = {\n        groups: [],\n        projectRoles: []\n    };\n    const sortedRules = [\n        ...rules\n    ].sort((a, b)=>b.priority - a.priority);\n    for (const rule of sortedRules){\n        if (!rule.isActive) continue;\n        const condition = rule.condition;\n        if (!matchesCondition(employee, condition)) continue;\n        const data = rule.provisionData;\n        if (data.groups?.length) result.groups = [\n            ...result.groups || [],\n            ...data.groups\n        ];\n        if (data.projectRoles?.length) {\n            result.projectRoles = [\n                ...result.projectRoles || [],\n                ...data.projectRoles\n            ];\n        }\n    }\n    result.groups = [\n        ...new Set((result.groups || []).filter(Boolean))\n    ];\n    const dedupedRoles = new Map();\n    for (const role of result.projectRoles || []){\n        if (!role?.projectId || !role.roleId) continue;\n        dedupedRoles.set(`${role.projectId}:${role.roleId}`, role);\n    }\n    result.projectRoles = [\n        ...dedupedRoles.values()\n    ];\n    return result;\n}\nasync function requestJson(url, init, okStatuses = [\n    200\n]) {\n    const res = await fetch(url, init);\n    if (!okStatuses.includes(res.status)) {\n        const text = await res.text().catch(()=>\"\");\n        throw new Error(`Jira API error (${res.status}): ${text || res.statusText}`);\n    }\n    if (res.status === 204) return {};\n    return await res.json();\n}\nclass JiraConnector {\n    constructor(config){\n        this.config = config;\n        this.baseUrl = normalizeBaseUrl(config.baseUrl);\n        this.authHeader = `Basic ${basicAuth(config.adminEmail, config.apiToken)}`;\n    }\n    async testConnection() {\n        try {\n            await requestJson(`${this.baseUrl}/rest/api/3/myself`, {\n                method: \"GET\",\n                headers: {\n                    Authorization: this.authHeader,\n                    Accept: \"application/json\"\n                }\n            });\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to Jira\"\n            };\n        }\n    }\n    async findUserAccountIdByEmail(email) {\n        const params = new URLSearchParams();\n        params.set(\"query\", email);\n        params.set(\"maxResults\", \"5\");\n        const url = `${this.baseUrl}/rest/api/3/user/search?${params.toString()}`;\n        const users = await requestJson(url, {\n            method: \"GET\",\n            headers: {\n                Authorization: this.authHeader,\n                Accept: \"application/json\"\n            }\n        });\n        const match = users.find((u)=>u.emailAddress?.toLowerCase?.() === email.toLowerCase());\n        return (match?.accountId || users[0]?.accountId) ?? null;\n    }\n    async ensureUser(email, displayName) {\n        const existing = await this.findUserAccountIdByEmail(email);\n        if (existing) return existing;\n        const products = Array.isArray(this.config.products) && this.config.products.length > 0 ? this.config.products : [\n            \"jira-software\"\n        ];\n        const created = await requestJson(`${this.baseUrl}/rest/api/3/user`, {\n            method: \"POST\",\n            headers: {\n                Authorization: this.authHeader,\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                emailAddress: email,\n                products,\n                displayName\n            })\n        }, [\n            201,\n            200\n        ]);\n        if (!created.accountId) throw new Error(\"Jira user creation did not return accountId\");\n        return created.accountId;\n    }\n    async provisionEmployee(employee, app, rules, existingAccount) {\n        try {\n            const email = employee.workEmail || employee.personalEmail;\n            if (!email) return {\n                success: false,\n                error: \"Email is required for Jira provisioning\"\n            };\n            const displayName = employee.fullName || email;\n            const accountId = existingAccount?.externalUserId || await this.ensureUser(email, displayName);\n            const provisionData = mergeProvisionData(employee, rules);\n            const groups = [\n                ...Array.isArray(this.config.defaultGroups) ? this.config.defaultGroups : [],\n                ...provisionData.groups || []\n            ].map((g)=>g.trim()).filter(Boolean);\n            const addedGroups = [];\n            for (const group of [\n                ...new Set(groups)\n            ]){\n                const url = `${this.baseUrl}/rest/api/3/group/user?${new URLSearchParams({\n                    groupname: group\n                }).toString()}`;\n                await requestJson(url, {\n                    method: \"POST\",\n                    headers: {\n                        Authorization: this.authHeader,\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        accountId\n                    })\n                }, [\n                    201,\n                    200\n                ]);\n                addedGroups.push(group);\n            }\n            const roleAssignments = (provisionData.projectRoles || []).filter((role)=>role.projectId && role.roleId);\n            const addedRoles = [];\n            for (const assignment of roleAssignments){\n                const url = `${this.baseUrl}/rest/api/3/project/${assignment.projectId}/role/${assignment.roleId}`;\n                await requestJson(url, {\n                    method: \"POST\",\n                    headers: {\n                        Authorization: this.authHeader,\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        user: [\n                            accountId\n                        ]\n                    })\n                }, [\n                    200,\n                    201,\n                    204\n                ]);\n                addedRoles.push(assignment);\n            }\n            return {\n                success: true,\n                externalUserId: accountId,\n                externalEmail: email,\n                provisionedResources: {\n                    groups: addedGroups,\n                    projectRoles: addedRoles\n                }\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to provision Jira access\"\n            };\n        }\n    }\n    async deprovisionEmployee(employee, app, account, _options) {\n        try {\n            const accountId = account.externalUserId;\n            if (!accountId) return {\n                success: false,\n                error: \"No Jira accountId found\"\n            };\n            const resources = account.provisionedResources || {};\n            const groups = [\n                ...Array.isArray(this.config.defaultGroups) ? this.config.defaultGroups : [],\n                ...Array.isArray(resources.groups) ? resources.groups : []\n            ].map((g)=>typeof g === \"string\" ? g.trim() : \"\").filter(Boolean);\n            for (const group of [\n                ...new Set(groups)\n            ]){\n                const params = new URLSearchParams({\n                    groupname: group,\n                    accountId\n                });\n                const url = `${this.baseUrl}/rest/api/3/group/user?${params.toString()}`;\n                await requestJson(url, {\n                    method: \"DELETE\",\n                    headers: {\n                        Authorization: this.authHeader,\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    200,\n                    204\n                ]);\n            }\n            const projectRoles = Array.isArray(resources.projectRoles) ? resources.projectRoles : [];\n            for (const assignment of projectRoles){\n                if (!assignment?.projectId || !assignment.roleId) continue;\n                const params = new URLSearchParams({\n                    userAccountId: accountId\n                });\n                const url = `${this.baseUrl}/rest/api/3/project/${assignment.projectId}/role/${assignment.roleId}?${params.toString()}`;\n                await requestJson(url, {\n                    method: \"DELETE\",\n                    headers: {\n                        Authorization: this.authHeader,\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    200,\n                    204\n                ]);\n            }\n            if (this.config.deleteOnDeprovision) {\n                const url = `${this.baseUrl}/rest/api/3/user?${new URLSearchParams({\n                    accountId\n                }).toString()}`;\n                await requestJson(url, {\n                    method: \"DELETE\",\n                    headers: {\n                        Authorization: this.authHeader,\n                        Accept: \"application/json\"\n                    }\n                }, [\n                    204\n                ]);\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to deprovision Jira access\"\n            };\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLElBQUksQ0FBQ3FELE9BQU8sQ0FBQyxvQkFBb0IsRUFBRStDLFdBQVdsRSxTQUFTLENBQUMsTUFBTSxFQUFFa0UsV0FBV2pFLE1BQU0sQ0FBQyxDQUFDLEVBQUU4QixPQUFPbkUsUUFBUSxHQUFHLENBQUM7Z0JBQ3ZILE1BQU13QyxZQUNKdEMsS0FDQTtvQkFDRXlELFFBQVE7b0JBQ1JDLFNBQVM7d0JBQUVDLGVBQWUsSUFBSSxDQUFDTCxVQUFVO3dCQUFFTSxRQUFRO29CQUFtQjtnQkFDeEUsR0FDQTtvQkFBQztvQkFBSztpQkFBSTtZQUVkO1lBRUEsSUFBSSxJQUFJLENBQUNSLE1BQU0sQ0FBQ3lELG1CQUFtQixFQUFFO2dCQUNuQyxNQUFNN0csTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDcUQsT0FBTyxDQUFDLGlCQUFpQixFQUFFLElBQUlhLGdCQUFnQjtvQkFBRU07Z0JBQVUsR0FBRzFFLFFBQVEsR0FBRyxDQUFDO2dCQUM5RixNQUFNd0MsWUFDSnRDLEtBQ0E7b0JBQ0V5RCxRQUFRO29CQUNSQyxTQUFTO3dCQUFFQyxlQUFlLElBQUksQ0FBQ0wsVUFBVTt3QkFBRU0sUUFBUTtvQkFBbUI7Z0JBQ3hFLEdBQ0E7b0JBQUM7aUJBQUk7WUFFVDtZQUVBLE9BQU87Z0JBQUVDLFNBQVM7WUFBSztRQUN6QixFQUFFLE9BQU9DLE9BQU87WUFDZCxPQUFPO2dCQUFFRCxTQUFTO2dCQUFPQyxPQUFPQSxpQkFBaUJmLFFBQVFlLE1BQU1DLE9BQU8sR0FBRztZQUFvQztRQUMvRztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvaW50ZWdyYXRpb25zL2ppcmEudHM/MWRiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEVtcGxveWVlLCBBcHAsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCB0eXBlIHtcbiAgSW50ZWdyYXRpb25Db25uZWN0b3IsXG4gIFByb3Zpc2lvblJlc3VsdCxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgSmlyYUNvbmZpZyxcbiAgSmlyYVByb3Zpc2lvbkRhdGEsXG4gIEppcmFQcm9qZWN0Um9sZUFzc2lnbm1lbnQsXG4gIFByb3Zpc2lvbmluZ0NvbmRpdGlvbixcbn0gZnJvbSAnLi90eXBlcydcblxuZnVuY3Rpb24gYmFzaWNBdXRoKGVtYWlsOiBzdHJpbmcsIGFwaVRva2VuOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGAke2VtYWlsfToke2FwaVRva2VufWApLnRvU3RyaW5nKCdiYXNlNjQnKVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlVXJsKHVybDogc3RyaW5nKSB7XG4gIHJldHVybiB1cmwucmVwbGFjZSgvXFwvKyQvLCAnJylcbn1cblxuZnVuY3Rpb24gbWF0Y2hlc0NvbmRpdGlvbihlbXBsb3llZTogRW1wbG95ZWUsIGNvbmRpdGlvbjogUHJvdmlzaW9uaW5nQ29uZGl0aW9uKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1ldGEgPSAoZW1wbG95ZWUubWV0YSA/PyB7fSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZGl0aW9uKSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSBjb250aW51ZVxuICAgIGNvbnN0IGVtcGxveWVlVmFsdWUgPVxuICAgICAgKGVtcGxveWVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtrZXldICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyAoZW1wbG95ZWUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleV1cbiAgICAgICAgOiBtZXRhW2tleV1cbiAgICBpZiAodHlwZW9mIGVtcGxveWVlVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChlbXBsb3llZVZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSBpZiAoZW1wbG95ZWVWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBtZXJnZVByb3Zpc2lvbkRhdGEoZW1wbG95ZWU6IEVtcGxveWVlLCBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdKTogSmlyYVByb3Zpc2lvbkRhdGEge1xuICBjb25zdCByZXN1bHQ6IEppcmFQcm92aXNpb25EYXRhID0geyBncm91cHM6IFtdLCBwcm9qZWN0Um9sZXM6IFtdIH1cbiAgY29uc3Qgc29ydGVkUnVsZXMgPSBbLi4ucnVsZXNdLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KVxuICBmb3IgKGNvbnN0IHJ1bGUgb2Ygc29ydGVkUnVsZXMpIHtcbiAgICBpZiAoIXJ1bGUuaXNBY3RpdmUpIGNvbnRpbnVlXG4gICAgY29uc3QgY29uZGl0aW9uID0gcnVsZS5jb25kaXRpb24gYXMgUHJvdmlzaW9uaW5nQ29uZGl0aW9uXG4gICAgaWYgKCFtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlLCBjb25kaXRpb24pKSBjb250aW51ZVxuICAgIGNvbnN0IGRhdGEgPSBydWxlLnByb3Zpc2lvbkRhdGEgYXMgSmlyYVByb3Zpc2lvbkRhdGFcbiAgICBpZiAoZGF0YS5ncm91cHM/Lmxlbmd0aCkgcmVzdWx0Lmdyb3VwcyA9IFsuLi4ocmVzdWx0Lmdyb3VwcyB8fCBbXSksIC4uLmRhdGEuZ3JvdXBzXVxuICAgIGlmIChkYXRhLnByb2plY3RSb2xlcz8ubGVuZ3RoKSB7XG4gICAgICByZXN1bHQucHJvamVjdFJvbGVzID0gWy4uLihyZXN1bHQucHJvamVjdFJvbGVzIHx8IFtdKSwgLi4uZGF0YS5wcm9qZWN0Um9sZXNdXG4gICAgfVxuICB9XG4gIHJlc3VsdC5ncm91cHMgPSBbLi4ubmV3IFNldCgocmVzdWx0Lmdyb3VwcyB8fCBbXSkuZmlsdGVyKEJvb2xlYW4pKV1cbiAgY29uc3QgZGVkdXBlZFJvbGVzID0gbmV3IE1hcDxzdHJpbmcsIEppcmFQcm9qZWN0Um9sZUFzc2lnbm1lbnQ+KClcbiAgZm9yIChjb25zdCByb2xlIG9mIHJlc3VsdC5wcm9qZWN0Um9sZXMgfHwgW10pIHtcbiAgICBpZiAoIXJvbGU/LnByb2plY3RJZCB8fCAhcm9sZS5yb2xlSWQpIGNvbnRpbnVlXG4gICAgZGVkdXBlZFJvbGVzLnNldChgJHtyb2xlLnByb2plY3RJZH06JHtyb2xlLnJvbGVJZH1gLCByb2xlKVxuICB9XG4gIHJlc3VsdC5wcm9qZWN0Um9sZXMgPSBbLi4uZGVkdXBlZFJvbGVzLnZhbHVlcygpXVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RKc29uPFQ+KHVybDogc3RyaW5nLCBpbml0OiBSZXF1ZXN0SW5pdCwgb2tTdGF0dXNlczogbnVtYmVyW10gPSBbMjAwXSkge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIGluaXQpXG4gIGlmICghb2tTdGF0dXNlcy5pbmNsdWRlcyhyZXMuc3RhdHVzKSkge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpLmNhdGNoKCgpID0+ICcnKVxuICAgIHRocm93IG5ldyBFcnJvcihgSmlyYSBBUEkgZXJyb3IgKCR7cmVzLnN0YXR1c30pOiAke3RleHQgfHwgcmVzLnN0YXR1c1RleHR9YClcbiAgfVxuICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4ge30gYXMgVFxuICByZXR1cm4gKGF3YWl0IHJlcy5qc29uKCkpIGFzIFRcbn1cblxuZXhwb3J0IGNsYXNzIEppcmFDb25uZWN0b3IgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbkNvbm5lY3RvciB7XG4gIHByaXZhdGUgY29uZmlnOiBKaXJhQ29uZmlnXG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nXG4gIHByaXZhdGUgYXV0aEhlYWRlcjogc3RyaW5nXG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBKaXJhQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICB0aGlzLmJhc2VVcmwgPSBub3JtYWxpemVCYXNlVXJsKGNvbmZpZy5iYXNlVXJsKVxuICAgIHRoaXMuYXV0aEhlYWRlciA9IGBCYXNpYyAke2Jhc2ljQXV0aChjb25maWcuYWRtaW5FbWFpbCwgY29uZmlnLmFwaVRva2VuKX1gXG4gIH1cblxuICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZXF1ZXN0SnNvbihgJHt0aGlzLmJhc2VVcmx9L3Jlc3QvYXBpLzMvbXlzZWxmYCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIH0pXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gY29ubmVjdCB0byBKaXJhJyB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmaW5kVXNlckFjY291bnRJZEJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICAgIHBhcmFtcy5zZXQoJ3F1ZXJ5JywgZW1haWwpXG4gICAgcGFyYW1zLnNldCgnbWF4UmVzdWx0cycsICc1JylcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L3Jlc3QvYXBpLzMvdXNlci9zZWFyY2g/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCByZXF1ZXN0SnNvbjxBcnJheTx7IGFjY291bnRJZD86IHN0cmluZzsgZW1haWxBZGRyZXNzPzogc3RyaW5nIH0+Pih1cmwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KVxuICAgIGNvbnN0IG1hdGNoID0gdXNlcnMuZmluZCgodSkgPT4gdS5lbWFpbEFkZHJlc3M/LnRvTG93ZXJDYXNlPy4oKSA9PT0gZW1haWwudG9Mb3dlckNhc2UoKSlcbiAgICByZXR1cm4gKG1hdGNoPy5hY2NvdW50SWQgfHwgdXNlcnNbMF0/LmFjY291bnRJZCkgPz8gbnVsbFxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVVc2VyKGVtYWlsOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgdGhpcy5maW5kVXNlckFjY291bnRJZEJ5RW1haWwoZW1haWwpXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gZXhpc3RpbmdcblxuICAgIGNvbnN0IHByb2R1Y3RzID1cbiAgICAgIChBcnJheS5pc0FycmF5KHRoaXMuY29uZmlnLnByb2R1Y3RzKSAmJiB0aGlzLmNvbmZpZy5wcm9kdWN0cy5sZW5ndGggPiAwXG4gICAgICAgID8gdGhpcy5jb25maWcucHJvZHVjdHNcbiAgICAgICAgOiBbJ2ppcmEtc29mdHdhcmUnXSkgYXMgc3RyaW5nW11cblxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCByZXF1ZXN0SnNvbjx7IGFjY291bnRJZD86IHN0cmluZyB9PihcbiAgICAgIGAke3RoaXMuYmFzZVVybH0vcmVzdC9hcGkvMy91c2VyYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLmF1dGhIZWFkZXIsXG4gICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsQWRkcmVzczogZW1haWwsXG4gICAgICAgICAgcHJvZHVjdHMsXG4gICAgICAgICAgZGlzcGxheU5hbWUsXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICAgIFsyMDEsIDIwMF1cbiAgICApXG4gICAgaWYgKCFjcmVhdGVkLmFjY291bnRJZCkgdGhyb3cgbmV3IEVycm9yKCdKaXJhIHVzZXIgY3JlYXRpb24gZGlkIG5vdCByZXR1cm4gYWNjb3VudElkJylcbiAgICByZXR1cm4gY3JlYXRlZC5hY2NvdW50SWRcbiAgfVxuXG4gIGFzeW5jIHByb3Zpc2lvbkVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBhcHA6IEFwcCxcbiAgICBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdLFxuICAgIGV4aXN0aW5nQWNjb3VudD86IEFwcEFjY291bnQgfCBudWxsXG4gICk6IFByb21pc2U8UHJvdmlzaW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGVtYWlsID0gZW1wbG95ZWUud29ya0VtYWlsIHx8IGVtcGxveWVlLnBlcnNvbmFsRW1haWxcbiAgICAgIGlmICghZW1haWwpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0VtYWlsIGlzIHJlcXVpcmVkIGZvciBKaXJhIHByb3Zpc2lvbmluZycgfVxuXG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGVtcGxveWVlLmZ1bGxOYW1lIHx8IGVtYWlsXG4gICAgICBjb25zdCBhY2NvdW50SWQgPSBleGlzdGluZ0FjY291bnQ/LmV4dGVybmFsVXNlcklkIHx8IChhd2FpdCB0aGlzLmVuc3VyZVVzZXIoZW1haWwsIGRpc3BsYXlOYW1lKSlcblxuICAgICAgY29uc3QgcHJvdmlzaW9uRGF0YSA9IG1lcmdlUHJvdmlzaW9uRGF0YShlbXBsb3llZSwgcnVsZXMpXG4gICAgICBjb25zdCBncm91cHMgPSBbXG4gICAgICAgIC4uLihBcnJheS5pc0FycmF5KHRoaXMuY29uZmlnLmRlZmF1bHRHcm91cHMpID8gdGhpcy5jb25maWcuZGVmYXVsdEdyb3VwcyA6IFtdKSxcbiAgICAgICAgLi4uKHByb3Zpc2lvbkRhdGEuZ3JvdXBzIHx8IFtdKSxcbiAgICAgIF1cbiAgICAgICAgLm1hcCgoZykgPT4gZy50cmltKCkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbilcblxuICAgICAgY29uc3QgYWRkZWRHcm91cHM6IHN0cmluZ1tdID0gW11cbiAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgWy4uLm5ldyBTZXQoZ3JvdXBzKV0pIHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9yZXN0L2FwaS8zL2dyb3VwL3VzZXI/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZ3JvdXBuYW1lOiBncm91cCB9KS50b1N0cmluZygpfWBcbiAgICAgICAgYXdhaXQgcmVxdWVzdEpzb24oXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLmF1dGhIZWFkZXIsXG4gICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYWNjb3VudElkIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgWzIwMSwgMjAwXVxuICAgICAgICApXG4gICAgICAgIGFkZGVkR3JvdXBzLnB1c2goZ3JvdXApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJvbGVBc3NpZ25tZW50cyA9IChwcm92aXNpb25EYXRhLnByb2plY3RSb2xlcyB8fCBbXSkuZmlsdGVyKFxuICAgICAgICAocm9sZSkgPT4gcm9sZS5wcm9qZWN0SWQgJiYgcm9sZS5yb2xlSWRcbiAgICAgIClcbiAgICAgIGNvbnN0IGFkZGVkUm9sZXM6IEppcmFQcm9qZWN0Um9sZUFzc2lnbm1lbnRbXSA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGFzc2lnbm1lbnQgb2Ygcm9sZUFzc2lnbm1lbnRzKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vcmVzdC9hcGkvMy9wcm9qZWN0LyR7YXNzaWdubWVudC5wcm9qZWN0SWR9L3JvbGUvJHthc3NpZ25tZW50LnJvbGVJZH1gXG4gICAgICAgIGF3YWl0IHJlcXVlc3RKc29uKFxuICAgICAgICAgIHVybCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy5hdXRoSGVhZGVyLFxuICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVzZXI6IFthY2NvdW50SWRdIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgWzIwMCwgMjAxLCAyMDRdXG4gICAgICAgIClcbiAgICAgICAgYWRkZWRSb2xlcy5wdXNoKGFzc2lnbm1lbnQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGV4dGVybmFsVXNlcklkOiBhY2NvdW50SWQsXG4gICAgICAgIGV4dGVybmFsRW1haWw6IGVtYWlsLFxuICAgICAgICBwcm92aXNpb25lZFJlc291cmNlczogeyBncm91cHM6IGFkZGVkR3JvdXBzLCBwcm9qZWN0Um9sZXM6IGFkZGVkUm9sZXMgfSxcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcHJvdmlzaW9uIEppcmEgYWNjZXNzJyB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgYXBwOiBBcHAsXG4gICAgYWNjb3VudDogQXBwQWNjb3VudCxcbiAgICBfb3B0aW9ucz86IERlcHJvdmlzaW9uT3B0aW9uc1xuICApOiBQcm9taXNlPERlcHJvdmlzaW9uUmVzdWx0PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFjY291bnRJZCA9IGFjY291bnQuZXh0ZXJuYWxVc2VySWRcbiAgICAgIGlmICghYWNjb3VudElkKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBKaXJhIGFjY291bnRJZCBmb3VuZCcgfVxuXG4gICAgICBjb25zdCByZXNvdXJjZXMgPSAoYWNjb3VudC5wcm92aXNpb25lZFJlc291cmNlcyBhcyBhbnkpIHx8IHt9XG4gICAgICBjb25zdCBncm91cHM6IHN0cmluZ1tdID0gW1xuICAgICAgICAuLi4oQXJyYXkuaXNBcnJheSh0aGlzLmNvbmZpZy5kZWZhdWx0R3JvdXBzKSA/IHRoaXMuY29uZmlnLmRlZmF1bHRHcm91cHMgOiBbXSksXG4gICAgICAgIC4uLihBcnJheS5pc0FycmF5KHJlc291cmNlcy5ncm91cHMpID8gcmVzb3VyY2VzLmdyb3VwcyA6IFtdKSxcbiAgICAgIF1cbiAgICAgICAgLm1hcCgoZykgPT4gKHR5cGVvZiBnID09PSAnc3RyaW5nJyA/IGcudHJpbSgpIDogJycpKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG5cbiAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgWy4uLm5ldyBTZXQoZ3JvdXBzKV0pIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IGdyb3VwbmFtZTogZ3JvdXAsIGFjY291bnRJZCB9KVxuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L3Jlc3QvYXBpLzMvZ3JvdXAvdXNlcj8ke3BhcmFtcy50b1N0cmluZygpfWBcbiAgICAgICAgYXdhaXQgcmVxdWVzdEpzb24oXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFsyMDAsIDIwNF1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9qZWN0Um9sZXMgPSBBcnJheS5pc0FycmF5KHJlc291cmNlcy5wcm9qZWN0Um9sZXMpXG4gICAgICAgID8gKHJlc291cmNlcy5wcm9qZWN0Um9sZXMgYXMgSmlyYVByb2plY3RSb2xlQXNzaWdubWVudFtdKVxuICAgICAgICA6IFtdXG4gICAgICBmb3IgKGNvbnN0IGFzc2lnbm1lbnQgb2YgcHJvamVjdFJvbGVzKSB7XG4gICAgICAgIGlmICghYXNzaWdubWVudD8ucHJvamVjdElkIHx8ICFhc3NpZ25tZW50LnJvbGVJZCkgY29udGludWVcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IHVzZXJBY2NvdW50SWQ6IGFjY291bnRJZCB9KVxuICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L3Jlc3QvYXBpLzMvcHJvamVjdC8ke2Fzc2lnbm1lbnQucHJvamVjdElkfS9yb2xlLyR7YXNzaWdubWVudC5yb2xlSWR9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YFxuICAgICAgICBhd2FpdCByZXF1ZXN0SnNvbihcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogdGhpcy5hdXRoSGVhZGVyLCBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgWzIwMCwgMjA0XVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWxldGVPbkRlcHJvdmlzaW9uKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vcmVzdC9hcGkvMy91c2VyPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyh7IGFjY291bnRJZCB9KS50b1N0cmluZygpfWBcbiAgICAgICAgYXdhaXQgcmVxdWVzdEpzb24oXG4gICAgICAgICAgdXJsLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IHRoaXMuYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFsyMDRdXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlcHJvdmlzaW9uIEppcmEgYWNjZXNzJyB9XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiYmFzaWNBdXRoIiwiZW1haWwiLCJhcGlUb2tlbiIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIm5vcm1hbGl6ZUJhc2VVcmwiLCJ1cmwiLCJyZXBsYWNlIiwibWF0Y2hlc0NvbmRpdGlvbiIsImVtcGxveWVlIiwiY29uZGl0aW9uIiwibWV0YSIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInVuZGVmaW5lZCIsImVtcGxveWVlVmFsdWUiLCJ0b0xvd2VyQ2FzZSIsIm1lcmdlUHJvdmlzaW9uRGF0YSIsInJ1bGVzIiwicmVzdWx0IiwiZ3JvdXBzIiwicHJvamVjdFJvbGVzIiwic29ydGVkUnVsZXMiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsInJ1bGUiLCJpc0FjdGl2ZSIsImRhdGEiLCJwcm92aXNpb25EYXRhIiwibGVuZ3RoIiwiU2V0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImRlZHVwZWRSb2xlcyIsIk1hcCIsInJvbGUiLCJwcm9qZWN0SWQiLCJyb2xlSWQiLCJzZXQiLCJ2YWx1ZXMiLCJyZXF1ZXN0SnNvbiIsImluaXQiLCJva1N0YXR1c2VzIiwicmVzIiwiZmV0Y2giLCJpbmNsdWRlcyIsInN0YXR1cyIsInRleHQiLCJjYXRjaCIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJKaXJhQ29ubmVjdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJiYXNlVXJsIiwiYXV0aEhlYWRlciIsImFkbWluRW1haWwiLCJ0ZXN0Q29ubmVjdGlvbiIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiQWNjZXB0Iiwic3VjY2VzcyIsImVycm9yIiwibWVzc2FnZSIsImZpbmRVc2VyQWNjb3VudElkQnlFbWFpbCIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInVzZXJzIiwibWF0Y2giLCJmaW5kIiwidSIsImVtYWlsQWRkcmVzcyIsImFjY291bnRJZCIsImVuc3VyZVVzZXIiLCJkaXNwbGF5TmFtZSIsImV4aXN0aW5nIiwicHJvZHVjdHMiLCJBcnJheSIsImlzQXJyYXkiLCJjcmVhdGVkIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm92aXNpb25FbXBsb3llZSIsImFwcCIsImV4aXN0aW5nQWNjb3VudCIsIndvcmtFbWFpbCIsInBlcnNvbmFsRW1haWwiLCJmdWxsTmFtZSIsImV4dGVybmFsVXNlcklkIiwiZGVmYXVsdEdyb3VwcyIsIm1hcCIsImciLCJ0cmltIiwiYWRkZWRHcm91cHMiLCJncm91cCIsImdyb3VwbmFtZSIsInB1c2giLCJyb2xlQXNzaWdubWVudHMiLCJhZGRlZFJvbGVzIiwiYXNzaWdubWVudCIsInVzZXIiLCJleHRlcm5hbEVtYWlsIiwicHJvdmlzaW9uZWRSZXNvdXJjZXMiLCJkZXByb3Zpc2lvbkVtcGxveWVlIiwiYWNjb3VudCIsIl9vcHRpb25zIiwicmVzb3VyY2VzIiwidXNlckFjY291bnRJZCIsImRlbGV0ZU9uRGVwcm92aXNpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/jira.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/passbolt.ts":
/*!******************************************!*\
  !*** ./src/lib/integrations/passbolt.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PassboltConnector: () => (/* binding */ PassboltConnector),\n/* harmony export */   createPassboltConnector: () => (/* binding */ createPassboltConnector)\n/* harmony export */ });\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:child_process */ \"node:child_process\");\n/* harmony import */ var node_child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:util */ \"node:util\");\n/* harmony import */ var node_util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_util__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst execFileAsync = (0,node_util__WEBPACK_IMPORTED_MODULE_1__.promisify)(node_child_process__WEBPACK_IMPORTED_MODULE_0__.execFile);\nfunction normalizeRole(value) {\n    if (!value) return null;\n    const normalized = value.trim().toLowerCase();\n    if (normalized === \"admin\") return \"admin\";\n    if (normalized === \"user\") return \"user\";\n    return null;\n}\nfunction splitName(fullName, fallbackEmail) {\n    const cleaned = (fullName || \"\").trim();\n    if (cleaned) {\n        const parts = cleaned.split(/\\s+/).filter(Boolean);\n        if (parts.length === 1) {\n            return {\n                firstName: parts[0],\n                lastName: parts[0]\n            };\n        }\n        return {\n            firstName: parts[0],\n            lastName: parts.slice(1).join(\" \")\n        };\n    }\n    const emailPrefix = (fallbackEmail || \"\").split(\"@\")[0];\n    if (emailPrefix) {\n        return {\n            firstName: emailPrefix,\n            lastName: emailPrefix\n        };\n    }\n    return {\n        firstName: \"New\",\n        lastName: \"User\"\n    };\n}\nfunction parseInviteUrl(output) {\n    const match = output.match(/https?:\\/\\/\\S+/i);\n    return match ? match[0] : null;\n}\nfunction matchesCondition(employee, condition) {\n    for (const [key, value] of Object.entries(condition)){\n        if (value === undefined || value === null) continue;\n        const employeeValue = employee[key];\n        if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n            if (employeeValue.toLowerCase() !== value.toLowerCase()) {\n                return false;\n            }\n        } else if (employeeValue !== value) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction resolveRoleFromRules(employee, rules, fallback) {\n    const sortedRules = [\n        ...rules\n    ].sort((a, b)=>b.priority - a.priority);\n    for (const rule of sortedRules){\n        if (!rule.isActive) continue;\n        const condition = rule.condition || {};\n        if (!matchesCondition(employee, condition)) continue;\n        const data = rule.provisionData || {};\n        const role = normalizeRole(typeof data.role === \"string\" ? data.role : undefined) || (data.isAdmin === true ? \"admin\" : null);\n        if (role) return role;\n    }\n    return fallback;\n}\nasync function runPassboltCli(config, args) {\n    const command = \"./bin/cake\";\n    const commandArgs = [\n        \"passbolt\",\n        ...args\n    ];\n    const options = {\n        cwd: config.cliPath\n    };\n    if (config.cliUser && config.cliUser.trim()) {\n        return execFileAsync(\"sudo\", [\n            \"-u\",\n            config.cliUser.trim(),\n            command,\n            ...commandArgs\n        ], options);\n    }\n    return execFileAsync(command, commandArgs, options);\n}\nasync function passboltApiRequest(config, path, method, body) {\n    const url = `${config.baseUrl.replace(/\\/+$/, \"\")}${path}`;\n    const res = await fetch(url, {\n        method,\n        headers: {\n            \"content-type\": \"application/json\",\n            authorization: `Bearer ${config.apiToken}`\n        },\n        body: body ? JSON.stringify(body) : undefined\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || `Passbolt API error (${res.status})`);\n    }\n    if (res.status === 204) return null;\n    return res.json().catch(()=>null);\n}\nasync function lookupPassboltUserId(config, email) {\n    const query = encodeURIComponent(email);\n    const data = await passboltApiRequest(config, `/users.json?search=${query}`, \"GET\");\n    const users = data?.users || data?.body || data;\n    if (Array.isArray(users) && users.length > 0) {\n        return users[0]?.id;\n    }\n    return undefined;\n}\nclass PassboltConnector {\n    constructor(config){\n        const defaultRole = normalizeRole(config.defaultRole) || \"user\";\n        if (config.cliPath) {\n            this.cliConfig = {\n                cliPath: config.cliPath,\n                cliUser: config.cliUser,\n                defaultRole\n            };\n        }\n        if (config.baseUrl && config.apiToken) {\n            this.apiConfig = {\n                baseUrl: config.baseUrl,\n                apiToken: config.apiToken,\n                defaultRole\n            };\n        }\n    }\n    async testConnection() {\n        if (this.apiConfig) {\n            try {\n                await passboltApiRequest(this.apiConfig, \"/healthcheck.json\", \"GET\");\n                return {\n                    success: true\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Failed to reach Passbolt API\"\n                };\n            }\n        }\n        if (this.cliConfig) {\n            try {\n                await runPassboltCli(this.cliConfig, [\n                    \"-h\"\n                ]);\n                return {\n                    success: true\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Failed to run Passbolt CLI\"\n                };\n            }\n        }\n        return {\n            success: false,\n            error: \"Passbolt connection is not configured\"\n        };\n    }\n    async provisionEmployee(employee, _app, rules) {\n        const email = employee.workEmail || employee.personalEmail;\n        if (!email) {\n            return {\n                success: false,\n                error: \"An email address is required for Passbolt provisioning.\"\n            };\n        }\n        const { firstName, lastName } = splitName(employee.fullName, email);\n        const defaultRole = this.apiConfig?.defaultRole || this.cliConfig?.defaultRole || \"user\";\n        const role = resolveRoleFromRules(employee, rules, defaultRole);\n        if (this.apiConfig) {\n            try {\n                const payload = {\n                    username: email,\n                    first_name: firstName,\n                    last_name: lastName,\n                    role\n                };\n                const response = await passboltApiRequest(this.apiConfig, \"/users.json\", \"POST\", payload);\n                const externalId = response?.id || response?.user?.id;\n                return {\n                    success: true,\n                    externalUserId: typeof externalId === \"string\" ? externalId : undefined,\n                    externalEmail: email,\n                    provisionedResources: response ? {\n                        response\n                    } : undefined\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Passbolt API provisioning failed\"\n                };\n            }\n        }\n        if (this.cliConfig) {\n            try {\n                const { stdout, stderr } = await runPassboltCli(this.cliConfig, [\n                    \"register_user\",\n                    \"-u\",\n                    email,\n                    \"-f\",\n                    firstName,\n                    \"-l\",\n                    lastName,\n                    \"-r\",\n                    role\n                ]);\n                const inviteUrl = parseInviteUrl(`${stdout}\\n${stderr}`);\n                return {\n                    success: true,\n                    externalEmail: email,\n                    externalUsername: email,\n                    provisionedResources: inviteUrl ? {\n                        inviteUrl\n                    } : undefined\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Passbolt CLI provisioning failed\"\n                };\n            }\n        }\n        return {\n            success: false,\n            error: \"Passbolt connection is not configured\"\n        };\n    }\n    async deprovisionEmployee(employee, _app, _account, _options) {\n        const email = employee.workEmail || employee.personalEmail;\n        if (!email) {\n            return {\n                success: false,\n                error: \"An email address is required to deprovision Passbolt users.\"\n            };\n        }\n        if (this.apiConfig) {\n            try {\n                const userId = await lookupPassboltUserId(this.apiConfig, email);\n                if (!userId) {\n                    return {\n                        success: true\n                    };\n                }\n                await passboltApiRequest(this.apiConfig, `/users/${userId}.json`, \"DELETE\");\n                return {\n                    success: true\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Passbolt API deprovisioning failed\"\n                };\n            }\n        }\n        if (this.cliConfig) {\n            try {\n                await runPassboltCli(this.cliConfig, [\n                    \"delete_user\",\n                    \"-u\",\n                    email\n                ]);\n                return {\n                    success: true\n                };\n            } catch (error) {\n                return {\n                    success: false,\n                    error: error instanceof Error ? error.message : \"Passbolt CLI deprovisioning failed\"\n                };\n            }\n        }\n        return {\n            success: false,\n            error: \"Passbolt connection is not configured\"\n        };\n    }\n}\nfunction createPassboltConnector(config) {\n    const mode = typeof config.mode === \"string\" ? config.mode : undefined;\n    const normalizedMode = mode === \"API\" || mode === \"CLI\" ? mode : undefined;\n    const baseUrl = typeof config.baseUrl === \"string\" ? config.baseUrl : undefined;\n    const apiToken = typeof config.apiToken === \"string\" ? config.apiToken : undefined;\n    const cliPath = typeof config.cliPath === \"string\" ? config.cliPath : undefined;\n    const cliUser = typeof config.cliUser === \"string\" ? config.cliUser : undefined;\n    const defaultRole = normalizeRole(typeof config.defaultRole === \"string\" ? config.defaultRole : undefined) || \"user\";\n    const apiReady = Boolean(baseUrl && apiToken);\n    const cliReady = Boolean(cliPath);\n    if (normalizedMode === \"API\" && !apiReady) return null;\n    if (normalizedMode === \"CLI\" && !cliReady) return null;\n    if (!apiReady && !cliReady) return null;\n    return new PassboltConnector({\n        mode: normalizedMode,\n        baseUrl,\n        apiToken,\n        cliPath,\n        cliUser,\n        defaultRole\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0IsVUFBVSxPQUFPUCxPQUFPTyxPQUFPLEtBQUssV0FBV1AsT0FBT08sT0FBTyxHQUFHeEI7SUFDdEUsTUFBTXVELGNBQWNuRixjQUFjLE9BQU82QyxPQUFPc0MsV0FBVyxLQUFLLFdBQVd0QyxPQUFPc0MsV0FBVyxHQUFHdkQsY0FBYztJQUU5RyxNQUFNdUYsV0FBV3ZHLFFBQVE4QyxXQUFXTTtJQUNwQyxNQUFNb0QsV0FBV3hHLFFBQVF1QztJQUV6QixJQUFJK0QsbUJBQW1CLFNBQVMsQ0FBQ0MsVUFBVSxPQUFPO0lBQ2xELElBQUlELG1CQUFtQixTQUFTLENBQUNFLFVBQVUsT0FBTztJQUVsRCxJQUFJLENBQUNELFlBQVksQ0FBQ0MsVUFBVSxPQUFPO0lBRW5DLE9BQU8sSUFBSW5DLGtCQUFrQjtRQUMzQmdDLE1BQU1DO1FBQ054RDtRQUNBTTtRQUNBYjtRQUNBQztRQUNBK0I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2ludGVncmF0aW9ucy9wYXNzYm9sdC50cz8zMWU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4ZWNGaWxlIH0gZnJvbSAnbm9kZTpjaGlsZF9wcm9jZXNzJ1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAnbm9kZTp1dGlsJ1xuaW1wb3J0IHR5cGUgeyBBcHAsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUsIEVtcGxveWVlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5pbXBvcnQgdHlwZSB7XG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIEludGVncmF0aW9uQ29ubmVjdG9yLFxuICBQYXNzYm9sdENvbmZpZyxcbiAgUHJvdmlzaW9uUmVzdWx0LFxuICBQcm92aXNpb25pbmdDb25kaXRpb24sXG59IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IGV4ZWNGaWxlQXN5bmMgPSBwcm9taXNpZnkoZXhlY0ZpbGUpXG5cbnR5cGUgUGFzc2JvbHRSb2xlID0gJ3VzZXInIHwgJ2FkbWluJ1xuXG50eXBlIFBhc3Nib2x0Q2xpQ29uZmlnID0ge1xuICBjbGlQYXRoOiBzdHJpbmdcbiAgY2xpVXNlcj86IHN0cmluZ1xuICBkZWZhdWx0Um9sZTogUGFzc2JvbHRSb2xlXG59XG5cbnR5cGUgUGFzc2JvbHRBcGlDb25maWcgPSB7XG4gIGJhc2VVcmw6IHN0cmluZ1xuICBhcGlUb2tlbjogc3RyaW5nXG4gIGRlZmF1bHRSb2xlOiBQYXNzYm9sdFJvbGVcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUm9sZSh2YWx1ZT86IHN0cmluZyk6IFBhc3Nib2x0Um9sZSB8IG51bGwge1xuICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbFxuICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgaWYgKG5vcm1hbGl6ZWQgPT09ICdhZG1pbicpIHJldHVybiAnYWRtaW4nXG4gIGlmIChub3JtYWxpemVkID09PSAndXNlcicpIHJldHVybiAndXNlcidcbiAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gc3BsaXROYW1lKGZ1bGxOYW1lOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLCBmYWxsYmFja0VtYWlsPzogc3RyaW5nKSB7XG4gIGNvbnN0IGNsZWFuZWQgPSAoZnVsbE5hbWUgfHwgJycpLnRyaW0oKVxuICBpZiAoY2xlYW5lZCkge1xuICAgIGNvbnN0IHBhcnRzID0gY2xlYW5lZC5zcGxpdCgvXFxzKy8pLmZpbHRlcihCb29sZWFuKVxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB7IGZpcnN0TmFtZTogcGFydHNbMF0sIGxhc3ROYW1lOiBwYXJ0c1swXSB9XG4gICAgfVxuICAgIHJldHVybiB7IGZpcnN0TmFtZTogcGFydHNbMF0sIGxhc3ROYW1lOiBwYXJ0cy5zbGljZSgxKS5qb2luKCcgJykgfVxuICB9XG4gIGNvbnN0IGVtYWlsUHJlZml4ID0gKGZhbGxiYWNrRW1haWwgfHwgJycpLnNwbGl0KCdAJylbMF1cbiAgaWYgKGVtYWlsUHJlZml4KSB7XG4gICAgcmV0dXJuIHsgZmlyc3ROYW1lOiBlbWFpbFByZWZpeCwgbGFzdE5hbWU6IGVtYWlsUHJlZml4IH1cbiAgfVxuICByZXR1cm4geyBmaXJzdE5hbWU6ICdOZXcnLCBsYXN0TmFtZTogJ1VzZXInIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VJbnZpdGVVcmwob3V0cHV0OiBzdHJpbmcpIHtcbiAgY29uc3QgbWF0Y2ggPSBvdXRwdXQubWF0Y2goL2h0dHBzPzpcXC9cXC9cXFMrL2kpXG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogbnVsbFxufVxuXG5mdW5jdGlvbiBtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlOiBFbXBsb3llZSwgY29uZGl0aW9uOiBQcm92aXNpb25pbmdDb25kaXRpb24pOiBib29sZWFuIHtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29uZGl0aW9uKSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSBjb250aW51ZVxuICAgIGNvbnN0IGVtcGxveWVlVmFsdWUgPSAoZW1wbG95ZWUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleV1cbiAgICBpZiAodHlwZW9mIGVtcGxveWVlVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChlbXBsb3llZVZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlbXBsb3llZVZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVSb2xlRnJvbVJ1bGVzKFxuICBlbXBsb3llZTogRW1wbG95ZWUsXG4gIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW10sXG4gIGZhbGxiYWNrOiBQYXNzYm9sdFJvbGVcbikge1xuICBjb25zdCBzb3J0ZWRSdWxlcyA9IFsuLi5ydWxlc10uc29ydCgoYSwgYikgPT4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHkpXG4gIGZvciAoY29uc3QgcnVsZSBvZiBzb3J0ZWRSdWxlcykge1xuICAgIGlmICghcnVsZS5pc0FjdGl2ZSkgY29udGludWVcbiAgICBjb25zdCBjb25kaXRpb24gPSAocnVsZS5jb25kaXRpb24gfHwge30pIGFzIFByb3Zpc2lvbmluZ0NvbmRpdGlvblxuICAgIGlmICghbWF0Y2hlc0NvbmRpdGlvbihlbXBsb3llZSwgY29uZGl0aW9uKSkgY29udGludWVcbiAgICBjb25zdCBkYXRhID0gKHJ1bGUucHJvdmlzaW9uRGF0YSB8fCB7fSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICBjb25zdCByb2xlID1cbiAgICAgIG5vcm1hbGl6ZVJvbGUodHlwZW9mIGRhdGEucm9sZSA9PT0gJ3N0cmluZycgPyBkYXRhLnJvbGUgOiB1bmRlZmluZWQpIHx8XG4gICAgICAoZGF0YS5pc0FkbWluID09PSB0cnVlID8gJ2FkbWluJyA6IG51bGwpXG4gICAgaWYgKHJvbGUpIHJldHVybiByb2xlXG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1blBhc3Nib2x0Q2xpKGNvbmZpZzogUGFzc2JvbHRDbGlDb25maWcsIGFyZ3M6IHN0cmluZ1tdKSB7XG4gIGNvbnN0IGNvbW1hbmQgPSAnLi9iaW4vY2FrZSdcbiAgY29uc3QgY29tbWFuZEFyZ3MgPSBbJ3Bhc3Nib2x0JywgLi4uYXJnc11cbiAgY29uc3Qgb3B0aW9ucyA9IHsgY3dkOiBjb25maWcuY2xpUGF0aCB9XG4gIGlmIChjb25maWcuY2xpVXNlciAmJiBjb25maWcuY2xpVXNlci50cmltKCkpIHtcbiAgICByZXR1cm4gZXhlY0ZpbGVBc3luYygnc3VkbycsIFsnLXUnLCBjb25maWcuY2xpVXNlci50cmltKCksIGNvbW1hbmQsIC4uLmNvbW1hbmRBcmdzXSwgb3B0aW9ucylcbiAgfVxuICByZXR1cm4gZXhlY0ZpbGVBc3luYyhjb21tYW5kLCBjb21tYW5kQXJncywgb3B0aW9ucylcbn1cblxuYXN5bmMgZnVuY3Rpb24gcGFzc2JvbHRBcGlSZXF1ZXN0KFxuICBjb25maWc6IFBhc3Nib2x0QXBpQ29uZmlnLFxuICBwYXRoOiBzdHJpbmcsXG4gIG1ldGhvZDogJ0dFVCcgfCAnUE9TVCcgfCAnREVMRVRFJyxcbiAgYm9keT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4pIHtcbiAgY29uc3QgdXJsID0gYCR7Y29uZmlnLmJhc2VVcmwucmVwbGFjZSgvXFwvKyQvLCAnJyl9JHtwYXRofWBcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLmFwaVRva2VufWAsXG4gICAgfSxcbiAgICBib2R5OiBib2R5ID8gSlNPTi5zdHJpbmdpZnkoYm9keSkgOiB1bmRlZmluZWQsXG4gIH0pXG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KClcbiAgICB0aHJvdyBuZXcgRXJyb3IodGV4dCB8fCBgUGFzc2JvbHQgQVBJIGVycm9yICgke3Jlcy5zdGF0dXN9KWApXG4gIH1cbiAgaWYgKHJlcy5zdGF0dXMgPT09IDIwNCkgcmV0dXJuIG51bGxcbiAgcmV0dXJuIHJlcy5qc29uKCkuY2F0Y2goKCkgPT4gbnVsbClcbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9va3VwUGFzc2JvbHRVc2VySWQoY29uZmlnOiBQYXNzYm9sdEFwaUNvbmZpZywgZW1haWw6IHN0cmluZykge1xuICBjb25zdCBxdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChlbWFpbClcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHBhc3Nib2x0QXBpUmVxdWVzdChjb25maWcsIGAvdXNlcnMuanNvbj9zZWFyY2g9JHtxdWVyeX1gLCAnR0VUJylcbiAgY29uc3QgdXNlcnMgPSAoZGF0YSBhcyBhbnkpPy51c2VycyB8fCAoZGF0YSBhcyBhbnkpPy5ib2R5IHx8IGRhdGFcbiAgaWYgKEFycmF5LmlzQXJyYXkodXNlcnMpICYmIHVzZXJzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gdXNlcnNbMF0/LmlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICB9XG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNsYXNzIFBhc3Nib2x0Q29ubmVjdG9yIGltcGxlbWVudHMgSW50ZWdyYXRpb25Db25uZWN0b3Ige1xuICBwcml2YXRlIGNsaUNvbmZpZz86IFBhc3Nib2x0Q2xpQ29uZmlnXG4gIHByaXZhdGUgYXBpQ29uZmlnPzogUGFzc2JvbHRBcGlDb25maWdcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhc3Nib2x0Q29uZmlnKSB7XG4gICAgY29uc3QgZGVmYXVsdFJvbGUgPSBub3JtYWxpemVSb2xlKGNvbmZpZy5kZWZhdWx0Um9sZSkgfHwgJ3VzZXInXG4gICAgaWYgKGNvbmZpZy5jbGlQYXRoKSB7XG4gICAgICB0aGlzLmNsaUNvbmZpZyA9IHtcbiAgICAgICAgY2xpUGF0aDogY29uZmlnLmNsaVBhdGgsXG4gICAgICAgIGNsaVVzZXI6IGNvbmZpZy5jbGlVc2VyLFxuICAgICAgICBkZWZhdWx0Um9sZSxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbmZpZy5iYXNlVXJsICYmIGNvbmZpZy5hcGlUb2tlbikge1xuICAgICAgdGhpcy5hcGlDb25maWcgPSB7XG4gICAgICAgIGJhc2VVcmw6IGNvbmZpZy5iYXNlVXJsLFxuICAgICAgICBhcGlUb2tlbjogY29uZmlnLmFwaVRva2VuLFxuICAgICAgICBkZWZhdWx0Um9sZSxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIGlmICh0aGlzLmFwaUNvbmZpZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcGFzc2JvbHRBcGlSZXF1ZXN0KHRoaXMuYXBpQ29uZmlnLCAnL2hlYWx0aGNoZWNrLmpzb24nLCAnR0VUJylcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcmVhY2ggUGFzc2JvbHQgQVBJJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNsaUNvbmZpZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcnVuUGFzc2JvbHRDbGkodGhpcy5jbGlDb25maWcsIFsnLWgnXSlcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcnVuIFBhc3Nib2x0IENMSScsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQYXNzYm9sdCBjb25uZWN0aW9uIGlzIG5vdCBjb25maWd1cmVkJyB9XG4gIH1cblxuICBhc3luYyBwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgX2FwcDogQXBwLFxuICAgIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW11cbiAgKTogUHJvbWlzZTxQcm92aXNpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBlbWFpbCA9IGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsXG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQW4gZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZCBmb3IgUGFzc2JvbHQgcHJvdmlzaW9uaW5nLicgfVxuICAgIH1cblxuICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSB9ID0gc3BsaXROYW1lKGVtcGxveWVlLmZ1bGxOYW1lLCBlbWFpbClcbiAgICBjb25zdCBkZWZhdWx0Um9sZSA9XG4gICAgICAodGhpcy5hcGlDb25maWc/LmRlZmF1bHRSb2xlIHx8IHRoaXMuY2xpQ29uZmlnPy5kZWZhdWx0Um9sZSB8fCAndXNlcicpIGFzIFBhc3Nib2x0Um9sZVxuICAgIGNvbnN0IHJvbGUgPSByZXNvbHZlUm9sZUZyb21SdWxlcyhlbXBsb3llZSwgcnVsZXMsIGRlZmF1bHRSb2xlKVxuXG4gICAgaWYgKHRoaXMuYXBpQ29uZmlnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgIHVzZXJuYW1lOiBlbWFpbCxcbiAgICAgICAgICBmaXJzdF9uYW1lOiBmaXJzdE5hbWUsXG4gICAgICAgICAgbGFzdF9uYW1lOiBsYXN0TmFtZSxcbiAgICAgICAgICByb2xlLFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcGFzc2JvbHRBcGlSZXF1ZXN0KHRoaXMuYXBpQ29uZmlnLCAnL3VzZXJzLmpzb24nLCAnUE9TVCcsIHBheWxvYWQpXG4gICAgICAgIGNvbnN0IGV4dGVybmFsSWQgPSAocmVzcG9uc2UgYXMgYW55KT8uaWQgfHwgKHJlc3BvbnNlIGFzIGFueSk/LnVzZXI/LmlkXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBleHRlcm5hbFVzZXJJZDogdHlwZW9mIGV4dGVybmFsSWQgPT09ICdzdHJpbmcnID8gZXh0ZXJuYWxJZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBleHRlcm5hbEVtYWlsOiBlbWFpbCxcbiAgICAgICAgICBwcm92aXNpb25lZFJlc291cmNlczogcmVzcG9uc2UgPyB7IHJlc3BvbnNlIH0gOiB1bmRlZmluZWQsXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Bhc3Nib2x0IEFQSSBwcm92aXNpb25pbmcgZmFpbGVkJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNsaUNvbmZpZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgcnVuUGFzc2JvbHRDbGkodGhpcy5jbGlDb25maWcsIFtcbiAgICAgICAgICAncmVnaXN0ZXJfdXNlcicsXG4gICAgICAgICAgJy11JyxcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAnLWYnLFxuICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAnLWwnLFxuICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICctcicsXG4gICAgICAgICAgcm9sZSxcbiAgICAgICAgXSlcbiAgICAgICAgY29uc3QgaW52aXRlVXJsID0gcGFyc2VJbnZpdGVVcmwoYCR7c3Rkb3V0fVxcbiR7c3RkZXJyfWApXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBleHRlcm5hbEVtYWlsOiBlbWFpbCxcbiAgICAgICAgICBleHRlcm5hbFVzZXJuYW1lOiBlbWFpbCxcbiAgICAgICAgICBwcm92aXNpb25lZFJlc291cmNlczogaW52aXRlVXJsID8geyBpbnZpdGVVcmwgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnUGFzc2JvbHQgQ0xJIHByb3Zpc2lvbmluZyBmYWlsZWQnLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUGFzc2JvbHQgY29ubmVjdGlvbiBpcyBub3QgY29uZmlndXJlZCcgfVxuICB9XG5cbiAgYXN5bmMgZGVwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgX2FwcDogQXBwLFxuICAgIF9hY2NvdW50OiBBcHBBY2NvdW50LFxuICAgIF9vcHRpb25zPzogRGVwcm92aXNpb25PcHRpb25zXG4gICk6IFByb21pc2U8RGVwcm92aXNpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBlbWFpbCA9IGVtcGxveWVlLndvcmtFbWFpbCB8fCBlbXBsb3llZS5wZXJzb25hbEVtYWlsXG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQW4gZW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZCB0byBkZXByb3Zpc2lvbiBQYXNzYm9sdCB1c2Vycy4nIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5hcGlDb25maWcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IGxvb2t1cFBhc3Nib2x0VXNlcklkKHRoaXMuYXBpQ29uZmlnLCBlbWFpbClcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwYXNzYm9sdEFwaVJlcXVlc3QodGhpcy5hcGlDb25maWcsIGAvdXNlcnMvJHt1c2VySWR9Lmpzb25gLCAnREVMRVRFJylcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdQYXNzYm9sdCBBUEkgZGVwcm92aXNpb25pbmcgZmFpbGVkJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNsaUNvbmZpZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcnVuUGFzc2JvbHRDbGkodGhpcy5jbGlDb25maWcsIFsnZGVsZXRlX3VzZXInLCAnLXUnLCBlbWFpbF0pXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnUGFzc2JvbHQgQ0xJIGRlcHJvdmlzaW9uaW5nIGZhaWxlZCcsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQYXNzYm9sdCBjb25uZWN0aW9uIGlzIG5vdCBjb25maWd1cmVkJyB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBhc3Nib2x0Q29ubmVjdG9yKGNvbmZpZzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgY29uc3QgbW9kZSA9IHR5cGVvZiBjb25maWcubW9kZSA9PT0gJ3N0cmluZycgPyBjb25maWcubW9kZSA6IHVuZGVmaW5lZFxuICBjb25zdCBub3JtYWxpemVkTW9kZSA9IG1vZGUgPT09ICdBUEknIHx8IG1vZGUgPT09ICdDTEknID8gbW9kZSA6IHVuZGVmaW5lZFxuICBjb25zdCBiYXNlVXJsID0gdHlwZW9mIGNvbmZpZy5iYXNlVXJsID09PSAnc3RyaW5nJyA/IGNvbmZpZy5iYXNlVXJsIDogdW5kZWZpbmVkXG4gIGNvbnN0IGFwaVRva2VuID0gdHlwZW9mIGNvbmZpZy5hcGlUb2tlbiA9PT0gJ3N0cmluZycgPyBjb25maWcuYXBpVG9rZW4gOiB1bmRlZmluZWRcbiAgY29uc3QgY2xpUGF0aCA9IHR5cGVvZiBjb25maWcuY2xpUGF0aCA9PT0gJ3N0cmluZycgPyBjb25maWcuY2xpUGF0aCA6IHVuZGVmaW5lZFxuICBjb25zdCBjbGlVc2VyID0gdHlwZW9mIGNvbmZpZy5jbGlVc2VyID09PSAnc3RyaW5nJyA/IGNvbmZpZy5jbGlVc2VyIDogdW5kZWZpbmVkXG4gIGNvbnN0IGRlZmF1bHRSb2xlID0gbm9ybWFsaXplUm9sZSh0eXBlb2YgY29uZmlnLmRlZmF1bHRSb2xlID09PSAnc3RyaW5nJyA/IGNvbmZpZy5kZWZhdWx0Um9sZSA6IHVuZGVmaW5lZCkgfHwgJ3VzZXInXG5cbiAgY29uc3QgYXBpUmVhZHkgPSBCb29sZWFuKGJhc2VVcmwgJiYgYXBpVG9rZW4pXG4gIGNvbnN0IGNsaVJlYWR5ID0gQm9vbGVhbihjbGlQYXRoKVxuXG4gIGlmIChub3JtYWxpemVkTW9kZSA9PT0gJ0FQSScgJiYgIWFwaVJlYWR5KSByZXR1cm4gbnVsbFxuICBpZiAobm9ybWFsaXplZE1vZGUgPT09ICdDTEknICYmICFjbGlSZWFkeSkgcmV0dXJuIG51bGxcblxuICBpZiAoIWFwaVJlYWR5ICYmICFjbGlSZWFkeSkgcmV0dXJuIG51bGxcblxuICByZXR1cm4gbmV3IFBhc3Nib2x0Q29ubmVjdG9yKHtcbiAgICBtb2RlOiBub3JtYWxpemVkTW9kZSxcbiAgICBiYXNlVXJsLFxuICAgIGFwaVRva2VuLFxuICAgIGNsaVBhdGgsXG4gICAgY2xpVXNlcixcbiAgICBkZWZhdWx0Um9sZSxcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJleGVjRmlsZSIsInByb21pc2lmeSIsImV4ZWNGaWxlQXN5bmMiLCJub3JtYWxpemVSb2xlIiwidmFsdWUiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwic3BsaXROYW1lIiwiZnVsbE5hbWUiLCJmYWxsYmFja0VtYWlsIiwiY2xlYW5lZCIsInBhcnRzIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJzbGljZSIsImpvaW4iLCJlbWFpbFByZWZpeCIsInBhcnNlSW52aXRlVXJsIiwib3V0cHV0IiwibWF0Y2giLCJtYXRjaGVzQ29uZGl0aW9uIiwiZW1wbG95ZWUiLCJjb25kaXRpb24iLCJrZXkiLCJPYmplY3QiLCJlbnRyaWVzIiwidW5kZWZpbmVkIiwiZW1wbG95ZWVWYWx1ZSIsInJlc29sdmVSb2xlRnJvbVJ1bGVzIiwicnVsZXMiLCJmYWxsYmFjayIsInNvcnRlZFJ1bGVzIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJydWxlIiwiaXNBY3RpdmUiLCJkYXRhIiwicHJvdmlzaW9uRGF0YSIsInJvbGUiLCJpc0FkbWluIiwicnVuUGFzc2JvbHRDbGkiLCJjb25maWciLCJhcmdzIiwiY29tbWFuZCIsImNvbW1hbmRBcmdzIiwib3B0aW9ucyIsImN3ZCIsImNsaVBhdGgiLCJjbGlVc2VyIiwicGFzc2JvbHRBcGlSZXF1ZXN0IiwicGF0aCIsIm1ldGhvZCIsImJvZHkiLCJ1cmwiLCJiYXNlVXJsIiwicmVwbGFjZSIsInJlcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJhcGlUb2tlbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsInRleHQiLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJjYXRjaCIsImxvb2t1cFBhc3Nib2x0VXNlcklkIiwiZW1haWwiLCJxdWVyeSIsImVuY29kZVVSSUNvbXBvbmVudCIsInVzZXJzIiwiQXJyYXkiLCJpc0FycmF5IiwiaWQiLCJQYXNzYm9sdENvbm5lY3RvciIsImNvbnN0cnVjdG9yIiwiZGVmYXVsdFJvbGUiLCJjbGlDb25maWciLCJhcGlDb25maWciLCJ0ZXN0Q29ubmVjdGlvbiIsInN1Y2Nlc3MiLCJlcnJvciIsIm1lc3NhZ2UiLCJwcm92aXNpb25FbXBsb3llZSIsIl9hcHAiLCJ3b3JrRW1haWwiLCJwZXJzb25hbEVtYWlsIiwicGF5bG9hZCIsInVzZXJuYW1lIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInJlc3BvbnNlIiwiZXh0ZXJuYWxJZCIsInVzZXIiLCJleHRlcm5hbFVzZXJJZCIsImV4dGVybmFsRW1haWwiLCJwcm92aXNpb25lZFJlc291cmNlcyIsInN0ZG91dCIsInN0ZGVyciIsImludml0ZVVybCIsImV4dGVybmFsVXNlcm5hbWUiLCJkZXByb3Zpc2lvbkVtcGxveWVlIiwiX2FjY291bnQiLCJfb3B0aW9ucyIsInVzZXJJZCIsImNyZWF0ZVBhc3Nib2x0Q29ubmVjdG9yIiwibW9kZSIsIm5vcm1hbGl6ZWRNb2RlIiwiYXBpUmVhZHkiLCJjbGlSZWFkeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/passbolt.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/provisioning-rules.ts":
/*!****************************************************!*\
  !*** ./src/lib/integrations/provisioning-rules.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasMatchingProvisioningRule: () => (/* binding */ hasMatchingProvisioningRule),\n/* harmony export */   matchesProvisioningCondition: () => (/* binding */ matchesProvisioningCondition)\n/* harmony export */ });\nfunction matchesProvisioningCondition(employee, condition) {\n    const meta = employee.meta && typeof employee.meta === \"object\" && !Array.isArray(employee.meta) ? employee.meta : {};\n    for (const [key, value] of Object.entries(condition)){\n        if (value === undefined || value === null) continue;\n        const employeeValue = employee[key] !== undefined ? employee[key] : meta[key];\n        if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n            if (employeeValue.toLowerCase() !== value.toLowerCase()) return false;\n            continue;\n        }\n        if (employeeValue !== value) return false;\n    }\n    return true;\n}\nfunction hasMatchingProvisioningRule(employee, rules) {\n    if (rules.length === 0) return false;\n    return rules.some((rule)=>{\n        if (!rule.isActive) return false;\n        const condition = rule.condition;\n        return matchesProvisioningCondition(employee, condition);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy9wcm92aXNpb25pbmctcnVsZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHTyxTQUFTQSw2QkFDZEMsUUFBa0IsRUFDbEJDLFNBQWdDO0lBRWhDLE1BQU1DLE9BQ0pGLFNBQVNFLElBQUksSUFBSSxPQUFPRixTQUFTRSxJQUFJLEtBQUssWUFBWSxDQUFDQyxNQUFNQyxPQUFPLENBQUNKLFNBQVNFLElBQUksSUFDN0VGLFNBQVNFLElBQUksR0FDZCxDQUFDO0lBRVAsS0FBSyxNQUFNLENBQUNHLEtBQUtDLE1BQU0sSUFBSUMsT0FBT0MsT0FBTyxDQUFDUCxXQUFZO1FBQ3BELElBQUlLLFVBQVVHLGFBQWFILFVBQVUsTUFBTTtRQUMzQyxNQUFNSSxnQkFDSixRQUFxQyxDQUFDTCxJQUFJLEtBQUtJLFlBQzNDLFFBQXFDLENBQUNKLElBQUksR0FDMUNILElBQUksQ0FBQ0csSUFBSTtRQUVmLElBQUksT0FBT0ssa0JBQWtCLFlBQVksT0FBT0osVUFBVSxVQUFVO1lBQ2xFLElBQUlJLGNBQWNDLFdBQVcsT0FBT0wsTUFBTUssV0FBVyxJQUFJLE9BQU87WUFDaEU7UUFDRjtRQUVBLElBQUlELGtCQUFrQkosT0FBTyxPQUFPO0lBQ3RDO0lBRUEsT0FBTztBQUNUO0FBRU8sU0FBU00sNEJBQ2RaLFFBQWtCLEVBQ2xCYSxLQUE0QjtJQUU1QixJQUFJQSxNQUFNQyxNQUFNLEtBQUssR0FBRyxPQUFPO0lBQy9CLE9BQU9ELE1BQU1FLElBQUksQ0FBQyxDQUFDQztRQUNqQixJQUFJLENBQUNBLEtBQUtDLFFBQVEsRUFBRSxPQUFPO1FBQzNCLE1BQU1oQixZQUFZZSxLQUFLZixTQUFTO1FBQ2hDLE9BQU9GLDZCQUE2QkMsVUFBVUM7SUFDaEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL2xpYi9pbnRlZ3JhdGlvbnMvcHJvdmlzaW9uaW5nLXJ1bGVzLnRzPzZlNDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBcHBQcm92aXNpb25pbmdSdWxlLCBFbXBsb3llZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IHR5cGUgeyBQcm92aXNpb25pbmdDb25kaXRpb24gfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlc1Byb3Zpc2lvbmluZ0NvbmRpdGlvbihcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBjb25kaXRpb246IFByb3Zpc2lvbmluZ0NvbmRpdGlvblxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1ldGEgPVxuICAgIGVtcGxveWVlLm1ldGEgJiYgdHlwZW9mIGVtcGxveWVlLm1ldGEgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGVtcGxveWVlLm1ldGEpXG4gICAgICA/IChlbXBsb3llZS5tZXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVxuICAgICAgOiB7fVxuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvbmRpdGlvbikpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgY29udGludWVcbiAgICBjb25zdCBlbXBsb3llZVZhbHVlID1cbiAgICAgIChlbXBsb3llZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilba2V5XSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gKGVtcGxveWVlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtrZXldXG4gICAgICAgIDogbWV0YVtrZXldXG5cbiAgICBpZiAodHlwZW9mIGVtcGxveWVlVmFsdWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChlbXBsb3llZVZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHJldHVybiBmYWxzZVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoZW1wbG95ZWVWYWx1ZSAhPT0gdmFsdWUpIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc01hdGNoaW5nUHJvdmlzaW9uaW5nUnVsZShcbiAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdXG4pOiBib29sZWFuIHtcbiAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlXG4gIHJldHVybiBydWxlcy5zb21lKChydWxlKSA9PiB7XG4gICAgaWYgKCFydWxlLmlzQWN0aXZlKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBjb25kaXRpb24gPSBydWxlLmNvbmRpdGlvbiBhcyBQcm92aXNpb25pbmdDb25kaXRpb25cbiAgICByZXR1cm4gbWF0Y2hlc1Byb3Zpc2lvbmluZ0NvbmRpdGlvbihlbXBsb3llZSwgY29uZGl0aW9uKVxuICB9KVxufVxuIl0sIm5hbWVzIjpbIm1hdGNoZXNQcm92aXNpb25pbmdDb25kaXRpb24iLCJlbXBsb3llZSIsImNvbmRpdGlvbiIsIm1ldGEiLCJBcnJheSIsImlzQXJyYXkiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJlbXBsb3llZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJoYXNNYXRjaGluZ1Byb3Zpc2lvbmluZ1J1bGUiLCJydWxlcyIsImxlbmd0aCIsInNvbWUiLCJydWxlIiwiaXNBY3RpdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/provisioning-rules.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/slack.ts":
/*!***************************************!*\
  !*** ./src/lib/integrations/slack.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SlackConnector: () => (/* binding */ SlackConnector),\n/* harmony export */   createSlackConnector: () => (/* binding */ createSlackConnector)\n/* harmony export */ });\n/* harmony import */ var _slack_web_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @slack/web-api */ \"(rsc)/./node_modules/@slack/web-api/dist/index.js\");\n/* harmony import */ var _slack_web_api__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_slack_web_api__WEBPACK_IMPORTED_MODULE_0__);\n\nclass SlackConnector {\n    constructor(config){\n        this.config = config;\n        this.botClient = new _slack_web_api__WEBPACK_IMPORTED_MODULE_0__.WebClient(config.botToken);\n        this.adminClient = config.adminToken ? new _slack_web_api__WEBPACK_IMPORTED_MODULE_0__.WebClient(config.adminToken) : null;\n    }\n    async testConnection() {\n        try {\n            const result = await this.botClient.auth.test();\n            if (!result.ok) {\n                return {\n                    success: false,\n                    error: \"Auth test failed\"\n                };\n            }\n            // Validate required bot scopes for provisioning.\n            // Without users:read.email we cannot reliably match employees by email.\n            const scopesResult = await this.botClient.apiCall(\"apps.permissions.scopes.list\", {});\n            const scopes = scopesResult?.scopes;\n            const required = [\n                \"users:read\",\n                \"users:read.email\",\n                \"conversations:read\",\n                \"conversations:write\"\n            ];\n            const missing = required.filter((s)=>!scopes?.includes(s));\n            if (missing.length) {\n                return {\n                    success: false,\n                    error: `Slack bot token is missing required scopes: ${missing.join(\", \")}. Add them in Slack app settings and reinstall the app.`\n                };\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to Slack\"\n            };\n        }\n    }\n    matchesCondition(employee, condition) {\n        for (const [key, value] of Object.entries(condition)){\n            if (value === undefined || value === null) continue;\n            const employeeValue = employee[key];\n            if (typeof employeeValue === \"string\" && typeof value === \"string\") {\n                if (employeeValue.toLowerCase() !== value.toLowerCase()) {\n                    return false;\n                }\n            } else if (employeeValue !== value) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getProvisionDataForEmployee(employee, rules) {\n        const result = {\n            channels: [],\n            userGroups: []\n        };\n        const sortedRules = [\n            ...rules\n        ].sort((a, b)=>b.priority - a.priority);\n        for (const rule of sortedRules){\n            if (!rule.isActive) continue;\n            const condition = rule.condition;\n            if (this.matchesCondition(employee, condition)) {\n                const data = rule.provisionData;\n                if (data.channels) {\n                    result.channels = [\n                        ...result.channels || [],\n                        ...data.channels\n                    ];\n                }\n                if (data.userGroups) {\n                    result.userGroups = [\n                        ...result.userGroups || [],\n                        ...data.userGroups\n                    ];\n                }\n            }\n        }\n        // Dedupe\n        result.channels = [\n            ...new Set(result.channels)\n        ];\n        result.userGroups = [\n            ...new Set(result.userGroups)\n        ];\n        return result;\n    }\n    async provisionEmployee(employee, app, rules, existingAccount) {\n        try {\n            const provisionData = this.getProvisionDataForEmployee(employee, rules);\n            // Prefer work email, fall back to personal email.\n            const email = employee.workEmail || employee.personalEmail;\n            if (!email) {\n                return {\n                    success: false,\n                    error: \"An email address is required for Slack provisioning.\"\n                };\n            }\n            let slackUserId;\n            // Check if user already exists\n            if (existingAccount?.externalUserId) {\n                slackUserId = existingAccount.externalUserId;\n                // Reactivate if deactivated\n                try {\n                    await this.adminClient?.apiCall(\"admin.users.setRegular\", {\n                        user_id: slackUserId,\n                        team_id: this.config.teamId || \"\"\n                    });\n                } catch  {\n                // May fail if user is already active or method not available\n                }\n            } else {\n                // Look up user by email\n                try {\n                    const userLookup = await this.botClient.users.lookupByEmail({\n                        email\n                    });\n                    if (userLookup.ok && userLookup.user?.id) {\n                        slackUserId = userLookup.user.id;\n                    }\n                } catch (error) {\n                    const slackError = error?.data?.error || error?.message || \"\";\n                    if (String(slackError).includes(\"missing_scope\")) {\n                        return {\n                            success: false,\n                            error: \"Slack bot token is missing the required scope `users:read.email`. Add it in your Slack app and reinstall the app, then retry.\"\n                        };\n                    }\n                // User not found - will need to invite\n                }\n                // If user not found, send invite\n                if (!slackUserId) {\n                    try {\n                        // Note: admin.users.invite requires Slack Enterprise Grid or paid plan\n                        // For standard workspaces, you might need to use a different approach\n                        const channelIds = (provisionData.channels?.length ? provisionData.channels : null) || (this.config.defaultChannels?.length ? this.config.defaultChannels : null);\n                        if (!channelIds?.length) {\n                            return {\n                                success: false,\n                                error: \"Slack provisioning requires default channels (or provisioning rule channels).\"\n                            };\n                        }\n                        if (!this.adminClient) {\n                            return {\n                                success: false,\n                                error: \"Slack user not found in the workspace. Add an Admin token (Enterprise) to auto-invite, or invite the user manually, then retry.\"\n                            };\n                        }\n                        const inviteResult = await this.adminClient.apiCall(\"admin.users.invite\", {\n                            email,\n                            ...this.config.teamId ? {\n                                team_id: this.config.teamId\n                            } : {},\n                            channel_ids: channelIds.join(\",\")\n                        });\n                        if (inviteResult?.ok) {\n                            // The user ID won't be available until they accept\n                            return {\n                                success: true,\n                                externalEmail: email,\n                                provisionedResources: {\n                                    invited: true,\n                                    channels: channelIds\n                                }\n                            };\n                        }\n                        const inviteErr = inviteResult?.error || \"unknown_error\";\n                        return {\n                            success: false,\n                            error: `Slack invite failed: ${inviteErr}. Invite the user manually or ensure your Admin token has the correct scopes and plan.`\n                        };\n                    } catch (error) {\n                        const slackError = error?.data?.error || error?.message || \"unknown_error\";\n                        return {\n                            success: false,\n                            error: `Slack invite failed: ${slackError}. Invite the user manually or ensure your Admin token supports admin.users.invite.`\n                        };\n                    }\n                }\n            }\n            // Add to channels\n            const addedChannels = [];\n            const desiredChannels = (provisionData.channels?.length ? provisionData.channels : null) || (this.config.defaultChannels?.length ? this.config.defaultChannels : null);\n            if (slackUserId && desiredChannels?.length) {\n                const channelsResult = await this.botClient.conversations.list({\n                    types: \"public_channel,private_channel\",\n                    limit: 1000\n                });\n                const byName = new Map();\n                for (const c of channelsResult.channels || []){\n                    if (!c.id || !c.name) continue;\n                    byName.set(c.name, c.id);\n                }\n                for (const channelNameOrId of desiredChannels){\n                    try {\n                        const cleaned = channelNameOrId.trim().replace(/^#/, \"\");\n                        const channelId = byName.get(cleaned) || (cleaned.startsWith(\"C\") || cleaned.startsWith(\"G\") ? cleaned : \"\");\n                        if (!channelId) continue;\n                        await this.botClient.conversations.invite({\n                            channel: channelId,\n                            users: slackUserId\n                        });\n                        addedChannels.push(channelNameOrId);\n                    } catch (error) {\n                        // User might already be in channel\n                        console.warn(`Failed to add user to channel ${channelNameOrId}:`, error);\n                    }\n                }\n            }\n            return {\n                success: true,\n                externalUserId: slackUserId,\n                externalEmail: email,\n                provisionedResources: {\n                    channels: addedChannels,\n                    userGroups: provisionData.userGroups\n                }\n            };\n        } catch (error) {\n            console.error(\"Slack provisioning error:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to provision Slack account\"\n            };\n        }\n    }\n    async deprovisionEmployee(employee, app, account, _options) {\n        try {\n            const slackUserId = account.externalUserId;\n            if (!slackUserId) {\n                return {\n                    success: false,\n                    error: \"No Slack user ID found\"\n                };\n            }\n            // Deactivate user\n            // Note: This requires Slack admin privileges\n            try {\n                if (!this.adminClient) throw new Error(\"Admin token not configured\");\n                await this.adminClient.apiCall(\"admin.users.setInactive\", {\n                    user_id: slackUserId,\n                    team_id: this.config.teamId || \"\"\n                });\n            } catch (error) {\n                // If admin method not available, we might need to remove from all channels\n                console.warn(\"Admin deactivate failed, trying to remove from channels:\", error);\n                // List user's conversations and remove them\n                const conversations = await this.botClient.users.conversations({\n                    user: slackUserId,\n                    types: \"public_channel,private_channel\"\n                });\n                for (const channel of conversations.channels || []){\n                    if (channel.id) {\n                        try {\n                            await this.botClient.conversations.kick({\n                                channel: channel.id,\n                                user: slackUserId\n                            });\n                        } catch  {\n                        // May fail for some channels\n                        }\n                    }\n                }\n            }\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Slack deprovisioning error:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to deprovision Slack account\"\n            };\n        }\n    }\n}\nfunction createSlackConnector() {\n    const botToken = process.env.SLACK_BOT_TOKEN;\n    const signingSecret = process.env.SLACK_SIGNING_SECRET;\n    if (!botToken) {\n        console.warn(\"Slack integration not configured\");\n        return null;\n    }\n    return new SlackConnector({\n        botToken,\n        signingSecret\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy9zbGFjay50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBDO0FBWW5DLE1BQU1DO0lBS1hDLFlBQVlDLE1BQW1CLENBQUU7UUFDL0IsSUFBSSxDQUFDQSxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSUoscURBQVNBLENBQUNHLE9BQU9FLFFBQVE7UUFDOUMsSUFBSSxDQUFDQyxXQUFXLEdBQUdILE9BQU9JLFVBQVUsR0FBRyxJQUFJUCxxREFBU0EsQ0FBQ0csT0FBT0ksVUFBVSxJQUFJO0lBQzVFO0lBRUEsTUFBTUMsaUJBQWdFO1FBQ3BFLElBQUk7WUFDRixNQUFNQyxTQUFTLE1BQU0sSUFBSSxDQUFDTCxTQUFTLENBQUNNLElBQUksQ0FBQ0MsSUFBSTtZQUM3QyxJQUFJLENBQUNGLE9BQU9HLEVBQUUsRUFBRTtnQkFDZCxPQUFPO29CQUFFQyxTQUFTO29CQUFPQyxPQUFPO2dCQUFtQjtZQUNyRDtZQUVBLGlEQUFpRDtZQUNqRCx3RUFBd0U7WUFDeEUsTUFBTUMsZUFBZSxNQUFNLElBQUksQ0FBQ1gsU0FBUyxDQUFDWSxPQUFPLENBQUMsZ0NBQWdDLENBQUM7WUFDbkYsTUFBTUMsU0FBVUYsY0FBc0JFO1lBQ3RDLE1BQU1DLFdBQVc7Z0JBQUM7Z0JBQWM7Z0JBQW9CO2dCQUFzQjthQUFzQjtZQUNoRyxNQUFNQyxVQUFVRCxTQUFTRSxNQUFNLENBQUMsQ0FBQ0MsSUFBTSxDQUFDSixRQUFRSyxTQUFTRDtZQUN6RCxJQUFJRixRQUFRSSxNQUFNLEVBQUU7Z0JBQ2xCLE9BQU87b0JBQ0xWLFNBQVM7b0JBQ1RDLE9BQU8sQ0FBQyw0Q0FBNEMsRUFBRUssUUFBUUssSUFBSSxDQUFDLE1BQU0sdURBQXVELENBQUM7Z0JBQ25JO1lBQ0Y7WUFFQSxPQUFPO2dCQUFFWCxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPQyxPQUFPO1lBQ2QsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBT0EsaUJBQWlCVyxRQUFRWCxNQUFNWSxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0lBRVFDLGlCQUFpQkMsUUFBa0IsRUFBRUMsU0FBZ0MsRUFBVztRQUN0RixLQUFLLE1BQU0sQ0FBQ0MsS0FBS0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNKLFdBQVk7WUFDcEQsSUFBSUUsVUFBVUcsYUFBYUgsVUFBVSxNQUFNO1lBRTNDLE1BQU1JLGdCQUFnQixRQUFxQyxDQUFDTCxJQUFJO1lBQ2hFLElBQUksT0FBT0ssa0JBQWtCLFlBQVksT0FBT0osVUFBVSxVQUFVO2dCQUNsRSxJQUFJSSxjQUFjQyxXQUFXLE9BQU9MLE1BQU1LLFdBQVcsSUFBSTtvQkFDdkQsT0FBTztnQkFDVDtZQUNGLE9BQU8sSUFBSUQsa0JBQWtCSixPQUFPO2dCQUNsQyxPQUFPO1lBQ1Q7UUFDRjtRQUNBLE9BQU87SUFDVDtJQUVRTSw0QkFDTlQsUUFBa0IsRUFDbEJVLEtBQTRCLEVBQ1I7UUFDcEIsTUFBTTdCLFNBQTZCO1lBQ2pDOEIsVUFBVSxFQUFFO1lBQ1pDLFlBQVksRUFBRTtRQUNoQjtRQUVBLE1BQU1DLGNBQWM7ZUFBSUg7U0FBTSxDQUFDSSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRUMsUUFBUSxHQUFHRixFQUFFRSxRQUFRO1FBRXJFLEtBQUssTUFBTUMsUUFBUUwsWUFBYTtZQUM5QixJQUFJLENBQUNLLEtBQUtDLFFBQVEsRUFBRTtZQUVwQixNQUFNbEIsWUFBWWlCLEtBQUtqQixTQUFTO1lBQ2hDLElBQUksSUFBSSxDQUFDRixnQkFBZ0IsQ0FBQ0MsVUFBVUMsWUFBWTtnQkFDOUMsTUFBTW1CLE9BQU9GLEtBQUtHLGFBQWE7Z0JBRS9CLElBQUlELEtBQUtULFFBQVEsRUFBRTtvQkFDakI5QixPQUFPOEIsUUFBUSxHQUFHOzJCQUFLOUIsT0FBTzhCLFFBQVEsSUFBSSxFQUFFOzJCQUFNUyxLQUFLVCxRQUFRO3FCQUFDO2dCQUNsRTtnQkFFQSxJQUFJUyxLQUFLUixVQUFVLEVBQUU7b0JBQ25CL0IsT0FBTytCLFVBQVUsR0FBRzsyQkFBSy9CLE9BQU8rQixVQUFVLElBQUksRUFBRTsyQkFBTVEsS0FBS1IsVUFBVTtxQkFBQztnQkFDeEU7WUFDRjtRQUNGO1FBRUEsU0FBUztRQUNUL0IsT0FBTzhCLFFBQVEsR0FBRztlQUFJLElBQUlXLElBQUl6QyxPQUFPOEIsUUFBUTtTQUFFO1FBQy9DOUIsT0FBTytCLFVBQVUsR0FBRztlQUFJLElBQUlVLElBQUl6QyxPQUFPK0IsVUFBVTtTQUFFO1FBRW5ELE9BQU8vQjtJQUNUO0lBRUEsTUFBTTBDLGtCQUNKdkIsUUFBa0IsRUFDbEJ3QixHQUFRLEVBQ1JkLEtBQTRCLEVBQzVCZSxlQUFtQyxFQUNUO1FBQzFCLElBQUk7WUFDRixNQUFNSixnQkFBZ0IsSUFBSSxDQUFDWiwyQkFBMkIsQ0FBQ1QsVUFBVVU7WUFFakUsa0RBQWtEO1lBQ2xELE1BQU1nQixRQUFRMUIsU0FBUzJCLFNBQVMsSUFBSTNCLFNBQVM0QixhQUFhO1lBQzFELElBQUksQ0FBQ0YsT0FBTztnQkFDVixPQUFPO29CQUNMekMsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsSUFBSTJDO1lBRUosK0JBQStCO1lBQy9CLElBQUlKLGlCQUFpQkssZ0JBQWdCO2dCQUNuQ0QsY0FBY0osZ0JBQWdCSyxjQUFjO2dCQUU1Qyw0QkFBNEI7Z0JBQzVCLElBQUk7b0JBQ0YsTUFBTSxJQUFJLENBQUNwRCxXQUFXLEVBQUVVLFFBQVEsMEJBQTBCO3dCQUN4RDJDLFNBQVNGO3dCQUNURyxTQUFTLElBQUksQ0FBQ3pELE1BQU0sQ0FBQzBELE1BQU0sSUFBSTtvQkFDakM7Z0JBQ0YsRUFBRSxPQUFNO2dCQUNOLDZEQUE2RDtnQkFDL0Q7WUFDRixPQUFPO2dCQUNMLHdCQUF3QjtnQkFDeEIsSUFBSTtvQkFDRixNQUFNQyxhQUFhLE1BQU0sSUFBSSxDQUFDMUQsU0FBUyxDQUFDMkQsS0FBSyxDQUFDQyxhQUFhLENBQUM7d0JBQUVWO29CQUFNO29CQUNwRSxJQUFJUSxXQUFXbEQsRUFBRSxJQUFJa0QsV0FBV0csSUFBSSxFQUFFQyxJQUFJO3dCQUN4Q1QsY0FBY0ssV0FBV0csSUFBSSxDQUFDQyxFQUFFO29CQUNsQztnQkFDRixFQUFFLE9BQU9wRCxPQUFZO29CQUNuQixNQUFNcUQsYUFBYXJELE9BQU9rQyxNQUFNbEMsU0FBU0EsT0FBT1ksV0FBVztvQkFDM0QsSUFBSTBDLE9BQU9ELFlBQVk3QyxRQUFRLENBQUMsa0JBQWtCO3dCQUNoRCxPQUFPOzRCQUNMVCxTQUFTOzRCQUNUQyxPQUNFO3dCQUNKO29CQUNGO2dCQUNBLHVDQUF1QztnQkFDekM7Z0JBRUEsaUNBQWlDO2dCQUNqQyxJQUFJLENBQUMyQyxhQUFhO29CQUNoQixJQUFJO3dCQUNGLHVFQUF1RTt3QkFDdkUsc0VBQXNFO3dCQUN0RSxNQUFNWSxhQUNKLENBQUNwQixjQUFjVixRQUFRLEVBQUVoQixTQUFTMEIsY0FBY1YsUUFBUSxHQUFHLElBQUcsS0FDN0QsS0FBSSxDQUFDcEMsTUFBTSxDQUFDbUUsZUFBZSxFQUFFL0MsU0FBUyxJQUFJLENBQUNwQixNQUFNLENBQUNtRSxlQUFlLEdBQUcsSUFBRzt3QkFFMUUsSUFBSSxDQUFDRCxZQUFZOUMsUUFBUTs0QkFDdkIsT0FBTztnQ0FDTFYsU0FBUztnQ0FDVEMsT0FBTzs0QkFDVDt3QkFDRjt3QkFFQSxJQUFJLENBQUMsSUFBSSxDQUFDUixXQUFXLEVBQUU7NEJBQ3JCLE9BQU87Z0NBQ0xPLFNBQVM7Z0NBQ1RDLE9BQ0U7NEJBQ0o7d0JBQ0Y7d0JBRUEsTUFBTXlELGVBQWUsTUFBTSxJQUFJLENBQUNqRSxXQUFXLENBQUNVLE9BQU8sQ0FBQyxzQkFBc0I7NEJBQ3hFc0M7NEJBQ0EsR0FBSSxJQUFJLENBQUNuRCxNQUFNLENBQUMwRCxNQUFNLEdBQUc7Z0NBQUVELFNBQVMsSUFBSSxDQUFDekQsTUFBTSxDQUFDMEQsTUFBTTs0QkFBQyxJQUFJLENBQUMsQ0FBQzs0QkFDN0RXLGFBQWFILFdBQVc3QyxJQUFJLENBQUM7d0JBQy9CO3dCQUVBLElBQUsrQyxjQUFzQjNELElBQUk7NEJBQzdCLG1EQUFtRDs0QkFDbkQsT0FBTztnQ0FDTEMsU0FBUztnQ0FDVDRELGVBQWVuQjtnQ0FDZm9CLHNCQUFzQjtvQ0FDcEJDLFNBQVM7b0NBQ1RwQyxVQUFVOEI7Z0NBQ1o7NEJBQ0Y7d0JBQ0Y7d0JBQ0EsTUFBTU8sWUFBWSxjQUF1QjlELFNBQVM7d0JBQ2xELE9BQU87NEJBQ0xELFNBQVM7NEJBQ1RDLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRThELFVBQVUsc0ZBQXNGLENBQUM7d0JBQ2xJO29CQUNGLEVBQUUsT0FBTzlELE9BQU87d0JBQ2QsTUFBTXFELGFBQWEsT0FBZ0JuQixNQUFNbEMsU0FBVUEsT0FBZVksV0FBVzt3QkFDN0UsT0FBTzs0QkFDTGIsU0FBUzs0QkFDVEMsT0FBTyxDQUFDLHFCQUFxQixFQUFFcUQsV0FBVyxrRkFBa0YsQ0FBQzt3QkFDL0g7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLGtCQUFrQjtZQUNsQixNQUFNVSxnQkFBMEIsRUFBRTtZQUNsQyxNQUFNQyxrQkFDSixDQUFDN0IsY0FBY1YsUUFBUSxFQUFFaEIsU0FBUzBCLGNBQWNWLFFBQVEsR0FBRyxJQUFHLEtBQzdELEtBQUksQ0FBQ3BDLE1BQU0sQ0FBQ21FLGVBQWUsRUFBRS9DLFNBQVMsSUFBSSxDQUFDcEIsTUFBTSxDQUFDbUUsZUFBZSxHQUFHLElBQUc7WUFFMUUsSUFBSWIsZUFBZXFCLGlCQUFpQnZELFFBQVE7Z0JBQzFDLE1BQU13RCxpQkFBaUIsTUFBTSxJQUFJLENBQUMzRSxTQUFTLENBQUM0RSxhQUFhLENBQUNDLElBQUksQ0FBQztvQkFDN0RDLE9BQU87b0JBQ1BDLE9BQU87Z0JBQ1Q7Z0JBRUEsTUFBTUMsU0FBUyxJQUFJQztnQkFDbkIsS0FBSyxNQUFNQyxLQUFLUCxlQUFleEMsUUFBUSxJQUFJLEVBQUUsQ0FBRTtvQkFDN0MsSUFBSSxDQUFDK0MsRUFBRXBCLEVBQUUsSUFBSSxDQUFDb0IsRUFBRUMsSUFBSSxFQUFFO29CQUN0QkgsT0FBT0ksR0FBRyxDQUFDRixFQUFFQyxJQUFJLEVBQUVELEVBQUVwQixFQUFFO2dCQUN6QjtnQkFFQSxLQUFLLE1BQU11QixtQkFBbUJYLGdCQUFpQjtvQkFDN0MsSUFBSTt3QkFDRixNQUFNWSxVQUFVRCxnQkFBZ0JFLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQU07d0JBQ3JELE1BQU1DLFlBQVlULE9BQU9VLEdBQUcsQ0FBQ0osWUFBYUEsQ0FBQUEsUUFBUUssVUFBVSxDQUFDLFFBQVFMLFFBQVFLLFVBQVUsQ0FBQyxPQUFPTCxVQUFVLEVBQUM7d0JBQzFHLElBQUksQ0FBQ0csV0FBVzt3QkFFaEIsTUFBTSxJQUFJLENBQUN6RixTQUFTLENBQUM0RSxhQUFhLENBQUNnQixNQUFNLENBQUM7NEJBQ3hDQyxTQUFTSjs0QkFDVDlCLE9BQU9OO3dCQUNUO3dCQUNBb0IsY0FBY3FCLElBQUksQ0FBQ1Q7b0JBQ3JCLEVBQUUsT0FBTzNFLE9BQU87d0JBQ2QsbUNBQW1DO3dCQUNuQ3FGLFFBQVFDLElBQUksQ0FBQyxDQUFDLDhCQUE4QixFQUFFWCxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUzRTtvQkFDcEU7Z0JBQ0Y7WUFDRjtZQUVBLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1Q2QyxnQkFBZ0JEO2dCQUNoQmdCLGVBQWVuQjtnQkFDZm9CLHNCQUFzQjtvQkFDcEJuQyxVQUFVc0M7b0JBQ1ZyQyxZQUFZUyxjQUFjVCxVQUFVO2dCQUN0QztZQUNGO1FBQ0YsRUFBRSxPQUFPMUIsT0FBTztZQUNkcUYsUUFBUXJGLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU9BLGlCQUFpQlcsUUFBUVgsTUFBTVksT0FBTyxHQUFHO1lBQ2xEO1FBQ0Y7SUFDRjtJQUVBLE1BQU0yRSxvQkFDSnpFLFFBQWtCLEVBQ2xCd0IsR0FBUSxFQUNSa0QsT0FBbUIsRUFDbkJDLFFBQTZCLEVBQ0Q7UUFDNUIsSUFBSTtZQUNGLE1BQU05QyxjQUFjNkMsUUFBUTVDLGNBQWM7WUFDMUMsSUFBSSxDQUFDRCxhQUFhO2dCQUNoQixPQUFPO29CQUFFNUMsU0FBUztvQkFBT0MsT0FBTztnQkFBeUI7WUFDM0Q7WUFFQSxrQkFBa0I7WUFDbEIsNkNBQTZDO1lBQzdDLElBQUk7Z0JBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ1IsV0FBVyxFQUFFLE1BQU0sSUFBSW1CLE1BQU07Z0JBQ3ZDLE1BQU0sSUFBSSxDQUFDbkIsV0FBVyxDQUFDVSxPQUFPLENBQUMsMkJBQTJCO29CQUN4RDJDLFNBQVNGO29CQUNURyxTQUFTLElBQUksQ0FBQ3pELE1BQU0sQ0FBQzBELE1BQU0sSUFBSTtnQkFDakM7WUFDRixFQUFFLE9BQU8vQyxPQUFPO2dCQUNkLDJFQUEyRTtnQkFDM0VxRixRQUFRQyxJQUFJLENBQUMsNERBQTREdEY7Z0JBRXpFLDRDQUE0QztnQkFDNUMsTUFBTWtFLGdCQUFnQixNQUFNLElBQUksQ0FBQzVFLFNBQVMsQ0FBQzJELEtBQUssQ0FBQ2lCLGFBQWEsQ0FBQztvQkFDN0RmLE1BQU1SO29CQUNOeUIsT0FBTztnQkFDVDtnQkFFQSxLQUFLLE1BQU1lLFdBQVdqQixjQUFjekMsUUFBUSxJQUFJLEVBQUUsQ0FBRTtvQkFDbEQsSUFBSTBELFFBQVEvQixFQUFFLEVBQUU7d0JBQ2QsSUFBSTs0QkFDRixNQUFNLElBQUksQ0FBQzlELFNBQVMsQ0FBQzRFLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQztnQ0FDdENQLFNBQVNBLFFBQVEvQixFQUFFO2dDQUNuQkQsTUFBTVI7NEJBQ1I7d0JBQ0YsRUFBRSxPQUFNO3dCQUNOLDZCQUE2Qjt3QkFDL0I7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUVBLE9BQU87Z0JBQUU1QyxTQUFTO1lBQUs7UUFDekIsRUFBRSxPQUFPQyxPQUFPO1lBQ2RxRixRQUFRckYsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBT0EsaUJBQWlCVyxRQUFRWCxNQUFNWSxPQUFPLEdBQUc7WUFDbEQ7UUFDRjtJQUNGO0FBQ0Y7QUFFTyxTQUFTK0U7SUFDZCxNQUFNcEcsV0FBV3FHLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUM1QyxNQUFNQyxnQkFBZ0JILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO0lBRXRELElBQUksQ0FBQ3pHLFVBQVU7UUFDYjhGLFFBQVFDLElBQUksQ0FBQztRQUNiLE9BQU87SUFDVDtJQUVBLE9BQU8sSUFBSW5HLGVBQWU7UUFDeEJJO1FBQ0F3RztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvaW50ZWdyYXRpb25zL3NsYWNrLnRzPzU3MWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViQ2xpZW50IH0gZnJvbSAnQHNsYWNrL3dlYi1hcGknXG5pbXBvcnQgdHlwZSB7IEVtcGxveWVlLCBBcHAsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCB0eXBlIHtcbiAgSW50ZWdyYXRpb25Db25uZWN0b3IsXG4gIFByb3Zpc2lvblJlc3VsdCxcbiAgRGVwcm92aXNpb25SZXN1bHQsXG4gIERlcHJvdmlzaW9uT3B0aW9ucyxcbiAgU2xhY2tDb25maWcsXG4gIFNsYWNrUHJvdmlzaW9uRGF0YSxcbiAgUHJvdmlzaW9uaW5nQ29uZGl0aW9uLFxufSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgY2xhc3MgU2xhY2tDb25uZWN0b3IgaW1wbGVtZW50cyBJbnRlZ3JhdGlvbkNvbm5lY3RvciB7XG4gIHByaXZhdGUgY29uZmlnOiBTbGFja0NvbmZpZ1xuICBwcml2YXRlIGJvdENsaWVudDogV2ViQ2xpZW50XG4gIHByaXZhdGUgYWRtaW5DbGllbnQ6IFdlYkNsaWVudCB8IG51bGxcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFNsYWNrQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgICB0aGlzLmJvdENsaWVudCA9IG5ldyBXZWJDbGllbnQoY29uZmlnLmJvdFRva2VuKVxuICAgIHRoaXMuYWRtaW5DbGllbnQgPSBjb25maWcuYWRtaW5Ub2tlbiA/IG5ldyBXZWJDbGllbnQoY29uZmlnLmFkbWluVG9rZW4pIDogbnVsbFxuICB9XG5cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5ib3RDbGllbnQuYXV0aC50ZXN0KClcbiAgICAgIGlmICghcmVzdWx0Lm9rKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0F1dGggdGVzdCBmYWlsZWQnIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgYm90IHNjb3BlcyBmb3IgcHJvdmlzaW9uaW5nLlxuICAgICAgLy8gV2l0aG91dCB1c2VyczpyZWFkLmVtYWlsIHdlIGNhbm5vdCByZWxpYWJseSBtYXRjaCBlbXBsb3llZXMgYnkgZW1haWwuXG4gICAgICBjb25zdCBzY29wZXNSZXN1bHQgPSBhd2FpdCB0aGlzLmJvdENsaWVudC5hcGlDYWxsKCdhcHBzLnBlcm1pc3Npb25zLnNjb3Blcy5saXN0Jywge30pXG4gICAgICBjb25zdCBzY29wZXMgPSAoc2NvcGVzUmVzdWx0IGFzIGFueSk/LnNjb3BlcyBhcyBzdHJpbmdbXSB8IHVuZGVmaW5lZFxuICAgICAgY29uc3QgcmVxdWlyZWQgPSBbJ3VzZXJzOnJlYWQnLCAndXNlcnM6cmVhZC5lbWFpbCcsICdjb252ZXJzYXRpb25zOnJlYWQnLCAnY29udmVyc2F0aW9uczp3cml0ZSddXG4gICAgICBjb25zdCBtaXNzaW5nID0gcmVxdWlyZWQuZmlsdGVyKChzKSA9PiAhc2NvcGVzPy5pbmNsdWRlcyhzKSlcbiAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBgU2xhY2sgYm90IHRva2VuIGlzIG1pc3NpbmcgcmVxdWlyZWQgc2NvcGVzOiAke21pc3Npbmcuam9pbignLCAnKX0uIEFkZCB0aGVtIGluIFNsYWNrIGFwcCBzZXR0aW5ncyBhbmQgcmVpbnN0YWxsIHRoZSBhcHAuYCxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gY29ubmVjdCB0byBTbGFjaycsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlOiBFbXBsb3llZSwgY29uZGl0aW9uOiBQcm92aXNpb25pbmdDb25kaXRpb24pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb25kaXRpb24pKSB7XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgY29udGludWVcbiAgICAgIFxuICAgICAgY29uc3QgZW1wbG95ZWVWYWx1ZSA9IChlbXBsb3llZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilba2V5XVxuICAgICAgaWYgKHR5cGVvZiBlbXBsb3llZVZhbHVlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmIChlbXBsb3llZVZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbXBsb3llZVZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UHJvdmlzaW9uRGF0YUZvckVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdXG4gICk6IFNsYWNrUHJvdmlzaW9uRGF0YSB7XG4gICAgY29uc3QgcmVzdWx0OiBTbGFja1Byb3Zpc2lvbkRhdGEgPSB7XG4gICAgICBjaGFubmVsczogW10sXG4gICAgICB1c2VyR3JvdXBzOiBbXSxcbiAgICB9XG5cbiAgICBjb25zdCBzb3J0ZWRSdWxlcyA9IFsuLi5ydWxlc10uc29ydCgoYSwgYikgPT4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHkpXG5cbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2Ygc29ydGVkUnVsZXMpIHtcbiAgICAgIGlmICghcnVsZS5pc0FjdGl2ZSkgY29udGludWVcbiAgICAgIFxuICAgICAgY29uc3QgY29uZGl0aW9uID0gcnVsZS5jb25kaXRpb24gYXMgUHJvdmlzaW9uaW5nQ29uZGl0aW9uXG4gICAgICBpZiAodGhpcy5tYXRjaGVzQ29uZGl0aW9uKGVtcGxveWVlLCBjb25kaXRpb24pKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBydWxlLnByb3Zpc2lvbkRhdGEgYXMgU2xhY2tQcm92aXNpb25EYXRhXG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YS5jaGFubmVscykge1xuICAgICAgICAgIHJlc3VsdC5jaGFubmVscyA9IFsuLi4ocmVzdWx0LmNoYW5uZWxzIHx8IFtdKSwgLi4uZGF0YS5jaGFubmVsc11cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEudXNlckdyb3Vwcykge1xuICAgICAgICAgIHJlc3VsdC51c2VyR3JvdXBzID0gWy4uLihyZXN1bHQudXNlckdyb3VwcyB8fCBbXSksIC4uLmRhdGEudXNlckdyb3Vwc11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlZHVwZVxuICAgIHJlc3VsdC5jaGFubmVscyA9IFsuLi5uZXcgU2V0KHJlc3VsdC5jaGFubmVscyldXG4gICAgcmVzdWx0LnVzZXJHcm91cHMgPSBbLi4ubmV3IFNldChyZXN1bHQudXNlckdyb3VwcyldXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgYXN5bmMgcHJvdmlzaW9uRW1wbG95ZWUoXG4gICAgZW1wbG95ZWU6IEVtcGxveWVlLFxuICAgIGFwcDogQXBwLFxuICAgIHJ1bGVzOiBBcHBQcm92aXNpb25pbmdSdWxlW10sXG4gICAgZXhpc3RpbmdBY2NvdW50PzogQXBwQWNjb3VudCB8IG51bGxcbiAgKTogUHJvbWlzZTxQcm92aXNpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvdmlzaW9uRGF0YSA9IHRoaXMuZ2V0UHJvdmlzaW9uRGF0YUZvckVtcGxveWVlKGVtcGxveWVlLCBydWxlcylcbiAgICAgIFxuICAgICAgLy8gUHJlZmVyIHdvcmsgZW1haWwsIGZhbGwgYmFjayB0byBwZXJzb25hbCBlbWFpbC5cbiAgICAgIGNvbnN0IGVtYWlsID0gZW1wbG95ZWUud29ya0VtYWlsIHx8IGVtcGxveWVlLnBlcnNvbmFsRW1haWxcbiAgICAgIGlmICghZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0FuIGVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQgZm9yIFNsYWNrIHByb3Zpc2lvbmluZy4nLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBzbGFja1VzZXJJZDogc3RyaW5nIHwgdW5kZWZpbmVkXG5cbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgIGlmIChleGlzdGluZ0FjY291bnQ/LmV4dGVybmFsVXNlcklkKSB7XG4gICAgICAgIHNsYWNrVXNlcklkID0gZXhpc3RpbmdBY2NvdW50LmV4dGVybmFsVXNlcklkXG4gICAgICAgIFxuICAgICAgICAvLyBSZWFjdGl2YXRlIGlmIGRlYWN0aXZhdGVkXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZG1pbkNsaWVudD8uYXBpQ2FsbCgnYWRtaW4udXNlcnMuc2V0UmVndWxhcicsIHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHNsYWNrVXNlcklkLFxuICAgICAgICAgICAgdGVhbV9pZDogdGhpcy5jb25maWcudGVhbUlkIHx8ICcnLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIE1heSBmYWlsIGlmIHVzZXIgaXMgYWxyZWFkeSBhY3RpdmUgb3IgbWV0aG9kIG5vdCBhdmFpbGFibGVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTG9vayB1cCB1c2VyIGJ5IGVtYWlsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXNlckxvb2t1cCA9IGF3YWl0IHRoaXMuYm90Q2xpZW50LnVzZXJzLmxvb2t1cEJ5RW1haWwoeyBlbWFpbCB9KVxuICAgICAgICAgIGlmICh1c2VyTG9va3VwLm9rICYmIHVzZXJMb29rdXAudXNlcj8uaWQpIHtcbiAgICAgICAgICAgIHNsYWNrVXNlcklkID0gdXNlckxvb2t1cC51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc3Qgc2xhY2tFcnJvciA9IGVycm9yPy5kYXRhPy5lcnJvciB8fCBlcnJvcj8ubWVzc2FnZSB8fCAnJ1xuICAgICAgICAgIGlmIChTdHJpbmcoc2xhY2tFcnJvcikuaW5jbHVkZXMoJ21pc3Npbmdfc2NvcGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOlxuICAgICAgICAgICAgICAgICdTbGFjayBib3QgdG9rZW4gaXMgbWlzc2luZyB0aGUgcmVxdWlyZWQgc2NvcGUgYHVzZXJzOnJlYWQuZW1haWxgLiBBZGQgaXQgaW4geW91ciBTbGFjayBhcHAgYW5kIHJlaW5zdGFsbCB0aGUgYXBwLCB0aGVuIHJldHJ5LicsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFVzZXIgbm90IGZvdW5kIC0gd2lsbCBuZWVkIHRvIGludml0ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdXNlciBub3QgZm91bmQsIHNlbmQgaW52aXRlXG4gICAgICAgIGlmICghc2xhY2tVc2VySWQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTm90ZTogYWRtaW4udXNlcnMuaW52aXRlIHJlcXVpcmVzIFNsYWNrIEVudGVycHJpc2UgR3JpZCBvciBwYWlkIHBsYW5cbiAgICAgICAgICAgIC8vIEZvciBzdGFuZGFyZCB3b3Jrc3BhY2VzLCB5b3UgbWlnaHQgbmVlZCB0byB1c2UgYSBkaWZmZXJlbnQgYXBwcm9hY2hcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxJZHMgPVxuICAgICAgICAgICAgICAocHJvdmlzaW9uRGF0YS5jaGFubmVscz8ubGVuZ3RoID8gcHJvdmlzaW9uRGF0YS5jaGFubmVscyA6IG51bGwpIHx8XG4gICAgICAgICAgICAgICh0aGlzLmNvbmZpZy5kZWZhdWx0Q2hhbm5lbHM/Lmxlbmd0aCA/IHRoaXMuY29uZmlnLmRlZmF1bHRDaGFubmVscyA6IG51bGwpXG5cbiAgICAgICAgICAgIGlmICghY2hhbm5lbElkcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdTbGFjayBwcm92aXNpb25pbmcgcmVxdWlyZXMgZGVmYXVsdCBjaGFubmVscyAob3IgcHJvdmlzaW9uaW5nIHJ1bGUgY2hhbm5lbHMpLicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmFkbWluQ2xpZW50KSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXJyb3I6XG4gICAgICAgICAgICAgICAgICAnU2xhY2sgdXNlciBub3QgZm91bmQgaW4gdGhlIHdvcmtzcGFjZS4gQWRkIGFuIEFkbWluIHRva2VuIChFbnRlcnByaXNlKSB0byBhdXRvLWludml0ZSwgb3IgaW52aXRlIHRoZSB1c2VyIG1hbnVhbGx5LCB0aGVuIHJldHJ5LicsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW52aXRlUmVzdWx0ID0gYXdhaXQgdGhpcy5hZG1pbkNsaWVudC5hcGlDYWxsKCdhZG1pbi51c2Vycy5pbnZpdGUnLCB7XG4gICAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgICAuLi4odGhpcy5jb25maWcudGVhbUlkID8geyB0ZWFtX2lkOiB0aGlzLmNvbmZpZy50ZWFtSWQgfSA6IHt9KSxcbiAgICAgICAgICAgICAgY2hhbm5lbF9pZHM6IGNoYW5uZWxJZHMuam9pbignLCcpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKChpbnZpdGVSZXN1bHQgYXMgYW55KT8ub2spIHtcbiAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgSUQgd29uJ3QgYmUgYXZhaWxhYmxlIHVudGlsIHRoZXkgYWNjZXB0XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleHRlcm5hbEVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICBwcm92aXNpb25lZFJlc291cmNlczoge1xuICAgICAgICAgICAgICAgICAgaW52aXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGNoYW5uZWxzOiBjaGFubmVsSWRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGludml0ZUVyciA9IChpbnZpdGVSZXN1bHQgYXMgYW55KT8uZXJyb3IgfHwgJ3Vua25vd25fZXJyb3InXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IGBTbGFjayBpbnZpdGUgZmFpbGVkOiAke2ludml0ZUVycn0uIEludml0ZSB0aGUgdXNlciBtYW51YWxseSBvciBlbnN1cmUgeW91ciBBZG1pbiB0b2tlbiBoYXMgdGhlIGNvcnJlY3Qgc2NvcGVzIGFuZCBwbGFuLmAsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsYWNrRXJyb3IgPSAoZXJyb3IgYXMgYW55KT8uZGF0YT8uZXJyb3IgfHwgKGVycm9yIGFzIGFueSk/Lm1lc3NhZ2UgfHwgJ3Vua25vd25fZXJyb3InXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgZXJyb3I6IGBTbGFjayBpbnZpdGUgZmFpbGVkOiAke3NsYWNrRXJyb3J9LiBJbnZpdGUgdGhlIHVzZXIgbWFudWFsbHkgb3IgZW5zdXJlIHlvdXIgQWRtaW4gdG9rZW4gc3VwcG9ydHMgYWRtaW4udXNlcnMuaW52aXRlLmAsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0byBjaGFubmVsc1xuICAgICAgY29uc3QgYWRkZWRDaGFubmVsczogc3RyaW5nW10gPSBbXVxuICAgICAgY29uc3QgZGVzaXJlZENoYW5uZWxzID1cbiAgICAgICAgKHByb3Zpc2lvbkRhdGEuY2hhbm5lbHM/Lmxlbmd0aCA/IHByb3Zpc2lvbkRhdGEuY2hhbm5lbHMgOiBudWxsKSB8fFxuICAgICAgICAodGhpcy5jb25maWcuZGVmYXVsdENoYW5uZWxzPy5sZW5ndGggPyB0aGlzLmNvbmZpZy5kZWZhdWx0Q2hhbm5lbHMgOiBudWxsKVxuXG4gICAgICBpZiAoc2xhY2tVc2VySWQgJiYgZGVzaXJlZENoYW5uZWxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbHNSZXN1bHQgPSBhd2FpdCB0aGlzLmJvdENsaWVudC5jb252ZXJzYXRpb25zLmxpc3Qoe1xuICAgICAgICAgIHR5cGVzOiAncHVibGljX2NoYW5uZWwscHJpdmF0ZV9jaGFubmVsJyxcbiAgICAgICAgICBsaW1pdDogMTAwMCxcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBieU5hbWUgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpXG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBjaGFubmVsc1Jlc3VsdC5jaGFubmVscyB8fCBbXSkge1xuICAgICAgICAgIGlmICghYy5pZCB8fCAhYy5uYW1lKSBjb250aW51ZVxuICAgICAgICAgIGJ5TmFtZS5zZXQoYy5uYW1lLCBjLmlkKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChjb25zdCBjaGFubmVsTmFtZU9ySWQgb2YgZGVzaXJlZENoYW5uZWxzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjaGFubmVsTmFtZU9ySWQudHJpbSgpLnJlcGxhY2UoL14jLywgJycpXG4gICAgICAgICAgICBjb25zdCBjaGFubmVsSWQgPSBieU5hbWUuZ2V0KGNsZWFuZWQpIHx8IChjbGVhbmVkLnN0YXJ0c1dpdGgoJ0MnKSB8fCBjbGVhbmVkLnN0YXJ0c1dpdGgoJ0cnKSA/IGNsZWFuZWQgOiAnJylcbiAgICAgICAgICAgIGlmICghY2hhbm5lbElkKSBjb250aW51ZVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvdENsaWVudC5jb252ZXJzYXRpb25zLmludml0ZSh7XG4gICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWxJZCxcbiAgICAgICAgICAgICAgdXNlcnM6IHNsYWNrVXNlcklkLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGFkZGVkQ2hhbm5lbHMucHVzaChjaGFubmVsTmFtZU9ySWQpXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFVzZXIgbWlnaHQgYWxyZWFkeSBiZSBpbiBjaGFubmVsXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBhZGQgdXNlciB0byBjaGFubmVsICR7Y2hhbm5lbE5hbWVPcklkfTpgLCBlcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZXh0ZXJuYWxVc2VySWQ6IHNsYWNrVXNlcklkLFxuICAgICAgICBleHRlcm5hbEVtYWlsOiBlbWFpbCxcbiAgICAgICAgcHJvdmlzaW9uZWRSZXNvdXJjZXM6IHtcbiAgICAgICAgICBjaGFubmVsczogYWRkZWRDaGFubmVscyxcbiAgICAgICAgICB1c2VyR3JvdXBzOiBwcm92aXNpb25EYXRhLnVzZXJHcm91cHMsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NsYWNrIHByb3Zpc2lvbmluZyBlcnJvcjonLCBlcnJvcilcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHByb3Zpc2lvbiBTbGFjayBhY2NvdW50JyxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBkZXByb3Zpc2lvbkVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBhcHA6IEFwcCxcbiAgICBhY2NvdW50OiBBcHBBY2NvdW50LFxuICAgIF9vcHRpb25zPzogRGVwcm92aXNpb25PcHRpb25zXG4gICk6IFByb21pc2U8RGVwcm92aXNpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2xhY2tVc2VySWQgPSBhY2NvdW50LmV4dGVybmFsVXNlcklkXG4gICAgICBpZiAoIXNsYWNrVXNlcklkKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIFNsYWNrIHVzZXIgSUQgZm91bmQnIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVhY3RpdmF0ZSB1c2VyXG4gICAgICAvLyBOb3RlOiBUaGlzIHJlcXVpcmVzIFNsYWNrIGFkbWluIHByaXZpbGVnZXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghdGhpcy5hZG1pbkNsaWVudCkgdGhyb3cgbmV3IEVycm9yKCdBZG1pbiB0b2tlbiBub3QgY29uZmlndXJlZCcpXG4gICAgICAgIGF3YWl0IHRoaXMuYWRtaW5DbGllbnQuYXBpQ2FsbCgnYWRtaW4udXNlcnMuc2V0SW5hY3RpdmUnLCB7XG4gICAgICAgICAgdXNlcl9pZDogc2xhY2tVc2VySWQsXG4gICAgICAgICAgdGVhbV9pZDogdGhpcy5jb25maWcudGVhbUlkIHx8ICcnLFxuICAgICAgICB9KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgYWRtaW4gbWV0aG9kIG5vdCBhdmFpbGFibGUsIHdlIG1pZ2h0IG5lZWQgdG8gcmVtb3ZlIGZyb20gYWxsIGNoYW5uZWxzXG4gICAgICAgIGNvbnNvbGUud2FybignQWRtaW4gZGVhY3RpdmF0ZSBmYWlsZWQsIHRyeWluZyB0byByZW1vdmUgZnJvbSBjaGFubmVsczonLCBlcnJvcilcbiAgICAgICAgXG4gICAgICAgIC8vIExpc3QgdXNlcidzIGNvbnZlcnNhdGlvbnMgYW5kIHJlbW92ZSB0aGVtXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSBhd2FpdCB0aGlzLmJvdENsaWVudC51c2Vycy5jb252ZXJzYXRpb25zKHtcbiAgICAgICAgICB1c2VyOiBzbGFja1VzZXJJZCxcbiAgICAgICAgICB0eXBlczogJ3B1YmxpY19jaGFubmVsLHByaXZhdGVfY2hhbm5lbCcsXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY29udmVyc2F0aW9ucy5jaGFubmVscyB8fCBbXSkge1xuICAgICAgICAgIGlmIChjaGFubmVsLmlkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJvdENsaWVudC5jb252ZXJzYXRpb25zLmtpY2soe1xuICAgICAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwuaWQsXG4gICAgICAgICAgICAgICAgdXNlcjogc2xhY2tVc2VySWQsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgLy8gTWF5IGZhaWwgZm9yIHNvbWUgY2hhbm5lbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NsYWNrIGRlcHJvdmlzaW9uaW5nIGVycm9yOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZGVwcm92aXNpb24gU2xhY2sgYWNjb3VudCcsXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbGFja0Nvbm5lY3RvcigpOiBTbGFja0Nvbm5lY3RvciB8IG51bGwge1xuICBjb25zdCBib3RUb2tlbiA9IHByb2Nlc3MuZW52LlNMQUNLX0JPVF9UT0tFTlxuICBjb25zdCBzaWduaW5nU2VjcmV0ID0gcHJvY2Vzcy5lbnYuU0xBQ0tfU0lHTklOR19TRUNSRVRcblxuICBpZiAoIWJvdFRva2VuKSB7XG4gICAgY29uc29sZS53YXJuKCdTbGFjayBpbnRlZ3JhdGlvbiBub3QgY29uZmlndXJlZCcpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiBuZXcgU2xhY2tDb25uZWN0b3Ioe1xuICAgIGJvdFRva2VuLFxuICAgIHNpZ25pbmdTZWNyZXQsXG4gIH0pXG59XG4iXSwibmFtZXMiOlsiV2ViQ2xpZW50IiwiU2xhY2tDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImJvdENsaWVudCIsImJvdFRva2VuIiwiYWRtaW5DbGllbnQiLCJhZG1pblRva2VuIiwidGVzdENvbm5lY3Rpb24iLCJyZXN1bHQiLCJhdXRoIiwidGVzdCIsIm9rIiwic3VjY2VzcyIsImVycm9yIiwic2NvcGVzUmVzdWx0IiwiYXBpQ2FsbCIsInNjb3BlcyIsInJlcXVpcmVkIiwibWlzc2luZyIsImZpbHRlciIsInMiLCJpbmNsdWRlcyIsImxlbmd0aCIsImpvaW4iLCJFcnJvciIsIm1lc3NhZ2UiLCJtYXRjaGVzQ29uZGl0aW9uIiwiZW1wbG95ZWUiLCJjb25kaXRpb24iLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJlbXBsb3llZVZhbHVlIiwidG9Mb3dlckNhc2UiLCJnZXRQcm92aXNpb25EYXRhRm9yRW1wbG95ZWUiLCJydWxlcyIsImNoYW5uZWxzIiwidXNlckdyb3VwcyIsInNvcnRlZFJ1bGVzIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJydWxlIiwiaXNBY3RpdmUiLCJkYXRhIiwicHJvdmlzaW9uRGF0YSIsIlNldCIsInByb3Zpc2lvbkVtcGxveWVlIiwiYXBwIiwiZXhpc3RpbmdBY2NvdW50IiwiZW1haWwiLCJ3b3JrRW1haWwiLCJwZXJzb25hbEVtYWlsIiwic2xhY2tVc2VySWQiLCJleHRlcm5hbFVzZXJJZCIsInVzZXJfaWQiLCJ0ZWFtX2lkIiwidGVhbUlkIiwidXNlckxvb2t1cCIsInVzZXJzIiwibG9va3VwQnlFbWFpbCIsInVzZXIiLCJpZCIsInNsYWNrRXJyb3IiLCJTdHJpbmciLCJjaGFubmVsSWRzIiwiZGVmYXVsdENoYW5uZWxzIiwiaW52aXRlUmVzdWx0IiwiY2hhbm5lbF9pZHMiLCJleHRlcm5hbEVtYWlsIiwicHJvdmlzaW9uZWRSZXNvdXJjZXMiLCJpbnZpdGVkIiwiaW52aXRlRXJyIiwiYWRkZWRDaGFubmVscyIsImRlc2lyZWRDaGFubmVscyIsImNoYW5uZWxzUmVzdWx0IiwiY29udmVyc2F0aW9ucyIsImxpc3QiLCJ0eXBlcyIsImxpbWl0IiwiYnlOYW1lIiwiTWFwIiwiYyIsIm5hbWUiLCJzZXQiLCJjaGFubmVsTmFtZU9ySWQiLCJjbGVhbmVkIiwidHJpbSIsInJlcGxhY2UiLCJjaGFubmVsSWQiLCJnZXQiLCJzdGFydHNXaXRoIiwiaW52aXRlIiwiY2hhbm5lbCIsInB1c2giLCJjb25zb2xlIiwid2FybiIsImRlcHJvdmlzaW9uRW1wbG95ZWUiLCJhY2NvdW50IiwiX29wdGlvbnMiLCJraWNrIiwiY3JlYXRlU2xhY2tDb25uZWN0b3IiLCJwcm9jZXNzIiwiZW52IiwiU0xBQ0tfQk9UX1RPS0VOIiwic2lnbmluZ1NlY3JldCIsIlNMQUNLX1NJR05JTkdfU0VDUkVUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/slack.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/types.ts":
/*!***************************************!*\
  !*** ./src/lib/integrations/types.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy90eXBlcy50cyIsIm1hcHBpbmdzIjoiO0FBZ0lDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL2ludGVncmF0aW9ucy90eXBlcy50cz80YTkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRW1wbG95ZWUsIEFwcCwgQXBwQWNjb3VudCwgQXBwUHJvdmlzaW9uaW5nUnVsZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb3Zpc2lvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgZXh0ZXJuYWxVc2VySWQ/OiBzdHJpbmdcbiAgZXh0ZXJuYWxFbWFpbD86IHN0cmluZ1xuICBleHRlcm5hbFVzZXJuYW1lPzogc3RyaW5nXG4gIHByb3Zpc2lvbmVkUmVzb3VyY2VzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgZXJyb3I/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXByb3Zpc2lvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgZXJyb3I/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnRlZ3JhdGlvbkNvbm5lY3RvciB7XG4gIHByb3Zpc2lvbkVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBhcHA6IEFwcCxcbiAgICBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdLFxuICAgIGV4aXN0aW5nQWNjb3VudD86IEFwcEFjY291bnQgfCBudWxsXG4gICk6IFByb21pc2U8UHJvdmlzaW9uUmVzdWx0PlxuICBcbiAgZGVwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgYXBwOiBBcHAsXG4gICAgYWNjb3VudDogQXBwQWNjb3VudCxcbiAgICBvcHRpb25zPzogRGVwcm92aXNpb25PcHRpb25zXG4gICk6IFByb21pc2U8RGVwcm92aXNpb25SZXN1bHQ+XG4gIFxuICB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXByb3Zpc2lvbk9wdGlvbnMge1xuICBkZWxldGVBY2NvdW50PzogYm9vbGVhblxuICB0cmFuc2ZlclRvRW1haWw/OiBzdHJpbmdcbiAgdHJhbnNmZXJBcHBzPzogc3RyaW5nW11cbiAgYWxpYXNUb0VtYWlsPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlV29ya3NwYWNlQ29uZmlnIHtcbiAgZG9tYWluOiBzdHJpbmdcbiAgYWRtaW5FbWFpbDogc3RyaW5nXG4gIHNlcnZpY2VBY2NvdW50S2V5OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTbGFja0NvbmZpZyB7XG4gIGJvdFRva2VuOiBzdHJpbmdcbiAgYWRtaW5Ub2tlbj86IHN0cmluZ1xuICB0ZWFtSWQ/OiBzdHJpbmdcbiAgZGVmYXVsdENoYW5uZWxzPzogc3RyaW5nW11cbiAgc2lnbmluZ1NlY3JldD86IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpdGJ1Y2tldENvbmZpZyB7XG4gIHdvcmtzcGFjZTogc3RyaW5nXG4gIHVzZXJuYW1lPzogc3RyaW5nXG4gIGFwcFBhc3N3b3JkPzogc3RyaW5nXG4gIGFwaVRva2VuPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSmlyYUNvbmZpZyB7XG4gIGJhc2VVcmw6IHN0cmluZ1xuICBhZG1pbkVtYWlsOiBzdHJpbmdcbiAgYXBpVG9rZW46IHN0cmluZ1xuICBwcm9kdWN0cz86IHN0cmluZ1tdXG4gIGRlZmF1bHRHcm91cHM/OiBzdHJpbmdbXVxuICBkZWxldGVPbkRlcHJvdmlzaW9uPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEh1YlNwb3RDb25maWcge1xuICBzY2ltVG9rZW46IHN0cmluZ1xuICBiYXNlVXJsPzogc3RyaW5nXG59XG5cbmV4cG9ydCB0eXBlIFBhc3Nib2x0TW9kZSA9ICdBUEknIHwgJ0NMSSdcblxuZXhwb3J0IGludGVyZmFjZSBQYXNzYm9sdENvbmZpZyB7XG4gIG1vZGU/OiBQYXNzYm9sdE1vZGVcbiAgYmFzZVVybD86IHN0cmluZ1xuICBhcGlUb2tlbj86IHN0cmluZ1xuICBkZWZhdWx0Um9sZT86ICd1c2VyJyB8ICdhZG1pbidcbiAgY2xpUGF0aD86IHN0cmluZ1xuICBjbGlVc2VyPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmlzaW9uaW5nQ29uZGl0aW9uIHtcbiAgZGVwYXJ0bWVudD86IHN0cmluZ1xuICBsb2NhdGlvbj86IHN0cmluZ1xuICBlbXBsb3ltZW50VHlwZT86IHN0cmluZ1xuICBqb2JUaXRsZT86IHN0cmluZ1xuICBqaXJhQm9hcmRJZD86IHN0cmluZ1xuICBqaXJhTWFuYWdlcj86IGJvb2xlYW5cbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgYm9vbGVhbiB8IHVuZGVmaW5lZFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZVByb3Zpc2lvbkRhdGEge1xuICBvcmdVbml0UGF0aD86IHN0cmluZ1xuICBncm91cHM/OiBzdHJpbmdbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNsYWNrUHJvdmlzaW9uRGF0YSB7XG4gIGNoYW5uZWxzPzogc3RyaW5nW11cbiAgdXNlckdyb3Vwcz86IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQml0YnVja2V0UHJvdmlzaW9uRGF0YSB7XG4gIGdyb3Vwcz86IHN0cmluZ1tdXG4gIHJlcG9zaXRvcmllcz86IEFycmF5PHtcbiAgICByZXBvU2x1Zzogc3RyaW5nXG4gICAgcGVybWlzc2lvbjogJ3JlYWQnIHwgJ3dyaXRlJyB8ICdhZG1pbidcbiAgfT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBKaXJhUHJvdmlzaW9uRGF0YSB7XG4gIGdyb3Vwcz86IHN0cmluZ1tdXG4gIHByb2plY3RSb2xlcz86IEppcmFQcm9qZWN0Um9sZUFzc2lnbm1lbnRbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEppcmFQcm9qZWN0Um9sZUFzc2lnbm1lbnQge1xuICBwcm9qZWN0SWQ6IHN0cmluZ1xuICBwcm9qZWN0S2V5Pzogc3RyaW5nXG4gIHByb2plY3ROYW1lPzogc3RyaW5nXG4gIGJvYXJkSWQ/OiBzdHJpbmdcbiAgYm9hcmROYW1lPzogc3RyaW5nXG4gIHJvbGVJZDogc3RyaW5nXG4gIHJvbGVOYW1lPzogc3RyaW5nXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/types.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrations/webhook.ts":
/*!*****************************************!*\
  !*** ./src/lib/integrations/webhook.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebhookConnector: () => (/* binding */ WebhookConnector),\n/* harmony export */   hasWebhookConfig: () => (/* binding */ hasWebhookConfig)\n/* harmony export */ });\nfunction pickWebhookConfig(config) {\n    const webhook = config.webhook ?? {};\n    const provisionUrl = typeof webhook.provisionUrl === \"string\" ? webhook.provisionUrl : undefined;\n    const deprovisionUrl = typeof webhook.deprovisionUrl === \"string\" ? webhook.deprovisionUrl : undefined;\n    const testUrl = typeof webhook.testUrl === \"string\" ? webhook.testUrl : undefined;\n    const apiKey = typeof webhook.apiKey === \"string\" ? webhook.apiKey : undefined;\n    return {\n        provisionUrl,\n        deprovisionUrl,\n        testUrl,\n        apiKey\n    };\n}\nfunction buildHeaders(apiKey) {\n    const headers = {\n        \"content-type\": \"application/json\"\n    };\n    if (apiKey) headers.authorization = apiKey.startsWith(\"Bearer \") ? apiKey : `Bearer ${apiKey}`;\n    return headers;\n}\nasync function safeJson(res) {\n    try {\n        return await res.json();\n    } catch  {\n        return null;\n    }\n}\nclass WebhookConnector {\n    constructor(config){\n        this.config = pickWebhookConfig(config);\n    }\n    isConfigured() {\n        return Boolean(this.config.provisionUrl || this.config.deprovisionUrl || this.config.testUrl);\n    }\n    async testConnection() {\n        if (!this.config.testUrl && !this.config.provisionUrl && !this.config.deprovisionUrl) {\n            return {\n                success: false,\n                error: \"No webhook URL configured\"\n            };\n        }\n        const url = this.config.testUrl || this.config.provisionUrl || this.config.deprovisionUrl;\n        if (!url) return {\n            success: false,\n            error: \"No webhook URL configured\"\n        };\n        const res = await fetch(url, {\n            method: \"GET\",\n            headers: buildHeaders(this.config.apiKey)\n        }).catch((e)=>e);\n        if (res instanceof Error) {\n            return {\n                success: false,\n                error: res.message\n            };\n        }\n        if (!res.ok) {\n            const body = await safeJson(res);\n            return {\n                success: false,\n                error: body?.error || `HTTP ${res.status}`\n            };\n        }\n        return {\n            success: true\n        };\n    }\n    async provisionEmployee(employee, app, rules, _existingAccount) {\n        if (!this.config.provisionUrl) {\n            return {\n                success: false,\n                error: \"No provision URL configured\"\n            };\n        }\n        const payload = {\n            action: \"provision\",\n            app: {\n                id: app.id,\n                type: app.type,\n                name: app.name\n            },\n            employee,\n            rules\n        };\n        const res = await fetch(this.config.provisionUrl, {\n            method: \"POST\",\n            headers: buildHeaders(this.config.apiKey),\n            body: JSON.stringify(payload)\n        }).catch((e)=>e);\n        if (res instanceof Error) {\n            return {\n                success: false,\n                error: res.message\n            };\n        }\n        const body = await safeJson(res);\n        if (!res.ok) {\n            return {\n                success: false,\n                error: body?.error || `HTTP ${res.status}`\n            };\n        }\n        if (body && typeof body.success === \"boolean\") {\n            if (!body.success) return {\n                success: false,\n                error: body.error || \"Provision failed\"\n            };\n            return {\n                success: true,\n                externalUserId: typeof body.externalUserId === \"string\" ? body.externalUserId : undefined,\n                externalEmail: typeof body.externalEmail === \"string\" ? body.externalEmail : undefined,\n                externalUsername: typeof body.externalUsername === \"string\" ? body.externalUsername : undefined,\n                provisionedResources: body.provisionedResources ?? undefined\n            };\n        }\n        return {\n            success: true\n        };\n    }\n    async deprovisionEmployee(employee, app, account, _options) {\n        if (!this.config.deprovisionUrl) {\n            return {\n                success: false,\n                error: \"No deprovision URL configured\"\n            };\n        }\n        const payload = {\n            action: \"deprovision\",\n            app: {\n                id: app.id,\n                type: app.type,\n                name: app.name\n            },\n            employee,\n            account\n        };\n        const res = await fetch(this.config.deprovisionUrl, {\n            method: \"POST\",\n            headers: buildHeaders(this.config.apiKey),\n            body: JSON.stringify(payload)\n        }).catch((e)=>e);\n        if (res instanceof Error) {\n            return {\n                success: false,\n                error: res.message\n            };\n        }\n        const body = await safeJson(res);\n        if (!res.ok) {\n            return {\n                success: false,\n                error: body?.error || `HTTP ${res.status}`\n            };\n        }\n        if (body && typeof body.success === \"boolean\") {\n            if (!body.success) return {\n                success: false,\n                error: body.error || \"Deprovision failed\"\n            };\n            return {\n                success: true\n            };\n        }\n        return {\n            success: true\n        };\n    }\n}\nfunction hasWebhookConfig(config) {\n    const webhook = config.webhook ?? {};\n    return typeof webhook.provisionUrl === \"string\" || typeof webhook.deprovisionUrl === \"string\" || typeof webhook.testUrl === \"string\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0aW9ucy93ZWJob29rLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBVUEsU0FBU0Esa0JBQWtCQyxNQUErQjtJQUN4RCxNQUFNQyxVQUFXRCxPQUFPQyxPQUFPLElBQUksQ0FBQztJQUNwQyxNQUFNQyxlQUFlLE9BQU9ELFFBQVFDLFlBQVksS0FBSyxXQUFXRCxRQUFRQyxZQUFZLEdBQUdDO0lBQ3ZGLE1BQU1DLGlCQUFpQixPQUFPSCxRQUFRRyxjQUFjLEtBQUssV0FBV0gsUUFBUUcsY0FBYyxHQUFHRDtJQUM3RixNQUFNRSxVQUFVLE9BQU9KLFFBQVFJLE9BQU8sS0FBSyxXQUFXSixRQUFRSSxPQUFPLEdBQUdGO0lBQ3hFLE1BQU1HLFNBQVMsT0FBT0wsUUFBUUssTUFBTSxLQUFLLFdBQVdMLFFBQVFLLE1BQU0sR0FBR0g7SUFFckUsT0FBTztRQUFFRDtRQUFjRTtRQUFnQkM7UUFBU0M7SUFBTztBQUN6RDtBQUVBLFNBQVNDLGFBQWFELE1BQWU7SUFDbkMsTUFBTUUsVUFBa0M7UUFDdEMsZ0JBQWdCO0lBQ2xCO0lBQ0EsSUFBSUYsUUFBUUUsUUFBUUMsYUFBYSxHQUFHSCxPQUFPSSxVQUFVLENBQUMsYUFBYUosU0FBUyxDQUFDLE9BQU8sRUFBRUEsT0FBTyxDQUFDO0lBQzlGLE9BQU9FO0FBQ1Q7QUFFQSxlQUFlRyxTQUFTQyxHQUFhO0lBQ25DLElBQUk7UUFDRixPQUFPLE1BQU1BLElBQUlDLElBQUk7SUFDdkIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0Y7QUFFTyxNQUFNQztJQUdYQyxZQUFZZixNQUErQixDQUFFO1FBQzNDLElBQUksQ0FBQ0EsTUFBTSxHQUFHRCxrQkFBa0JDO0lBQ2xDO0lBRUFnQixlQUF3QjtRQUN0QixPQUFPQyxRQUFRLElBQUksQ0FBQ2pCLE1BQU0sQ0FBQ0UsWUFBWSxJQUFJLElBQUksQ0FBQ0YsTUFBTSxDQUFDSSxjQUFjLElBQUksSUFBSSxDQUFDSixNQUFNLENBQUNLLE9BQU87SUFD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QUVBLFNBQVM7Z0JBQU9DLE9BQU9TLEtBQUtULEtBQUssSUFBSTtZQUFxQjtZQUN0RixPQUFPO2dCQUFFRCxTQUFTO1lBQUs7UUFDekI7UUFFQSxPQUFPO1lBQUVBLFNBQVM7UUFBSztJQUN6QjtBQUNGO0FBRU8sU0FBUytCLGlCQUFpQmxELE1BQStCO0lBQzlELE1BQU1DLFVBQVdELE9BQU9DLE9BQU8sSUFBSSxDQUFDO0lBQ3BDLE9BQ0UsT0FBT0EsUUFBUUMsWUFBWSxLQUFLLFlBQ2hDLE9BQU9ELFFBQVFHLGNBQWMsS0FBSyxZQUNsQyxPQUFPSCxRQUFRSSxPQUFPLEtBQUs7QUFFL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvaW50ZWdyYXRpb25zL3dlYmhvb2sudHM/ZmViOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFwcCwgRW1wbG95ZWUsIEFwcEFjY291bnQsIEFwcFByb3Zpc2lvbmluZ1J1bGUgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCB0eXBlIHsgSW50ZWdyYXRpb25Db25uZWN0b3IsIFByb3Zpc2lvblJlc3VsdCwgRGVwcm92aXNpb25SZXN1bHQsIERlcHJvdmlzaW9uT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnXG5cbnR5cGUgV2ViaG9va0NvbmZpZyA9IHtcbiAgcHJvdmlzaW9uVXJsPzogc3RyaW5nXG4gIGRlcHJvdmlzaW9uVXJsPzogc3RyaW5nXG4gIHRlc3RVcmw/OiBzdHJpbmdcbiAgYXBpS2V5Pzogc3RyaW5nXG59XG5cbmZ1bmN0aW9uIHBpY2tXZWJob29rQ29uZmlnKGNvbmZpZzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgY29uc3Qgd2ViaG9vayA9IChjb25maWcud2ViaG9vayA/PyB7fSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgY29uc3QgcHJvdmlzaW9uVXJsID0gdHlwZW9mIHdlYmhvb2sucHJvdmlzaW9uVXJsID09PSAnc3RyaW5nJyA/IHdlYmhvb2sucHJvdmlzaW9uVXJsIDogdW5kZWZpbmVkXG4gIGNvbnN0IGRlcHJvdmlzaW9uVXJsID0gdHlwZW9mIHdlYmhvb2suZGVwcm92aXNpb25VcmwgPT09ICdzdHJpbmcnID8gd2ViaG9vay5kZXByb3Zpc2lvblVybCA6IHVuZGVmaW5lZFxuICBjb25zdCB0ZXN0VXJsID0gdHlwZW9mIHdlYmhvb2sudGVzdFVybCA9PT0gJ3N0cmluZycgPyB3ZWJob29rLnRlc3RVcmwgOiB1bmRlZmluZWRcbiAgY29uc3QgYXBpS2V5ID0gdHlwZW9mIHdlYmhvb2suYXBpS2V5ID09PSAnc3RyaW5nJyA/IHdlYmhvb2suYXBpS2V5IDogdW5kZWZpbmVkXG5cbiAgcmV0dXJuIHsgcHJvdmlzaW9uVXJsLCBkZXByb3Zpc2lvblVybCwgdGVzdFVybCwgYXBpS2V5IH0gc2F0aXNmaWVzIFdlYmhvb2tDb25maWdcbn1cblxuZnVuY3Rpb24gYnVpbGRIZWFkZXJzKGFwaUtleT86IHN0cmluZykge1xuICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH1cbiAgaWYgKGFwaUtleSkgaGVhZGVycy5hdXRob3JpemF0aW9uID0gYXBpS2V5LnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSA/IGFwaUtleSA6IGBCZWFyZXIgJHthcGlLZXl9YFxuICByZXR1cm4gaGVhZGVyc1xufVxuXG5hc3luYyBmdW5jdGlvbiBzYWZlSnNvbihyZXM6IFJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKClcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV2ViaG9va0Nvbm5lY3RvciBpbXBsZW1lbnRzIEludGVncmF0aW9uQ29ubmVjdG9yIHtcbiAgcHJpdmF0ZSBjb25maWc6IFdlYmhvb2tDb25maWdcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgdGhpcy5jb25maWcgPSBwaWNrV2ViaG9va0NvbmZpZyhjb25maWcpXG4gIH1cblxuICBpc0NvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5jb25maWcucHJvdmlzaW9uVXJsIHx8IHRoaXMuY29uZmlnLmRlcHJvdmlzaW9uVXJsIHx8IHRoaXMuY29uZmlnLnRlc3RVcmwpXG4gIH1cblxuICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnRlc3RVcmwgJiYgIXRoaXMuY29uZmlnLnByb3Zpc2lvblVybCAmJiAhdGhpcy5jb25maWcuZGVwcm92aXNpb25VcmwpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ05vIHdlYmhvb2sgVVJMIGNvbmZpZ3VyZWQnIH1cbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSB0aGlzLmNvbmZpZy50ZXN0VXJsIHx8IHRoaXMuY29uZmlnLnByb3Zpc2lvblVybCB8fCB0aGlzLmNvbmZpZy5kZXByb3Zpc2lvblVybFxuICAgIGlmICghdXJsKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyB3ZWJob29rIFVSTCBjb25maWd1cmVkJyB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiBidWlsZEhlYWRlcnModGhpcy5jb25maWcuYXBpS2V5KSxcbiAgICB9KS5jYXRjaCgoZSkgPT4gZSBhcyBFcnJvcilcblxuICAgIGlmIChyZXMgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXMubWVzc2FnZSB9XG4gICAgfVxuXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBzYWZlSnNvbihyZXMpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGJvZHk/LmVycm9yIHx8IGBIVFRQICR7cmVzLnN0YXR1c31gIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIGFzeW5jIHByb3Zpc2lvbkVtcGxveWVlKFxuICAgIGVtcGxveWVlOiBFbXBsb3llZSxcbiAgICBhcHA6IEFwcCxcbiAgICBydWxlczogQXBwUHJvdmlzaW9uaW5nUnVsZVtdLFxuICAgIF9leGlzdGluZ0FjY291bnQ/OiBBcHBBY2NvdW50IHwgbnVsbFxuICApOiBQcm9taXNlPFByb3Zpc2lvblJlc3VsdD4ge1xuICAgIGlmICghdGhpcy5jb25maWcucHJvdmlzaW9uVXJsKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBwcm92aXNpb24gVVJMIGNvbmZpZ3VyZWQnIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgYWN0aW9uOiAncHJvdmlzaW9uJyxcbiAgICAgIGFwcDogeyBpZDogYXBwLmlkLCB0eXBlOiBhcHAudHlwZSwgbmFtZTogYXBwLm5hbWUgfSxcbiAgICAgIGVtcGxveWVlLFxuICAgICAgcnVsZXMsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy5jb25maWcucHJvdmlzaW9uVXJsLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IGJ1aWxkSGVhZGVycyh0aGlzLmNvbmZpZy5hcGlLZXkpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgfSkuY2F0Y2goKGUpID0+IGUgYXMgRXJyb3IpXG5cbiAgICBpZiAocmVzIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzLm1lc3NhZ2UgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCBzYWZlSnNvbihyZXMpXG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYm9keT8uZXJyb3IgfHwgYEhUVFAgJHtyZXMuc3RhdHVzfWAgfVxuICAgIH1cblxuICAgIGlmIChib2R5ICYmIHR5cGVvZiBib2R5LnN1Y2Nlc3MgPT09ICdib29sZWFuJykge1xuICAgICAgaWYgKCFib2R5LnN1Y2Nlc3MpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYm9keS5lcnJvciB8fCAnUHJvdmlzaW9uIGZhaWxlZCcgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZXh0ZXJuYWxVc2VySWQ6IHR5cGVvZiBib2R5LmV4dGVybmFsVXNlcklkID09PSAnc3RyaW5nJyA/IGJvZHkuZXh0ZXJuYWxVc2VySWQgOiB1bmRlZmluZWQsXG4gICAgICAgIGV4dGVybmFsRW1haWw6IHR5cGVvZiBib2R5LmV4dGVybmFsRW1haWwgPT09ICdzdHJpbmcnID8gYm9keS5leHRlcm5hbEVtYWlsIDogdW5kZWZpbmVkLFxuICAgICAgICBleHRlcm5hbFVzZXJuYW1lOiB0eXBlb2YgYm9keS5leHRlcm5hbFVzZXJuYW1lID09PSAnc3RyaW5nJyA/IGJvZHkuZXh0ZXJuYWxVc2VybmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvdmlzaW9uZWRSZXNvdXJjZXM6IGJvZHkucHJvdmlzaW9uZWRSZXNvdXJjZXMgPz8gdW5kZWZpbmVkLFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9XG5cbiAgYXN5bmMgZGVwcm92aXNpb25FbXBsb3llZShcbiAgICBlbXBsb3llZTogRW1wbG95ZWUsXG4gICAgYXBwOiBBcHAsXG4gICAgYWNjb3VudD86IEFwcEFjY291bnQgfCBudWxsLFxuICAgIF9vcHRpb25zPzogRGVwcm92aXNpb25PcHRpb25zXG4gICk6IFByb21pc2U8RGVwcm92aXNpb25SZXN1bHQ+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmRlcHJvdmlzaW9uVXJsKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBkZXByb3Zpc2lvbiBVUkwgY29uZmlndXJlZCcgfVxuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICBhY3Rpb246ICdkZXByb3Zpc2lvbicsXG4gICAgICBhcHA6IHsgaWQ6IGFwcC5pZCwgdHlwZTogYXBwLnR5cGUsIG5hbWU6IGFwcC5uYW1lIH0sXG4gICAgICBlbXBsb3llZSxcbiAgICAgIGFjY291bnQsXG4gICAgfVxuXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godGhpcy5jb25maWcuZGVwcm92aXNpb25VcmwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogYnVpbGRIZWFkZXJzKHRoaXMuY29uZmlnLmFwaUtleSksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKSxcbiAgICB9KS5jYXRjaCgoZSkgPT4gZSBhcyBFcnJvcilcblxuICAgIGlmIChyZXMgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiByZXMubWVzc2FnZSB9XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHNhZmVKc29uKHJlcylcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBib2R5Py5lcnJvciB8fCBgSFRUUCAke3Jlcy5zdGF0dXN9YCB9XG4gICAgfVxuXG4gICAgaWYgKGJvZHkgJiYgdHlwZW9mIGJvZHkuc3VjY2VzcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAoIWJvZHkuc3VjY2VzcykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBib2R5LmVycm9yIHx8ICdEZXByb3Zpc2lvbiBmYWlsZWQnIH1cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNXZWJob29rQ29uZmlnKGNvbmZpZzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgY29uc3Qgd2ViaG9vayA9IChjb25maWcud2ViaG9vayA/PyB7fSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2ViaG9vay5wcm92aXNpb25VcmwgPT09ICdzdHJpbmcnIHx8XG4gICAgdHlwZW9mIHdlYmhvb2suZGVwcm92aXNpb25VcmwgPT09ICdzdHJpbmcnIHx8XG4gICAgdHlwZW9mIHdlYmhvb2sudGVzdFVybCA9PT0gJ3N0cmluZydcbiAgKVxufVxuIl0sIm5hbWVzIjpbInBpY2tXZWJob29rQ29uZmlnIiwiY29uZmlnIiwid2ViaG9vayIsInByb3Zpc2lvblVybCIsInVuZGVmaW5lZCIsImRlcHJvdmlzaW9uVXJsIiwidGVzdFVybCIsImFwaUtleSIsImJ1aWxkSGVhZGVycyIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsInNhZmVKc29uIiwicmVzIiwianNvbiIsIldlYmhvb2tDb25uZWN0b3IiLCJjb25zdHJ1Y3RvciIsImlzQ29uZmlndXJlZCIsIkJvb2xlYW4iLCJ0ZXN0Q29ubmVjdGlvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInVybCIsImZldGNoIiwibWV0aG9kIiwiY2F0Y2giLCJlIiwiRXJyb3IiLCJtZXNzYWdlIiwib2siLCJib2R5Iiwic3RhdHVzIiwicHJvdmlzaW9uRW1wbG95ZWUiLCJlbXBsb3llZSIsImFwcCIsInJ1bGVzIiwiX2V4aXN0aW5nQWNjb3VudCIsInBheWxvYWQiLCJhY3Rpb24iLCJpZCIsInR5cGUiLCJuYW1lIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4dGVybmFsVXNlcklkIiwiZXh0ZXJuYWxFbWFpbCIsImV4dGVybmFsVXNlcm5hbWUiLCJwcm92aXNpb25lZFJlc291cmNlcyIsImRlcHJvdmlzaW9uRW1wbG95ZWUiLCJhY2NvdW50IiwiX29wdGlvbnMiLCJoYXNXZWJob29rQ29uZmlnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrations/webhook.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/legal-entities.ts":
/*!***********************************!*\
  !*** ./src/lib/legal-entities.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LEGAL_ENTITIES: () => (/* binding */ LEGAL_ENTITIES)\n/* harmony export */ });\nconst LEGAL_ENTITIES = [\n    \"Curacel Technologies Ltd\",\n    \"Curacel Inc\",\n    \"Curacel Holdings\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2xlZ2FsLWVudGl0aWVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxpQkFBaUI7SUFDNUI7SUFDQTtJQUNBO0NBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvbGVnYWwtZW50aXRpZXMudHM/MTFmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgTEVHQUxfRU5USVRJRVMgPSBbXG4gICdDdXJhY2VsIFRlY2hub2xvZ2llcyBMdGQnLFxuICAnQ3VyYWNlbCBJbmMnLFxuICAnQ3VyYWNlbCBIb2xkaW5ncycsXG5dXG4iXSwibmFtZXMiOlsiTEVHQUxfRU5USVRJRVMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/legal-entities.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/letterhead.ts":
/*!*******************************!*\
  !*** ./src/lib/letterhead.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizeAddressForStorage: () => (/* binding */ normalizeAddressForStorage),\n/* harmony export */   normalizeEmailForStorage: () => (/* binding */ normalizeEmailForStorage),\n/* harmony export */   normalizePhoneForStorage: () => (/* binding */ normalizePhoneForStorage),\n/* harmony export */   normalizeWebsiteForStorage: () => (/* binding */ normalizeWebsiteForStorage),\n/* harmony export */   wrapAgreementHtmlWithLetterhead: () => (/* binding */ wrapAgreementHtmlWithLetterhead)\n/* harmony export */ });\nfunction escapeHtml(value) {\n    return value.replaceAll(\"&\", \"&amp;\").replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\").replaceAll('\"', \"&quot;\").replaceAll(\"'\", \"&#39;\");\n}\nfunction normalizeWebsiteHref(url) {\n    const trimmed = url.trim();\n    if (!trimmed) return \"\";\n    if (/^https?:\\/\\//i.test(trimmed)) return trimmed;\n    return `https://${trimmed}`;\n}\nfunction normalizeWebsiteForStorage(value) {\n    const trimmed = (value ?? \"\").trim();\n    if (!trimmed) return null;\n    return normalizeWebsiteHref(trimmed);\n}\nfunction normalizeEmailForStorage(value) {\n    const trimmed = (value ?? \"\").trim();\n    return trimmed ? trimmed : null;\n}\nfunction normalizePhoneForStorage(value) {\n    const trimmed = (value ?? \"\").trim();\n    return trimmed ? trimmed : null;\n}\nfunction normalizeAddressForStorage(value) {\n    const trimmed = (value ?? \"\").trim();\n    return trimmed ? trimmed : null;\n}\nfunction normalizePhoneHref(phone) {\n    const cleaned = phone.replace(/[^\\d+]/g, \"\");\n    return cleaned || phone.trim();\n}\nfunction toAbsoluteUrl(url, baseUrl) {\n    const trimmed = url.trim();\n    if (!trimmed) return \"\";\n    if (/^https?:\\/\\//i.test(trimmed) || /^data:/i.test(trimmed)) return trimmed;\n    if (!baseUrl) return trimmed;\n    return new URL(trimmed, baseUrl).toString();\n}\nfunction buildContactParts(org) {\n    const parts = [];\n    if (org.letterheadEmail) {\n        const email = org.letterheadEmail.trim();\n        parts.push(`<a href=\"mailto:${encodeURIComponent(email)}\" style=\"color:#0b57d0; text-decoration:underline;\">${escapeHtml(email)}</a>`);\n    }\n    if (org.letterheadWebsite) {\n        const website = org.letterheadWebsite.trim();\n        const href = normalizeWebsiteHref(website);\n        const label = website.replace(/^https?:\\/\\//i, \"\");\n        parts.push(`<a href=\"${escapeHtml(href)}\" style=\"color:#0b57d0; text-decoration:underline;\">${escapeHtml(label)}</a>`);\n    }\n    if (org.letterheadAddress) {\n        parts.push(`<span style=\"color:#111827;\">${escapeHtml(org.letterheadAddress.trim())}</span>`);\n    }\n    if (org.letterheadPhone) {\n        const phone = org.letterheadPhone.trim();\n        const href = normalizePhoneHref(phone);\n        parts.push(`<a href=\"tel:${escapeHtml(href)}\" style=\"color:#111827; text-decoration:none;\">${escapeHtml(phone)}</a>`);\n    }\n    return parts;\n}\nfunction wrapAgreementHtmlWithLetterhead(bodyHtml, org, opts) {\n    const alreadyWrapped = bodyHtml.includes('data-curacel-letterhead=\"1\"');\n    if (alreadyWrapped) return bodyHtml;\n    const baseUrl = opts?.baseUrl;\n    const fallbackLogoPath = opts?.fallbackLogoPath ?? \"/logo.png\";\n    const logoSrc = org.logoUrl ? toAbsoluteUrl(org.logoUrl, baseUrl) : baseUrl ? toAbsoluteUrl(fallbackLogoPath, baseUrl) : fallbackLogoPath;\n    const contactParts = buildContactParts(org);\n    const contactLine = contactParts.length ? contactParts.join(' <span style=\"color:#9ca3af;\">|</span> ') : \"\";\n    const safeName = escapeHtml(org.name);\n    const logoHtml = logoSrc ? `<img src=\"${escapeHtml(logoSrc)}\" alt=\"${safeName}\" style=\"height:52px; max-width:260px; width:auto; object-fit:contain; display:inline-block;\" />` : `<div style=\"font-size:20px; font-weight:700; color:#111827;\">${safeName}</div>`;\n    return `\n    <div data-curacel-letterhead=\"1\" style=\"color:#111827;\">\n      <div style=\"text-align:center; padding:12px 0 8px;\">\n        ${logoHtml}\n        ${contactLine ? `<div style=\"margin-top:10px; font-size:12px; line-height:1.4; overflow-wrap:anywhere; word-break:break-word;\">${contactLine}</div>` : \"\"}\n      </div>\n      <hr style=\"border:0; border-top:1px solid #e5e7eb; margin:12px 0 20px;\" />\n      <div data-curacel-document-body=\"1\">\n        ${bodyHtml}\n      </div>\n    </div>\n  `;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aENTLE1BQU1HLElBQUksQ0FDUixDQUFDLGFBQWEsRUFBRXpCLFdBQVc2QixNQUFNLCtDQUErQyxFQUFFN0IsV0FBV2EsT0FBTyxJQUFJLENBQUM7SUFFN0c7SUFFQSxPQUFPUztBQUNUO0FBRU8sU0FBU1csZ0NBQ2RDLFFBQWdCLEVBQ2hCYixHQUEyQixFQUMzQmMsSUFBc0Q7SUFFdEQsTUFBTUMsaUJBQWlCRixTQUFTRyxRQUFRLENBQUM7SUFDekMsSUFBSUQsZ0JBQWdCLE9BQU9GO0lBRTNCLE1BQU1qQixVQUFVa0IsTUFBTWxCO0lBQ3RCLE1BQU1xQixtQkFBbUJILE1BQU1HLG9CQUFvQjtJQUVuRCxNQUFNQyxVQUFVbEIsSUFBSW1CLE9BQU8sR0FDdkJ4QixjQUFjSyxJQUFJbUIsT0FBTyxFQUFFdkIsV0FDM0JBLFVBQ0VELGNBQWNzQixrQkFBa0JyQixXQUNoQ3FCO0lBRU4sTUFBTUcsZUFBZXJCLGtCQUFrQkM7SUFDdkMsTUFBTXFCLGNBQWNELGFBQWFFLE1BQU0sR0FDbkNGLGFBQWFHLElBQUksQ0FBQyw2Q0FDbEI7SUFFSixNQUFNQyxXQUFXN0MsV0FBV3FCLElBQUl5QixJQUFJO0lBRXBDLE1BQU1DLFdBQVdSLFVBQ2IsQ0FBQyxVQUFVLEVBQUV2QyxXQUFXdUMsU0FBUyxPQUFPLEVBQUVNLFNBQVMsZ0dBQWdHLENBQUMsR0FDcEosQ0FBQyw2REFBNkQsRUFBRUEsU0FBUyxNQUFNLENBQUM7SUFFcEYsT0FBTyxDQUFDOzs7UUFHRixFQUFFRSxTQUFTO1FBQ1gsRUFDRUwsY0FDSSxDQUFDLDhHQUE4RyxFQUFFQSxZQUFZLE1BQU0sQ0FBQyxHQUNwSSxHQUNMOzs7O1FBSUQsRUFBRVIsU0FBUzs7O0VBR2pCLENBQUM7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL2xpYi9sZXR0ZXJoZWFkLnRzP2ZiNWQiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBPcmdhbml6YXRpb25MZXR0ZXJoZWFkID0ge1xuICBuYW1lOiBzdHJpbmdcbiAgbG9nb1VybD86IHN0cmluZyB8IG51bGxcbiAgbGV0dGVyaGVhZEVtYWlsPzogc3RyaW5nIHwgbnVsbFxuICBsZXR0ZXJoZWFkV2Vic2l0ZT86IHN0cmluZyB8IG51bGxcbiAgbGV0dGVyaGVhZEFkZHJlc3M/OiBzdHJpbmcgfCBudWxsXG4gIGxldHRlcmhlYWRQaG9uZT86IHN0cmluZyB8IG51bGxcbn1cblxuZnVuY3Rpb24gZXNjYXBlSHRtbCh2YWx1ZTogc3RyaW5nKSB7XG4gIHJldHVybiB2YWx1ZVxuICAgIC5yZXBsYWNlQWxsKCcmJywgJyZhbXA7JylcbiAgICAucmVwbGFjZUFsbCgnPCcsICcmbHQ7JylcbiAgICAucmVwbGFjZUFsbCgnPicsICcmZ3Q7JylcbiAgICAucmVwbGFjZUFsbCgnXCInLCAnJnF1b3Q7JylcbiAgICAucmVwbGFjZUFsbChcIidcIiwgJyYjMzk7Jylcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplV2Vic2l0ZUhyZWYodXJsOiBzdHJpbmcpIHtcbiAgY29uc3QgdHJpbW1lZCA9IHVybC50cmltKClcbiAgaWYgKCF0cmltbWVkKSByZXR1cm4gJydcbiAgaWYgKC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QodHJpbW1lZCkpIHJldHVybiB0cmltbWVkXG4gIHJldHVybiBgaHR0cHM6Ly8ke3RyaW1tZWR9YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplV2Vic2l0ZUZvclN0b3JhZ2UodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSA/PyAnJykudHJpbSgpXG4gIGlmICghdHJpbW1lZCkgcmV0dXJuIG51bGxcbiAgcmV0dXJuIG5vcm1hbGl6ZVdlYnNpdGVIcmVmKHRyaW1tZWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVFbWFpbEZvclN0b3JhZ2UodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSA/PyAnJykudHJpbSgpXG4gIHJldHVybiB0cmltbWVkID8gdHJpbW1lZCA6IG51bGxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBob25lRm9yU3RvcmFnZSh2YWx1ZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICBjb25zdCB0cmltbWVkID0gKHZhbHVlID8/ICcnKS50cmltKClcbiAgcmV0dXJuIHRyaW1tZWQgPyB0cmltbWVkIDogbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQWRkcmVzc0ZvclN0b3JhZ2UodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSA/PyAnJykudHJpbSgpXG4gIHJldHVybiB0cmltbWVkID8gdHJpbW1lZCA6IG51bGxcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUGhvbmVIcmVmKHBob25lOiBzdHJpbmcpIHtcbiAgY29uc3QgY2xlYW5lZCA9IHBob25lLnJlcGxhY2UoL1teXFxkK10vZywgJycpXG4gIHJldHVybiBjbGVhbmVkIHx8IHBob25lLnRyaW0oKVxufVxuXG5mdW5jdGlvbiB0b0Fic29sdXRlVXJsKHVybDogc3RyaW5nLCBiYXNlVXJsPzogc3RyaW5nKSB7XG4gIGNvbnN0IHRyaW1tZWQgPSB1cmwudHJpbSgpXG4gIGlmICghdHJpbW1lZCkgcmV0dXJuICcnXG4gIGlmICgvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KHRyaW1tZWQpIHx8IC9eZGF0YTovaS50ZXN0KHRyaW1tZWQpKSByZXR1cm4gdHJpbW1lZFxuICBpZiAoIWJhc2VVcmwpIHJldHVybiB0cmltbWVkXG4gIHJldHVybiBuZXcgVVJMKHRyaW1tZWQsIGJhc2VVcmwpLnRvU3RyaW5nKClcbn1cblxuZnVuY3Rpb24gYnVpbGRDb250YWN0UGFydHMob3JnOiBPcmdhbml6YXRpb25MZXR0ZXJoZWFkKSB7XG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdXG5cbiAgaWYgKG9yZy5sZXR0ZXJoZWFkRW1haWwpIHtcbiAgICBjb25zdCBlbWFpbCA9IG9yZy5sZXR0ZXJoZWFkRW1haWwudHJpbSgpXG4gICAgcGFydHMucHVzaChcbiAgICAgIGA8YSBocmVmPVwibWFpbHRvOiR7ZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKX1cIiBzdHlsZT1cImNvbG9yOiMwYjU3ZDA7IHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCI+JHtlc2NhcGVIdG1sKGVtYWlsKX08L2E+YFxuICAgIClcbiAgfVxuXG4gIGlmIChvcmcubGV0dGVyaGVhZFdlYnNpdGUpIHtcbiAgICBjb25zdCB3ZWJzaXRlID0gb3JnLmxldHRlcmhlYWRXZWJzaXRlLnRyaW0oKVxuICAgIGNvbnN0IGhyZWYgPSBub3JtYWxpemVXZWJzaXRlSHJlZih3ZWJzaXRlKVxuICAgIGNvbnN0IGxhYmVsID0gd2Vic2l0ZS5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcLy9pLCAnJylcbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgYDxhIGhyZWY9XCIke2VzY2FwZUh0bWwoaHJlZil9XCIgc3R5bGU9XCJjb2xvcjojMGI1N2QwOyB0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO1wiPiR7ZXNjYXBlSHRtbChsYWJlbCl9PC9hPmBcbiAgICApXG4gIH1cblxuICBpZiAob3JnLmxldHRlcmhlYWRBZGRyZXNzKSB7XG4gICAgcGFydHMucHVzaChgPHNwYW4gc3R5bGU9XCJjb2xvcjojMTExODI3O1wiPiR7ZXNjYXBlSHRtbChvcmcubGV0dGVyaGVhZEFkZHJlc3MudHJpbSgpKX08L3NwYW4+YClcbiAgfVxuXG4gIGlmIChvcmcubGV0dGVyaGVhZFBob25lKSB7XG4gICAgY29uc3QgcGhvbmUgPSBvcmcubGV0dGVyaGVhZFBob25lLnRyaW0oKVxuICAgIGNvbnN0IGhyZWYgPSBub3JtYWxpemVQaG9uZUhyZWYocGhvbmUpXG4gICAgcGFydHMucHVzaChcbiAgICAgIGA8YSBocmVmPVwidGVsOiR7ZXNjYXBlSHRtbChocmVmKX1cIiBzdHlsZT1cImNvbG9yOiMxMTE4Mjc7IHRleHQtZGVjb3JhdGlvbjpub25lO1wiPiR7ZXNjYXBlSHRtbChwaG9uZSl9PC9hPmBcbiAgICApXG4gIH1cblxuICByZXR1cm4gcGFydHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQoXG4gIGJvZHlIdG1sOiBzdHJpbmcsXG4gIG9yZzogT3JnYW5pemF0aW9uTGV0dGVyaGVhZCxcbiAgb3B0cz86IHsgYmFzZVVybD86IHN0cmluZzsgZmFsbGJhY2tMb2dvUGF0aD86IHN0cmluZyB9XG4pIHtcbiAgY29uc3QgYWxyZWFkeVdyYXBwZWQgPSBib2R5SHRtbC5pbmNsdWRlcygnZGF0YS1jdXJhY2VsLWxldHRlcmhlYWQ9XCIxXCInKVxuICBpZiAoYWxyZWFkeVdyYXBwZWQpIHJldHVybiBib2R5SHRtbFxuXG4gIGNvbnN0IGJhc2VVcmwgPSBvcHRzPy5iYXNlVXJsXG4gIGNvbnN0IGZhbGxiYWNrTG9nb1BhdGggPSBvcHRzPy5mYWxsYmFja0xvZ29QYXRoID8/ICcvbG9nby5wbmcnXG5cbiAgY29uc3QgbG9nb1NyYyA9IG9yZy5sb2dvVXJsXG4gICAgPyB0b0Fic29sdXRlVXJsKG9yZy5sb2dvVXJsLCBiYXNlVXJsKVxuICAgIDogYmFzZVVybFxuICAgICAgPyB0b0Fic29sdXRlVXJsKGZhbGxiYWNrTG9nb1BhdGgsIGJhc2VVcmwpXG4gICAgICA6IGZhbGxiYWNrTG9nb1BhdGhcblxuICBjb25zdCBjb250YWN0UGFydHMgPSBidWlsZENvbnRhY3RQYXJ0cyhvcmcpXG4gIGNvbnN0IGNvbnRhY3RMaW5lID0gY29udGFjdFBhcnRzLmxlbmd0aFxuICAgID8gY29udGFjdFBhcnRzLmpvaW4oJyA8c3BhbiBzdHlsZT1cImNvbG9yOiM5Y2EzYWY7XCI+fDwvc3Bhbj4gJylcbiAgICA6ICcnXG5cbiAgY29uc3Qgc2FmZU5hbWUgPSBlc2NhcGVIdG1sKG9yZy5uYW1lKVxuXG4gIGNvbnN0IGxvZ29IdG1sID0gbG9nb1NyY1xuICAgID8gYDxpbWcgc3JjPVwiJHtlc2NhcGVIdG1sKGxvZ29TcmMpfVwiIGFsdD1cIiR7c2FmZU5hbWV9XCIgc3R5bGU9XCJoZWlnaHQ6NTJweDsgbWF4LXdpZHRoOjI2MHB4OyB3aWR0aDphdXRvOyBvYmplY3QtZml0OmNvbnRhaW47IGRpc3BsYXk6aW5saW5lLWJsb2NrO1wiIC8+YFxuICAgIDogYDxkaXYgc3R5bGU9XCJmb250LXNpemU6MjBweDsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjojMTExODI3O1wiPiR7c2FmZU5hbWV9PC9kaXY+YFxuXG4gIHJldHVybiBgXG4gICAgPGRpdiBkYXRhLWN1cmFjZWwtbGV0dGVyaGVhZD1cIjFcIiBzdHlsZT1cImNvbG9yOiMxMTE4Mjc7XCI+XG4gICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTJweCAwIDhweDtcIj5cbiAgICAgICAgJHtsb2dvSHRtbH1cbiAgICAgICAgJHtcbiAgICAgICAgICBjb250YWN0TGluZVxuICAgICAgICAgICAgPyBgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MTBweDsgZm9udC1zaXplOjEycHg7IGxpbmUtaGVpZ2h0OjEuNDsgb3ZlcmZsb3ctd3JhcDphbnl3aGVyZTsgd29yZC1icmVhazpicmVhay13b3JkO1wiPiR7Y29udGFjdExpbmV9PC9kaXY+YFxuICAgICAgICAgICAgOiAnJ1xuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxociBzdHlsZT1cImJvcmRlcjowOyBib3JkZXItdG9wOjFweCBzb2xpZCAjZTVlN2ViOyBtYXJnaW46MTJweCAwIDIwcHg7XCIgLz5cbiAgICAgIDxkaXYgZGF0YS1jdXJhY2VsLWRvY3VtZW50LWJvZHk9XCIxXCI+XG4gICAgICAgICR7Ym9keUh0bWx9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYFxufVxuIl0sIm5hbWVzIjpbImVzY2FwZUh0bWwiLCJ2YWx1ZSIsInJlcGxhY2VBbGwiLCJub3JtYWxpemVXZWJzaXRlSHJlZiIsInVybCIsInRyaW1tZWQiLCJ0cmltIiwidGVzdCIsIm5vcm1hbGl6ZVdlYnNpdGVGb3JTdG9yYWdlIiwibm9ybWFsaXplRW1haWxGb3JTdG9yYWdlIiwibm9ybWFsaXplUGhvbmVGb3JTdG9yYWdlIiwibm9ybWFsaXplQWRkcmVzc0ZvclN0b3JhZ2UiLCJub3JtYWxpemVQaG9uZUhyZWYiLCJwaG9uZSIsImNsZWFuZWQiLCJyZXBsYWNlIiwidG9BYnNvbHV0ZVVybCIsImJhc2VVcmwiLCJVUkwiLCJ0b1N0cmluZyIsImJ1aWxkQ29udGFjdFBhcnRzIiwib3JnIiwicGFydHMiLCJsZXR0ZXJoZWFkRW1haWwiLCJlbWFpbCIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJsZXR0ZXJoZWFkV2Vic2l0ZSIsIndlYnNpdGUiLCJocmVmIiwibGFiZWwiLCJsZXR0ZXJoZWFkQWRkcmVzcyIsImxldHRlcmhlYWRQaG9uZSIsIndyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQiLCJib2R5SHRtbCIsIm9wdHMiLCJhbHJlYWR5V3JhcHBlZCIsImluY2x1ZGVzIiwiZmFsbGJhY2tMb2dvUGF0aCIsImxvZ29TcmMiLCJsb2dvVXJsIiwiY29udGFjdFBhcnRzIiwiY29udGFjdExpbmUiLCJsZW5ndGgiLCJqb2luIiwic2FmZU5hbWUiLCJuYW1lIiwibG9nb0h0bWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/letterhead.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/notification-actions.ts":
/*!*****************************************!*\
  !*** ./src/lib/notification-actions.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALL_NOTIFICATION_ACTIONS: () => (/* binding */ ALL_NOTIFICATION_ACTIONS),\n/* harmony export */   DEFAULT_EMAIL_NOTIFICATION_ACTIONS: () => (/* binding */ DEFAULT_EMAIL_NOTIFICATION_ACTIONS),\n/* harmony export */   NOTIFICATION_ACTION_GROUPS: () => (/* binding */ NOTIFICATION_ACTION_GROUPS)\n/* harmony export */ });\nconst NOTIFICATION_ACTION_GROUPS = [\n    {\n        title: \"Offers & Contracts\",\n        actions: [\n            \"OFFER_CREATED\",\n            \"OFFER_UPDATED\",\n            \"OFFER_SENT\",\n            \"OFFER_VIEWED\",\n            \"OFFER_SIGNED\",\n            \"OFFER_DECLINED\",\n            \"OFFER_CANCELLED\",\n            \"OFFER_WEBHOOK_RECEIVED\"\n        ]\n    },\n    {\n        title: \"Employees\",\n        actions: [\n            \"EMPLOYEE_CREATED\",\n            \"EMPLOYEE_UPDATED\",\n            \"EMPLOYEE_STATUS_CHANGED\"\n        ]\n    },\n    {\n        title: \"Onboarding\",\n        actions: [\n            \"ONBOARDING_STARTED\",\n            \"ONBOARDING_TASK_COMPLETED\",\n            \"ONBOARDING_COMPLETED\"\n        ]\n    },\n    {\n        title: \"Offboarding\",\n        actions: [\n            \"OFFBOARDING_STARTED\",\n            \"OFFBOARDING_TASK_COMPLETED\",\n            \"OFFBOARDING_COMPLETED\"\n        ]\n    },\n    {\n        title: \"Applications & Integrations\",\n        actions: [\n            \"APP_CREATED\",\n            \"APP_ARCHIVED\",\n            \"APP_RESTORED\",\n            \"APP_CONNECTED\",\n            \"APP_DISCONNECTED\",\n            \"APP_ACCOUNT_PROVISIONED\",\n            \"APP_ACCOUNT_DEPROVISIONED\",\n            \"GOOGLE_USER_CREATED\",\n            \"GOOGLE_USER_DISABLED\",\n            \"GOOGLE_USER_DELETED\",\n            \"GOOGLE_GROUPS_UPDATED\",\n            \"SLACK_USER_CREATED\",\n            \"SLACK_USER_DISABLED\",\n            \"SLACK_CHANNELS_UPDATED\"\n        ]\n    },\n    {\n        title: \"Provisioning Rules\",\n        actions: [\n            \"PROVISIONING_RULE_CREATED\",\n            \"PROVISIONING_RULE_UPDATED\",\n            \"PROVISIONING_RULE_DELETED\"\n        ]\n    },\n    {\n        title: \"Auth Activity\",\n        actions: [\n            \"USER_LOGIN\",\n            \"USER_LOGOUT\"\n        ]\n    }\n];\nconst ALL_NOTIFICATION_ACTIONS = NOTIFICATION_ACTION_GROUPS.flatMap((group)=>group.actions);\nconst DEFAULT_EXCLUDED_ACTIONS = new Set([\n    \"USER_LOGIN\",\n    \"USER_LOGOUT\"\n]);\nconst DEFAULT_EMAIL_NOTIFICATION_ACTIONS = ALL_NOTIFICATION_ACTIONS.filter((action)=>!DEFAULT_EXCLUDED_ACTIONS.has(action));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL25vdGlmaWNhdGlvbi1hY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLDZCQUEwRTtJQUNyRjtRQUNFQyxPQUFPO1FBQ1BDLFNBQVM7WUFDUDtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7SUFDSDtJQUNBO1FBQ0VELE9BQU87UUFDUEMsU0FBUztZQUFDO1lBQW9CO1lBQW9CO1NBQTBCO0lBQzlFO0lBQ0E7UUFDRUQsT0FBTztRQUNQQyxTQUFTO1lBQUM7WUFBc0I7WUFBNkI7U0FBdUI7SUFDdEY7SUFDQTtRQUNFRCxPQUFPO1FBQ1BDLFNBQVM7WUFBQztZQUF1QjtZQUE4QjtTQUF3QjtJQUN6RjtJQUNBO1FBQ0VELE9BQU87UUFDUEMsU0FBUztZQUNQO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtJQUNIO0lBQ0E7UUFDRUQsT0FBTztRQUNQQyxTQUFTO1lBQUM7WUFBNkI7WUFBNkI7U0FBNEI7SUFDbEc7SUFDQTtRQUNFRCxPQUFPO1FBQ1BDLFNBQVM7WUFBQztZQUFjO1NBQWM7SUFDeEM7Q0FDRDtBQUVNLE1BQU1DLDJCQUEyQkgsMkJBQTJCSSxPQUFPLENBQUMsQ0FBQ0MsUUFBVUEsTUFBTUgsT0FBTyxFQUFDO0FBRXBHLE1BQU1JLDJCQUEyQixJQUFJQyxJQUFJO0lBQUM7SUFBYztDQUFjO0FBRS9ELE1BQU1DLHFDQUFxQ0wseUJBQXlCTSxNQUFNLENBQy9FLENBQUNDLFNBQVcsQ0FBQ0oseUJBQXlCSyxHQUFHLENBQUNELFNBQzNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL25vdGlmaWNhdGlvbi1hY3Rpb25zLnRzPzdlZTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IE5PVElGSUNBVElPTl9BQ1RJT05fR1JPVVBTOiBBcnJheTx7IHRpdGxlOiBzdHJpbmc7IGFjdGlvbnM6IHN0cmluZ1tdIH0+ID0gW1xuICB7XG4gICAgdGl0bGU6ICdPZmZlcnMgJiBDb250cmFjdHMnLFxuICAgIGFjdGlvbnM6IFtcbiAgICAgICdPRkZFUl9DUkVBVEVEJyxcbiAgICAgICdPRkZFUl9VUERBVEVEJyxcbiAgICAgICdPRkZFUl9TRU5UJyxcbiAgICAgICdPRkZFUl9WSUVXRUQnLFxuICAgICAgJ09GRkVSX1NJR05FRCcsXG4gICAgICAnT0ZGRVJfREVDTElORUQnLFxuICAgICAgJ09GRkVSX0NBTkNFTExFRCcsXG4gICAgICAnT0ZGRVJfV0VCSE9PS19SRUNFSVZFRCcsXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnRW1wbG95ZWVzJyxcbiAgICBhY3Rpb25zOiBbJ0VNUExPWUVFX0NSRUFURUQnLCAnRU1QTE9ZRUVfVVBEQVRFRCcsICdFTVBMT1lFRV9TVEFUVVNfQ0hBTkdFRCddLFxuICB9LFxuICB7XG4gICAgdGl0bGU6ICdPbmJvYXJkaW5nJyxcbiAgICBhY3Rpb25zOiBbJ09OQk9BUkRJTkdfU1RBUlRFRCcsICdPTkJPQVJESU5HX1RBU0tfQ09NUExFVEVEJywgJ09OQk9BUkRJTkdfQ09NUExFVEVEJ10sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ09mZmJvYXJkaW5nJyxcbiAgICBhY3Rpb25zOiBbJ09GRkJPQVJESU5HX1NUQVJURUQnLCAnT0ZGQk9BUkRJTkdfVEFTS19DT01QTEVURUQnLCAnT0ZGQk9BUkRJTkdfQ09NUExFVEVEJ10sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0FwcGxpY2F0aW9ucyAmIEludGVncmF0aW9ucycsXG4gICAgYWN0aW9uczogW1xuICAgICAgJ0FQUF9DUkVBVEVEJyxcbiAgICAgICdBUFBfQVJDSElWRUQnLFxuICAgICAgJ0FQUF9SRVNUT1JFRCcsXG4gICAgICAnQVBQX0NPTk5FQ1RFRCcsXG4gICAgICAnQVBQX0RJU0NPTk5FQ1RFRCcsXG4gICAgICAnQVBQX0FDQ09VTlRfUFJPVklTSU9ORUQnLFxuICAgICAgJ0FQUF9BQ0NPVU5UX0RFUFJPVklTSU9ORUQnLFxuICAgICAgJ0dPT0dMRV9VU0VSX0NSRUFURUQnLFxuICAgICAgJ0dPT0dMRV9VU0VSX0RJU0FCTEVEJyxcbiAgICAgICdHT09HTEVfVVNFUl9ERUxFVEVEJyxcbiAgICAgICdHT09HTEVfR1JPVVBTX1VQREFURUQnLFxuICAgICAgJ1NMQUNLX1VTRVJfQ1JFQVRFRCcsXG4gICAgICAnU0xBQ0tfVVNFUl9ESVNBQkxFRCcsXG4gICAgICAnU0xBQ0tfQ0hBTk5FTFNfVVBEQVRFRCcsXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnUHJvdmlzaW9uaW5nIFJ1bGVzJyxcbiAgICBhY3Rpb25zOiBbJ1BST1ZJU0lPTklOR19SVUxFX0NSRUFURUQnLCAnUFJPVklTSU9OSU5HX1JVTEVfVVBEQVRFRCcsICdQUk9WSVNJT05JTkdfUlVMRV9ERUxFVEVEJ10sXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0F1dGggQWN0aXZpdHknLFxuICAgIGFjdGlvbnM6IFsnVVNFUl9MT0dJTicsICdVU0VSX0xPR09VVCddLFxuICB9LFxuXVxuXG5leHBvcnQgY29uc3QgQUxMX05PVElGSUNBVElPTl9BQ1RJT05TID0gTk9USUZJQ0FUSU9OX0FDVElPTl9HUk9VUFMuZmxhdE1hcCgoZ3JvdXApID0+IGdyb3VwLmFjdGlvbnMpXG5cbmNvbnN0IERFRkFVTFRfRVhDTFVERURfQUNUSU9OUyA9IG5ldyBTZXQoWydVU0VSX0xPR0lOJywgJ1VTRVJfTE9HT1VUJ10pXG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0VNQUlMX05PVElGSUNBVElPTl9BQ1RJT05TID0gQUxMX05PVElGSUNBVElPTl9BQ1RJT05TLmZpbHRlcihcbiAgKGFjdGlvbikgPT4gIURFRkFVTFRfRVhDTFVERURfQUNUSU9OUy5oYXMoYWN0aW9uKVxuKVxuIl0sIm5hbWVzIjpbIk5PVElGSUNBVElPTl9BQ1RJT05fR1JPVVBTIiwidGl0bGUiLCJhY3Rpb25zIiwiQUxMX05PVElGSUNBVElPTl9BQ1RJT05TIiwiZmxhdE1hcCIsImdyb3VwIiwiREVGQVVMVF9FWENMVURFRF9BQ1RJT05TIiwiU2V0IiwiREVGQVVMVF9FTUFJTF9OT1RJRklDQVRJT05fQUNUSU9OUyIsImZpbHRlciIsImFjdGlvbiIsImhhcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/notification-actions.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/notification-email.ts":
/*!***************************************!*\
  !*** ./src/lib/notification-email.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notifyAdminsOfAuditLog: () => (/* binding */ notifyAdminsOfAuditLog)\n/* harmony export */ });\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_notifications__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/notifications */ \"(rsc)/./src/lib/notifications.ts\");\n/* harmony import */ var _lib_notification_settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/notification-settings */ \"(rsc)/./src/lib/notification-settings.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n\n\n\n\n\n\nfunction getAppUrl() {\n    const raw = \"http://localhost:3001\" || 0;\n    return raw || \"http://localhost:3000\";\n}\nfunction formatActorName(params) {\n    return params.actor?.name || params.actorEmail || params.actor?.email || \"System\";\n}\nasync function notifyAdminsOfAuditLog(params) {\n    try {\n        const settings = await (0,_lib_notification_settings__WEBPACK_IMPORTED_MODULE_4__.getNotificationEmailSettings)();\n        if (!settings.enabled) return;\n        if (!settings.actions.includes(params.action)) return;\n        const adminUsers = await (0,_lib_notification_settings__WEBPACK_IMPORTED_MODULE_4__.listAdminUsers)();\n        let recipients = adminUsers;\n        if (settings.recipientMode === \"SELECTED\") {\n            const selectedIds = new Set(settings.recipients);\n            recipients = adminUsers.filter((user)=>selectedIds.has(user.id));\n        }\n        if (settings.recipientMode === \"INITIATOR\") {\n            const actorById = params.actorId ? await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n                where: {\n                    id: params.actorId\n                },\n                select: {\n                    id: true,\n                    email: true,\n                    role: true\n                }\n            }) : null;\n            const actorByEmail = !actorById && params.actorEmail ? await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__[\"default\"].user.findUnique({\n                where: {\n                    email: params.actorEmail\n                },\n                select: {\n                    id: true,\n                    email: true,\n                    role: true\n                }\n            }) : null;\n            const actorUser = actorById || actorByEmail;\n            const isAdmin = actorUser?.role ? _lib_notifications__WEBPACK_IMPORTED_MODULE_3__.ADMIN_NOTIFICATION_ROLES.includes(actorUser.role) : false;\n            recipients = isAdmin && actorUser?.email ? [\n                {\n                    id: actorUser.id,\n                    email: actorUser.email,\n                    name: null,\n                    role: actorUser.role\n                }\n            ] : [];\n        }\n        const emails = recipients.map((recipient)=>recipient.email).filter(Boolean);\n        if (emails.length === 0) return;\n        const organizationName = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.getOrganizationName)();\n        const actionLabel = (0,_lib_notifications__WEBPACK_IMPORTED_MODULE_3__.formatAuditAction)(params.action);\n        const actorName = formatActorName({\n            actor: params.actor,\n            actorEmail: params.actorEmail\n        });\n        const resourceLine = params.resourceId ? `${params.resourceType} ¬∑ ${params.resourceId}` : params.resourceType;\n        const timeLabel = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_5__.formatDateTime)(params.createdAt);\n        const appUrl = getAppUrl();\n        const notificationsUrl = `${appUrl}/notifications`;\n        const html = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #1f2937; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #111827; color: #ffffff; padding: 20px 24px; border-radius: 10px 10px 0 0; }\n            .content { background: #f9fafb; padding: 24px; border-radius: 0 0 10px 10px; }\n            .label { font-size: 12px; text-transform: uppercase; letter-spacing: 0.04em; color: #6b7280; margin-bottom: 6px; }\n            .value { font-size: 15px; margin: 0 0 12px 0; color: #111827; }\n            .button { display: inline-block; background: #2563eb; color: #ffffff; padding: 10px 18px; text-decoration: none; border-radius: 6px; font-weight: 600; }\n          </style>\n        </head>\n        <body>\n          <div class=\"container\">\n            <div class=\"header\">\n              <h2 style=\"margin: 0; font-size: 20px;\">${actionLabel}</h2>\n              <p style=\"margin: 6px 0 0; font-size: 14px; color: #d1d5db;\">${organizationName}</p>\n            </div>\n            <div class=\"content\">\n              <div class=\"label\">Actor</div>\n              <p class=\"value\">${actorName}</p>\n              <div class=\"label\">Resource</div>\n              <p class=\"value\">${resourceLine}</p>\n              <div class=\"label\">Time</div>\n              <p class=\"value\">${timeLabel}</p>\n              <a class=\"button\" href=\"${notificationsUrl}\">View notifications</a>\n            </div>\n          </div>\n        </body>\n      </html>\n    `;\n        await Promise.allSettled(emails.map((email)=>(0,_lib_email__WEBPACK_IMPORTED_MODULE_0__.sendEmail)({\n                to: email,\n                subject: `${actionLabel} ‚Ä¢ ${organizationName}`,\n                html\n            })));\n    } catch (error) {\n        console.warn(\"Failed to send notification email:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL25vdGlmaWNhdGlvbi1lbWFpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXVDO0FBQ2lCO0FBQ3ZCO0FBQ2dEO0FBQ1M7QUFDOUM7QUFFNUMsU0FBU1E7SUFDUCxNQUFNQyxNQUFNQyx1QkFBK0IsSUFBSUEsQ0FBd0I7SUFDdkUsT0FBT0QsT0FBTztBQUNoQjtBQUVBLFNBQVNLLGdCQUFnQkMsTUFHeEI7SUFDQyxPQUFPQSxPQUFPQyxLQUFLLEVBQUVDLFFBQVFGLE9BQU9HLFVBQVUsSUFBSUgsT0FBT0MsS0FBSyxFQUFFRyxTQUFTO0FBQzNFO0FBRU8sZUFBZUMsdUJBQXVCTCxNQVM1QztJQUNDLElBQUk7UUFDRixNQUFNTSxXQUFXLE1BQU1oQix3RkFBNEJBO1FBQ25ELElBQUksQ0FBQ2dCLFNBQVNDLE9BQU8sRUFBRTtRQUN2QixJQUFJLENBQUNELFNBQVNFLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDVCxPQUFPVSxNQUFNLEdBQUc7UUFFL0MsTUFBTUMsYUFBYSxNQUFNcEIsMEVBQWNBO1FBQ3ZDLElBQUlxQixhQUFhRDtRQUVqQixJQUFJTCxTQUFTTyxhQUFhLEtBQUssWUFBWTtZQUN6QyxNQUFNQyxjQUFjLElBQUlDLElBQUlULFNBQVNNLFVBQVU7WUFDL0NBLGFBQWFELFdBQVdLLE1BQU0sQ0FBQyxDQUFDQyxPQUFTSCxZQUFZSSxHQUFHLENBQUNELEtBQUtFLEVBQUU7UUFDbEU7UUFFQSxJQUFJYixTQUFTTyxhQUFhLEtBQUssYUFBYTtZQUMxQyxNQUFNTyxZQUFZcEIsT0FBT3FCLE9BQU8sR0FDNUIsTUFBTWxDLG1EQUFNQSxDQUFDOEIsSUFBSSxDQUFDSyxVQUFVLENBQUM7Z0JBQzNCQyxPQUFPO29CQUFFSixJQUFJbkIsT0FBT3FCLE9BQU87Z0JBQUM7Z0JBQzVCRyxRQUFRO29CQUFFTCxJQUFJO29CQUFNZixPQUFPO29CQUFNcUIsTUFBTTtnQkFBSztZQUM5QyxLQUNBO1lBQ0osTUFBTUMsZUFBZSxDQUFDTixhQUFhcEIsT0FBT0csVUFBVSxHQUNoRCxNQUFNaEIsbURBQU1BLENBQUM4QixJQUFJLENBQUNLLFVBQVUsQ0FBQztnQkFDM0JDLE9BQU87b0JBQUVuQixPQUFPSixPQUFPRyxVQUFVO2dCQUFDO2dCQUNsQ3FCLFFBQVE7b0JBQUVMLElBQUk7b0JBQU1mLE9BQU87b0JBQU1xQixNQUFNO2dCQUFLO1lBQzlDLEtBQ0E7WUFDSixNQUFNRSxZQUFZUCxhQUFhTTtZQUMvQixNQUFNRSxVQUFVRCxXQUFXRixPQUFPckMsd0VBQXdCQSxDQUFDcUIsUUFBUSxDQUFDa0IsVUFBVUYsSUFBSSxJQUFJO1lBQ3RGYixhQUFhZ0IsV0FBV0QsV0FBV3ZCLFFBQVE7Z0JBQUM7b0JBQUVlLElBQUlRLFVBQVVSLEVBQUU7b0JBQUVmLE9BQU91QixVQUFVdkIsS0FBSztvQkFBRUYsTUFBTTtvQkFBTXVCLE1BQU1FLFVBQVVGLElBQUk7Z0JBQUM7YUFBRSxHQUFHLEVBQUU7UUFDbEk7UUFFQSxNQUFNSSxTQUFTakIsV0FBV2tCLEdBQUcsQ0FBQyxDQUFDQyxZQUFjQSxVQUFVM0IsS0FBSyxFQUFFWSxNQUFNLENBQUNnQjtRQUNyRSxJQUFJSCxPQUFPSSxNQUFNLEtBQUssR0FBRztRQUV6QixNQUFNQyxtQkFBbUIsTUFBTWhELHNFQUFtQkE7UUFDbEQsTUFBTWlELGNBQWM5QyxxRUFBaUJBLENBQUNXLE9BQU9VLE1BQU07UUFDbkQsTUFBTTBCLFlBQVlyQyxnQkFBZ0I7WUFBRUUsT0FBT0QsT0FBT0MsS0FBSztZQUFFRSxZQUFZSCxPQUFPRyxVQUFVO1FBQUM7UUFDdkYsTUFBTWtDLGVBQWVyQyxPQUFPc0MsVUFBVSxHQUNsQyxDQUFDLEVBQUV0QyxPQUFPdUMsWUFBWSxDQUFDLEdBQUcsRUFBRXZDLE9BQU9zQyxVQUFVLENBQUMsQ0FBQyxHQUMvQ3RDLE9BQU91QyxZQUFZO1FBQ3ZCLE1BQU1DLFlBQVloRCwwREFBY0EsQ0FBQ1EsT0FBT3lDLFNBQVM7UUFDakQsTUFBTUMsU0FBU2pEO1FBQ2YsTUFBTWtELG1CQUFtQixDQUFDLEVBQUVELE9BQU8sY0FBYyxDQUFDO1FBRWxELE1BQU1FLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7c0RBaUJvQyxFQUFFVCxZQUFZOzJFQUNPLEVBQUVELGlCQUFpQjs7OzsrQkFJL0QsRUFBRUUsVUFBVTs7K0JBRVosRUFBRUMsYUFBYTs7K0JBRWYsRUFBRUcsVUFBVTtzQ0FDTCxFQUFFRyxpQkFBaUI7Ozs7O0lBS3JELENBQUM7UUFFRCxNQUFNRSxRQUFRQyxVQUFVLENBQ3RCakIsT0FBT0MsR0FBRyxDQUFDLENBQUMxQixRQUNWbkIscURBQVNBLENBQUM7Z0JBQ1I4RCxJQUFJM0M7Z0JBQ0o0QyxTQUFTLENBQUMsRUFBRWIsWUFBWSxHQUFHLEVBQUVELGlCQUFpQixDQUFDO2dCQUMvQ1U7WUFDRjtJQUdOLEVBQUUsT0FBT0ssT0FBTztRQUNkQyxRQUFRQyxJQUFJLENBQUMsc0NBQXNDRjtJQUNyRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL25vdGlmaWNhdGlvbi1lbWFpbC50cz8yYzYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFbWFpbCB9IGZyb20gJ0AvbGliL2VtYWlsJ1xuaW1wb3J0IHsgZ2V0T3JnYW5pemF0aW9uTmFtZSB9IGZyb20gJ0AvbGliL29yZ2FuaXphdGlvbidcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvcHJpc21hJ1xuaW1wb3J0IHsgQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVTLCBmb3JtYXRBdWRpdEFjdGlvbiB9IGZyb20gJ0AvbGliL25vdGlmaWNhdGlvbnMnXG5pbXBvcnQgeyBnZXROb3RpZmljYXRpb25FbWFpbFNldHRpbmdzLCBsaXN0QWRtaW5Vc2VycyB9IGZyb20gJ0AvbGliL25vdGlmaWNhdGlvbi1zZXR0aW5ncydcbmltcG9ydCB7IGZvcm1hdERhdGVUaW1lIH0gZnJvbSAnQC9saWIvdXRpbHMnXG5cbmZ1bmN0aW9uIGdldEFwcFVybCgpOiBzdHJpbmcge1xuICBjb25zdCByYXcgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTFxuICByZXR1cm4gcmF3IHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFjdG9yTmFtZShwYXJhbXM6IHtcbiAgYWN0b3I/OiB7IG5hbWU/OiBzdHJpbmcgfCBudWxsOyBlbWFpbD86IHN0cmluZyB8IG51bGwgfSB8IG51bGxcbiAgYWN0b3JFbWFpbD86IHN0cmluZyB8IG51bGxcbn0pOiBzdHJpbmcge1xuICByZXR1cm4gcGFyYW1zLmFjdG9yPy5uYW1lIHx8IHBhcmFtcy5hY3RvckVtYWlsIHx8IHBhcmFtcy5hY3Rvcj8uZW1haWwgfHwgJ1N5c3RlbSdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG5vdGlmeUFkbWluc09mQXVkaXRMb2cocGFyYW1zOiB7XG4gIGlkOiBzdHJpbmdcbiAgYWN0aW9uOiBzdHJpbmdcbiAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgcmVzb3VyY2VJZD86IHN0cmluZyB8IG51bGxcbiAgYWN0b3JJZD86IHN0cmluZyB8IG51bGxcbiAgYWN0b3JFbWFpbD86IHN0cmluZyB8IG51bGxcbiAgYWN0b3I/OiB7IG5hbWU/OiBzdHJpbmcgfCBudWxsOyBlbWFpbD86IHN0cmluZyB8IG51bGwgfSB8IG51bGxcbiAgY3JlYXRlZEF0OiBEYXRlXG59KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXROb3RpZmljYXRpb25FbWFpbFNldHRpbmdzKClcbiAgICBpZiAoIXNldHRpbmdzLmVuYWJsZWQpIHJldHVyblxuICAgIGlmICghc2V0dGluZ3MuYWN0aW9ucy5pbmNsdWRlcyhwYXJhbXMuYWN0aW9uKSkgcmV0dXJuXG5cbiAgICBjb25zdCBhZG1pblVzZXJzID0gYXdhaXQgbGlzdEFkbWluVXNlcnMoKVxuICAgIGxldCByZWNpcGllbnRzID0gYWRtaW5Vc2Vyc1xuXG4gICAgaWYgKHNldHRpbmdzLnJlY2lwaWVudE1vZGUgPT09ICdTRUxFQ1RFRCcpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkSWRzID0gbmV3IFNldChzZXR0aW5ncy5yZWNpcGllbnRzKVxuICAgICAgcmVjaXBpZW50cyA9IGFkbWluVXNlcnMuZmlsdGVyKCh1c2VyKSA9PiBzZWxlY3RlZElkcy5oYXModXNlci5pZCkpXG4gICAgfVxuXG4gICAgaWYgKHNldHRpbmdzLnJlY2lwaWVudE1vZGUgPT09ICdJTklUSUFUT1InKSB7XG4gICAgICBjb25zdCBhY3RvckJ5SWQgPSBwYXJhbXMuYWN0b3JJZFxuICAgICAgICA/IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHBhcmFtcy5hY3RvcklkIH0sXG4gICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGVtYWlsOiB0cnVlLCByb2xlOiB0cnVlIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgOiBudWxsXG4gICAgICBjb25zdCBhY3RvckJ5RW1haWwgPSAhYWN0b3JCeUlkICYmIHBhcmFtcy5hY3RvckVtYWlsXG4gICAgICAgID8gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogcGFyYW1zLmFjdG9yRW1haWwgfSxcbiAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgZW1haWw6IHRydWUsIHJvbGU6IHRydWUgfSxcbiAgICAgICAgICB9KVxuICAgICAgICA6IG51bGxcbiAgICAgIGNvbnN0IGFjdG9yVXNlciA9IGFjdG9yQnlJZCB8fCBhY3RvckJ5RW1haWxcbiAgICAgIGNvbnN0IGlzQWRtaW4gPSBhY3RvclVzZXI/LnJvbGUgPyBBRE1JTl9OT1RJRklDQVRJT05fUk9MRVMuaW5jbHVkZXMoYWN0b3JVc2VyLnJvbGUpIDogZmFsc2VcbiAgICAgIHJlY2lwaWVudHMgPSBpc0FkbWluICYmIGFjdG9yVXNlcj8uZW1haWwgPyBbeyBpZDogYWN0b3JVc2VyLmlkLCBlbWFpbDogYWN0b3JVc2VyLmVtYWlsLCBuYW1lOiBudWxsLCByb2xlOiBhY3RvclVzZXIucm9sZSB9XSA6IFtdXG4gICAgfVxuXG4gICAgY29uc3QgZW1haWxzID0gcmVjaXBpZW50cy5tYXAoKHJlY2lwaWVudCkgPT4gcmVjaXBpZW50LmVtYWlsKS5maWx0ZXIoQm9vbGVhbilcbiAgICBpZiAoZW1haWxzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICBjb25zdCBvcmdhbml6YXRpb25OYW1lID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uTmFtZSgpXG4gICAgY29uc3QgYWN0aW9uTGFiZWwgPSBmb3JtYXRBdWRpdEFjdGlvbihwYXJhbXMuYWN0aW9uKVxuICAgIGNvbnN0IGFjdG9yTmFtZSA9IGZvcm1hdEFjdG9yTmFtZSh7IGFjdG9yOiBwYXJhbXMuYWN0b3IsIGFjdG9yRW1haWw6IHBhcmFtcy5hY3RvckVtYWlsIH0pXG4gICAgY29uc3QgcmVzb3VyY2VMaW5lID0gcGFyYW1zLnJlc291cmNlSWRcbiAgICAgID8gYCR7cGFyYW1zLnJlc291cmNlVHlwZX0gwrcgJHtwYXJhbXMucmVzb3VyY2VJZH1gXG4gICAgICA6IHBhcmFtcy5yZXNvdXJjZVR5cGVcbiAgICBjb25zdCB0aW1lTGFiZWwgPSBmb3JtYXREYXRlVGltZShwYXJhbXMuY3JlYXRlZEF0KVxuICAgIGNvbnN0IGFwcFVybCA9IGdldEFwcFVybCgpXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uc1VybCA9IGAke2FwcFVybH0vbm90aWZpY2F0aW9uc2BcblxuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICAgIDxodG1sPlxuICAgICAgICA8aGVhZD5cbiAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzFmMjkzNzsgfVxuICAgICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XG4gICAgICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogIzExMTgyNzsgY29sb3I6ICNmZmZmZmY7IHBhZGRpbmc6IDIwcHggMjRweDsgYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDAgMDsgfVxuICAgICAgICAgICAgLmNvbnRlbnQgeyBiYWNrZ3JvdW5kOiAjZjlmYWZiOyBwYWRkaW5nOiAyNHB4OyBib3JkZXItcmFkaXVzOiAwIDAgMTBweCAxMHB4OyB9XG4gICAgICAgICAgICAubGFiZWwgeyBmb250LXNpemU6IDEycHg7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAwLjA0ZW07IGNvbG9yOiAjNmI3MjgwOyBtYXJnaW4tYm90dG9tOiA2cHg7IH1cbiAgICAgICAgICAgIC52YWx1ZSB7IGZvbnQtc2l6ZTogMTVweDsgbWFyZ2luOiAwIDAgMTJweCAwOyBjb2xvcjogIzExMTgyNzsgfVxuICAgICAgICAgICAgLmJ1dHRvbiB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgYmFja2dyb3VuZDogIzI1NjNlYjsgY29sb3I6ICNmZmZmZmY7IHBhZGRpbmc6IDEwcHggMThweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA2cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IH1cbiAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICA8L2hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgyIHN0eWxlPVwibWFyZ2luOiAwOyBmb250LXNpemU6IDIwcHg7XCI+JHthY3Rpb25MYWJlbH08L2gyPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogNnB4IDAgMDsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2QxZDVkYjtcIj4ke29yZ2FuaXphdGlvbk5hbWV9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj5BY3RvcjwvZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInZhbHVlXCI+JHthY3Rvck5hbWV9PC9wPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj5SZXNvdXJjZTwvZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInZhbHVlXCI+JHtyZXNvdXJjZUxpbmV9PC9wPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxcIj5UaW1lPC9kaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzPVwidmFsdWVcIj4ke3RpbWVMYWJlbH08L3A+XG4gICAgICAgICAgICAgIDxhIGNsYXNzPVwiYnV0dG9uXCIgaHJlZj1cIiR7bm90aWZpY2F0aW9uc1VybH1cIj5WaWV3IG5vdGlmaWNhdGlvbnM8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9odG1sPlxuICAgIGBcblxuICAgIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChcbiAgICAgIGVtYWlscy5tYXAoKGVtYWlsKSA9PlxuICAgICAgICBzZW5kRW1haWwoe1xuICAgICAgICAgIHRvOiBlbWFpbCxcbiAgICAgICAgICBzdWJqZWN0OiBgJHthY3Rpb25MYWJlbH0g4oCiICR7b3JnYW5pemF0aW9uTmFtZX1gLFxuICAgICAgICAgIGh0bWwsXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNlbmQgbm90aWZpY2F0aW9uIGVtYWlsOicsIGVycm9yKVxuICB9XG59XG4iXSwibmFtZXMiOlsic2VuZEVtYWlsIiwiZ2V0T3JnYW5pemF0aW9uTmFtZSIsInByaXNtYSIsIkFETUlOX05PVElGSUNBVElPTl9ST0xFUyIsImZvcm1hdEF1ZGl0QWN0aW9uIiwiZ2V0Tm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyIsImxpc3RBZG1pblVzZXJzIiwiZm9ybWF0RGF0ZVRpbWUiLCJnZXRBcHBVcmwiLCJyYXciLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIk5FWFRBVVRIX1VSTCIsImZvcm1hdEFjdG9yTmFtZSIsInBhcmFtcyIsImFjdG9yIiwibmFtZSIsImFjdG9yRW1haWwiLCJlbWFpbCIsIm5vdGlmeUFkbWluc09mQXVkaXRMb2ciLCJzZXR0aW5ncyIsImVuYWJsZWQiLCJhY3Rpb25zIiwiaW5jbHVkZXMiLCJhY3Rpb24iLCJhZG1pblVzZXJzIiwicmVjaXBpZW50cyIsInJlY2lwaWVudE1vZGUiLCJzZWxlY3RlZElkcyIsIlNldCIsImZpbHRlciIsInVzZXIiLCJoYXMiLCJpZCIsImFjdG9yQnlJZCIsImFjdG9ySWQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJzZWxlY3QiLCJyb2xlIiwiYWN0b3JCeUVtYWlsIiwiYWN0b3JVc2VyIiwiaXNBZG1pbiIsImVtYWlscyIsIm1hcCIsInJlY2lwaWVudCIsIkJvb2xlYW4iLCJsZW5ndGgiLCJvcmdhbml6YXRpb25OYW1lIiwiYWN0aW9uTGFiZWwiLCJhY3Rvck5hbWUiLCJyZXNvdXJjZUxpbmUiLCJyZXNvdXJjZUlkIiwicmVzb3VyY2VUeXBlIiwidGltZUxhYmVsIiwiY3JlYXRlZEF0IiwiYXBwVXJsIiwibm90aWZpY2F0aW9uc1VybCIsImh0bWwiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInRvIiwic3ViamVjdCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/notification-email.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/notification-settings.ts":
/*!******************************************!*\
  !*** ./src/lib/notification-settings.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNotificationEmailSettings: () => (/* binding */ getNotificationEmailSettings),\n/* harmony export */   listAdminUsers: () => (/* binding */ listAdminUsers),\n/* harmony export */   updateNotificationEmailSettings: () => (/* binding */ updateNotificationEmailSettings)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/notifications */ \"(rsc)/./src/lib/notifications.ts\");\n/* harmony import */ var _lib_notification_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/notification-actions */ \"(rsc)/./src/lib/notification-actions.ts\");\n\n\n\n\nconst allowedActions = new Set(_lib_notification_actions__WEBPACK_IMPORTED_MODULE_3__.ALL_NOTIFICATION_ACTIONS);\nfunction normalizeStringArray(value) {\n    if (!Array.isArray(value)) return [];\n    return value.filter((entry)=>typeof entry === \"string\");\n}\nfunction normalizeActions(value, fallback) {\n    const actions = normalizeStringArray(value).filter((action)=>allowedActions.has(action));\n    return actions.length === 0 ? fallback : actions;\n}\nfunction normalizeRecipients(value) {\n    return normalizeStringArray(value);\n}\nasync function readNotificationSettingsRaw(organizationId) {\n    try {\n        const rows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$queryRawUnsafe('select \"notificationEmailEnabled\", \"notificationEmailActions\", \"notificationEmailRecipients\", \"notificationEmailRecipientMode\" from \"Organization\" where id = $1', organizationId);\n        return rows[0] ?? null;\n    } catch (error) {\n        console.warn(\"Notification settings raw read failed:\", error);\n        return null;\n    }\n}\nasync function updateNotificationSettingsRaw(organizationId, params) {\n    try {\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].$executeRawUnsafe('update \"Organization\" set \"notificationEmailEnabled\" = $1, \"notificationEmailActions\" = $2::jsonb, \"notificationEmailRecipients\" = $3::jsonb, \"notificationEmailRecipientMode\" = $4::\"NotificationRecipientMode\" where id = $5', params.enabled, JSON.stringify(params.actions), JSON.stringify(params.recipients), params.recipientMode, organizationId);\n        return await readNotificationSettingsRaw(organizationId);\n    } catch (error) {\n        console.warn(\"Notification settings raw update failed:\", error);\n        return null;\n    }\n}\nasync function getNotificationEmailSettings() {\n    const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.getOrganization)();\n    let orgSettings = null;\n    try {\n        orgSettings = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].organization.findUnique({\n            where: {\n                id: organization.id\n            },\n            select: {\n                notificationEmailEnabled: true,\n                notificationEmailActions: true,\n                notificationEmailRecipients: true,\n                notificationEmailRecipientMode: true\n            }\n        });\n    } catch (error) {\n        console.warn(\"Notification settings fallback (missing columns):\", error);\n        orgSettings = await readNotificationSettingsRaw(organization.id);\n    }\n    const adminUsers = await listAdminUsers();\n    const adminUserIds = new Set(adminUsers.map((user)=>user.id));\n    const rawActions = orgSettings?.notificationEmailActions;\n    const actions = rawActions === null || rawActions === undefined ? [\n        ..._lib_notification_actions__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_EMAIL_NOTIFICATION_ACTIONS\n    ] : normalizeActions(rawActions, []);\n    const rawRecipients = orgSettings?.notificationEmailRecipients;\n    const recipients = rawRecipients === null || rawRecipients === undefined ? adminUsers.map((user)=>user.id) : normalizeRecipients(rawRecipients).filter((id)=>adminUserIds.has(id));\n    const enabled = orgSettings?.notificationEmailEnabled ?? true;\n    const recipientMode = orgSettings?.notificationEmailRecipientMode ?? \"ALL_ADMINS\";\n    return {\n        enabled,\n        actions,\n        recipients,\n        recipientMode\n    };\n}\nasync function listAdminUsers() {\n    return _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findMany({\n        where: {\n            role: {\n                in: [\n                    ..._lib_notifications__WEBPACK_IMPORTED_MODULE_2__.ADMIN_NOTIFICATION_ROLES\n                ]\n            }\n        },\n        select: {\n            id: true,\n            name: true,\n            email: true,\n            role: true\n        },\n        orderBy: {\n            name: \"asc\"\n        }\n    });\n}\nasync function updateNotificationEmailSettings(params) {\n    const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.getOrganization)();\n    const sanitizedActions = normalizeActions(params.actions, []);\n    const adminUsers = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findMany({\n        where: {\n            id: {\n                in: params.recipients\n            },\n            role: {\n                in: [\n                    ..._lib_notifications__WEBPACK_IMPORTED_MODULE_2__.ADMIN_NOTIFICATION_ROLES\n                ]\n            }\n        },\n        select: {\n            id: true\n        }\n    });\n    const sanitizedRecipients = adminUsers.map((user)=>user.id);\n    let updated = null;\n    try {\n        updated = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].organization.update({\n            where: {\n                id: organization.id\n            },\n            data: {\n                notificationEmailEnabled: params.enabled,\n                notificationEmailActions: sanitizedActions,\n                notificationEmailRecipients: sanitizedRecipients,\n                notificationEmailRecipientMode: params.recipientMode\n            },\n            select: {\n                notificationEmailEnabled: true,\n                notificationEmailActions: true,\n                notificationEmailRecipients: true,\n                notificationEmailRecipientMode: true\n            }\n        });\n    } catch (error) {\n        console.warn(\"Notification settings update fallback (missing columns):\", error);\n        updated = await updateNotificationSettingsRaw(organization.id, {\n            enabled: params.enabled,\n            actions: sanitizedActions,\n            recipients: sanitizedRecipients,\n            recipientMode: params.recipientMode\n        });\n    }\n    if (!updated) {\n        throw new Error(\"Failed to save notification settings.\");\n    }\n    return {\n        enabled: updated?.notificationEmailEnabled ?? params.enabled ?? true,\n        actions: normalizeActions(updated?.notificationEmailActions ?? sanitizedActions, []),\n        recipients: normalizeRecipients(updated?.notificationEmailRecipients ?? sanitizedRecipients),\n        recipientMode: updated?.notificationEmailRecipientMode ?? params.recipientMode ?? \"ALL_ADMINS\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFnQztZQUNsQztRQUNGO0lBQ0YsRUFBRSxPQUFPckIsT0FBTztRQUNkQyxRQUFRQyxJQUFJLENBQUMsNERBQTRERjtRQUN6RXVDLFVBQVUsTUFBTXBDLDhCQUE4QlMsYUFBYUksRUFBRSxFQUFFO1lBQzdEVixTQUFTRixPQUFPRSxPQUFPO1lBQ3ZCZixTQUFTOEM7WUFDVDVCLFlBQVk2QjtZQUNaNUIsZUFBZU4sT0FBT00sYUFBYTtRQUNyQztJQUNGO0lBRUEsSUFBSSxDQUFDNkIsU0FBUztRQUNaLE1BQU0sSUFBSUcsTUFBTTtJQUNsQjtJQUVBLE9BQU87UUFDTHBDLFNBQVNpQyxTQUFTckIsNEJBQTRCZCxPQUFPRSxPQUFPLElBQUk7UUFDaEVmLFNBQVNGLGlCQUFpQmtELFNBQVNwQiw0QkFBNEJrQixrQkFBa0IsRUFBRTtRQUNuRjVCLFlBQVlkLG9CQUFvQjRDLFNBQVNuQiwrQkFBK0JrQjtRQUN4RTVCLGVBQWU2QixTQUFTbEIsa0NBQWtDakIsT0FBT00sYUFBYSxJQUFJO0lBQ3BGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvbm90aWZpY2F0aW9uLXNldHRpbmdzLnRzPzgzN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBnZXRPcmdhbml6YXRpb24gfSBmcm9tICdAL2xpYi9vcmdhbml6YXRpb24nXG5pbXBvcnQgeyBBRE1JTl9OT1RJRklDQVRJT05fUk9MRVMgfSBmcm9tICdAL2xpYi9ub3RpZmljYXRpb25zJ1xuaW1wb3J0IHsgQUxMX05PVElGSUNBVElPTl9BQ1RJT05TLCBERUZBVUxUX0VNQUlMX05PVElGSUNBVElPTl9BQ1RJT05TIH0gZnJvbSAnQC9saWIvbm90aWZpY2F0aW9uLWFjdGlvbnMnXG5cbmNvbnN0IGFsbG93ZWRBY3Rpb25zID0gbmV3IFNldChBTExfTk9USUZJQ0FUSU9OX0FDVElPTlMpXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ0FycmF5KHZhbHVlOiB1bmtub3duKTogc3RyaW5nW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gW11cbiAgcmV0dXJuIHZhbHVlLmZpbHRlcigoZW50cnkpOiBlbnRyeSBpcyBzdHJpbmcgPT4gdHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJylcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQWN0aW9ucyh2YWx1ZTogdW5rbm93biwgZmFsbGJhY2s6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBjb25zdCBhY3Rpb25zID0gbm9ybWFsaXplU3RyaW5nQXJyYXkodmFsdWUpLmZpbHRlcigoYWN0aW9uKSA9PiBhbGxvd2VkQWN0aW9ucy5oYXMoYWN0aW9uKSlcbiAgcmV0dXJuIGFjdGlvbnMubGVuZ3RoID09PSAwID8gZmFsbGJhY2sgOiBhY3Rpb25zXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY2lwaWVudHModmFsdWU6IHVua25vd24pOiBzdHJpbmdbXSB7XG4gIHJldHVybiBub3JtYWxpemVTdHJpbmdBcnJheSh2YWx1ZSlcbn1cblxuZXhwb3J0IHR5cGUgTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyA9IHtcbiAgZW5hYmxlZDogYm9vbGVhblxuICBhY3Rpb25zOiBzdHJpbmdbXVxuICByZWNpcGllbnRzOiBzdHJpbmdbXVxuICByZWNpcGllbnRNb2RlOiAnQUxMX0FETUlOUycgfCAnSU5JVElBVE9SJyB8ICdTRUxFQ1RFRCdcbn1cblxudHlwZSBOb3RpZmljYXRpb25TZXR0aW5nc1JvdyA9IHtcbiAgbm90aWZpY2F0aW9uRW1haWxFbmFibGVkPzogYm9vbGVhbiB8IG51bGxcbiAgbm90aWZpY2F0aW9uRW1haWxBY3Rpb25zPzogdW5rbm93blxuICBub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudHM/OiB1bmtub3duXG4gIG5vdGlmaWNhdGlvbkVtYWlsUmVjaXBpZW50TW9kZT86IE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NbJ3JlY2lwaWVudE1vZGUnXSB8IG51bGxcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVhZE5vdGlmaWNhdGlvblNldHRpbmdzUmF3KG9yZ2FuaXphdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPE5vdGlmaWNhdGlvblNldHRpbmdzUm93IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBwcmlzbWEuJHF1ZXJ5UmF3VW5zYWZlPE5vdGlmaWNhdGlvblNldHRpbmdzUm93W10+KFxuICAgICAgJ3NlbGVjdCBcIm5vdGlmaWNhdGlvbkVtYWlsRW5hYmxlZFwiLCBcIm5vdGlmaWNhdGlvbkVtYWlsQWN0aW9uc1wiLCBcIm5vdGlmaWNhdGlvbkVtYWlsUmVjaXBpZW50c1wiLCBcIm5vdGlmaWNhdGlvbkVtYWlsUmVjaXBpZW50TW9kZVwiIGZyb20gXCJPcmdhbml6YXRpb25cIiB3aGVyZSBpZCA9ICQxJyxcbiAgICAgIG9yZ2FuaXphdGlvbklkXG4gICAgKVxuICAgIHJldHVybiByb3dzWzBdID8/IG51bGxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ05vdGlmaWNhdGlvbiBzZXR0aW5ncyByYXcgcmVhZCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVOb3RpZmljYXRpb25TZXR0aW5nc1JhdyhcbiAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgcGFyYW1zOiB7IGVuYWJsZWQ6IGJvb2xlYW47IGFjdGlvbnM6IHN0cmluZ1tdOyByZWNpcGllbnRzOiBzdHJpbmdbXTsgcmVjaXBpZW50TW9kZTogTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc1sncmVjaXBpZW50TW9kZSddIH1cbik6IFByb21pc2U8Tm90aWZpY2F0aW9uU2V0dGluZ3NSb3cgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcHJpc21hLiRleGVjdXRlUmF3VW5zYWZlKFxuICAgICAgJ3VwZGF0ZSBcIk9yZ2FuaXphdGlvblwiIHNldCBcIm5vdGlmaWNhdGlvbkVtYWlsRW5hYmxlZFwiID0gJDEsIFwibm90aWZpY2F0aW9uRW1haWxBY3Rpb25zXCIgPSAkMjo6anNvbmIsIFwibm90aWZpY2F0aW9uRW1haWxSZWNpcGllbnRzXCIgPSAkMzo6anNvbmIsIFwibm90aWZpY2F0aW9uRW1haWxSZWNpcGllbnRNb2RlXCIgPSAkNDo6XCJOb3RpZmljYXRpb25SZWNpcGllbnRNb2RlXCIgd2hlcmUgaWQgPSAkNScsXG4gICAgICBwYXJhbXMuZW5hYmxlZCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHBhcmFtcy5hY3Rpb25zKSxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHBhcmFtcy5yZWNpcGllbnRzKSxcbiAgICAgIHBhcmFtcy5yZWNpcGllbnRNb2RlLFxuICAgICAgb3JnYW5pemF0aW9uSWRcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHJlYWROb3RpZmljYXRpb25TZXR0aW5nc1Jhdyhvcmdhbml6YXRpb25JZClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ05vdGlmaWNhdGlvbiBzZXR0aW5ncyByYXcgdXBkYXRlIGZhaWxlZDonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb3RpZmljYXRpb25FbWFpbFNldHRpbmdzKCk6IFByb21pc2U8Tm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncz4ge1xuICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBnZXRPcmdhbml6YXRpb24oKVxuICBsZXQgb3JnU2V0dGluZ3M6IE5vdGlmaWNhdGlvblNldHRpbmdzUm93IHwgbnVsbCA9IG51bGxcblxuICB0cnkge1xuICAgIG9yZ1NldHRpbmdzID0gYXdhaXQgKHByaXNtYS5vcmdhbml6YXRpb24gYXMgYW55KS5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBub3RpZmljYXRpb25FbWFpbEVuYWJsZWQ6IHRydWUsXG4gICAgICAgIG5vdGlmaWNhdGlvbkVtYWlsQWN0aW9uczogdHJ1ZSxcbiAgICAgICAgbm90aWZpY2F0aW9uRW1haWxSZWNpcGllbnRzOiB0cnVlLFxuICAgICAgICBub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudE1vZGU6IHRydWUsXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdOb3RpZmljYXRpb24gc2V0dGluZ3MgZmFsbGJhY2sgKG1pc3NpbmcgY29sdW1ucyk6JywgZXJyb3IpXG4gICAgb3JnU2V0dGluZ3MgPSBhd2FpdCByZWFkTm90aWZpY2F0aW9uU2V0dGluZ3NSYXcob3JnYW5pemF0aW9uLmlkKVxuICB9XG4gIGNvbnN0IGFkbWluVXNlcnMgPSBhd2FpdCBsaXN0QWRtaW5Vc2VycygpXG4gIGNvbnN0IGFkbWluVXNlcklkcyA9IG5ldyBTZXQoYWRtaW5Vc2Vycy5tYXAoKHVzZXIpID0+IHVzZXIuaWQpKVxuXG4gIGNvbnN0IHJhd0FjdGlvbnMgPSBvcmdTZXR0aW5ncz8ubm90aWZpY2F0aW9uRW1haWxBY3Rpb25zXG4gIGNvbnN0IGFjdGlvbnMgPVxuICAgIHJhd0FjdGlvbnMgPT09IG51bGwgfHwgcmF3QWN0aW9ucyA9PT0gdW5kZWZpbmVkXG4gICAgICA/IFsuLi5ERUZBVUxUX0VNQUlMX05PVElGSUNBVElPTl9BQ1RJT05TXVxuICAgICAgOiBub3JtYWxpemVBY3Rpb25zKHJhd0FjdGlvbnMsIFtdKVxuXG4gIGNvbnN0IHJhd1JlY2lwaWVudHMgPSBvcmdTZXR0aW5ncz8ubm90aWZpY2F0aW9uRW1haWxSZWNpcGllbnRzXG4gIGNvbnN0IHJlY2lwaWVudHMgPVxuICAgIHJhd1JlY2lwaWVudHMgPT09IG51bGwgfHwgcmF3UmVjaXBpZW50cyA9PT0gdW5kZWZpbmVkXG4gICAgICA/IGFkbWluVXNlcnMubWFwKCh1c2VyKSA9PiB1c2VyLmlkKVxuICAgICAgOiBub3JtYWxpemVSZWNpcGllbnRzKHJhd1JlY2lwaWVudHMpLmZpbHRlcigoaWQpID0+IGFkbWluVXNlcklkcy5oYXMoaWQpKVxuXG4gIGNvbnN0IGVuYWJsZWQgPSBvcmdTZXR0aW5ncz8ubm90aWZpY2F0aW9uRW1haWxFbmFibGVkID8/IHRydWVcbiAgY29uc3QgcmVjaXBpZW50TW9kZSA9IG9yZ1NldHRpbmdzPy5ub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudE1vZGUgPz8gJ0FMTF9BRE1JTlMnXG5cbiAgcmV0dXJuIHsgZW5hYmxlZCwgYWN0aW9ucywgcmVjaXBpZW50cywgcmVjaXBpZW50TW9kZSB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaXN0QWRtaW5Vc2VycygpIHtcbiAgcmV0dXJuIHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyByb2xlOiB7IGluOiBbLi4uQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVTXSB9IH0sXG4gICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSwgcm9sZTogdHJ1ZSB9LFxuICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MocGFyYW1zOiB7XG4gIGVuYWJsZWQ6IGJvb2xlYW5cbiAgYWN0aW9uczogc3RyaW5nW11cbiAgcmVjaXBpZW50czogc3RyaW5nW11cbiAgcmVjaXBpZW50TW9kZTogJ0FMTF9BRE1JTlMnIHwgJ0lOSVRJQVRPUicgfCAnU0VMRUNURUQnXG59KTogUHJvbWlzZTxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzPiB7XG4gIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gIGNvbnN0IHNhbml0aXplZEFjdGlvbnMgPSBub3JtYWxpemVBY3Rpb25zKHBhcmFtcy5hY3Rpb25zLCBbXSlcbiAgY29uc3QgYWRtaW5Vc2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHsgaW46IHBhcmFtcy5yZWNpcGllbnRzIH0sXG4gICAgICByb2xlOiB7IGluOiBbLi4uQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVTXSB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gIH0pXG4gIGNvbnN0IHNhbml0aXplZFJlY2lwaWVudHMgPSBhZG1pblVzZXJzLm1hcCgodXNlcikgPT4gdXNlci5pZClcblxuICBsZXQgdXBkYXRlZDogTm90aWZpY2F0aW9uU2V0dGluZ3NSb3cgfCBudWxsID0gbnVsbFxuXG4gIHRyeSB7XG4gICAgdXBkYXRlZCA9IGF3YWl0IChwcmlzbWEub3JnYW5pemF0aW9uIGFzIGFueSkudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbm90aWZpY2F0aW9uRW1haWxFbmFibGVkOiBwYXJhbXMuZW5hYmxlZCxcbiAgICAgICAgbm90aWZpY2F0aW9uRW1haWxBY3Rpb25zOiBzYW5pdGl6ZWRBY3Rpb25zLFxuICAgICAgICBub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudHM6IHNhbml0aXplZFJlY2lwaWVudHMsXG4gICAgICAgIG5vdGlmaWNhdGlvbkVtYWlsUmVjaXBpZW50TW9kZTogcGFyYW1zLnJlY2lwaWVudE1vZGUsXG4gICAgICB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIG5vdGlmaWNhdGlvbkVtYWlsRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbm90aWZpY2F0aW9uRW1haWxBY3Rpb25zOiB0cnVlLFxuICAgICAgICBub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudHM6IHRydWUsXG4gICAgICAgIG5vdGlmaWNhdGlvbkVtYWlsUmVjaXBpZW50TW9kZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ05vdGlmaWNhdGlvbiBzZXR0aW5ncyB1cGRhdGUgZmFsbGJhY2sgKG1pc3NpbmcgY29sdW1ucyk6JywgZXJyb3IpXG4gICAgdXBkYXRlZCA9IGF3YWl0IHVwZGF0ZU5vdGlmaWNhdGlvblNldHRpbmdzUmF3KG9yZ2FuaXphdGlvbi5pZCwge1xuICAgICAgZW5hYmxlZDogcGFyYW1zLmVuYWJsZWQsXG4gICAgICBhY3Rpb25zOiBzYW5pdGl6ZWRBY3Rpb25zLFxuICAgICAgcmVjaXBpZW50czogc2FuaXRpemVkUmVjaXBpZW50cyxcbiAgICAgIHJlY2lwaWVudE1vZGU6IHBhcmFtcy5yZWNpcGllbnRNb2RlLFxuICAgIH0pXG4gIH1cblxuICBpZiAoIXVwZGF0ZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzYXZlIG5vdGlmaWNhdGlvbiBzZXR0aW5ncy4nKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBlbmFibGVkOiB1cGRhdGVkPy5ub3RpZmljYXRpb25FbWFpbEVuYWJsZWQgPz8gcGFyYW1zLmVuYWJsZWQgPz8gdHJ1ZSxcbiAgICBhY3Rpb25zOiBub3JtYWxpemVBY3Rpb25zKHVwZGF0ZWQ/Lm5vdGlmaWNhdGlvbkVtYWlsQWN0aW9ucyA/PyBzYW5pdGl6ZWRBY3Rpb25zLCBbXSksXG4gICAgcmVjaXBpZW50czogbm9ybWFsaXplUmVjaXBpZW50cyh1cGRhdGVkPy5ub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudHMgPz8gc2FuaXRpemVkUmVjaXBpZW50cyksXG4gICAgcmVjaXBpZW50TW9kZTogdXBkYXRlZD8ubm90aWZpY2F0aW9uRW1haWxSZWNpcGllbnRNb2RlID8/IHBhcmFtcy5yZWNpcGllbnRNb2RlID8/ICdBTExfQURNSU5TJyxcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByaXNtYSIsImdldE9yZ2FuaXphdGlvbiIsIkFETUlOX05PVElGSUNBVElPTl9ST0xFUyIsIkFMTF9OT1RJRklDQVRJT05fQUNUSU9OUyIsIkRFRkFVTFRfRU1BSUxfTk9USUZJQ0FUSU9OX0FDVElPTlMiLCJhbGxvd2VkQWN0aW9ucyIsIlNldCIsIm5vcm1hbGl6ZVN0cmluZ0FycmF5IiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJlbnRyeSIsIm5vcm1hbGl6ZUFjdGlvbnMiLCJmYWxsYmFjayIsImFjdGlvbnMiLCJhY3Rpb24iLCJoYXMiLCJsZW5ndGgiLCJub3JtYWxpemVSZWNpcGllbnRzIiwicmVhZE5vdGlmaWNhdGlvblNldHRpbmdzUmF3Iiwib3JnYW5pemF0aW9uSWQiLCJyb3dzIiwiJHF1ZXJ5UmF3VW5zYWZlIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsInVwZGF0ZU5vdGlmaWNhdGlvblNldHRpbmdzUmF3IiwicGFyYW1zIiwiJGV4ZWN1dGVSYXdVbnNhZmUiLCJlbmFibGVkIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY2lwaWVudHMiLCJyZWNpcGllbnRNb2RlIiwiZ2V0Tm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyIsIm9yZ2FuaXphdGlvbiIsIm9yZ1NldHRpbmdzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJub3RpZmljYXRpb25FbWFpbEVuYWJsZWQiLCJub3RpZmljYXRpb25FbWFpbEFjdGlvbnMiLCJub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudHMiLCJub3RpZmljYXRpb25FbWFpbFJlY2lwaWVudE1vZGUiLCJhZG1pblVzZXJzIiwibGlzdEFkbWluVXNlcnMiLCJhZG1pblVzZXJJZHMiLCJtYXAiLCJ1c2VyIiwicmF3QWN0aW9ucyIsInVuZGVmaW5lZCIsInJhd1JlY2lwaWVudHMiLCJmaW5kTWFueSIsInJvbGUiLCJpbiIsIm5hbWUiLCJlbWFpbCIsIm9yZGVyQnkiLCJ1cGRhdGVOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzIiwic2FuaXRpemVkQWN0aW9ucyIsInNhbml0aXplZFJlY2lwaWVudHMiLCJ1cGRhdGVkIiwidXBkYXRlIiwiZGF0YSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/notification-settings.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/notifications.ts":
/*!**********************************!*\
  !*** ./src/lib/notifications.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADMIN_NOTIFICATION_ROLES: () => (/* binding */ ADMIN_NOTIFICATION_ROLES),\n/* harmony export */   HIDDEN_NOTIFICATION_ACTIONS: () => (/* binding */ HIDDEN_NOTIFICATION_ACTIONS),\n/* harmony export */   formatAuditAction: () => (/* binding */ formatAuditAction),\n/* harmony export */   isAdminRole: () => (/* binding */ isAdminRole),\n/* harmony export */   isNotifiableAction: () => (/* binding */ isNotifiableAction)\n/* harmony export */ });\nconst ADMIN_NOTIFICATION_ROLES = [\n    \"SUPER_ADMIN\",\n    \"HR_ADMIN\",\n    \"IT_ADMIN\"\n];\nconst ADMIN_NOTIFICATION_ROLE_SET = new Set(ADMIN_NOTIFICATION_ROLES);\nconst HIDDEN_NOTIFICATION_ACTIONS = new Set([\n    \"USER_LOGIN\",\n    \"USER_LOGOUT\"\n]);\nfunction isAdminRole(role) {\n    if (!role) return false;\n    return ADMIN_NOTIFICATION_ROLE_SET.has(role);\n}\nfunction isNotifiableAction(action) {\n    return !HIDDEN_NOTIFICATION_ACTIONS.has(action);\n}\nfunction formatAuditAction(action) {\n    return action.split(\"_\").map((word)=>word.charAt(0) + word.slice(1).toLowerCase()).join(\" \");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL25vdGlmaWNhdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxNQUFNQSwyQkFBMkI7SUFBQztJQUFlO0lBQVk7Q0FBVyxDQUFTO0FBQ3hGLE1BQU1DLDhCQUE4QixJQUFJQyxJQUFJRjtBQUNyQyxNQUFNRyw4QkFBOEIsSUFBSUQsSUFBSTtJQUFDO0lBQWM7Q0FBYyxFQUFDO0FBRTFFLFNBQVNFLFlBQVlDLElBQW9CO0lBQzlDLElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBQ2xCLE9BQU9KLDRCQUE0QkssR0FBRyxDQUFDRDtBQUN6QztBQUVPLFNBQVNFLG1CQUFtQkMsTUFBYztJQUMvQyxPQUFPLENBQUNMLDRCQUE0QkcsR0FBRyxDQUFDRTtBQUMxQztBQUVPLFNBQVNDLGtCQUFrQkQsTUFBYztJQUM5QyxPQUFPQSxPQUNKRSxLQUFLLENBQUMsS0FDTkMsR0FBRyxDQUFDLENBQUNDLE9BQVNBLEtBQUtDLE1BQU0sQ0FBQyxLQUFLRCxLQUFLRSxLQUFLLENBQUMsR0FBR0MsV0FBVyxJQUN4REMsSUFBSSxDQUFDO0FBQ1YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvbm90aWZpY2F0aW9ucy50cz84MmU2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBBRE1JTl9OT1RJRklDQVRJT05fUk9MRVMgPSBbJ1NVUEVSX0FETUlOJywgJ0hSX0FETUlOJywgJ0lUX0FETUlOJ10gYXMgY29uc3RcbmNvbnN0IEFETUlOX05PVElGSUNBVElPTl9ST0xFX1NFVCA9IG5ldyBTZXQoQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVTKVxuZXhwb3J0IGNvbnN0IEhJRERFTl9OT1RJRklDQVRJT05fQUNUSU9OUyA9IG5ldyBTZXQoWydVU0VSX0xPR0lOJywgJ1VTRVJfTE9HT1VUJ10pXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FkbWluUm9sZShyb2xlPzogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXJvbGUpIHJldHVybiBmYWxzZVxuICByZXR1cm4gQURNSU5fTk9USUZJQ0FUSU9OX1JPTEVfU0VULmhhcyhyb2xlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb3RpZmlhYmxlQWN0aW9uKGFjdGlvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAhSElEREVOX05PVElGSUNBVElPTl9BQ1RJT05TLmhhcyhhY3Rpb24pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBdWRpdEFjdGlvbihhY3Rpb246IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhY3Rpb25cbiAgICAuc3BsaXQoJ18nKVxuICAgIC5tYXAoKHdvcmQpID0+IHdvcmQuY2hhckF0KDApICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKVxuICAgIC5qb2luKCcgJylcbn1cbiJdLCJuYW1lcyI6WyJBRE1JTl9OT1RJRklDQVRJT05fUk9MRVMiLCJBRE1JTl9OT1RJRklDQVRJT05fUk9MRV9TRVQiLCJTZXQiLCJISURERU5fTk9USUZJQ0FUSU9OX0FDVElPTlMiLCJpc0FkbWluUm9sZSIsInJvbGUiLCJoYXMiLCJpc05vdGlmaWFibGVBY3Rpb24iLCJhY3Rpb24iLCJmb3JtYXRBdWRpdEFjdGlvbiIsInNwbGl0IiwibWFwIiwid29yZCIsImNoYXJBdCIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/notifications.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/onboarding-tasks.ts":
/*!*************************************!*\
  !*** ./src/lib/onboarding-tasks.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ONBOARDING_TASKS: () => (/* binding */ ONBOARDING_TASKS),\n/* harmony export */   TASK_SECTIONS: () => (/* binding */ TASK_SECTIONS),\n/* harmony export */   getTaskById: () => (/* binding */ getTaskById),\n/* harmony export */   getTaskProgressForUser: () => (/* binding */ getTaskProgressForUser),\n/* harmony export */   getTasksBySection: () => (/* binding */ getTasksBySection)\n/* harmony export */ });\n// Static task catalog for onboarding\n// Phase 2: This will be driven from a \"Task Catalog\" sheet tab\nconst ONBOARDING_TASKS = [\n    // To Do section\n    {\n        id: \"task_001\",\n        section: \"todo\",\n        title: \"What you should know about me\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\",\n        notes: \"make a copy and fill\"\n    },\n    {\n        id: \"task_002\",\n        section: \"todo\",\n        title: \"What my personal values are\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\",\n        notes: \"make a copy and fill\"\n    },\n    {\n        id: \"task_003\",\n        section: \"todo\",\n        title: \"Bring your own device undertaking\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\",\n        notes: \"make a copy and fill\"\n    },\n    {\n        id: \"task_004\",\n        section: \"todo\",\n        title: \"Personality Test\",\n        url: \"https://www.16personalities.com/\",\n        notes: \"forward result to peopleops@curacel.ai\"\n    },\n    {\n        id: \"task_005\",\n        section: \"todo\",\n        title: \"Biodata\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\",\n        notes: \"make a copy and fill\"\n    },\n    {\n        id: \"task_006\",\n        section: \"todo\",\n        title: \"Email Signature\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_007\",\n        section: \"todo\",\n        title: \"Upload Headshot to personal folder\"\n    },\n    {\n        id: \"task_008\",\n        section: \"todo\",\n        title: \"Proof of former employment\",\n        notes: \"Offer letter, last Payslip, letter of resignation, Resignation confirmation letter on company letterhead\",\n        isConditional: true,\n        conditionalLabel: \"For full time employees\",\n        appliesTo: \"full_time\"\n    },\n    {\n        id: \"task_009\",\n        section: \"todo\",\n        title: \"Employment Referencing\",\n        url: \"https://docs.google.com/forms/d/PLACEHOLDER\",\n        isConditional: true,\n        conditionalLabel: \"For full time employees\",\n        appliesTo: \"full_time\"\n    },\n    {\n        id: \"task_010\",\n        section: \"todo\",\n        title: \"Sign in to Team GPT\",\n        url: \"https://app.team-gpt.com/\"\n    },\n    {\n        id: \"task_011\",\n        section: \"todo\",\n        title: \"Install Calendar plugin on Slack\",\n        url: \"https://slack.com/apps/A01FKCE2Q8Q-google-calendar\"\n    },\n    {\n        id: \"task_012\",\n        section: \"todo\",\n        title: \"Curacel Background for Meetings\",\n        url: \"https://drive.google.com/drive/folders/PLACEHOLDER\"\n    },\n    {\n        id: \"task_013\",\n        section: \"todo\",\n        title: \"Create a Passbolt Account\",\n        url: \"https://passbolt.curacel.co/\"\n    },\n    {\n        id: \"task_014\",\n        section: \"todo\",\n        title: \"Performance Sheet\",\n        url: \"https://docs.google.com/spreadsheets/d/PLACEHOLDER\",\n        notes: \"make a copy for yourself\"\n    },\n    // To Read section\n    {\n        id: \"task_015\",\n        section: \"to_read\",\n        title: \"47 Habits of highly successfully employees\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_016\",\n        section: \"to_read\",\n        title: \"AI/ML Terminologies\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_017\",\n        section: \"to_read\",\n        title: \"Curacel Values\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_018\",\n        section: \"to_read\",\n        title: \"Employee Handbook\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_019\",\n        section: \"to_read\",\n        title: \"Curacel Organogram\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_020\",\n        section: \"to_read\",\n        title: \"AI Manifesto\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_021\",\n        section: \"to_read\",\n        title: \"Curacel 2025 OKRs & KPIs\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_022\",\n        section: \"to_read\",\n        title: \"Curacel Product PRD\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    {\n        id: \"task_023\",\n        section: \"to_read\",\n        title: \"AI Competency Framework\",\n        url: \"https://docs.google.com/document/d/PLACEHOLDER\"\n    },\n    // To Watch section\n    {\n        id: \"task_024\",\n        section: \"to_watch\",\n        title: \"Start with Why - Simon Sinek\",\n        url: \"https://www.youtube.com/watch?v=u4ZoJKF_VuA\"\n    },\n    {\n        id: \"task_025\",\n        section: \"to_watch\",\n        title: \"Why the secret to success is setting the right goals - John Doerr\",\n        url: \"https://www.youtube.com/watch?v=L4N1q4RNi9I\"\n    },\n    {\n        id: \"task_026\",\n        section: \"to_watch\",\n        title: \"Passbolt Tutorial\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_027\",\n        section: \"to_watch\",\n        title: \"Curacel Health Detection\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_028\",\n        section: \"to_watch\",\n        title: \"Curacel Health Collection\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_029\",\n        section: \"to_watch\",\n        title: \"Curacel Pay\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_030\",\n        section: \"to_watch\",\n        title: \"Curacel Grow\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_031\",\n        section: \"to_watch\",\n        title: \"Curacel Auto Customer App\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_032\",\n        section: \"to_watch\",\n        title: \"Curacel Auto Insurer Dashboard\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_033\",\n        section: \"to_watch\",\n        title: \"How to use Google Drive\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    },\n    {\n        id: \"task_034\",\n        section: \"to_watch\",\n        title: \"How to create shortcut\",\n        url: \"https://www.youtube.com/watch?v=PLACEHOLDER\"\n    }\n];\nconst TASK_SECTIONS = {\n    todo: {\n        id: \"todo\",\n        title: \"To Do\",\n        description: \"Action items to complete\"\n    },\n    to_read: {\n        id: \"to_read\",\n        title: \"To Read\",\n        description: \"Documents and resources to review\"\n    },\n    to_watch: {\n        id: \"to_watch\",\n        title: \"To Watch\",\n        description: \"Videos and tutorials to watch\"\n    }\n};\nfunction getTasksBySection(section) {\n    return ONBOARDING_TASKS.filter((task)=>task.section === section);\n}\nfunction getTaskById(id) {\n    return ONBOARDING_TASKS.find((task)=>task.id === id);\n}\n// TODO: When chatbot writes task-level completion, this function will fetch real progress\n// For now, returns \"not tracked\" for all tasks\nfunction getTaskProgressForUser(_userId) {\n    // Phase 2: Fetch from Task Progress sheet\n    // For MVP, return empty map (all tasks show \"Not tracked yet\")\n    return new Map();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29uYm9hcmRpbmctdGFza3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxxQ0FBcUM7QUFDckMsK0RBQStEO0FBYXhELE1BQU1BLG1CQUFxQztJQUNoRCxnQkFBZ0I7SUFDaEI7UUFDRUMsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxPQUFPO0lBQ1Q7SUFDQTtRQUNFSixJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLE9BQU87SUFDVDtJQUNBO1FBQ0VKLElBQUk7UUFDSkMsU0FBUztRQUNUQyxPQUFPO1FBQ1BDLEtBQUs7UUFDTEMsT0FBTztJQUNUO0lBQ0E7UUFDRUosSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxPQUFPO0lBQ1Q7SUFDQTtRQUNFSixJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLE9BQU87SUFDVDtJQUNBO1FBQ0VKLElBQUk7UUFDSkMsU0FBUztRQUNUQyxPQUFPO1FBQ1BDLEtBQUs7SUFDUDtJQUNBO1FBQ0VILElBQUk7UUFDSkMsU0FBUztRQUNUQyxPQUFPO0lBQ1Q7SUFDQTtRQUNFRixJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQRSxPQUFPO1FBQ1BDLGVBQWU7UUFDZkMsa0JBQWtCO1FBQ2xCQyxXQUFXO0lBQ2I7SUFDQTtRQUNFUCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO1FBQ0xFLGVBQWU7UUFDZkMsa0JBQWtCO1FBQ2xCQyxXQUFXO0lBQ2I7SUFDQTtRQUNFUCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLE9BQU87SUFDVDtJQUVBLGtCQUFrQjtJQUNsQjtRQUNFSixJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFDQTtRQUNFSCxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsT0FBTztRQUNQQyxLQUFLO0lBQ1A7SUFFQSxtQkFBbUI7SUFDbkI7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxTQUFTO1FBQ1RDLE9BQU87UUFDUEMsS0FBSztJQUNQO0NBQ0Q7QUFFTSxNQUFNSyxnQkFBZ0I7SUFDM0JDLE1BQU07UUFDSlQsSUFBSTtRQUNKRSxPQUFPO1FBQ1BRLGFBQWE7SUFDZjtJQUNBQyxTQUFTO1FBQ1BYLElBQUk7UUFDSkUsT0FBTztRQUNQUSxhQUFhO0lBQ2Y7SUFDQUUsVUFBVTtRQUNSWixJQUFJO1FBQ0pFLE9BQU87UUFDUFEsYUFBYTtJQUNmO0FBQ0YsRUFBVTtBQUVILFNBQVNHLGtCQUFrQlosT0FBa0M7SUFDbEUsT0FBT0YsaUJBQWlCZSxNQUFNLENBQUNDLENBQUFBLE9BQVFBLEtBQUtkLE9BQU8sS0FBS0E7QUFDMUQ7QUFFTyxTQUFTZSxZQUFZaEIsRUFBVTtJQUNwQyxPQUFPRCxpQkFBaUJrQixJQUFJLENBQUNGLENBQUFBLE9BQVFBLEtBQUtmLEVBQUUsS0FBS0E7QUFDbkQ7QUFVQSwwRkFBMEY7QUFDMUYsK0NBQStDO0FBQ3hDLFNBQVNrQix1QkFBdUJDLE9BQWU7SUFDcEQsMENBQTBDO0lBQzFDLCtEQUErRDtJQUMvRCxPQUFPLElBQUlDO0FBQ2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvb25ib2FyZGluZy10YXNrcy50cz82MmQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFN0YXRpYyB0YXNrIGNhdGFsb2cgZm9yIG9uYm9hcmRpbmdcbi8vIFBoYXNlIDI6IFRoaXMgd2lsbCBiZSBkcml2ZW4gZnJvbSBhIFwiVGFzayBDYXRhbG9nXCIgc2hlZXQgdGFiXG5cbmV4cG9ydCBpbnRlcmZhY2UgT25ib2FyZGluZ1Rhc2sge1xuICBpZDogc3RyaW5nXG4gIHNlY3Rpb246ICd0b2RvJyB8ICd0b19yZWFkJyB8ICd0b193YXRjaCdcbiAgdGl0bGU6IHN0cmluZ1xuICB1cmw/OiBzdHJpbmdcbiAgbm90ZXM/OiBzdHJpbmdcbiAgaXNDb25kaXRpb25hbD86IGJvb2xlYW4gLy8gZS5nLiwgXCJGb3IgZnVsbCB0aW1lIGVtcGxveWVlc1wiXG4gIGNvbmRpdGlvbmFsTGFiZWw/OiBzdHJpbmdcbiAgYXBwbGllc1RvPzogJ2FsbCcgfCAnZnVsbF90aW1lJyB8ICdjb250cmFjdCdcbn1cblxuZXhwb3J0IGNvbnN0IE9OQk9BUkRJTkdfVEFTS1M6IE9uYm9hcmRpbmdUYXNrW10gPSBbXG4gIC8vIFRvIERvIHNlY3Rpb25cbiAge1xuICAgIGlkOiAndGFza18wMDEnLFxuICAgIHNlY3Rpb246ICd0b2RvJyxcbiAgICB0aXRsZTogJ1doYXQgeW91IHNob3VsZCBrbm93IGFib3V0IG1lJyxcbiAgICB1cmw6ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kL1BMQUNFSE9MREVSJyxcbiAgICBub3RlczogJ21ha2UgYSBjb3B5IGFuZCBmaWxsJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMDInLFxuICAgIHNlY3Rpb246ICd0b2RvJyxcbiAgICB0aXRsZTogJ1doYXQgbXkgcGVyc29uYWwgdmFsdWVzIGFyZScsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gICAgbm90ZXM6ICdtYWtlIGEgY29weSBhbmQgZmlsbCcsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDAzJyxcbiAgICBzZWN0aW9uOiAndG9kbycsXG4gICAgdGl0bGU6ICdCcmluZyB5b3VyIG93biBkZXZpY2UgdW5kZXJ0YWtpbmcnLFxuICAgIHVybDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvUExBQ0VIT0xERVInLFxuICAgIG5vdGVzOiAnbWFrZSBhIGNvcHkgYW5kIGZpbGwnLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAwNCcsXG4gICAgc2VjdGlvbjogJ3RvZG8nLFxuICAgIHRpdGxlOiAnUGVyc29uYWxpdHkgVGVzdCcsXG4gICAgdXJsOiAnaHR0cHM6Ly93d3cuMTZwZXJzb25hbGl0aWVzLmNvbS8nLFxuICAgIG5vdGVzOiAnZm9yd2FyZCByZXN1bHQgdG8gcGVvcGxlb3BzQGN1cmFjZWwuYWknLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAwNScsXG4gICAgc2VjdGlvbjogJ3RvZG8nLFxuICAgIHRpdGxlOiAnQmlvZGF0YScsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gICAgbm90ZXM6ICdtYWtlIGEgY29weSBhbmQgZmlsbCcsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDA2JyxcbiAgICBzZWN0aW9uOiAndG9kbycsXG4gICAgdGl0bGU6ICdFbWFpbCBTaWduYXR1cmUnLFxuICAgIHVybDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvUExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAwNycsXG4gICAgc2VjdGlvbjogJ3RvZG8nLFxuICAgIHRpdGxlOiAnVXBsb2FkIEhlYWRzaG90IHRvIHBlcnNvbmFsIGZvbGRlcicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDA4JyxcbiAgICBzZWN0aW9uOiAndG9kbycsXG4gICAgdGl0bGU6ICdQcm9vZiBvZiBmb3JtZXIgZW1wbG95bWVudCcsXG4gICAgbm90ZXM6ICdPZmZlciBsZXR0ZXIsIGxhc3QgUGF5c2xpcCwgbGV0dGVyIG9mIHJlc2lnbmF0aW9uLCBSZXNpZ25hdGlvbiBjb25maXJtYXRpb24gbGV0dGVyIG9uIGNvbXBhbnkgbGV0dGVyaGVhZCcsXG4gICAgaXNDb25kaXRpb25hbDogdHJ1ZSxcbiAgICBjb25kaXRpb25hbExhYmVsOiAnRm9yIGZ1bGwgdGltZSBlbXBsb3llZXMnLFxuICAgIGFwcGxpZXNUbzogJ2Z1bGxfdGltZScsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDA5JyxcbiAgICBzZWN0aW9uOiAndG9kbycsXG4gICAgdGl0bGU6ICdFbXBsb3ltZW50IFJlZmVyZW5jaW5nJyxcbiAgICB1cmw6ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9mb3Jtcy9kL1BMQUNFSE9MREVSJyxcbiAgICBpc0NvbmRpdGlvbmFsOiB0cnVlLFxuICAgIGNvbmRpdGlvbmFsTGFiZWw6ICdGb3IgZnVsbCB0aW1lIGVtcGxveWVlcycsXG4gICAgYXBwbGllc1RvOiAnZnVsbF90aW1lJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMTAnLFxuICAgIHNlY3Rpb246ICd0b2RvJyxcbiAgICB0aXRsZTogJ1NpZ24gaW4gdG8gVGVhbSBHUFQnLFxuICAgIHVybDogJ2h0dHBzOi8vYXBwLnRlYW0tZ3B0LmNvbS8nLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAxMScsXG4gICAgc2VjdGlvbjogJ3RvZG8nLFxuICAgIHRpdGxlOiAnSW5zdGFsbCBDYWxlbmRhciBwbHVnaW4gb24gU2xhY2snLFxuICAgIHVybDogJ2h0dHBzOi8vc2xhY2suY29tL2FwcHMvQTAxRktDRTJROFEtZ29vZ2xlLWNhbGVuZGFyJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMTInLFxuICAgIHNlY3Rpb246ICd0b2RvJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgQmFja2dyb3VuZCBmb3IgTWVldGluZ3MnLFxuICAgIHVybDogJ2h0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9kcml2ZS9mb2xkZXJzL1BMQUNFSE9MREVSJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMTMnLFxuICAgIHNlY3Rpb246ICd0b2RvJyxcbiAgICB0aXRsZTogJ0NyZWF0ZSBhIFBhc3Nib2x0IEFjY291bnQnLFxuICAgIHVybDogJ2h0dHBzOi8vcGFzc2JvbHQuY3VyYWNlbC5jby8nLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAxNCcsXG4gICAgc2VjdGlvbjogJ3RvZG8nLFxuICAgIHRpdGxlOiAnUGVyZm9ybWFuY2UgU2hlZXQnLFxuICAgIHVybDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL1BMQUNFSE9MREVSJyxcbiAgICBub3RlczogJ21ha2UgYSBjb3B5IGZvciB5b3Vyc2VsZicsXG4gIH0sXG5cbiAgLy8gVG8gUmVhZCBzZWN0aW9uXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDE1JyxcbiAgICBzZWN0aW9uOiAndG9fcmVhZCcsXG4gICAgdGl0bGU6ICc0NyBIYWJpdHMgb2YgaGlnaGx5IHN1Y2Nlc3NmdWxseSBlbXBsb3llZXMnLFxuICAgIHVybDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvUExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAxNicsXG4gICAgc2VjdGlvbjogJ3RvX3JlYWQnLFxuICAgIHRpdGxlOiAnQUkvTUwgVGVybWlub2xvZ2llcycsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDE3JyxcbiAgICBzZWN0aW9uOiAndG9fcmVhZCcsXG4gICAgdGl0bGU6ICdDdXJhY2VsIFZhbHVlcycsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDE4JyxcbiAgICBzZWN0aW9uOiAndG9fcmVhZCcsXG4gICAgdGl0bGU6ICdFbXBsb3llZSBIYW5kYm9vaycsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDE5JyxcbiAgICBzZWN0aW9uOiAndG9fcmVhZCcsXG4gICAgdGl0bGU6ICdDdXJhY2VsIE9yZ2Fub2dyYW0nLFxuICAgIHVybDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvUExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAyMCcsXG4gICAgc2VjdGlvbjogJ3RvX3JlYWQnLFxuICAgIHRpdGxlOiAnQUkgTWFuaWZlc3RvJyxcbiAgICB1cmw6ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kL1BMQUNFSE9MREVSJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMjEnLFxuICAgIHNlY3Rpb246ICd0b19yZWFkJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgMjAyNSBPS1JzICYgS1BJcycsXG4gICAgdXJsOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZG9jdW1lbnQvZC9QTEFDRUhPTERFUicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDIyJyxcbiAgICBzZWN0aW9uOiAndG9fcmVhZCcsXG4gICAgdGl0bGU6ICdDdXJhY2VsIFByb2R1Y3QgUFJEJyxcbiAgICB1cmw6ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kL1BMQUNFSE9MREVSJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMjMnLFxuICAgIHNlY3Rpb246ICd0b19yZWFkJyxcbiAgICB0aXRsZTogJ0FJIENvbXBldGVuY3kgRnJhbWV3b3JrJyxcbiAgICB1cmw6ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kL1BMQUNFSE9MREVSJyxcbiAgfSxcblxuICAvLyBUbyBXYXRjaCBzZWN0aW9uXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDI0JyxcbiAgICBzZWN0aW9uOiAndG9fd2F0Y2gnLFxuICAgIHRpdGxlOiAnU3RhcnQgd2l0aCBXaHkgLSBTaW1vbiBTaW5laycsXG4gICAgdXJsOiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj11NFpvSktGX1Z1QScsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDI1JyxcbiAgICBzZWN0aW9uOiAndG9fd2F0Y2gnLFxuICAgIHRpdGxlOiAnV2h5IHRoZSBzZWNyZXQgdG8gc3VjY2VzcyBpcyBzZXR0aW5nIHRoZSByaWdodCBnb2FscyAtIEpvaG4gRG9lcnInLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9TDROMXE0Uk5pOUknLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAyNicsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ1Bhc3Nib2x0IFR1dG9yaWFsJyxcbiAgICB1cmw6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVBMQUNFSE9MREVSJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMjcnLFxuICAgIHNlY3Rpb246ICd0b193YXRjaCcsXG4gICAgdGl0bGU6ICdDdXJhY2VsIEhlYWx0aCBEZXRlY3Rpb24nLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAyOCcsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgSGVhbHRoIENvbGxlY3Rpb24nLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAyOScsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgUGF5JyxcbiAgICB1cmw6ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVBMQUNFSE9MREVSJyxcbiAgfSxcbiAge1xuICAgIGlkOiAndGFza18wMzAnLFxuICAgIHNlY3Rpb246ICd0b193YXRjaCcsXG4gICAgdGl0bGU6ICdDdXJhY2VsIEdyb3cnLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAzMScsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgQXV0byBDdXN0b21lciBBcHAnLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAzMicsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ0N1cmFjZWwgQXV0byBJbnN1cmVyIERhc2hib2FyZCcsXG4gICAgdXJsOiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1QTEFDRUhPTERFUicsXG4gIH0sXG4gIHtcbiAgICBpZDogJ3Rhc2tfMDMzJyxcbiAgICBzZWN0aW9uOiAndG9fd2F0Y2gnLFxuICAgIHRpdGxlOiAnSG93IHRvIHVzZSBHb29nbGUgRHJpdmUnLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuICB7XG4gICAgaWQ6ICd0YXNrXzAzNCcsXG4gICAgc2VjdGlvbjogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ0hvdyB0byBjcmVhdGUgc2hvcnRjdXQnLFxuICAgIHVybDogJ2h0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9UExBQ0VIT0xERVInLFxuICB9LFxuXVxuXG5leHBvcnQgY29uc3QgVEFTS19TRUNUSU9OUyA9IHtcbiAgdG9kbzoge1xuICAgIGlkOiAndG9kbycsXG4gICAgdGl0bGU6ICdUbyBEbycsXG4gICAgZGVzY3JpcHRpb246ICdBY3Rpb24gaXRlbXMgdG8gY29tcGxldGUnLFxuICB9LFxuICB0b19yZWFkOiB7XG4gICAgaWQ6ICd0b19yZWFkJyxcbiAgICB0aXRsZTogJ1RvIFJlYWQnLFxuICAgIGRlc2NyaXB0aW9uOiAnRG9jdW1lbnRzIGFuZCByZXNvdXJjZXMgdG8gcmV2aWV3JyxcbiAgfSxcbiAgdG9fd2F0Y2g6IHtcbiAgICBpZDogJ3RvX3dhdGNoJyxcbiAgICB0aXRsZTogJ1RvIFdhdGNoJyxcbiAgICBkZXNjcmlwdGlvbjogJ1ZpZGVvcyBhbmQgdHV0b3JpYWxzIHRvIHdhdGNoJyxcbiAgfSxcbn0gYXMgY29uc3RcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tzQnlTZWN0aW9uKHNlY3Rpb246IE9uYm9hcmRpbmdUYXNrWydzZWN0aW9uJ10pOiBPbmJvYXJkaW5nVGFza1tdIHtcbiAgcmV0dXJuIE9OQk9BUkRJTkdfVEFTS1MuZmlsdGVyKHRhc2sgPT4gdGFzay5zZWN0aW9uID09PSBzZWN0aW9uKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFza0J5SWQoaWQ6IHN0cmluZyk6IE9uYm9hcmRpbmdUYXNrIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIE9OQk9BUkRJTkdfVEFTS1MuZmluZCh0YXNrID0+IHRhc2suaWQgPT09IGlkKVxufVxuXG4vLyBQaGFzZSAyOiBUYXNrIHByb2dyZXNzIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tQcm9ncmVzcyB7XG4gIHRhc2tJZDogc3RyaW5nXG4gIHVzZXJJZDogc3RyaW5nXG4gIHN0YXR1czogJ25vdF9zdGFydGVkJyB8ICdpbl9wcm9ncmVzcycgfCAnY29tcGxldGVkJ1xuICB1cGRhdGVkQXQ/OiBzdHJpbmdcbn1cblxuLy8gVE9ETzogV2hlbiBjaGF0Ym90IHdyaXRlcyB0YXNrLWxldmVsIGNvbXBsZXRpb24sIHRoaXMgZnVuY3Rpb24gd2lsbCBmZXRjaCByZWFsIHByb2dyZXNzXG4vLyBGb3Igbm93LCByZXR1cm5zIFwibm90IHRyYWNrZWRcIiBmb3IgYWxsIHRhc2tzXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFza1Byb2dyZXNzRm9yVXNlcihfdXNlcklkOiBzdHJpbmcpOiBNYXA8c3RyaW5nLCBUYXNrUHJvZ3Jlc3M+IHtcbiAgLy8gUGhhc2UgMjogRmV0Y2ggZnJvbSBUYXNrIFByb2dyZXNzIHNoZWV0XG4gIC8vIEZvciBNVlAsIHJldHVybiBlbXB0eSBtYXAgKGFsbCB0YXNrcyBzaG93IFwiTm90IHRyYWNrZWQgeWV0XCIpXG4gIHJldHVybiBuZXcgTWFwKClcbn1cbiJdLCJuYW1lcyI6WyJPTkJPQVJESU5HX1RBU0tTIiwiaWQiLCJzZWN0aW9uIiwidGl0bGUiLCJ1cmwiLCJub3RlcyIsImlzQ29uZGl0aW9uYWwiLCJjb25kaXRpb25hbExhYmVsIiwiYXBwbGllc1RvIiwiVEFTS19TRUNUSU9OUyIsInRvZG8iLCJkZXNjcmlwdGlvbiIsInRvX3JlYWQiLCJ0b193YXRjaCIsImdldFRhc2tzQnlTZWN0aW9uIiwiZmlsdGVyIiwidGFzayIsImdldFRhc2tCeUlkIiwiZmluZCIsImdldFRhc2tQcm9ncmVzc0ZvclVzZXIiLCJfdXNlcklkIiwiTWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/onboarding-tasks.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/organization.ts":
/*!*********************************!*\
  !*** ./src/lib/organization.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrganization: () => (/* binding */ getOrganization),\n/* harmony export */   getOrganizationName: () => (/* binding */ getOrganizationName)\n/* harmony export */ });\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _letterhead__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./letterhead */ \"(rsc)/./src/lib/letterhead.ts\");\n\n\nconst organizationSelect = {\n    id: true,\n    name: true,\n    logoUrl: true,\n    letterheadEmail: true,\n    letterheadWebsite: true,\n    letterheadPhone: true,\n    letterheadAddress: true\n};\nfunction computeDefaultLetterhead() {\n    const companyDomain = (process.env.COMPANY_DOMAIN ?? \"\").trim();\n    const envEmail = (0,_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeEmailForStorage)(process.env.COMPANY_EMAIL);\n    const envWebsite = (0,_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeWebsiteForStorage)(process.env.COMPANY_WEBSITE);\n    const envPhone = (0,_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizePhoneForStorage)(process.env.COMPANY_PHONE);\n    const envAddress = (0,_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeAddressForStorage)(process.env.COMPANY_ADDRESS);\n    const defaultEmail = envEmail ?? (companyDomain ? `info@${companyDomain}` : null);\n    const defaultWebsite = envWebsite ?? (companyDomain ? `https://${companyDomain}` : null);\n    return {\n        letterheadEmail: defaultEmail,\n        letterheadWebsite: defaultWebsite,\n        letterheadPhone: envPhone,\n        letterheadAddress: envAddress\n    };\n}\nasync function ensureOrganizationLetterhead(org) {\n    const defaults = computeDefaultLetterhead();\n    const needsEmail = !org.letterheadEmail && defaults.letterheadEmail;\n    const needsWebsite = !org.letterheadWebsite && defaults.letterheadWebsite;\n    const needsPhone = !org.letterheadPhone && defaults.letterheadPhone;\n    const needsAddress = !org.letterheadAddress && defaults.letterheadAddress;\n    if (!needsEmail && !needsWebsite && !needsPhone && !needsAddress) return org;\n    return _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.organization.update({\n        where: {\n            id: org.id\n        },\n        data: {\n            ...needsEmail ? {\n                letterheadEmail: defaults.letterheadEmail\n            } : {},\n            ...needsWebsite ? {\n                letterheadWebsite: defaults.letterheadWebsite\n            } : {},\n            ...needsPhone ? {\n                letterheadPhone: defaults.letterheadPhone\n            } : {},\n            ...needsAddress ? {\n                letterheadAddress: defaults.letterheadAddress\n            } : {}\n        },\n        select: organizationSelect\n    });\n}\nasync function getOrganization() {\n    let org = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.organization.findFirst({\n        select: organizationSelect\n    });\n    if (!org) {\n        // Create default organization\n        org = await _prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.organization.create({\n            data: {\n                name: process.env.COMPANY_NAME || \"Curacel\",\n                oneSentenceDescription: process.env.COMPANY_NAME ? `${process.env.COMPANY_NAME} is an insurtech infrastructure company that helps insurers & partners in Africa and other emerging.` : null,\n                careerPageUrl: process.env.COMPANY_DOMAIN ? `https://curacel.ai/careers/${process.env.COMPANY_DOMAIN}` : null,\n                ...computeDefaultLetterhead()\n            },\n            select: organizationSelect\n        });\n    }\n    return ensureOrganizationLetterhead(org);\n}\nasync function getOrganizationName() {\n    const org = await getOrganization();\n    return org.name;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDakk7Z0JBQ0pFLGVBQWUvQixRQUFRQyxHQUFHLENBQUNDLGNBQWMsR0FDckMsQ0FBQywyQkFBMkIsRUFBRUYsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLENBQUMsQ0FBQyxHQUMxRDtnQkFDSixHQUFHSiwwQkFBMEI7WUFDL0I7WUFDQTJCLFFBQVFuQztRQUNWO0lBQ0Y7SUFFQSxPQUFPd0IsNkJBQTZCQztBQUN0QztBQUVPLGVBQWVpQjtJQUNwQixNQUFNakIsTUFBTSxNQUFNVztJQUNsQixPQUFPWCxJQUFJdkIsSUFBSTtBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL2xpYi9vcmdhbml6YXRpb24udHM/MWRkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuL3ByaXNtYSdcbmltcG9ydCB7XG4gIG5vcm1hbGl6ZUFkZHJlc3NGb3JTdG9yYWdlLFxuICBub3JtYWxpemVFbWFpbEZvclN0b3JhZ2UsXG4gIG5vcm1hbGl6ZVBob25lRm9yU3RvcmFnZSxcbiAgbm9ybWFsaXplV2Vic2l0ZUZvclN0b3JhZ2UsXG59IGZyb20gJy4vbGV0dGVyaGVhZCdcblxuY29uc3Qgb3JnYW5pemF0aW9uU2VsZWN0ID0ge1xuICBpZDogdHJ1ZSxcbiAgbmFtZTogdHJ1ZSxcbiAgbG9nb1VybDogdHJ1ZSxcbiAgbGV0dGVyaGVhZEVtYWlsOiB0cnVlLFxuICBsZXR0ZXJoZWFkV2Vic2l0ZTogdHJ1ZSxcbiAgbGV0dGVyaGVhZFBob25lOiB0cnVlLFxuICBsZXR0ZXJoZWFkQWRkcmVzczogdHJ1ZSxcbn0gYXMgY29uc3RcblxuZXhwb3J0IHR5cGUgT3JnYW5pemF0aW9uRm9yTGV0dGVyaGVhZCA9IHtcbiAgaWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgbG9nb1VybDogc3RyaW5nIHwgbnVsbFxuICBsZXR0ZXJoZWFkRW1haWw6IHN0cmluZyB8IG51bGxcbiAgbGV0dGVyaGVhZFdlYnNpdGU6IHN0cmluZyB8IG51bGxcbiAgbGV0dGVyaGVhZFBob25lOiBzdHJpbmcgfCBudWxsXG4gIGxldHRlcmhlYWRBZGRyZXNzOiBzdHJpbmcgfCBudWxsXG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVEZWZhdWx0TGV0dGVyaGVhZCgpIHtcbiAgY29uc3QgY29tcGFueURvbWFpbiA9IChwcm9jZXNzLmVudi5DT01QQU5ZX0RPTUFJTiA/PyAnJykudHJpbSgpXG5cbiAgY29uc3QgZW52RW1haWwgPSBub3JtYWxpemVFbWFpbEZvclN0b3JhZ2UocHJvY2Vzcy5lbnYuQ09NUEFOWV9FTUFJTClcbiAgY29uc3QgZW52V2Vic2l0ZSA9IG5vcm1hbGl6ZVdlYnNpdGVGb3JTdG9yYWdlKHByb2Nlc3MuZW52LkNPTVBBTllfV0VCU0lURSlcbiAgY29uc3QgZW52UGhvbmUgPSBub3JtYWxpemVQaG9uZUZvclN0b3JhZ2UocHJvY2Vzcy5lbnYuQ09NUEFOWV9QSE9ORSlcbiAgY29uc3QgZW52QWRkcmVzcyA9IG5vcm1hbGl6ZUFkZHJlc3NGb3JTdG9yYWdlKHByb2Nlc3MuZW52LkNPTVBBTllfQUREUkVTUylcblxuICBjb25zdCBkZWZhdWx0RW1haWwgPSBlbnZFbWFpbCA/PyAoY29tcGFueURvbWFpbiA/IGBpbmZvQCR7Y29tcGFueURvbWFpbn1gIDogbnVsbClcbiAgY29uc3QgZGVmYXVsdFdlYnNpdGUgPSBlbnZXZWJzaXRlID8/IChjb21wYW55RG9tYWluID8gYGh0dHBzOi8vJHtjb21wYW55RG9tYWlufWAgOiBudWxsKVxuXG4gIHJldHVybiB7XG4gICAgbGV0dGVyaGVhZEVtYWlsOiBkZWZhdWx0RW1haWwsXG4gICAgbGV0dGVyaGVhZFdlYnNpdGU6IGRlZmF1bHRXZWJzaXRlLFxuICAgIGxldHRlcmhlYWRQaG9uZTogZW52UGhvbmUsXG4gICAgbGV0dGVyaGVhZEFkZHJlc3M6IGVudkFkZHJlc3MsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlT3JnYW5pemF0aW9uTGV0dGVyaGVhZChvcmc6IE9yZ2FuaXphdGlvbkZvckxldHRlcmhlYWQpOiBQcm9taXNlPE9yZ2FuaXphdGlvbkZvckxldHRlcmhlYWQ+IHtcbiAgY29uc3QgZGVmYXVsdHMgPSBjb21wdXRlRGVmYXVsdExldHRlcmhlYWQoKVxuXG4gIGNvbnN0IG5lZWRzRW1haWwgPSAhb3JnLmxldHRlcmhlYWRFbWFpbCAmJiBkZWZhdWx0cy5sZXR0ZXJoZWFkRW1haWxcbiAgY29uc3QgbmVlZHNXZWJzaXRlID0gIW9yZy5sZXR0ZXJoZWFkV2Vic2l0ZSAmJiBkZWZhdWx0cy5sZXR0ZXJoZWFkV2Vic2l0ZVxuICBjb25zdCBuZWVkc1Bob25lID0gIW9yZy5sZXR0ZXJoZWFkUGhvbmUgJiYgZGVmYXVsdHMubGV0dGVyaGVhZFBob25lXG4gIGNvbnN0IG5lZWRzQWRkcmVzcyA9ICFvcmcubGV0dGVyaGVhZEFkZHJlc3MgJiYgZGVmYXVsdHMubGV0dGVyaGVhZEFkZHJlc3NcblxuICBpZiAoIW5lZWRzRW1haWwgJiYgIW5lZWRzV2Vic2l0ZSAmJiAhbmVlZHNQaG9uZSAmJiAhbmVlZHNBZGRyZXNzKSByZXR1cm4gb3JnXG5cbiAgcmV0dXJuIHByaXNtYS5vcmdhbml6YXRpb24udXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogb3JnLmlkIH0sXG4gICAgZGF0YToge1xuICAgICAgLi4uKG5lZWRzRW1haWwgPyB7IGxldHRlcmhlYWRFbWFpbDogZGVmYXVsdHMubGV0dGVyaGVhZEVtYWlsIH0gOiB7fSksXG4gICAgICAuLi4obmVlZHNXZWJzaXRlID8geyBsZXR0ZXJoZWFkV2Vic2l0ZTogZGVmYXVsdHMubGV0dGVyaGVhZFdlYnNpdGUgfSA6IHt9KSxcbiAgICAgIC4uLihuZWVkc1Bob25lID8geyBsZXR0ZXJoZWFkUGhvbmU6IGRlZmF1bHRzLmxldHRlcmhlYWRQaG9uZSB9IDoge30pLFxuICAgICAgLi4uKG5lZWRzQWRkcmVzcyA/IHsgbGV0dGVyaGVhZEFkZHJlc3M6IGRlZmF1bHRzLmxldHRlcmhlYWRBZGRyZXNzIH0gOiB7fSksXG4gICAgfSxcbiAgICBzZWxlY3Q6IG9yZ2FuaXphdGlvblNlbGVjdCxcbiAgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yZ2FuaXphdGlvbigpOiBQcm9taXNlPE9yZ2FuaXphdGlvbkZvckxldHRlcmhlYWQ+IHtcbiAgbGV0IG9yZyA9IGF3YWl0IHByaXNtYS5vcmdhbml6YXRpb24uZmluZEZpcnN0KHsgc2VsZWN0OiBvcmdhbml6YXRpb25TZWxlY3QgfSlcbiAgXG4gIGlmICghb3JnKSB7XG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgb3JnYW5pemF0aW9uXG4gICAgb3JnID0gYXdhaXQgcHJpc21hLm9yZ2FuaXphdGlvbi5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBuYW1lOiBwcm9jZXNzLmVudi5DT01QQU5ZX05BTUUgfHwgJ0N1cmFjZWwnLFxuICAgICAgICBvbmVTZW50ZW5jZURlc2NyaXB0aW9uOiBwcm9jZXNzLmVudi5DT01QQU5ZX05BTUUgXG4gICAgICAgICAgPyBgJHtwcm9jZXNzLmVudi5DT01QQU5ZX05BTUV9IGlzIGFuIGluc3VydGVjaCBpbmZyYXN0cnVjdHVyZSBjb21wYW55IHRoYXQgaGVscHMgaW5zdXJlcnMgJiBwYXJ0bmVycyBpbiBBZnJpY2EgYW5kIG90aGVyIGVtZXJnaW5nLmBcbiAgICAgICAgICA6IG51bGwsXG4gICAgICAgIGNhcmVlclBhZ2VVcmw6IHByb2Nlc3MuZW52LkNPTVBBTllfRE9NQUlOIFxuICAgICAgICAgID8gYGh0dHBzOi8vY3VyYWNlbC5haS9jYXJlZXJzLyR7cHJvY2Vzcy5lbnYuQ09NUEFOWV9ET01BSU59YFxuICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgLi4uY29tcHV0ZURlZmF1bHRMZXR0ZXJoZWFkKCksXG4gICAgICB9LFxuICAgICAgc2VsZWN0OiBvcmdhbml6YXRpb25TZWxlY3QsXG4gICAgfSlcbiAgfVxuICBcbiAgcmV0dXJuIGVuc3VyZU9yZ2FuaXphdGlvbkxldHRlcmhlYWQob3JnKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JnYW5pemF0aW9uTmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBvcmcgPSBhd2FpdCBnZXRPcmdhbml6YXRpb24oKVxuICByZXR1cm4gb3JnLm5hbWVcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJub3JtYWxpemVBZGRyZXNzRm9yU3RvcmFnZSIsIm5vcm1hbGl6ZUVtYWlsRm9yU3RvcmFnZSIsIm5vcm1hbGl6ZVBob25lRm9yU3RvcmFnZSIsIm5vcm1hbGl6ZVdlYnNpdGVGb3JTdG9yYWdlIiwib3JnYW5pemF0aW9uU2VsZWN0IiwiaWQiLCJuYW1lIiwibG9nb1VybCIsImxldHRlcmhlYWRFbWFpbCIsImxldHRlcmhlYWRXZWJzaXRlIiwibGV0dGVyaGVhZFBob25lIiwibGV0dGVyaGVhZEFkZHJlc3MiLCJjb21wdXRlRGVmYXVsdExldHRlcmhlYWQiLCJjb21wYW55RG9tYWluIiwicHJvY2VzcyIsImVudiIsIkNPTVBBTllfRE9NQUlOIiwidHJpbSIsImVudkVtYWlsIiwiQ09NUEFOWV9FTUFJTCIsImVudldlYnNpdGUiLCJDT01QQU5ZX1dFQlNJVEUiLCJlbnZQaG9uZSIsIkNPTVBBTllfUEhPTkUiLCJlbnZBZGRyZXNzIiwiQ09NUEFOWV9BRERSRVNTIiwiZGVmYXVsdEVtYWlsIiwiZGVmYXVsdFdlYnNpdGUiLCJlbnN1cmVPcmdhbml6YXRpb25MZXR0ZXJoZWFkIiwib3JnIiwiZGVmYXVsdHMiLCJuZWVkc0VtYWlsIiwibmVlZHNXZWJzaXRlIiwibmVlZHNQaG9uZSIsIm5lZWRzQWRkcmVzcyIsIm9yZ2FuaXphdGlvbiIsInVwZGF0ZSIsIndoZXJlIiwiZGF0YSIsInNlbGVjdCIsImdldE9yZ2FuaXphdGlvbiIsImZpbmRGaXJzdCIsImNyZWF0ZSIsIkNPTVBBTllfTkFNRSIsIm9uZVNlbnRlbmNlRGVzY3JpcHRpb24iLCJjYXJlZXJQYWdlVXJsIiwiZ2V0T3JnYW5pemF0aW9uTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/organization.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/password.ts":
/*!*****************************!*\
  !*** ./src/lib/password.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function hashPassword(password) {\n    const saltRounds = 12;\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, saltRounds);\n}\nasync function verifyPassword(params) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(params.password, params.passwordHash);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Bhc3N3b3JkLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkI7QUFFdEIsZUFBZUMsYUFBYUMsUUFBZ0I7SUFDakQsTUFBTUMsYUFBYTtJQUNuQixPQUFPSCxvREFBVyxDQUFDRSxVQUFVQztBQUMvQjtBQUVPLGVBQWVFLGVBQWVDLE1BR3BDO0lBQ0MsT0FBT04sdURBQWMsQ0FBQ00sT0FBT0osUUFBUSxFQUFFSSxPQUFPRSxZQUFZO0FBQzVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvbGliL3Bhc3N3b3JkLnRzPzA5MDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEyXG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcylcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhcmFtczoge1xuICBwYXNzd29yZDogc3RyaW5nXG4gIHBhc3N3b3JkSGFzaDogc3RyaW5nXG59KTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXJhbXMucGFzc3dvcmQsIHBhcmFtcy5wYXNzd29yZEhhc2gpXG59XG5cbiJdLCJuYW1lcyI6WyJiY3J5cHQiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsInNhbHRSb3VuZHMiLCJoYXNoIiwidmVyaWZ5UGFzc3dvcmQiLCJwYXJhbXMiLCJjb21wYXJlIiwicGFzc3dvcmRIYXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/password.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/pdf.ts":
/*!************************!*\
  !*** ./src/lib/pdf.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderHtmlToPdfBuffer: () => (/* binding */ renderHtmlToPdfBuffer)\n/* harmony export */ });\n/* harmony import */ var html_pdf_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! html-pdf-node */ \"(rsc)/./node_modules/html-pdf-node/index.js\");\n/* harmony import */ var html_pdf_node__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(html_pdf_node__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function renderHtmlToPdfBuffer(html) {\n    const file = {\n        content: html\n    };\n    const buffer = await html_pdf_node__WEBPACK_IMPORTED_MODULE_0___default().generatePdf(file, {\n        format: \"A4\",\n        margin: {\n            top: \"20mm\",\n            bottom: \"20mm\",\n            left: \"15mm\",\n            right: \"15mm\"\n        }\n    });\n    return buffer;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3BkZi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFFOUIsZUFBZUMsc0JBQXNCQyxJQUFZO0lBQ3RELE1BQU1DLE9BQU87UUFBRUMsU0FBU0Y7SUFBSztJQUM3QixNQUFNRyxTQUFTLE1BQU1MLGdFQUFxQixDQUFDRyxNQUFNO1FBQy9DSSxRQUFRO1FBQ1JDLFFBQVE7WUFBRUMsS0FBSztZQUFRQyxRQUFRO1lBQVFDLE1BQU07WUFBUUMsT0FBTztRQUFPO0lBQ3JFO0lBQ0EsT0FBT1A7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL2xpYi9wZGYudHM/NWUyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaHRtbFRvUGRmIGZyb20gJ2h0bWwtcGRmLW5vZGUnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJIdG1sVG9QZGZCdWZmZXIoaHRtbDogc3RyaW5nKTogUHJvbWlzZTxCdWZmZXI+IHtcbiAgY29uc3QgZmlsZSA9IHsgY29udGVudDogaHRtbCB9XG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGh0bWxUb1BkZi5nZW5lcmF0ZVBkZihmaWxlLCB7XG4gICAgZm9ybWF0OiAnQTQnLFxuICAgIG1hcmdpbjogeyB0b3A6ICcyMG1tJywgYm90dG9tOiAnMjBtbScsIGxlZnQ6ICcxNW1tJywgcmlnaHQ6ICcxNW1tJyB9LFxuICB9KVxuICByZXR1cm4gYnVmZmVyXG59XG5cbiJdLCJuYW1lcyI6WyJodG1sVG9QZGYiLCJyZW5kZXJIdG1sVG9QZGZCdWZmZXIiLCJodG1sIiwiZmlsZSIsImNvbnRlbnQiLCJidWZmZXIiLCJnZW5lcmF0ZVBkZiIsImZvcm1hdCIsIm1hcmdpbiIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/pdf.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZDO0FBRTdDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUtDLEtBQXlCLEdBQWdCO1FBQUM7UUFBUztRQUFTO0tBQU8sR0FBRyxDQUFTO0FBQ3RGLEdBQUU7QUFFSixJQUFJQSxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsaUVBQWVBLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSA6IFsnZXJyb3InXSxcbiAgfSlcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcblxuZXhwb3J0IGRlZmF1bHQgcHJpc21hXG5cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/trpc.ts":
/*!*************************!*\
  !*** ./src/lib/trpc.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminProcedure: () => (/* binding */ adminProcedure),\n/* harmony export */   createContext: () => (/* binding */ createContext),\n/* harmony export */   hrAdminProcedure: () => (/* binding */ hrAdminProcedure),\n/* harmony export */   itAdminProcedure: () => (/* binding */ itAdminProcedure),\n/* harmony export */   managerProcedure: () => (/* binding */ managerProcedure),\n/* harmony export */   middleware: () => (/* binding */ middleware),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure),\n/* harmony export */   router: () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/initTRPC-DGaJyg8t.mjs\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! superjson */ \"(rsc)/./node_modules/superjson/dist/index.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _app_api_auth_nextauth_auth_options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/api/auth/[...nextauth]/auth-options */ \"(rsc)/./src/app/api/auth/[...nextauth]/auth-options.ts\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\n\n\nasync function createContext() {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(_app_api_auth_nextauth_auth_options__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n    return {\n        prisma: _prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n        session,\n        user: session?.user\n    };\n}\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_4__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    errorFormatter ({ shape, error }) {\n        return {\n            ...shape,\n            data: {\n                ...shape.data,\n                zodError: error.cause instanceof zod__WEBPACK_IMPORTED_MODULE_5__.ZodError ? error.cause.flatten() : null\n            }\n        };\n    }\n});\nconst router = t.router;\nconst publicProcedure = t.procedure;\nconst middleware = t.middleware;\n// Auth middleware\nconst isAuthed = middleware(async ({ ctx, next })=>{\n    if (!ctx.session || !ctx.user) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const user = await ctx.prisma.user.findUnique({\n        where: {\n            email: ctx.user.email\n        },\n        include: {\n            employee: true\n        }\n    });\n    if (!user) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    return next({\n        ctx: {\n            ...ctx,\n            user: {\n                ...ctx.user,\n                id: user.id,\n                role: user.role,\n                employeeId: user.employeeId,\n                employee: user.employee\n            }\n        }\n    });\n});\nconst protectedProcedure = t.procedure.use(isAuthed);\n// Role-based middleware\nconst hasRole = (allowedRoles)=>middleware(async ({ ctx, next })=>{\n        if (!ctx.session || !ctx.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: \"UNAUTHORIZED\"\n            });\n        }\n        const user = await ctx.prisma.user.findUnique({\n            where: {\n                email: ctx.user.email\n            }\n        });\n        if (!user || !allowedRoles.includes(user.role)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"You do not have permission to perform this action\"\n            });\n        }\n        return next({\n            ctx: {\n                ...ctx,\n                user: {\n                    ...ctx.user,\n                    id: user.id,\n                    role: user.role,\n                    employeeId: user.employeeId\n                }\n            }\n        });\n    });\nconst hrAdminProcedure = t.procedure.use(hasRole([\n    \"SUPER_ADMIN\",\n    \"HR_ADMIN\"\n]));\nconst itAdminProcedure = t.procedure.use(hasRole([\n    \"SUPER_ADMIN\",\n    \"IT_ADMIN\"\n]));\nconst adminProcedure = t.procedure.use(hasRole([\n    \"SUPER_ADMIN\",\n    \"HR_ADMIN\",\n    \"IT_ADMIN\"\n]));\nconst managerProcedure = t.procedure.use(hasRole([\n    \"SUPER_ADMIN\",\n    \"HR_ADMIN\",\n    \"MANAGER\"\n]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDWEMsTUFBTTFCLEtBQUswQixJQUFJO29CQUNmQyxZQUFZM0IsS0FBSzJCLFVBQVU7Z0JBQzdCO1lBQ0Y7UUFDRjtJQUNGO0FBRUssTUFBTU8sbUJBQW1CakMsRUFBRWEsU0FBUyxDQUFDZSxHQUFHLENBQUNDLFFBQVE7SUFBQztJQUFlO0NBQVcsR0FBRTtBQUM5RSxNQUFNSyxtQkFBbUJsQyxFQUFFYSxTQUFTLENBQUNlLEdBQUcsQ0FBQ0MsUUFBUTtJQUFDO0lBQWU7Q0FBVyxHQUFFO0FBQzlFLE1BQU1NLGlCQUFpQm5DLEVBQUVhLFNBQVMsQ0FBQ2UsR0FBRyxDQUFDQyxRQUFRO0lBQUM7SUFBZTtJQUFZO0NBQVcsR0FBRTtBQUN4RixNQUFNTyxtQkFBbUJwQyxFQUFFYSxTQUFTLENBQUNlLEdBQUcsQ0FBQ0MsUUFBUTtJQUFDO0lBQWU7SUFBWTtDQUFVLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvdHJwYy50cz82OWM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRUUlBDLCBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJ1xuaW1wb3J0IHN1cGVyanNvbiBmcm9tICdzdXBlcmpzb24nXG5pbXBvcnQgeyBab2RFcnJvciB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9hdXRoLW9wdGlvbnMnXG5pbXBvcnQgcHJpc21hIGZyb20gJy4vcHJpc21hJ1xuaW1wb3J0IHR5cGUgeyBSb2xlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDb250ZXh0KCkge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcblxuICByZXR1cm4ge1xuICAgIHByaXNtYSxcbiAgICBzZXNzaW9uLFxuICAgIHVzZXI6IHNlc3Npb24/LnVzZXIsXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgQ29udGV4dCA9IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ29udGV4dD4+XG5cbmNvbnN0IHQgPSBpbml0VFJQQy5jb250ZXh0PENvbnRleHQ+KCkuY3JlYXRlKHtcbiAgdHJhbnNmb3JtZXI6IHN1cGVyanNvbixcbiAgZXJyb3JGb3JtYXR0ZXIoeyBzaGFwZSwgZXJyb3IgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zaGFwZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgLi4uc2hhcGUuZGF0YSxcbiAgICAgICAgem9kRXJyb3I6XG4gICAgICAgICAgZXJyb3IuY2F1c2UgaW5zdGFuY2VvZiBab2RFcnJvciA/IGVycm9yLmNhdXNlLmZsYXR0ZW4oKSA6IG51bGwsXG4gICAgICB9LFxuICAgIH1cbiAgfSxcbn0pXG5cbmV4cG9ydCBjb25zdCByb3V0ZXIgPSB0LnJvdXRlclxuZXhwb3J0IGNvbnN0IHB1YmxpY1Byb2NlZHVyZSA9IHQucHJvY2VkdXJlXG5leHBvcnQgY29uc3QgbWlkZGxld2FyZSA9IHQubWlkZGxld2FyZVxuXG4vLyBBdXRoIG1pZGRsZXdhcmVcbmNvbnN0IGlzQXV0aGVkID0gbWlkZGxld2FyZShhc3luYyAoeyBjdHgsIG5leHQgfSkgPT4ge1xuICBpZiAoIWN0eC5zZXNzaW9uIHx8ICFjdHgudXNlcikge1xuICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KVxuICB9XG4gIFxuICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGVtYWlsOiBjdHgudXNlci5lbWFpbCEgfSxcbiAgICBpbmNsdWRlOiB7IGVtcGxveWVlOiB0cnVlIH0sXG4gIH0pXG4gIFxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSlcbiAgfVxuICBcbiAgcmV0dXJuIG5leHQoe1xuICAgIGN0eDoge1xuICAgICAgLi4uY3R4LFxuICAgICAgdXNlcjoge1xuICAgICAgICAuLi5jdHgudXNlcixcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgZW1wbG95ZWVJZDogdXNlci5lbXBsb3llZUlkLFxuICAgICAgICBlbXBsb3llZTogdXNlci5lbXBsb3llZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbn0pXG5cbmV4cG9ydCBjb25zdCBwcm90ZWN0ZWRQcm9jZWR1cmUgPSB0LnByb2NlZHVyZS51c2UoaXNBdXRoZWQpXG5cbi8vIFJvbGUtYmFzZWQgbWlkZGxld2FyZVxuY29uc3QgaGFzUm9sZSA9IChhbGxvd2VkUm9sZXM6IFJvbGVbXSkgPT5cbiAgbWlkZGxld2FyZShhc3luYyAoeyBjdHgsIG5leHQgfSkgPT4ge1xuICAgIGlmICghY3R4LnNlc3Npb24gfHwgIWN0eC51c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGN0eC5wcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiBjdHgudXNlci5lbWFpbCEgfSxcbiAgICB9KVxuICAgIFxuICAgIGlmICghdXNlciB8fCAhYWxsb3dlZFJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBcbiAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBwZXJmb3JtIHRoaXMgYWN0aW9uJyxcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIGN0eDoge1xuICAgICAgICAuLi5jdHgsXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAuLi5jdHgudXNlcixcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgICAgZW1wbG95ZWVJZDogdXNlci5lbXBsb3llZUlkLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KVxuICB9KVxuXG5leHBvcnQgY29uc3QgaHJBZG1pblByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShoYXNSb2xlKFsnU1VQRVJfQURNSU4nLCAnSFJfQURNSU4nXSkpXG5leHBvcnQgY29uc3QgaXRBZG1pblByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShoYXNSb2xlKFsnU1VQRVJfQURNSU4nLCAnSVRfQURNSU4nXSkpXG5leHBvcnQgY29uc3QgYWRtaW5Qcm9jZWR1cmUgPSB0LnByb2NlZHVyZS51c2UoaGFzUm9sZShbJ1NVUEVSX0FETUlOJywgJ0hSX0FETUlOJywgJ0lUX0FETUlOJ10pKVxuZXhwb3J0IGNvbnN0IG1hbmFnZXJQcm9jZWR1cmUgPSB0LnByb2NlZHVyZS51c2UoaGFzUm9sZShbJ1NVUEVSX0FETUlOJywgJ0hSX0FETUlOJywgJ01BTkFHRVInXSkpXG5cbiJdLCJuYW1lcyI6WyJpbml0VFJQQyIsIlRSUENFcnJvciIsImdldFNlcnZlclNlc3Npb24iLCJzdXBlcmpzb24iLCJab2RFcnJvciIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiY3JlYXRlQ29udGV4dCIsInNlc3Npb24iLCJ1c2VyIiwidCIsImNvbnRleHQiLCJjcmVhdGUiLCJ0cmFuc2Zvcm1lciIsImVycm9yRm9ybWF0dGVyIiwic2hhcGUiLCJlcnJvciIsImRhdGEiLCJ6b2RFcnJvciIsImNhdXNlIiwiZmxhdHRlbiIsInJvdXRlciIsInB1YmxpY1Byb2NlZHVyZSIsInByb2NlZHVyZSIsIm1pZGRsZXdhcmUiLCJpc0F1dGhlZCIsImN0eCIsIm5leHQiLCJjb2RlIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZW1haWwiLCJpbmNsdWRlIiwiZW1wbG95ZWUiLCJpZCIsInJvbGUiLCJlbXBsb3llZUlkIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwidXNlIiwiaGFzUm9sZSIsImFsbG93ZWRSb2xlcyIsImluY2x1ZGVzIiwibWVzc2FnZSIsImhyQWRtaW5Qcm9jZWR1cmUiLCJpdEFkbWluUHJvY2VkdXJlIiwiYWRtaW5Qcm9jZWR1cmUiLCJtYW5hZ2VyUHJvY2VkdXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/trpc.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   contractStatusColors: () => (/* binding */ contractStatusColors),\n/* harmony export */   contractStatusLabels: () => (/* binding */ contractStatusLabels),\n/* harmony export */   employeeStatusColors: () => (/* binding */ employeeStatusColors),\n/* harmony export */   employeeStatusLabels: () => (/* binding */ employeeStatusLabels),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   formatDateTime: () => (/* binding */ formatDateTime),\n/* harmony export */   generateTemporaryPassword: () => (/* binding */ generateTemporaryPassword),\n/* harmony export */   generateWorkEmail: () => (/* binding */ generateWorkEmail),\n/* harmony export */   getInitials: () => (/* binding */ getInitials),\n/* harmony export */   offerStatusColors: () => (/* binding */ offerStatusColors),\n/* harmony export */   offerStatusLabels: () => (/* binding */ offerStatusLabels),\n/* harmony export */   parseTemplateVariables: () => (/* binding */ parseTemplateVariables),\n/* harmony export */   renderTemplate: () => (/* binding */ renderTemplate),\n/* harmony export */   slugify: () => (/* binding */ slugify),\n/* harmony export */   taskStatusColors: () => (/* binding */ taskStatusColors),\n/* harmony export */   taskStatusLabels: () => (/* binding */ taskStatusLabels),\n/* harmony export */   truncate: () => (/* binding */ truncate)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\nfunction generateWorkEmail(fullName, domain) {\n    const nameParts = fullName.toLowerCase().trim().split(/\\s+/);\n    if (nameParts.length === 1) {\n        return `${nameParts[0]}@${domain}`;\n    }\n    const firstName = nameParts[0];\n    const lastName = nameParts[nameParts.length - 1];\n    return `${firstName}.${lastName}@${domain}`;\n}\nfunction generateTemporaryPassword() {\n    const chars = \"ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789\";\n    const specialChars = \"!@#$%&*\";\n    let password = \"\";\n    // 8 alphanumeric chars\n    for(let i = 0; i < 8; i++){\n        password += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    // Add 2 special chars\n    for(let i = 0; i < 2; i++){\n        password += specialChars.charAt(Math.floor(Math.random() * specialChars.length));\n    }\n    // Shuffle\n    return password.split(\"\").sort(()=>Math.random() - 0.5).join(\"\");\n}\nfunction formatCurrency(amount, currency = \"USD\") {\n    return new Intl.NumberFormat(\"en-US\", {\n        style: \"currency\",\n        currency\n    }).format(amount);\n}\nfunction formatDate(date, options) {\n    const d = typeof date === \"string\" ? new Date(date) : date;\n    return new Intl.DateTimeFormat(\"en-GB\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"2-digit\",\n        ...options\n    }).format(d);\n}\nfunction formatDateTime(date) {\n    const d = typeof date === \"string\" ? new Date(date) : date;\n    return new Intl.DateTimeFormat(\"en-GB\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"2-digit\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        hour12: false\n    }).format(d);\n}\nfunction slugify(text) {\n    return text.toLowerCase().replace(/[^\\w\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").trim();\n}\nfunction parseTemplateVariables(template) {\n    // Support both {variable} and %{variable} formats\n    const regex = /%?\\{(\\w+)\\}/g;\n    const variables = [];\n    let match;\n    while((match = regex.exec(template)) !== null){\n        if (!variables.includes(match[1])) {\n            variables.push(match[1]);\n        }\n    }\n    return variables;\n}\nfunction renderTemplate(template, variables) {\n    // Support both {variable} and %{variable} formats\n    return template.replace(/%?\\{(\\w+)\\}/g, (match, key)=>{\n        return variables[key] ?? match;\n    });\n}\nfunction getInitials(name) {\n    return name.split(\" \").map((part)=>part[0]).join(\"\").toUpperCase().slice(0, 2);\n}\nfunction truncate(str, length) {\n    if (str.length <= length) return str;\n    return str.slice(0, length) + \"...\";\n}\nconst employeeStatusLabels = {\n    CANDIDATE: \"Candidate\",\n    OFFER_SENT: \"Offer Sent\",\n    OFFER_SIGNED: \"Offer Signed\",\n    HIRED_PENDING_START: \"Pending Start\",\n    ACTIVE: \"Active\",\n    OFFBOARDING: \"Offboarding\",\n    EXITED: \"Exited\"\n};\nconst employeeStatusColors = {\n    CANDIDATE: \"bg-gray-100 text-gray-800\",\n    OFFER_SENT: \"bg-blue-100 text-blue-800\",\n    OFFER_SIGNED: \"bg-indigo-100 text-indigo-800\",\n    HIRED_PENDING_START: \"bg-purple-100 text-purple-800\",\n    ACTIVE: \"bg-green-100 text-green-800\",\n    OFFBOARDING: \"bg-orange-100 text-orange-800\",\n    EXITED: \"bg-red-100 text-red-800\"\n};\nconst offerStatusLabels = {\n    DRAFT: \"Draft\",\n    SENT: \"Sent\",\n    VIEWED: \"Viewed\",\n    SIGNED: \"Signed\",\n    DECLINED: \"Declined\",\n    EXPIRED: \"Expired\",\n    CANCELLED: \"Cancelled\"\n};\nconst offerStatusColors = {\n    DRAFT: \"bg-gray-100 text-gray-800\",\n    SENT: \"bg-blue-100 text-blue-800\",\n    VIEWED: \"bg-yellow-100 text-yellow-800\",\n    SIGNED: \"bg-green-100 text-green-800\",\n    DECLINED: \"bg-red-100 text-red-800\",\n    EXPIRED: \"bg-orange-100 text-orange-800\",\n    CANCELLED: \"bg-gray-100 text-gray-800\"\n};\n// Alias for contracts (same as offers)\nconst contractStatusLabels = offerStatusLabels;\nconst contractStatusColors = offerStatusColors;\nconst taskStatusLabels = {\n    PENDING: \"Pending\",\n    IN_PROGRESS: \"In Progress\",\n    SUCCESS: \"Completed\",\n    FAILED: \"Failed\",\n    SKIPPED: \"Skipped\"\n};\nconst taskStatusColors = {\n    PENDING: \"bg-gray-100 text-gray-800\",\n    IN_PROGRESS: \"bg-blue-100 text-blue-800\",\n    SUCCESS: \"bg-green-100 text-green-800\",\n    FAILED: \"bg-red-100 text-red-800\",\n    SKIPPED: \"bg-gray-100 text-gray-600\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBQ2IsRUFBQztBQUVELHVDQUF1QztBQUNoQyxNQUFNRSx1QkFBdUJULGtCQUFpQjtBQUM5QyxNQUFNVSx1QkFBdUJGLGtCQUFpQjtBQUU5QyxNQUFNRyxtQkFBMkM7SUFDdERDLFNBQVM7SUFDVEMsYUFBYTtJQUNiQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsU0FBUztBQUNYLEVBQUM7QUFFTSxNQUFNQyxtQkFBMkM7SUFDdERMLFNBQVM7SUFDVEMsYUFBYTtJQUNiQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsU0FBUztBQUNYLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9saWIvdXRpbHMudHM/N2MxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIENsYXNzVmFsdWUsIGNsc3ggfSBmcm9tICdjbHN4J1xuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gJ3RhaWx3aW5kLW1lcmdlJ1xuXG5leHBvcnQgZnVuY3Rpb24gY24oLi4uaW5wdXRzOiBDbGFzc1ZhbHVlW10pIHtcbiAgcmV0dXJuIHR3TWVyZ2UoY2xzeChpbnB1dHMpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVXb3JrRW1haWwoZnVsbE5hbWU6IHN0cmluZywgZG9tYWluOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lUGFydHMgPSBmdWxsTmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKS5zcGxpdCgvXFxzKy8pXG4gIGlmIChuYW1lUGFydHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGAke25hbWVQYXJ0c1swXX1AJHtkb21haW59YFxuICB9XG4gIGNvbnN0IGZpcnN0TmFtZSA9IG5hbWVQYXJ0c1swXVxuICBjb25zdCBsYXN0TmFtZSA9IG5hbWVQYXJ0c1tuYW1lUGFydHMubGVuZ3RoIC0gMV1cbiAgcmV0dXJuIGAke2ZpcnN0TmFtZX0uJHtsYXN0TmFtZX1AJHtkb21haW59YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCgpOiBzdHJpbmcge1xuICBjb25zdCBjaGFycyA9ICdBQkNERUZHSEpLTE1OUFFSU1RVVldYWVphYmNkZWZnaGprbW5wcXJzdHV2d3h5ejIzNDU2Nzg5J1xuICBjb25zdCBzcGVjaWFsQ2hhcnMgPSAnIUAjJCUmKidcbiAgbGV0IHBhc3N3b3JkID0gJydcbiAgXG4gIC8vIDggYWxwaGFudW1lcmljIGNoYXJzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgcGFzc3dvcmQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpXG4gIH1cbiAgXG4gIC8vIEFkZCAyIHNwZWNpYWwgY2hhcnNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICBwYXNzd29yZCArPSBzcGVjaWFsQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNwZWNpYWxDaGFycy5sZW5ndGgpKVxuICB9XG4gIFxuICAvLyBTaHVmZmxlXG4gIHJldHVybiBwYXNzd29yZFxuICAgIC5zcGxpdCgnJylcbiAgICAuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxuICAgIC5qb2luKCcnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0Q3VycmVuY3koYW1vdW50OiBudW1iZXIsIGN1cnJlbmN5OiBzdHJpbmcgPSAnVVNEJyk6IHN0cmluZyB7XG4gIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ2VuLVVTJywge1xuICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgIGN1cnJlbmN5LFxuICB9KS5mb3JtYXQoYW1vdW50KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlIHwgc3RyaW5nLCBvcHRpb25zPzogSW50bC5EYXRlVGltZUZvcm1hdE9wdGlvbnMpOiBzdHJpbmcge1xuICBjb25zdCBkID0gdHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnID8gbmV3IERhdGUoZGF0ZSkgOiBkYXRlXG4gIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tR0InLCB7XG4gICAgZGF5OiAnMi1kaWdpdCcsXG4gICAgbW9udGg6ICcyLWRpZ2l0JyxcbiAgICB5ZWFyOiAnMi1kaWdpdCcsXG4gICAgLi4ub3B0aW9ucyxcbiAgfSkuZm9ybWF0KGQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlVGltZShkYXRlOiBEYXRlIHwgc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZCA9IHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJyA/IG5ldyBEYXRlKGRhdGUpIDogZGF0ZVxuICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLUdCJywge1xuICAgIGRheTogJzItZGlnaXQnLFxuICAgIG1vbnRoOiAnMi1kaWdpdCcsXG4gICAgeWVhcjogJzItZGlnaXQnLFxuICAgIGhvdXI6ICcyLWRpZ2l0JyxcbiAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICBob3VyMTI6IGZhbHNlLFxuICB9KS5mb3JtYXQoZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNsdWdpZnkodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHRcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csICcnKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICAucmVwbGFjZSgvLSsvZywgJy0nKVxuICAgIC50cmltKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGVWYXJpYWJsZXModGVtcGxhdGU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgLy8gU3VwcG9ydCBib3RoIHt2YXJpYWJsZX0gYW5kICV7dmFyaWFibGV9IGZvcm1hdHNcbiAgY29uc3QgcmVnZXggPSAvJT9cXHsoXFx3KylcXH0vZ1xuICBjb25zdCB2YXJpYWJsZXM6IHN0cmluZ1tdID0gW11cbiAgbGV0IG1hdGNoXG4gIFxuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyh0ZW1wbGF0ZSkpICE9PSBudWxsKSB7XG4gICAgaWYgKCF2YXJpYWJsZXMuaW5jbHVkZXMobWF0Y2hbMV0pKSB7XG4gICAgICB2YXJpYWJsZXMucHVzaChtYXRjaFsxXSlcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB2YXJpYWJsZXNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlOiBzdHJpbmcsIHZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IHN0cmluZyB7XG4gIC8vIFN1cHBvcnQgYm90aCB7dmFyaWFibGV9IGFuZCAle3ZhcmlhYmxlfSBmb3JtYXRzXG4gIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC8lP1xceyhcXHcrKVxcfS9nLCAobWF0Y2gsIGtleSkgPT4ge1xuICAgIHJldHVybiB2YXJpYWJsZXNba2V5XSA/PyBtYXRjaFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbHMobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWVcbiAgICAuc3BsaXQoJyAnKVxuICAgIC5tYXAoKHBhcnQpID0+IHBhcnRbMF0pXG4gICAgLmpvaW4oJycpXG4gICAgLnRvVXBwZXJDYXNlKClcbiAgICAuc2xpY2UoMCwgMilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlKHN0cjogc3RyaW5nLCBsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChzdHIubGVuZ3RoIDw9IGxlbmd0aCkgcmV0dXJuIHN0clxuICByZXR1cm4gc3RyLnNsaWNlKDAsIGxlbmd0aCkgKyAnLi4uJ1xufVxuXG5leHBvcnQgY29uc3QgZW1wbG95ZWVTdGF0dXNMYWJlbHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIENBTkRJREFURTogJ0NhbmRpZGF0ZScsXG4gIE9GRkVSX1NFTlQ6ICdPZmZlciBTZW50JyxcbiAgT0ZGRVJfU0lHTkVEOiAnT2ZmZXIgU2lnbmVkJyxcbiAgSElSRURfUEVORElOR19TVEFSVDogJ1BlbmRpbmcgU3RhcnQnLFxuICBBQ1RJVkU6ICdBY3RpdmUnLFxuICBPRkZCT0FSRElORzogJ09mZmJvYXJkaW5nJyxcbiAgRVhJVEVEOiAnRXhpdGVkJyxcbn1cblxuZXhwb3J0IGNvbnN0IGVtcGxveWVlU3RhdHVzQ29sb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBDQU5ESURBVEU6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJyxcbiAgT0ZGRVJfU0VOVDogJ2JnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAnLFxuICBPRkZFUl9TSUdORUQ6ICdiZy1pbmRpZ28tMTAwIHRleHQtaW5kaWdvLTgwMCcsXG4gIEhJUkVEX1BFTkRJTkdfU1RBUlQ6ICdiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTgwMCcsXG4gIEFDVElWRTogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsXG4gIE9GRkJPQVJESU5HOiAnYmctb3JhbmdlLTEwMCB0ZXh0LW9yYW5nZS04MDAnLFxuICBFWElURUQ6ICdiZy1yZWQtMTAwIHRleHQtcmVkLTgwMCcsXG59XG5cbmV4cG9ydCBjb25zdCBvZmZlclN0YXR1c0xhYmVsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgRFJBRlQ6ICdEcmFmdCcsXG4gIFNFTlQ6ICdTZW50JyxcbiAgVklFV0VEOiAnVmlld2VkJyxcbiAgU0lHTkVEOiAnU2lnbmVkJyxcbiAgREVDTElORUQ6ICdEZWNsaW5lZCcsXG4gIEVYUElSRUQ6ICdFeHBpcmVkJyxcbiAgQ0FOQ0VMTEVEOiAnQ2FuY2VsbGVkJyxcbn1cblxuZXhwb3J0IGNvbnN0IG9mZmVyU3RhdHVzQ29sb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBEUkFGVDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxuICBTRU5UOiAnYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCcsXG4gIFZJRVdFRDogJ2JnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwJyxcbiAgU0lHTkVEOiAnYmctZ3JlZW4tMTAwIHRleHQtZ3JlZW4tODAwJyxcbiAgREVDTElORUQ6ICdiZy1yZWQtMTAwIHRleHQtcmVkLTgwMCcsXG4gIEVYUElSRUQ6ICdiZy1vcmFuZ2UtMTAwIHRleHQtb3JhbmdlLTgwMCcsXG4gIENBTkNFTExFRDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS04MDAnLFxufVxuXG4vLyBBbGlhcyBmb3IgY29udHJhY3RzIChzYW1lIGFzIG9mZmVycylcbmV4cG9ydCBjb25zdCBjb250cmFjdFN0YXR1c0xhYmVscyA9IG9mZmVyU3RhdHVzTGFiZWxzXG5leHBvcnQgY29uc3QgY29udHJhY3RTdGF0dXNDb2xvcnMgPSBvZmZlclN0YXR1c0NvbG9yc1xuXG5leHBvcnQgY29uc3QgdGFza1N0YXR1c0xhYmVsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgUEVORElORzogJ1BlbmRpbmcnLFxuICBJTl9QUk9HUkVTUzogJ0luIFByb2dyZXNzJyxcbiAgU1VDQ0VTUzogJ0NvbXBsZXRlZCcsXG4gIEZBSUxFRDogJ0ZhaWxlZCcsXG4gIFNLSVBQRUQ6ICdTa2lwcGVkJyxcbn1cblxuZXhwb3J0IGNvbnN0IHRhc2tTdGF0dXNDb2xvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFBFTkRJTkc6ICdiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwJyxcbiAgSU5fUFJPR1JFU1M6ICdiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwJyxcbiAgU1VDQ0VTUzogJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCcsXG4gIEZBSUxFRDogJ2JnLXJlZC0xMDAgdGV4dC1yZWQtODAwJyxcbiAgU0tJUFBFRDogJ2JnLWdyYXktMTAwIHRleHQtZ3JheS02MDAnLFxufVxuXG4iXSwibmFtZXMiOlsiY2xzeCIsInR3TWVyZ2UiLCJjbiIsImlucHV0cyIsImdlbmVyYXRlV29ya0VtYWlsIiwiZnVsbE5hbWUiLCJkb21haW4iLCJuYW1lUGFydHMiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJzcGxpdCIsImxlbmd0aCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZ2VuZXJhdGVUZW1wb3JhcnlQYXNzd29yZCIsImNoYXJzIiwic3BlY2lhbENoYXJzIiwicGFzc3dvcmQiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic29ydCIsImpvaW4iLCJmb3JtYXRDdXJyZW5jeSIsImFtb3VudCIsImN1cnJlbmN5IiwiSW50bCIsIk51bWJlckZvcm1hdCIsInN0eWxlIiwiZm9ybWF0IiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJvcHRpb25zIiwiZCIsIkRhdGUiLCJEYXRlVGltZUZvcm1hdCIsImRheSIsIm1vbnRoIiwieWVhciIsImZvcm1hdERhdGVUaW1lIiwiaG91ciIsIm1pbnV0ZSIsImhvdXIxMiIsInNsdWdpZnkiLCJ0ZXh0IiwicmVwbGFjZSIsInBhcnNlVGVtcGxhdGVWYXJpYWJsZXMiLCJ0ZW1wbGF0ZSIsInJlZ2V4IiwidmFyaWFibGVzIiwibWF0Y2giLCJleGVjIiwiaW5jbHVkZXMiLCJwdXNoIiwicmVuZGVyVGVtcGxhdGUiLCJrZXkiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJtYXAiLCJwYXJ0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsInRydW5jYXRlIiwic3RyIiwiZW1wbG95ZWVTdGF0dXNMYWJlbHMiLCJDQU5ESURBVEUiLCJPRkZFUl9TRU5UIiwiT0ZGRVJfU0lHTkVEIiwiSElSRURfUEVORElOR19TVEFSVCIsIkFDVElWRSIsIk9GRkJPQVJESU5HIiwiRVhJVEVEIiwiZW1wbG95ZWVTdGF0dXNDb2xvcnMiLCJvZmZlclN0YXR1c0xhYmVscyIsIkRSQUZUIiwiU0VOVCIsIlZJRVdFRCIsIlNJR05FRCIsIkRFQ0xJTkVEIiwiRVhQSVJFRCIsIkNBTkNFTExFRCIsIm9mZmVyU3RhdHVzQ29sb3JzIiwiY29udHJhY3RTdGF0dXNMYWJlbHMiLCJjb250cmFjdFN0YXR1c0NvbG9ycyIsInRhc2tTdGF0dXNMYWJlbHMiLCJQRU5ESU5HIiwiSU5fUFJPR1JFU1MiLCJTVUNDRVNTIiwiRkFJTEVEIiwiU0tJUFBFRCIsInRhc2tTdGF0dXNDb2xvcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/_app.ts":
/*!************************************!*\
  !*** ./src/server/routers/_app.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _employee__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./employee */ \"(rsc)/./src/server/routers/employee.ts\");\n/* harmony import */ var _offer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./offer */ \"(rsc)/./src/server/routers/offer.ts\");\n/* harmony import */ var _offer_template__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./offer-template */ \"(rsc)/./src/server/routers/offer-template.ts\");\n/* harmony import */ var _onboarding__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./onboarding */ \"(rsc)/./src/server/routers/onboarding.ts\");\n/* harmony import */ var _offboarding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./offboarding */ \"(rsc)/./src/server/routers/offboarding.ts\");\n/* harmony import */ var _integration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./integration */ \"(rsc)/./src/server/routers/integration.ts\");\n/* harmony import */ var _audit__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./audit */ \"(rsc)/./src/server/routers/audit.ts\");\n/* harmony import */ var _dashboard__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./dashboard */ \"(rsc)/./src/server/routers/dashboard.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./user */ \"(rsc)/./src/server/routers/user.ts\");\n/* harmony import */ var _organization__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./organization */ \"(rsc)/./src/server/routers/organization.ts\");\n/* harmony import */ var _signature__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./signature */ \"(rsc)/./src/server/routers/signature.ts\");\n/* harmony import */ var _api_token__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./api-token */ \"(rsc)/./src/server/routers/api-token.ts\");\n/* harmony import */ var _notification_settings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./notification-settings */ \"(rsc)/./src/server/routers/notification-settings.ts\");\n/* harmony import */ var _notification__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./notification */ \"(rsc)/./src/server/routers/notification.ts\");\n/* harmony import */ var _legal_entity__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./legal-entity */ \"(rsc)/./src/server/routers/legal-entity.ts\");\n/* harmony import */ var _assistant__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./assistant */ \"(rsc)/./src/server/routers/assistant.ts\");\n/* harmony import */ var _team__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./team */ \"(rsc)/./src/server/routers/team.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst appRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    employee: _employee__WEBPACK_IMPORTED_MODULE_1__.employeeRouter,\n    offer: _offer__WEBPACK_IMPORTED_MODULE_2__.offerRouter,\n    offerTemplate: _offer_template__WEBPACK_IMPORTED_MODULE_3__.offerTemplateRouter,\n    onboarding: _onboarding__WEBPACK_IMPORTED_MODULE_4__.onboardingRouter,\n    offboarding: _offboarding__WEBPACK_IMPORTED_MODULE_5__.offboardingRouter,\n    integration: _integration__WEBPACK_IMPORTED_MODULE_6__.integrationRouter,\n    audit: _audit__WEBPACK_IMPORTED_MODULE_7__.auditRouter,\n    dashboard: _dashboard__WEBPACK_IMPORTED_MODULE_8__.dashboardRouter,\n    user: _user__WEBPACK_IMPORTED_MODULE_9__.userRouter,\n    organization: _organization__WEBPACK_IMPORTED_MODULE_10__.organizationRouter,\n    signature: _signature__WEBPACK_IMPORTED_MODULE_11__.signatureRouter,\n    apiToken: _api_token__WEBPACK_IMPORTED_MODULE_12__.apiTokenRouter,\n    notificationSettings: _notification_settings__WEBPACK_IMPORTED_MODULE_13__.notificationSettingsRouter,\n    notifications: _notification__WEBPACK_IMPORTED_MODULE_14__.notificationRouter,\n    legalEntity: _legal_entity__WEBPACK_IMPORTED_MODULE_15__.legalEntityRouter,\n    assistant: _assistant__WEBPACK_IMPORTED_MODULE_16__.assistantRouter,\n    team: _team__WEBPACK_IMPORTED_MODULE_17__.teamRouter\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvX2FwcC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ1E7QUFDTjtBQUNpQjtBQUNQO0FBQ0U7QUFDQTtBQUNaO0FBQ1E7QUFDVjtBQUNnQjtBQUNOO0FBQ0Q7QUFDd0I7QUFDakI7QUFDRDtBQUNMO0FBQ1Y7QUFFNUIsTUFBTWtCLFlBQVlsQixpREFBTUEsQ0FBQztJQUM5Qm1CLFVBQVVsQixxREFBY0E7SUFDeEJtQixPQUFPbEIsK0NBQVdBO0lBQ2xCbUIsZUFBZWxCLGdFQUFtQkE7SUFDbENtQixZQUFZbEIseURBQWdCQTtJQUM1Qm1CLGFBQWFsQiwyREFBaUJBO0lBQzlCbUIsYUFBYWxCLDJEQUFpQkE7SUFDOUJtQixPQUFPbEIsK0NBQVdBO0lBQ2xCbUIsV0FBV2xCLHVEQUFlQTtJQUMxQm1CLE1BQU1sQiw2Q0FBVUE7SUFDaEJtQixjQUFjbEIsOERBQWtCQTtJQUNoQ21CLFdBQVdsQix3REFBZUE7SUFDMUJtQixVQUFVbEIsdURBQWNBO0lBQ3hCbUIsc0JBQXNCbEIsK0VBQTBCQTtJQUNoRG1CLGVBQWVsQiw4REFBa0JBO0lBQ2pDbUIsYUFBYWxCLDZEQUFpQkE7SUFDOUJtQixXQUFXbEIsd0RBQWVBO0lBQzFCbUIsTUFBTWxCLDhDQUFVQTtBQUNsQixHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvX2FwcC50cz8xNzc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJvdXRlciB9IGZyb20gJ0AvbGliL3RycGMnXG5pbXBvcnQgeyBlbXBsb3llZVJvdXRlciB9IGZyb20gJy4vZW1wbG95ZWUnXG5pbXBvcnQgeyBvZmZlclJvdXRlciB9IGZyb20gJy4vb2ZmZXInXG5pbXBvcnQgeyBvZmZlclRlbXBsYXRlUm91dGVyIH0gZnJvbSAnLi9vZmZlci10ZW1wbGF0ZSdcbmltcG9ydCB7IG9uYm9hcmRpbmdSb3V0ZXIgfSBmcm9tICcuL29uYm9hcmRpbmcnXG5pbXBvcnQgeyBvZmZib2FyZGluZ1JvdXRlciB9IGZyb20gJy4vb2ZmYm9hcmRpbmcnXG5pbXBvcnQgeyBpbnRlZ3JhdGlvblJvdXRlciB9IGZyb20gJy4vaW50ZWdyYXRpb24nXG5pbXBvcnQgeyBhdWRpdFJvdXRlciB9IGZyb20gJy4vYXVkaXQnXG5pbXBvcnQgeyBkYXNoYm9hcmRSb3V0ZXIgfSBmcm9tICcuL2Rhc2hib2FyZCdcbmltcG9ydCB7IHVzZXJSb3V0ZXIgfSBmcm9tICcuL3VzZXInXG5pbXBvcnQgeyBvcmdhbml6YXRpb25Sb3V0ZXIgfSBmcm9tICcuL29yZ2FuaXphdGlvbidcbmltcG9ydCB7IHNpZ25hdHVyZVJvdXRlciB9IGZyb20gJy4vc2lnbmF0dXJlJ1xuaW1wb3J0IHsgYXBpVG9rZW5Sb3V0ZXIgfSBmcm9tICcuL2FwaS10b2tlbidcbmltcG9ydCB7IG5vdGlmaWNhdGlvblNldHRpbmdzUm91dGVyIH0gZnJvbSAnLi9ub3RpZmljYXRpb24tc2V0dGluZ3MnXG5pbXBvcnQgeyBub3RpZmljYXRpb25Sb3V0ZXIgfSBmcm9tICcuL25vdGlmaWNhdGlvbidcbmltcG9ydCB7IGxlZ2FsRW50aXR5Um91dGVyIH0gZnJvbSAnLi9sZWdhbC1lbnRpdHknXG5pbXBvcnQgeyBhc3Npc3RhbnRSb3V0ZXIgfSBmcm9tICcuL2Fzc2lzdGFudCdcbmltcG9ydCB7IHRlYW1Sb3V0ZXIgfSBmcm9tICcuL3RlYW0nXG5cbmV4cG9ydCBjb25zdCBhcHBSb3V0ZXIgPSByb3V0ZXIoe1xuICBlbXBsb3llZTogZW1wbG95ZWVSb3V0ZXIsXG4gIG9mZmVyOiBvZmZlclJvdXRlcixcbiAgb2ZmZXJUZW1wbGF0ZTogb2ZmZXJUZW1wbGF0ZVJvdXRlcixcbiAgb25ib2FyZGluZzogb25ib2FyZGluZ1JvdXRlcixcbiAgb2ZmYm9hcmRpbmc6IG9mZmJvYXJkaW5nUm91dGVyLFxuICBpbnRlZ3JhdGlvbjogaW50ZWdyYXRpb25Sb3V0ZXIsXG4gIGF1ZGl0OiBhdWRpdFJvdXRlcixcbiAgZGFzaGJvYXJkOiBkYXNoYm9hcmRSb3V0ZXIsXG4gIHVzZXI6IHVzZXJSb3V0ZXIsXG4gIG9yZ2FuaXphdGlvbjogb3JnYW5pemF0aW9uUm91dGVyLFxuICBzaWduYXR1cmU6IHNpZ25hdHVyZVJvdXRlcixcbiAgYXBpVG9rZW46IGFwaVRva2VuUm91dGVyLFxuICBub3RpZmljYXRpb25TZXR0aW5nczogbm90aWZpY2F0aW9uU2V0dGluZ3NSb3V0ZXIsXG4gIG5vdGlmaWNhdGlvbnM6IG5vdGlmaWNhdGlvblJvdXRlcixcbiAgbGVnYWxFbnRpdHk6IGxlZ2FsRW50aXR5Um91dGVyLFxuICBhc3Npc3RhbnQ6IGFzc2lzdGFudFJvdXRlcixcbiAgdGVhbTogdGVhbVJvdXRlcixcbn0pXG5cbmV4cG9ydCB0eXBlIEFwcFJvdXRlciA9IHR5cGVvZiBhcHBSb3V0ZXJcbiJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJlbXBsb3llZVJvdXRlciIsIm9mZmVyUm91dGVyIiwib2ZmZXJUZW1wbGF0ZVJvdXRlciIsIm9uYm9hcmRpbmdSb3V0ZXIiLCJvZmZib2FyZGluZ1JvdXRlciIsImludGVncmF0aW9uUm91dGVyIiwiYXVkaXRSb3V0ZXIiLCJkYXNoYm9hcmRSb3V0ZXIiLCJ1c2VyUm91dGVyIiwib3JnYW5pemF0aW9uUm91dGVyIiwic2lnbmF0dXJlUm91dGVyIiwiYXBpVG9rZW5Sb3V0ZXIiLCJub3RpZmljYXRpb25TZXR0aW5nc1JvdXRlciIsIm5vdGlmaWNhdGlvblJvdXRlciIsImxlZ2FsRW50aXR5Um91dGVyIiwiYXNzaXN0YW50Um91dGVyIiwidGVhbVJvdXRlciIsImFwcFJvdXRlciIsImVtcGxveWVlIiwib2ZmZXIiLCJvZmZlclRlbXBsYXRlIiwib25ib2FyZGluZyIsIm9mZmJvYXJkaW5nIiwiaW50ZWdyYXRpb24iLCJhdWRpdCIsImRhc2hib2FyZCIsInVzZXIiLCJvcmdhbml6YXRpb24iLCJzaWduYXR1cmUiLCJhcGlUb2tlbiIsIm5vdGlmaWNhdGlvblNldHRpbmdzIiwibm90aWZpY2F0aW9ucyIsImxlZ2FsRW50aXR5IiwiYXNzaXN0YW50IiwidGVhbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/_app.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/api-token.ts":
/*!*****************************************!*\
  !*** ./src/server/routers/api-token.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiTokenRouter: () => (/* binding */ apiTokenRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _lib_api_tokens__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api-tokens */ \"(rsc)/./src/lib/api-tokens.ts\");\n\n\n\n\nconst apiTokenRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.apiToken.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            select: {\n                id: true,\n                name: true,\n                tokenPrefix: true,\n                lastUsedAt: true,\n                revokedAt: true,\n                createdAt: true,\n                createdBy: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(1)\n    })).mutation(async ({ ctx, input })=>{\n        const trimmedName = input.name.trim();\n        if (!trimmedName) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Token name is required\"\n            });\n        }\n        const tokenData = (0,_lib_api_tokens__WEBPACK_IMPORTED_MODULE_1__.generateApiToken)();\n        const apiToken = await ctx.prisma.apiToken.create({\n            data: {\n                name: trimmedName,\n                tokenHash: tokenData.tokenHash,\n                tokenPrefix: tokenData.tokenPrefix,\n                createdById: ctx.user.id\n            },\n            select: {\n                id: true,\n                name: true,\n                tokenPrefix: true,\n                createdAt: true\n            }\n        });\n        return {\n            token: tokenData.token,\n            apiToken\n        };\n    }),\n    revoke: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_2__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const existing = await ctx.prisma.apiToken.findUnique({\n            where: {\n                id: input.id\n            }\n        });\n        if (!existing) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"API token not found\"\n            });\n        }\n        if (existing.revokedAt) {\n            return existing;\n        }\n        return ctx.prisma.apiToken.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                revokedAt: new Date()\n            },\n            select: {\n                id: true,\n                name: true,\n                tokenPrefix: true,\n                revokedAt: true,\n                createdAt: true\n            }\n        });\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvYXBpLXRva2VuLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVCO0FBQ2lCO0FBQ2E7QUFDRjtBQUU1QyxNQUFNSyxpQkFBaUJILGlEQUFNQSxDQUFDO0lBQ25DSSxNQUFNSCx1REFBZ0JBLENBQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUN6QyxPQUFPQSxJQUFJQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDO1lBQ2xDQyxTQUFTO2dCQUFFQyxXQUFXO1lBQU87WUFDN0JDLFFBQVE7Z0JBQ05DLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JDLFlBQVk7Z0JBQ1pDLFdBQVc7Z0JBQ1hOLFdBQVc7Z0JBQ1hPLFdBQVc7b0JBQUVOLFFBQVE7d0JBQUVDLElBQUk7d0JBQU1DLE1BQU07d0JBQU1LLE9BQU87b0JBQUs7Z0JBQUU7WUFDN0Q7UUFDRjtJQUNGO0lBRUFDLFFBQVFuQix1REFBZ0JBLENBQ3JCb0IsS0FBSyxDQUFDdkIsdUNBQVEsQ0FBQztRQUFFZ0IsTUFBTWhCLHVDQUFRLEdBQUcwQixHQUFHLENBQUM7SUFBRyxJQUN6Q0MsUUFBUSxDQUFDLE9BQU8sRUFBRW5CLEdBQUcsRUFBRWUsS0FBSyxFQUFFO1FBQzdCLE1BQU1LLGNBQWNMLE1BQU1QLElBQUksQ0FBQ2EsSUFBSTtRQUNuQyxJQUFJLENBQUNELGFBQWE7WUFDaEIsTUFBTSxJQUFJM0IsbURBQVNBLENBQUM7Z0JBQUU2QixNQUFNO2dCQUFlQyxTQUFTO1lBQXlCO1FBQy9FO1FBRUEsTUFBTUMsWUFBWTVCLGlFQUFnQkE7UUFDbEMsTUFBTU0sV0FBVyxNQUFNRixJQUFJQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ1ksTUFBTSxDQUFDO1lBQ2hEVyxNQUFNO2dCQUNKakIsTUFBTVk7Z0JBQ05NLFdBQVdGLFVBQVVFLFNBQVM7Z0JBQzlCakIsYUFBYWUsVUFBVWYsV0FBVztnQkFDbENrQixhQUFhLElBQUtDLElBQUksQ0FBb0JyQixFQUFFO1lBQzlDO1lBQ0FELFFBQVE7Z0JBQ05DLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JKLFdBQVc7WUFDYjtRQUNGO1FBRUEsT0FBTztZQUNMd0IsT0FBT0wsVUFBVUssS0FBSztZQUN0QjNCO1FBQ0Y7SUFDRjtJQUVGNEIsUUFBUW5DLHVEQUFnQkEsQ0FDckJvQixLQUFLLENBQUN2Qix1Q0FBUSxDQUFDO1FBQUVlLElBQUlmLHVDQUFRO0lBQUcsSUFDaEMyQixRQUFRLENBQUMsT0FBTyxFQUFFbkIsR0FBRyxFQUFFZSxLQUFLLEVBQUU7UUFDN0IsTUFBTWdCLFdBQVcsTUFBTS9CLElBQUlDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDOEIsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUUxQixJQUFJUSxNQUFNUixFQUFFO1lBQUM7UUFBRTtRQUNoRixJQUFJLENBQUN3QixVQUFVO1lBQ2IsTUFBTSxJQUFJdEMsbURBQVNBLENBQUM7Z0JBQUU2QixNQUFNO2dCQUFhQyxTQUFTO1lBQXNCO1FBQzFFO1FBRUEsSUFBSVEsU0FBU3BCLFNBQVMsRUFBRTtZQUN0QixPQUFPb0I7UUFDVDtRQUVBLE9BQU8vQixJQUFJQyxNQUFNLENBQUNDLFFBQVEsQ0FBQ2dDLE1BQU0sQ0FBQztZQUNoQ0QsT0FBTztnQkFBRTFCLElBQUlRLE1BQU1SLEVBQUU7WUFBQztZQUN0QmtCLE1BQU07Z0JBQUVkLFdBQVcsSUFBSXdCO1lBQU87WUFDOUI3QixRQUFRO2dCQUNOQyxJQUFJO2dCQUNKQyxNQUFNO2dCQUNOQyxhQUFhO2dCQUNiRSxXQUFXO2dCQUNYTixXQUFXO1lBQ2I7UUFDRjtJQUNGO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL2FwaS10b2tlbi50cz8xYjA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQgeyByb3V0ZXIsIGhyQWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuaW1wb3J0IHsgZ2VuZXJhdGVBcGlUb2tlbiB9IGZyb20gJ0AvbGliL2FwaS10b2tlbnMnXG5cbmV4cG9ydCBjb25zdCBhcGlUb2tlblJvdXRlciA9IHJvdXRlcih7XG4gIGxpc3Q6IGhyQWRtaW5Qcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICByZXR1cm4gY3R4LnByaXNtYS5hcGlUb2tlbi5maW5kTWFueSh7XG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgIHRva2VuUHJlZml4OiB0cnVlLFxuICAgICAgICBsYXN0VXNlZEF0OiB0cnVlLFxuICAgICAgICByZXZva2VkQXQ6IHRydWUsXG4gICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgY3JlYXRlZEJ5OiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9LFxuICAgICAgfSxcbiAgICB9KVxuICB9KSxcblxuICBjcmVhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBuYW1lOiB6LnN0cmluZygpLm1pbigxKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0cmltbWVkTmFtZSA9IGlucHV0Lm5hbWUudHJpbSgpXG4gICAgICBpZiAoIXRyaW1tZWROYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnVG9rZW4gbmFtZSBpcyByZXF1aXJlZCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgdG9rZW5EYXRhID0gZ2VuZXJhdGVBcGlUb2tlbigpXG4gICAgICBjb25zdCBhcGlUb2tlbiA9IGF3YWl0IGN0eC5wcmlzbWEuYXBpVG9rZW4uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IHRyaW1tZWROYW1lLFxuICAgICAgICAgIHRva2VuSGFzaDogdG9rZW5EYXRhLnRva2VuSGFzaCxcbiAgICAgICAgICB0b2tlblByZWZpeDogdG9rZW5EYXRhLnRva2VuUHJlZml4LFxuICAgICAgICAgIGNyZWF0ZWRCeUlkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHRva2VuUHJlZml4OiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuOiB0b2tlbkRhdGEudG9rZW4sXG4gICAgICAgIGFwaVRva2VuLFxuICAgICAgfVxuICAgIH0pLFxuXG4gIHJldm9rZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY3R4LnByaXNtYS5hcGlUb2tlbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0gfSlcbiAgICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnQVBJIHRva2VuIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGV4aXN0aW5nLnJldm9rZWRBdCkge1xuICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuYXBpVG9rZW4udXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0sXG4gICAgICAgIGRhdGE6IHsgcmV2b2tlZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgdG9rZW5QcmVmaXg6IHRydWUsXG4gICAgICAgICAgcmV2b2tlZEF0OiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSksXG59KVxuIl0sIm5hbWVzIjpbInoiLCJUUlBDRXJyb3IiLCJyb3V0ZXIiLCJockFkbWluUHJvY2VkdXJlIiwiZ2VuZXJhdGVBcGlUb2tlbiIsImFwaVRva2VuUm91dGVyIiwibGlzdCIsInF1ZXJ5IiwiY3R4IiwicHJpc21hIiwiYXBpVG9rZW4iLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJzZWxlY3QiLCJpZCIsIm5hbWUiLCJ0b2tlblByZWZpeCIsImxhc3RVc2VkQXQiLCJyZXZva2VkQXQiLCJjcmVhdGVkQnkiLCJlbWFpbCIsImNyZWF0ZSIsImlucHV0Iiwib2JqZWN0Iiwic3RyaW5nIiwibWluIiwibXV0YXRpb24iLCJ0cmltbWVkTmFtZSIsInRyaW0iLCJjb2RlIiwibWVzc2FnZSIsInRva2VuRGF0YSIsImRhdGEiLCJ0b2tlbkhhc2giLCJjcmVhdGVkQnlJZCIsInVzZXIiLCJ0b2tlbiIsInJldm9rZSIsImV4aXN0aW5nIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidXBkYXRlIiwiRGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/api-token.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/assistant.ts":
/*!*****************************************!*\
  !*** ./src/server/routers/assistant.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assistantRouter: () => (/* binding */ assistantRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/encryption */ \"(rsc)/./src/lib/encryption.ts\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n\n\n\n\n\nfunction getAISettingsDelegate(ctx) {\n    const delegate = ctx.prisma?.aISettings ?? ctx.prisma?.aiSettings;\n    if (!delegate) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"AI settings are unavailable. Run `npx prisma generate` (and migrate/push) to update Prisma Client.\"\n        });\n    }\n    return delegate;\n}\nfunction getAIChatDelegate(ctx) {\n    const delegate = ctx.prisma?.aIChat ?? ctx.prisma?.aiChat;\n    if (!delegate) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"AI chat history is unavailable. Run `npx prisma generate` (and migrate/push) to update Prisma Client.\"\n        });\n    }\n    return delegate;\n}\nfunction getAIChatMessageDelegate(ctx) {\n    const delegate = ctx.prisma?.aIChatMessage ?? ctx.prisma?.aiChatMessage;\n    if (!delegate) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"AI chat history is unavailable. Run `npx prisma generate` (and migrate/push) to update Prisma Client.\"\n        });\n    }\n    return delegate;\n}\nfunction encryptKeyOrThrow(key) {\n    try {\n        return (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.encrypt)(key.trim());\n    } catch (error) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"Unable to save AI settings because ENCRYPTION_KEY is not configured on the server.\",\n            cause: error\n        });\n    }\n}\n// ============================================\n// SYSTEM PROMPT\n// ============================================\nconst SYSTEM_PROMPT = `You are an AI assistant for the Curacel People HR platform. You help HR administrators with contracts, onboarding, offboarding, integrations, and employee management.\n\n## Your Capabilities\nYou can manage contracts (create, update, send, resend, cancel), manage onboarding and offboarding workflows, control onboarding/offboarding tasks, view integrations and test connections, search audit logs, view notifications, and provide analytics.\n\n## Important Guidelines\n\n1. **Use Tools for Actions**: Always use the provided tools for system actions. Do not make up data - only present data returned by tool calls.\n\n2. **Missing Fields**: If a tool requires fields that aren't provided, use the tool anyway - it will return the specific missing fields. Only ask for those exact missing fields in your response.\n\n3. **Confirmation Required**: For high-impact actions, you MUST get explicit user confirmation before executing:\n   - **Requires confirmation**: send_contract, resend_contract, cancel_contract, start_onboarding, start_offboarding\n   - First call the tool with confirmed=false to get a summary\n   - Present the summary and ask \"Please confirm to proceed\"\n   - Only call with confirmed=true after user confirms with \"yes\", \"confirm\", \"proceed\", or similar\n   - For cancel_contract, emphasize that this action cannot be undone\n\n4. **Response Style**: Keep responses short, professional, and business-friendly. Use bullet points for lists. Don't explain what you're about to do - just do it and report results.\n\n5. **Deep Links**: When you receive URLs in tool responses, include them in your response using markdown links so users can click through to the relevant pages.\n\n6. **Data Privacy**: Respect RBAC - you operate within the user's permissions. Don't reference data you don't have access to.\n\n## Available Tools\n\n### Contracts\n- find_contracts: Search contracts by candidate name/email and status\n- create_contract_draft: Create a new contract draft\n- update_contract_draft: Update a contract (only DRAFT/SENT/VIEWED)\n- send_contract: Send a contract for signature (requires confirmation)\n- resend_contract: Resend a SENT/VIEWED contract (requires confirmation)\n- cancel_contract: Cancel a contract with reason (requires confirmation)\n\n### Employees & Analytics\n- get_employee: Look up employee by ID or name/email\n- count_hires_by_year: Get hiring analytics by year\n\n### Onboarding\n- start_onboarding: Start onboarding workflow (requires confirmation)\n- get_onboarding_status: Get onboarding workflow progress\n- complete_onboarding_task: Mark a manual task as complete\n- run_onboarding_task: Run/retry an automated task\n- skip_onboarding_task: Skip a task with reason\n\n### Offboarding\n- start_offboarding: Start offboarding (immediate or scheduled, requires confirmation)\n- get_offboarding_status: Get offboarding workflow progress\n\n### Integrations\n- list_integrations: Show enabled apps and connection status\n- test_integration_connection: Test an app's connection\n\n### Notifications & Audit\n- list_notifications: View recent notifications\n- search_audit_log: Search audit logs with filters\n\n### Proactive (V3)\n- get_daily_brief: Get summary of pending contracts, upcoming starts, stuck workflows\n\n### Bulk Operations (V3 - require dry run first)\n- bulk_start_onboarding: Start onboarding for multiple employees (use dryRun=true first)\n- bulk_resend_contracts: Resend contracts viewed for N days (use dryRun=true first)\n- bulk_deprovision_access: Deprovision access for exited employees (use dryRun=true first)\n\n## V3 Bulk Operation Rules\nFor bulk operations, you MUST follow this two-step process:\n1. **Dry run first**: Call with dryRun=true to get a preview and approvalToken\n2. **Execute with approval**: Call again with the approvalToken to execute\n- Approvals expire after 15 minutes\n- Always show the preview to the user before asking them to approve\n- Never execute bulk operations without going through the approval flow`;\n// ============================================\n// TOOL DEFINITIONS (OpenAI Function Calling format)\n// ============================================\nconst TOOL_DEFINITIONS = [\n    {\n        type: \"function\",\n        function: {\n            name: \"find_contracts\",\n            description: \"Search for contracts by candidate name, email, or status. Returns a list of matching contracts.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    search: {\n                        type: \"string\",\n                        description: \"Search term for candidate name or email\"\n                    },\n                    status: {\n                        type: \"string\",\n                        enum: [\n                            \"DRAFT\",\n                            \"SENT\",\n                            \"VIEWED\",\n                            \"SIGNED\",\n                            \"DECLINED\",\n                            \"EXPIRED\",\n                            \"CANCELLED\"\n                        ],\n                        description: \"Filter by contract status\"\n                    },\n                    limit: {\n                        type: \"number\",\n                        description: \"Maximum number of results (default 10)\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"create_contract_draft\",\n            description: \"Create a new contract in DRAFT status. Required fields: candidateName, candidateEmail, roleTitle, startDate, compensationAmount, currency. Optional: templateId, legalEntityId, signatureBlockId, location.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    candidateName: {\n                        type: \"string\",\n                        description: \"Full name of the candidate\"\n                    },\n                    candidateEmail: {\n                        type: \"string\",\n                        description: \"Email address of the candidate\"\n                    },\n                    roleTitle: {\n                        type: \"string\",\n                        description: \"Job title/role\"\n                    },\n                    startDate: {\n                        type: \"string\",\n                        description: \"Start date in YYYY-MM-DD format\"\n                    },\n                    compensationAmount: {\n                        type: \"number\",\n                        description: \"Salary/compensation amount\"\n                    },\n                    currency: {\n                        type: \"string\",\n                        description: \"Currency code (e.g., USD, EUR, NGN)\"\n                    },\n                    templateId: {\n                        type: \"string\",\n                        description: \"ID of the offer template to use\"\n                    },\n                    legalEntityId: {\n                        type: \"string\",\n                        description: \"ID of the legal entity\"\n                    },\n                    signatureBlockId: {\n                        type: \"string\",\n                        description: \"ID of the signature block to use\"\n                    },\n                    location: {\n                        type: \"string\",\n                        description: \"Work location\"\n                    }\n                },\n                required: [\n                    \"candidateName\",\n                    \"candidateEmail\",\n                    \"roleTitle\",\n                    \"startDate\",\n                    \"compensationAmount\",\n                    \"currency\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"send_contract\",\n            description: \"Send a contract for signature. Requires the contract to be in DRAFT status. Must set confirmed=true to actually send.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    contractId: {\n                        type: \"string\",\n                        description: \"ID of the contract to send\"\n                    },\n                    confirmed: {\n                        type: \"boolean\",\n                        description: \"Set to true to confirm and send the contract\"\n                    }\n                },\n                required: [\n                    \"contractId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"get_employee\",\n            description: \"Look up an employee by ID, name, or email. If multiple matches are found, returns a list to choose from.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    id: {\n                        type: \"string\",\n                        description: \"Employee ID (if known)\"\n                    },\n                    search: {\n                        type: \"string\",\n                        description: \"Name or email to search for\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"start_onboarding\",\n            description: \"Start an onboarding workflow for an employee. The employee must be in OFFER_SIGNED or HIRED_PENDING_START status. Must set confirmed=true to actually start.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    employeeId: {\n                        type: \"string\",\n                        description: \"ID of the employee to onboard\"\n                    },\n                    startDate: {\n                        type: \"string\",\n                        description: \"Start date in YYYY-MM-DD format (optional, uses employee start date if not provided)\"\n                    },\n                    confirmed: {\n                        type: \"boolean\",\n                        description: \"Set to true to confirm and start onboarding\"\n                    }\n                },\n                required: [\n                    \"employeeId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"get_onboarding_status\",\n            description: \"Get the status of an onboarding workflow for an employee.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    employeeId: {\n                        type: \"string\",\n                        description: \"ID of the employee\"\n                    },\n                    workflowId: {\n                        type: \"string\",\n                        description: \"ID of the onboarding workflow (if known)\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"count_hires_by_year\",\n            description: \"Get the count of employees hired in a given year. Includes employees with status: ACTIVE, HIRED_PENDING_START, OFFBOARDING, EXITED, or OFFER_SIGNED.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    year: {\n                        type: \"number\",\n                        description: \"The year to count hires for (e.g., 2024)\"\n                    }\n                },\n                required: [\n                    \"year\"\n                ]\n            }\n        }\n    },\n    // V2 Contract Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"update_contract_draft\",\n            description: \"Update a contract draft. Only works for contracts in DRAFT, SENT, or VIEWED status. Cannot update SIGNED, DECLINED, EXPIRED, or CANCELLED contracts.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    contractId: {\n                        type: \"string\",\n                        description: \"ID of the contract to update\"\n                    },\n                    roleTitle: {\n                        type: \"string\",\n                        description: \"Updated job title/role\"\n                    },\n                    startDate: {\n                        type: \"string\",\n                        description: \"Updated start date in YYYY-MM-DD format\"\n                    },\n                    compensationAmount: {\n                        type: \"number\",\n                        description: \"Updated salary/compensation amount\"\n                    },\n                    currency: {\n                        type: \"string\",\n                        description: \"Updated currency code\"\n                    },\n                    location: {\n                        type: \"string\",\n                        description: \"Updated work location\"\n                    },\n                    legalEntityId: {\n                        type: \"string\",\n                        description: \"Updated legal entity ID\"\n                    },\n                    signatureBlockId: {\n                        type: \"string\",\n                        description: \"Updated signature block ID\"\n                    }\n                },\n                required: [\n                    \"contractId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"resend_contract\",\n            description: \"Resend a contract for signature. Only works for contracts in SENT or VIEWED status. Must set confirmed=true to actually resend.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    contractId: {\n                        type: \"string\",\n                        description: \"ID of the contract to resend\"\n                    },\n                    confirmed: {\n                        type: \"boolean\",\n                        description: \"Set to true to confirm and resend the contract\"\n                    }\n                },\n                required: [\n                    \"contractId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"cancel_contract\",\n            description: \"Cancel a contract. Cannot cancel contracts that are already SIGNED. Requires a reason and must set confirmed=true to actually cancel.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    contractId: {\n                        type: \"string\",\n                        description: \"ID of the contract to cancel\"\n                    },\n                    reason: {\n                        type: \"string\",\n                        description: \"Reason for cancelling the contract\"\n                    },\n                    confirmed: {\n                        type: \"boolean\",\n                        description: \"Set to true to confirm and cancel the contract\"\n                    }\n                },\n                required: [\n                    \"contractId\",\n                    \"reason\"\n                ]\n            }\n        }\n    },\n    // V2 Onboarding Task Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"complete_onboarding_task\",\n            description: \"Mark a manual onboarding task as complete.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    taskId: {\n                        type: \"string\",\n                        description: \"ID of the task to complete\"\n                    },\n                    notes: {\n                        type: \"string\",\n                        description: \"Optional completion notes\"\n                    }\n                },\n                required: [\n                    \"taskId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"run_onboarding_task\",\n            description: \"Trigger or retry an automated onboarding task.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    taskId: {\n                        type: \"string\",\n                        description: \"ID of the automated task to run\"\n                    }\n                },\n                required: [\n                    \"taskId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"skip_onboarding_task\",\n            description: \"Skip an onboarding task with a required reason.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    taskId: {\n                        type: \"string\",\n                        description: \"ID of the task to skip\"\n                    },\n                    reason: {\n                        type: \"string\",\n                        description: \"Reason for skipping the task\"\n                    }\n                },\n                required: [\n                    \"taskId\",\n                    \"reason\"\n                ]\n            }\n        }\n    },\n    // V2 Offboarding Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"start_offboarding\",\n            description: \"Start an offboarding workflow for an employee. Must set confirmed=true to actually start.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    employeeId: {\n                        type: \"string\",\n                        description: \"ID of the employee to offboard\"\n                    },\n                    isImmediate: {\n                        type: \"boolean\",\n                        description: \"Whether offboarding should start immediately (default: false)\"\n                    },\n                    endDate: {\n                        type: \"string\",\n                        description: \"Employee end date in YYYY-MM-DD format (required if not immediate)\"\n                    },\n                    reason: {\n                        type: \"string\",\n                        description: \"Reason for offboarding (e.g., resignation, termination)\"\n                    },\n                    notes: {\n                        type: \"string\",\n                        description: \"Additional notes\"\n                    },\n                    confirmed: {\n                        type: \"boolean\",\n                        description: \"Set to true to confirm and start offboarding\"\n                    }\n                },\n                required: [\n                    \"employeeId\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"get_offboarding_status\",\n            description: \"Get the status of an offboarding workflow for an employee.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    employeeId: {\n                        type: \"string\",\n                        description: \"ID of the employee\"\n                    },\n                    workflowId: {\n                        type: \"string\",\n                        description: \"ID of the offboarding workflow (if known)\"\n                    }\n                }\n            }\n        }\n    },\n    // V2 Integration Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"list_integrations\",\n            description: \"List all enabled app integrations and their connection status.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    includeDisabled: {\n                        type: \"boolean\",\n                        description: \"Include disabled apps (default: false)\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"test_integration_connection\",\n            description: \"Test the connection for an app integration.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    appId: {\n                        type: \"string\",\n                        description: \"ID of the app to test\"\n                    }\n                },\n                required: [\n                    \"appId\"\n                ]\n            }\n        }\n    },\n    // V2 Notification & Audit Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"list_notifications\",\n            description: \"List recent notifications for the current user.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    includeRead: {\n                        type: \"boolean\",\n                        description: \"Include read notifications (default: false)\"\n                    },\n                    limit: {\n                        type: \"number\",\n                        description: \"Maximum number of results (default: 10)\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"search_audit_log\",\n            description: \"Search the audit log with filters.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    action: {\n                        type: \"string\",\n                        description: \"Filter by action type (e.g., OFFER_SENT, ONBOARDING_STARTED)\"\n                    },\n                    resourceType: {\n                        type: \"string\",\n                        description: \"Filter by resource type (e.g., offer, employee)\"\n                    },\n                    resourceId: {\n                        type: \"string\",\n                        description: \"Filter by specific resource ID\"\n                    },\n                    startDate: {\n                        type: \"string\",\n                        description: \"Filter from date (YYYY-MM-DD)\"\n                    },\n                    endDate: {\n                        type: \"string\",\n                        description: \"Filter to date (YYYY-MM-DD)\"\n                    },\n                    limit: {\n                        type: \"number\",\n                        description: \"Maximum number of results (default: 20)\"\n                    }\n                }\n            }\n        }\n    },\n    // V3 Proactive Tools\n    {\n        type: \"function\",\n        function: {\n            name: \"get_daily_brief\",\n            description: \"Get a daily brief summary of pending contracts, upcoming starts, and stuck workflows.\",\n            parameters: {\n                type: \"object\",\n                properties: {}\n            }\n        }\n    },\n    // V3 Bulk Operations (require dryRun then approval)\n    {\n        type: \"function\",\n        function: {\n            name: \"bulk_start_onboarding\",\n            description: \"Start onboarding for multiple employees. Use dryRun=true first to preview, then approvalToken to execute.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    startDateFrom: {\n                        type: \"string\",\n                        description: \"Include employees with start date from (YYYY-MM-DD)\"\n                    },\n                    startDateTo: {\n                        type: \"string\",\n                        description: \"Include employees with start date to (YYYY-MM-DD)\"\n                    },\n                    dryRun: {\n                        type: \"boolean\",\n                        description: \"If true, returns preview without executing. Required before execution.\"\n                    },\n                    approvalToken: {\n                        type: \"string\",\n                        description: \"Approval token from dry run to execute the bulk operation\"\n                    }\n                },\n                required: [\n                    \"startDateFrom\",\n                    \"startDateTo\"\n                ]\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"bulk_resend_contracts\",\n            description: \"Resend contracts that have been in VIEWED status for N days. Use dryRun=true first to preview.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    viewedDaysAgo: {\n                        type: \"number\",\n                        description: \"Contracts viewed more than N days ago (default: 3)\"\n                    },\n                    dryRun: {\n                        type: \"boolean\",\n                        description: \"If true, returns preview without executing. Required before execution.\"\n                    },\n                    approvalToken: {\n                        type: \"string\",\n                        description: \"Approval token from dry run to execute the bulk operation\"\n                    }\n                }\n            }\n        }\n    },\n    {\n        type: \"function\",\n        function: {\n            name: \"bulk_deprovision_access\",\n            description: \"Deprovision app access for exited employees. Use dryRun=true first to preview.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    includeOffboarding: {\n                        type: \"boolean\",\n                        description: \"Include employees in OFFBOARDING status (default: false, only EXITED)\"\n                    },\n                    dryRun: {\n                        type: \"boolean\",\n                        description: \"If true, returns preview without executing. Required before execution.\"\n                    },\n                    approvalToken: {\n                        type: \"string\",\n                        description: \"Approval token from dry run to execute the bulk operation\"\n                    }\n                }\n            }\n        }\n    }\n];\n// ============================================\n// TOOL IMPLEMENTATIONS\n// ============================================\n// Sanitize args for logging (remove sensitive fields)\nfunction sanitizeArgsForLogging(args) {\n    const sensitiveFields = [\n        \"password\",\n        \"apiKey\",\n        \"token\",\n        \"secret\",\n        \"key\"\n    ];\n    const sanitized = {};\n    for (const [key, value] of Object.entries(args)){\n        if (sensitiveFields.some((f)=>key.toLowerCase().includes(f))) {\n            sanitized[key] = \"[REDACTED]\";\n        } else {\n            sanitized[key] = value;\n        }\n    }\n    return sanitized;\n}\n// ============================================\n// V3: GOVERNANCE LAYER - TOOL PERMISSIONS BY ROLE\n// ============================================\nconst TOOL_PERMISSIONS = {\n    // SUPER_ADMIN and HR_ADMIN have full access\n    SUPER_ADMIN: [\n        \"*\"\n    ],\n    HR_ADMIN: [\n        \"*\"\n    ],\n    // IT_ADMIN: integrations, onboarding/offboarding automation tasks\n    IT_ADMIN: [\n        \"list_integrations\",\n        \"test_integration_connection\",\n        \"run_onboarding_task\",\n        \"get_onboarding_status\",\n        \"get_offboarding_status\",\n        \"list_notifications\",\n        \"search_audit_log\",\n        \"get_daily_brief\",\n        // V3 bulk ops\n        \"bulk_deprovision_access\"\n    ],\n    // MANAGER: read-only analytics + onboarding/offboarding visibility\n    MANAGER: [\n        \"find_contracts\",\n        \"get_employee\",\n        \"get_onboarding_status\",\n        \"get_offboarding_status\",\n        \"count_hires_by_year\",\n        \"get_daily_brief\",\n        \"list_notifications\"\n    ],\n    // EMPLOYEE: minimal profile queries only\n    EMPLOYEE: [\n        \"get_employee\"\n    ]\n};\nfunction hasToolPermission(role, toolName) {\n    const permissions = TOOL_PERMISSIONS[role];\n    if (!permissions) return false;\n    if (permissions.includes(\"*\")) return true;\n    return permissions.includes(toolName);\n}\nfunction getRequiredRolesForTool(toolName) {\n    const roles = [];\n    for (const [role, permissions] of Object.entries(TOOL_PERMISSIONS)){\n        if (permissions.includes(\"*\") || permissions.includes(toolName)) {\n            roles.push(role);\n        }\n    }\n    return roles;\n}\n// ============================================\n// V3: RATE LIMITING\n// ============================================\nconst RATE_LIMIT_WINDOW_MS = 60 * 60 * 1000 // 1 hour\n;\nconst RATE_LIMIT_MAX_CALLS = 100;\n// In-memory rate limit store (would use Redis in production)\nconst rateLimitStore = new Map();\nfunction checkRateLimit(userId) {\n    const now = Date.now();\n    const key = `ratelimit:${userId}`;\n    let entry = rateLimitStore.get(key);\n    // Reset if window expired\n    if (!entry || entry.resetAt < now) {\n        entry = {\n            count: 0,\n            resetAt: now + RATE_LIMIT_WINDOW_MS\n        };\n        rateLimitStore.set(key, entry);\n    }\n    const allowed = entry.count < RATE_LIMIT_MAX_CALLS;\n    const remaining = Math.max(0, RATE_LIMIT_MAX_CALLS - entry.count);\n    if (allowed) {\n        entry.count++;\n    }\n    return {\n        allowed,\n        remaining,\n        resetAt: new Date(entry.resetAt)\n    };\n}\n// ============================================\n// V3: DRY-RUN & APPROVAL WORKFLOW\n// ============================================\nconst APPROVAL_TTL_MS = 15 * 60 * 1000 // 15 minutes\n;\nasync function createApprovalPlan(ctx, toolName, dryRunData, orgId) {\n    const planId = `plan_${Date.now()}_${Math.random().toString(36).slice(2, 11)}`;\n    const expiresAt = new Date(Date.now() + APPROVAL_TTL_MS);\n    await ctx.prisma.assistantApproval.create({\n        data: {\n            orgId,\n            userId: ctx.user.id,\n            planId,\n            toolName,\n            dryRunData: dryRunData,\n            status: \"PENDING\",\n            expiresAt\n        }\n    });\n    return {\n        planId,\n        preview: dryRunData,\n        expiresAt\n    };\n}\nasync function validateAndConsumeApproval(ctx, approvalToken, expectedToolName) {\n    const approval = await ctx.prisma.assistantApproval.findUnique({\n        where: {\n            planId: approvalToken\n        }\n    });\n    if (!approval) {\n        return {\n            valid: false,\n            error: \"Approval token not found. Please run the command with dryRun=true first.\"\n        };\n    }\n    if (approval.userId !== ctx.user.id) {\n        return {\n            valid: false,\n            error: \"This approval belongs to a different user.\"\n        };\n    }\n    if (approval.toolName !== expectedToolName) {\n        return {\n            valid: false,\n            error: \"This approval is for a different operation.\"\n        };\n    }\n    if (approval.status !== \"PENDING\") {\n        return {\n            valid: false,\n            error: `This approval has already been ${approval.status.toLowerCase()}.`\n        };\n    }\n    if (new Date() > approval.expiresAt) {\n        await ctx.prisma.assistantApproval.update({\n            where: {\n                planId: approvalToken\n            },\n            data: {\n                status: \"EXPIRED\"\n            }\n        });\n        return {\n            valid: false,\n            error: \"This approval has expired. Please run the command again with dryRun=true.\"\n        };\n    }\n    // Mark as approved\n    await ctx.prisma.assistantApproval.update({\n        where: {\n            planId: approvalToken\n        },\n        data: {\n            status: \"APPROVED\",\n            approvedAt: new Date(),\n            approvedBy: ctx.user.id\n        }\n    });\n    return {\n        valid: true,\n        data: approval.dryRunData\n    };\n}\nasync function executeTool(toolName, args, ctx) {\n    const startTime = Date.now();\n    const sanitizedArgs = sanitizeArgsForLogging(args);\n    // V3: Check role-based permissions\n    if (!hasToolPermission(ctx.user.role, toolName)) {\n        console.log(`[Assistant] Permission denied: ${toolName}`, {\n            userId: ctx.user.id,\n            role: ctx.user.role\n        });\n        return {\n            status: \"error\",\n            message: `You don't have permission to use ${toolName}. This tool requires ${getRequiredRolesForTool(toolName).join(\" or \")} role.`\n        };\n    }\n    // V3: Check rate limit\n    const rateLimit = checkRateLimit(ctx.user.id);\n    if (!rateLimit.allowed) {\n        console.log(`[Assistant] Rate limit exceeded: ${toolName}`, {\n            userId: ctx.user.id,\n            resetAt: rateLimit.resetAt\n        });\n        return {\n            status: \"error\",\n            message: `Rate limit exceeded. You have used all ${RATE_LIMIT_MAX_CALLS} tool calls this hour. Limit resets at ${rateLimit.resetAt.toISOString()}.`\n        };\n    }\n    console.log(`[Assistant] Tool start: ${toolName}`, {\n        userId: ctx.user.id,\n        role: ctx.user.role,\n        args: sanitizedArgs,\n        rateLimitRemaining: rateLimit.remaining\n    });\n    try {\n        let result;\n        switch(toolName){\n            case \"find_contracts\":\n                result = await findContracts(args, ctx);\n                break;\n            case \"create_contract_draft\":\n                result = await createContractDraft(args, ctx);\n                break;\n            case \"send_contract\":\n                result = await sendContract(args, ctx);\n                break;\n            case \"get_employee\":\n                result = await getEmployee(args, ctx);\n                break;\n            case \"start_onboarding\":\n                result = await startOnboarding(args, ctx);\n                break;\n            case \"get_onboarding_status\":\n                result = await getOnboardingStatus(args, ctx);\n                break;\n            case \"count_hires_by_year\":\n                result = await countHiresByYear(args, ctx);\n                break;\n            // V2 Contract Tools\n            case \"update_contract_draft\":\n                result = await updateContractDraft(args, ctx);\n                break;\n            case \"resend_contract\":\n                result = await resendContract(args, ctx);\n                break;\n            case \"cancel_contract\":\n                result = await cancelContract(args, ctx);\n                break;\n            // V2 Onboarding Task Tools\n            case \"complete_onboarding_task\":\n                result = await completeOnboardingTask(args, ctx);\n                break;\n            case \"run_onboarding_task\":\n                result = await runOnboardingTask(args, ctx);\n                break;\n            case \"skip_onboarding_task\":\n                result = await skipOnboardingTask(args, ctx);\n                break;\n            // V2 Offboarding Tools\n            case \"start_offboarding\":\n                result = await startOffboarding(args, ctx);\n                break;\n            case \"get_offboarding_status\":\n                result = await getOffboardingStatus(args, ctx);\n                break;\n            // V2 Integration Tools\n            case \"list_integrations\":\n                result = await listIntegrations(args, ctx);\n                break;\n            case \"test_integration_connection\":\n                result = await testIntegrationConnection(args, ctx);\n                break;\n            // V2 Notification & Audit Tools\n            case \"list_notifications\":\n                result = await listNotifications(args, ctx);\n                break;\n            case \"search_audit_log\":\n                result = await searchAuditLog(args, ctx);\n                break;\n            // V3 Proactive Tools\n            case \"get_daily_brief\":\n                result = await getDailyBrief(args, ctx);\n                break;\n            // V3 Bulk Operations\n            case \"bulk_start_onboarding\":\n                result = await bulkStartOnboarding(args, ctx);\n                break;\n            case \"bulk_resend_contracts\":\n                result = await bulkResendContracts(args, ctx);\n                break;\n            case \"bulk_deprovision_access\":\n                result = await bulkDeprovisionAccess(args, ctx);\n                break;\n            default:\n                result = {\n                    status: \"error\",\n                    message: `Unknown tool: ${toolName}`\n                };\n        }\n        const latencyMs = Date.now() - startTime;\n        console.log(`[Assistant] Tool complete: ${toolName}`, {\n            status: result.status,\n            latencyMs,\n            userId: ctx.user.id\n        });\n        return result;\n    } catch (error) {\n        const latencyMs = Date.now() - startTime;\n        console.error(`[Assistant] Tool error: ${toolName}`, {\n            error: error instanceof Error ? error.message : \"Unknown error\",\n            latencyMs,\n            userId: ctx.user.id\n        });\n        return {\n            status: \"error\",\n            message: error instanceof Error ? error.message : \"An unexpected error occurred\"\n        };\n    }\n}\nasync function findContracts(args, ctx) {\n    const { search, status, limit = 10 } = args;\n    const where = {};\n    if (status) where.status = status;\n    if (search) {\n        where.OR = [\n            {\n                candidateName: {\n                    contains: search,\n                    mode: \"insensitive\"\n                }\n            },\n            {\n                candidateEmail: {\n                    contains: search,\n                    mode: \"insensitive\"\n                }\n            }\n        ];\n    }\n    const offers = await ctx.prisma.offer.findMany({\n        where,\n        select: {\n            id: true,\n            candidateName: true,\n            candidateEmail: true,\n            status: true,\n            createdAt: true,\n            variables: true,\n            template: {\n                select: {\n                    name: true\n                }\n            }\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        },\n        take: Math.min(limit, 20)\n    });\n    const contracts = offers.map((o)=>({\n            id: o.id,\n            candidateName: o.candidateName,\n            candidateEmail: o.candidateEmail,\n            status: o.status,\n            roleTitle: o.variables?.role || o.variables?.job_title || null,\n            startDate: o.variables?.start_date || null,\n            templateName: o.template?.name || null,\n            createdAt: o.createdAt\n        }));\n    return {\n        status: \"ok\",\n        data: {\n            contracts,\n            total: contracts.length\n        },\n        message: contracts.length === 0 ? \"No contracts found matching your criteria.\" : `Found ${contracts.length} contract(s).`\n    };\n}\nasync function createContractDraft(args, ctx) {\n    const requiredFields = [\n        \"candidateName\",\n        \"candidateEmail\",\n        \"roleTitle\",\n        \"startDate\",\n        \"compensationAmount\",\n        \"currency\"\n    ];\n    const missingFields = requiredFields.filter((f)=>!args[f]);\n    if (missingFields.length > 0) {\n        return {\n            status: \"missing_fields\",\n            missingFields,\n            message: `Please provide: ${missingFields.join(\", \")}`\n        };\n    }\n    const { candidateName, candidateEmail, roleTitle, startDate, compensationAmount, currency, templateId, location, signatureBlockId } = args;\n    // Find or get default template\n    let template = templateId ? await ctx.prisma.offerTemplate.findUnique({\n        where: {\n            id: templateId\n        }\n    }) : await ctx.prisma.offerTemplate.findFirst({\n        where: {\n            isActive: true\n        }\n    });\n    if (!template) {\n        return {\n            status: \"error\",\n            message: \"No offer template found. Please create an offer template first in Settings.\"\n        };\n    }\n    // Check if employee exists\n    let employee = await ctx.prisma.employee.findUnique({\n        where: {\n            personalEmail: candidateEmail\n        }\n    });\n    if (!employee) {\n        // Create as candidate\n        employee = await ctx.prisma.employee.create({\n            data: {\n                fullName: candidateName,\n                personalEmail: candidateEmail,\n                status: \"CANDIDATE\",\n                jobTitle: roleTitle,\n                startDate: startDate ? new Date(startDate) : undefined,\n                salaryAmount: compensationAmount,\n                salaryCurrency: currency,\n                location: location\n            }\n        });\n    }\n    const variables = {\n        role: roleTitle,\n        job_title: roleTitle,\n        start_date: startDate,\n        salary: String(compensationAmount),\n        currency: currency,\n        candidate_name: candidateName\n    };\n    if (location) variables.location = location;\n    if (signatureBlockId) variables.signature_block_id = signatureBlockId;\n    const offer = await ctx.prisma.offer.create({\n        data: {\n            employeeId: employee.id,\n            candidateEmail: candidateEmail,\n            candidateName: candidateName,\n            templateId: template.id,\n            variables,\n            status: \"DRAFT\"\n        }\n    });\n    await ctx.prisma.offerEvent.create({\n        data: {\n            offerId: offer.id,\n            type: \"created\",\n            description: \"Contract draft created via Blue AI\"\n        }\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"offer\",\n        resourceId: offer.id,\n        metadata: {\n            tool: \"create_contract_draft\",\n            candidateName,\n            candidateEmail,\n            roleTitle,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            contractId: offer.id,\n            candidateName,\n            roleTitle,\n            startDate\n        },\n        message: `Contract draft created for ${candidateName} (${roleTitle}). Contract ID: ${offer.id}`\n    };\n}\nasync function sendContract(args, ctx) {\n    const { contractId, confirmed } = args;\n    if (!contractId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"contractId\"\n            ],\n            message: \"Please provide the contract ID.\"\n        };\n    }\n    const offer = await ctx.prisma.offer.findUnique({\n        where: {\n            id: contractId\n        },\n        include: {\n            template: true,\n            employee: true\n        }\n    });\n    if (!offer) {\n        return {\n            status: \"error\",\n            message: \"Contract not found.\"\n        };\n    }\n    if (offer.status !== \"DRAFT\") {\n        return {\n            status: \"error\",\n            message: `Contract is in ${offer.status} status and cannot be sent. Only DRAFT contracts can be sent.`\n        };\n    }\n    // If not confirmed, return summary for confirmation\n    if (!confirmed) {\n        return {\n            status: \"confirmation_required\",\n            missingFields: [\n                \"confirmed\"\n            ],\n            summary: `Ready to send contract to ${offer.candidateName} (${offer.candidateEmail}) for ${offer.variables?.role || offer.variables?.job_title || \"the role\"}.`,\n            message: \"Please confirm to send this contract for signature.\",\n            data: {\n                contractId: offer.id,\n                candidateName: offer.candidateName,\n                candidateEmail: offer.candidateEmail,\n                roleTitle: offer.variables?.role || offer.variables?.job_title\n            }\n        };\n    }\n    // Actually send the contract\n    const { createDocuSignConnector } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations/docusign */ \"(rsc)/./src/lib/integrations/docusign.ts\"));\n    const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n    const { wrapAgreementHtmlWithLetterhead } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/letterhead */ \"(rsc)/./src/lib/letterhead.ts\"));\n    const { sendOfferEmail } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/email */ \"(rsc)/./src/lib/email.ts\"));\n    const organization = await getOrganization();\n    const docusign = createDocuSignConnector();\n    if (docusign) {\n        try {\n            const documentHtml = wrapAgreementHtmlWithLetterhead(offer.renderedHtml || \"\", organization, {\n                baseUrl: process.env.NEXTAUTH_URL\n            });\n            const result = await docusign.sendEnvelope({\n                signerEmail: offer.candidateEmail,\n                signerName: offer.candidateName,\n                subject: `Offer from ${organization.name} - ${offer.candidateName}`,\n                documentHtml,\n                callbackUrl: `${process.env.NEXTAUTH_URL}/api/webhooks/docusign`\n            });\n            await ctx.prisma.offer.update({\n                where: {\n                    id: offer.id\n                },\n                data: {\n                    status: \"SENT\",\n                    esignEnvelopeId: result.envelopeId,\n                    esignProvider: \"docusign\",\n                    esignStatus: result.status,\n                    esignSentAt: new Date(),\n                    sentBy: ctx.user.id\n                }\n            });\n        } catch (error) {\n            return {\n                status: \"error\",\n                message: `Failed to send via DocuSign: ${error instanceof Error ? error.message : \"Unknown error\"}`\n            };\n        }\n    } else {\n        // Fallback to email\n        const offerLink = `${process.env.NEXTAUTH_URL}/offer/${offer.id}/sign`;\n        await sendOfferEmail({\n            candidateEmail: offer.candidateEmail,\n            candidateName: offer.candidateName,\n            offerLink,\n            companyName: organization.name,\n            logoUrl: organization.logoUrl || undefined\n        });\n        await ctx.prisma.offer.update({\n            where: {\n                id: offer.id\n            },\n            data: {\n                status: \"SENT\",\n                esignProvider: \"internal\",\n                esignStatus: \"sent\",\n                esignSentAt: new Date(),\n                sentBy: ctx.user.id\n            }\n        });\n    }\n    // Update employee status\n    await ctx.prisma.employee.update({\n        where: {\n            id: offer.employeeId\n        },\n        data: {\n            status: \"OFFER_SENT\"\n        }\n    });\n    await ctx.prisma.offerEvent.create({\n        data: {\n            offerId: offer.id,\n            type: \"sent\",\n            description: \"Contract sent via Blue AI\"\n        }\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"offer\",\n        resourceId: offer.id,\n        metadata: {\n            tool: \"send_contract\",\n            candidateEmail: offer.candidateEmail,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            contractId: offer.id,\n            candidateEmail: offer.candidateEmail\n        },\n        message: `Contract sent to ${offer.candidateName} at ${offer.candidateEmail}.`\n    };\n}\nasync function getEmployee(args, ctx) {\n    const { id, search } = args;\n    if (!id && !search) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"id or search\"\n            ],\n            message: \"Please provide an employee ID or search term.\"\n        };\n    }\n    const isHR = ctx.user.role === \"SUPER_ADMIN\" || ctx.user.role === \"HR_ADMIN\";\n    if (id) {\n        const employee = await ctx.prisma.employee.findUnique({\n            where: {\n                id\n            },\n            include: {\n                manager: {\n                    select: {\n                        id: true,\n                        fullName: true\n                    }\n                },\n                onboardingWorkflows: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 1\n                }\n            }\n        });\n        if (!employee) {\n            return {\n                status: \"error\",\n                message: \"Employee not found.\"\n            };\n        }\n        // Build result with all fields - mask sensitive fields for non-HR\n        const result = {\n            // Basic info\n            id: employee.id,\n            fullName: employee.fullName,\n            personalEmail: employee.personalEmail,\n            workEmail: employee.workEmail,\n            phone: employee.phone,\n            profileImageUrl: employee.profileImageUrl,\n            // Job details\n            jobTitle: employee.jobTitle,\n            department: employee.department,\n            location: employee.location,\n            employmentType: employee.employmentType,\n            status: employee.status,\n            manager: employee.manager,\n            // Dates\n            startDate: employee.startDate,\n            endDate: employee.endDate,\n            // Address\n            addressStreet: employee.addressStreet,\n            addressCity: employee.addressCity,\n            addressState: employee.addressState,\n            addressPostal: employee.addressPostal,\n            addressCountry: employee.addressCountry,\n            // Personal details\n            gender: employee.gender,\n            maritalStatus: employee.maritalStatus,\n            dateOfBirth: employee.dateOfBirth,\n            nationality: employee.nationality,\n            // HR-only sensitive fields\n            ...isHR ? {\n                // Compensation\n                salaryAmount: employee.salaryAmount,\n                salaryCurrency: employee.salaryCurrency,\n                contractType: employee.contractType,\n                taxId: employee.taxId,\n                // Bank details\n                bankName: employee.bankName,\n                accountName: employee.accountName,\n                accountNumber: employee.accountNumber,\n                accountSortCode: employee.accountSortCode,\n                // Emergency contact\n                emergencyContactName: employee.emergencyContactName,\n                emergencyContactRelation: employee.emergencyContactRelation,\n                emergencyContactPhone: employee.emergencyContactPhone,\n                emergencyContactEmail: employee.emergencyContactEmail\n            } : {},\n            link: buildDeepLink(\"employee\", employee.id)\n        };\n        return {\n            status: \"ok\",\n            data: {\n                employee: result\n            }\n        };\n    }\n    // Search by name/email\n    const employees = await ctx.prisma.employee.findMany({\n        where: {\n            OR: [\n                {\n                    fullName: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    personalEmail: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    workEmail: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                }\n            ]\n        },\n        select: {\n            id: true,\n            fullName: true,\n            personalEmail: true,\n            workEmail: true,\n            phone: true,\n            jobTitle: true,\n            department: true,\n            status: true\n        },\n        take: 10\n    });\n    if (employees.length === 0) {\n        return {\n            status: \"ok\",\n            data: {\n                employees: []\n            },\n            message: `No employees found matching \"${search}\".`\n        };\n    }\n    if (employees.length === 1) {\n        // Return full details for single match\n        return getEmployee({\n            id: employees[0].id\n        }, ctx);\n    }\n    return {\n        status: \"ok\",\n        data: {\n            employees,\n            multiple: true\n        },\n        message: `Found ${employees.length} employees. Please specify which one.`\n    };\n}\nasync function startOnboarding(args, ctx) {\n    const { employeeId, startDate, confirmed } = args;\n    if (!employeeId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"employeeId\"\n            ],\n            message: \"Please provide the employee ID.\"\n        };\n    }\n    const employee = await ctx.prisma.employee.findUnique({\n        where: {\n            id: employeeId\n        },\n        include: {\n            manager: true\n        }\n    });\n    if (!employee) {\n        return {\n            status: \"error\",\n            message: \"Employee not found.\"\n        };\n    }\n    if (![\n        \"OFFER_SIGNED\",\n        \"HIRED_PENDING_START\"\n    ].includes(employee.status)) {\n        return {\n            status: \"error\",\n            message: `Employee is in ${employee.status} status. Onboarding can only be started for employees in OFFER_SIGNED or HIRED_PENDING_START status.`\n        };\n    }\n    // Check for existing active workflow\n    const existingWorkflow = await ctx.prisma.onboardingWorkflow.findFirst({\n        where: {\n            employeeId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        }\n    });\n    if (existingWorkflow) {\n        return {\n            status: \"error\",\n            message: \"Employee already has an active onboarding workflow.\"\n        };\n    }\n    // If not confirmed, return summary\n    if (!confirmed) {\n        return {\n            status: \"confirmation_required\",\n            missingFields: [\n                \"confirmed\"\n            ],\n            summary: `Ready to start onboarding for ${employee.fullName} (${employee.jobTitle || \"Employee\"})${employee.startDate ? ` starting ${employee.startDate.toISOString().split(\"T\")[0]}` : \"\"}.`,\n            message: \"Please confirm to start onboarding workflow.\",\n            data: {\n                employeeId: employee.id,\n                employeeName: employee.fullName,\n                jobTitle: employee.jobTitle,\n                startDate: employee.startDate\n            }\n        };\n    }\n    // Start onboarding\n    const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n    const { sendOnboardingEmail } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/email */ \"(rsc)/./src/lib/email.ts\"));\n    const organization = await getOrganization();\n    // Get default tasks\n    const templates = await ctx.prisma.onboardingTaskTemplate.findMany({\n        where: {\n            organizationId: organization.id,\n            isActive: true\n        },\n        orderBy: {\n            sortOrder: \"asc\"\n        }\n    });\n    const tasks = templates.length > 0 ? templates.map((t, idx)=>({\n            name: t.name,\n            type: t.type,\n            automationType: t.automationType,\n            automationConfig: t.appId ? {\n                appId: t.appId,\n                appType: t.appType\n            } : t.appType ? {\n                appType: t.appType\n            } : undefined,\n            sortOrder: idx + 1\n        })) : [\n        {\n            name: \"Provision Google Workspace account\",\n            type: \"AUTOMATED\",\n            automationType: \"provision_google\",\n            sortOrder: 1\n        },\n        {\n            name: \"Provision Slack account\",\n            type: \"AUTOMATED\",\n            automationType: \"provision_slack\",\n            sortOrder: 2\n        },\n        {\n            name: \"Confirm laptop/hardware has been ordered\",\n            type: \"MANUAL\",\n            sortOrder: 3\n        },\n        {\n            name: \"Schedule orientation meeting\",\n            type: \"MANUAL\",\n            sortOrder: 4\n        }\n    ];\n    const effectiveStartDate = startDate ? new Date(startDate) : employee.startDate || new Date();\n    const workflow = await ctx.prisma.onboardingWorkflow.create({\n        data: {\n            employeeId,\n            status: \"IN_PROGRESS\",\n            startedAt: new Date(),\n            accessTokenExpiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n            tasks: {\n                create: tasks.map((task)=>({\n                        name: task.name,\n                        type: task.type,\n                        status: \"PENDING\",\n                        automationType: task.automationType,\n                        automationConfig: task.automationConfig,\n                        sortOrder: task.sortOrder\n                    }))\n            }\n        },\n        include: {\n            tasks: true\n        }\n    });\n    // Update employee\n    await ctx.prisma.employee.update({\n        where: {\n            id: employeeId\n        },\n        data: {\n            status: \"HIRED_PENDING_START\",\n            startDate: effectiveStartDate\n        }\n    });\n    // Send onboarding email\n    const onboardingLink = `${process.env.NEXTAUTH_URL}/welcome/${workflow.accessToken}`;\n    await sendOnboardingEmail({\n        employeeEmail: employee.workEmail || employee.personalEmail,\n        employeeName: employee.fullName,\n        onboardingLink,\n        startDate: effectiveStartDate,\n        managerName: employee.manager?.fullName,\n        companyName: organization.name\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"employee\",\n        resourceId: employeeId,\n        metadata: {\n            tool: \"start_onboarding\",\n            workflowId: workflow.id,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            workflowId: workflow.id,\n            employeeName: employee.fullName,\n            taskCount: workflow.tasks.length\n        },\n        message: `Onboarding started for ${employee.fullName}. ${workflow.tasks.length} tasks created. Welcome email sent to ${employee.workEmail || employee.personalEmail}.`\n    };\n}\nasync function getOnboardingStatus(args, ctx) {\n    const { employeeId, workflowId } = args;\n    if (!employeeId && !workflowId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"employeeId or workflowId\"\n            ],\n            message: \"Please provide employee ID or workflow ID.\"\n        };\n    }\n    const workflow = workflowId ? await ctx.prisma.onboardingWorkflow.findUnique({\n        where: {\n            id: workflowId\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    startDate: true\n                }\n            },\n            tasks: {\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            }\n        }\n    }) : await ctx.prisma.onboardingWorkflow.findFirst({\n        where: {\n            employeeId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    startDate: true\n                }\n            },\n            tasks: {\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            }\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        }\n    });\n    if (!workflow) {\n        return {\n            status: \"ok\",\n            data: null,\n            message: \"No onboarding workflow found for this employee.\"\n        };\n    }\n    const completedTasks = workflow.tasks.filter((t)=>t.status === \"SUCCESS\" || t.status === \"SKIPPED\").length;\n    const totalTasks = workflow.tasks.length;\n    const percentComplete = totalTasks > 0 ? Math.round(completedTasks / totalTasks * 100) : 0;\n    const pendingTasks = workflow.tasks.filter((t)=>t.status === \"PENDING\" || t.status === \"IN_PROGRESS\" || t.status === \"FAILED\").slice(0, 5).map((t)=>({\n            name: t.name,\n            type: t.type,\n            status: t.status,\n            statusMessage: t.statusMessage\n        }));\n    return {\n        status: \"ok\",\n        data: {\n            workflowId: workflow.id,\n            employee: workflow.employee,\n            workflowStatus: workflow.status,\n            percentComplete,\n            completedTasks,\n            totalTasks,\n            pendingTasks,\n            startedAt: workflow.startedAt\n        },\n        message: `Onboarding for ${workflow.employee.fullName}: ${percentComplete}% complete (${completedTasks}/${totalTasks} tasks).`\n    };\n}\nasync function countHiresByYear(args, ctx) {\n    const { year } = args;\n    if (!year) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"year\"\n            ],\n            message: \"Please provide the year.\"\n        };\n    }\n    const startOfYear = new Date(`${year}-01-01T00:00:00.000Z`);\n    const endOfYear = new Date(`${year + 1}-01-01T00:00:00.000Z`);\n    // Definition: employees with startDate in the year and status indicating hired\n    // Includes: ACTIVE, HIRED_PENDING_START, OFFBOARDING, EXITED, OFFER_SIGNED\n    // Excludes: CANDIDATE, OFFER_SENT (not yet hired)\n    const hireStatuses = [\n        \"ACTIVE\",\n        \"HIRED_PENDING_START\",\n        \"OFFBOARDING\",\n        \"EXITED\",\n        \"OFFER_SIGNED\"\n    ];\n    const count = await ctx.prisma.employee.count({\n        where: {\n            startDate: {\n                gte: startOfYear,\n                lt: endOfYear\n            },\n            status: {\n                in: hireStatuses\n            }\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            year,\n            count,\n            hireStatuses\n        },\n        message: `${count} employees hired in ${year}.`\n    };\n}\n// ============================================\n// V2 TOOL IMPLEMENTATIONS\n// ============================================\nconst BASE_URL = process.env.NEXTAUTH_URL || \"\";\n// Helper to build deep links\nfunction buildDeepLink(type, id) {\n    const paths = {\n        contract: `/contracts/${id}`,\n        employee: `/employees/${id}`,\n        onboarding: `/onboarding/${id}`,\n        offboarding: `/offboarding/${id}`,\n        integration: `/integrations/${id}`\n    };\n    return `${BASE_URL}${paths[type]}`;\n}\n// V2 Contract Tools\nasync function updateContractDraft(args, ctx) {\n    const { contractId, roleTitle, startDate, compensationAmount, currency, location, legalEntityId, signatureBlockId } = args;\n    if (!contractId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"contractId\"\n            ],\n            message: \"Please provide the contract ID.\"\n        };\n    }\n    const offer = await ctx.prisma.offer.findUnique({\n        where: {\n            id: contractId\n        },\n        include: {\n            template: true\n        }\n    });\n    if (!offer) {\n        return {\n            status: \"error\",\n            message: \"Contract not found.\"\n        };\n    }\n    // Check status restrictions\n    const nonEditableStatuses = [\n        \"SIGNED\",\n        \"DECLINED\",\n        \"EXPIRED\",\n        \"CANCELLED\"\n    ];\n    if (nonEditableStatuses.includes(offer.status)) {\n        return {\n            status: \"error\",\n            message: `Contract is in ${offer.status} status and cannot be edited. Only DRAFT, SENT, or VIEWED contracts can be updated.`\n        };\n    }\n    // Build update data\n    const variables = {\n        ...offer.variables\n    };\n    const updateData = {};\n    if (roleTitle) {\n        variables.role = roleTitle;\n        variables.job_title = roleTitle;\n    }\n    if (startDate) variables.start_date = startDate;\n    if (compensationAmount !== undefined) variables.salary = String(compensationAmount);\n    if (currency) variables.currency = currency;\n    if (location) variables.location = location;\n    updateData.variables = variables;\n    if (legalEntityId) updateData.legalEntityId = legalEntityId;\n    if (signatureBlockId) updateData.signatureBlockId = signatureBlockId;\n    await ctx.prisma.offer.update({\n        where: {\n            id: contractId\n        },\n        data: updateData\n    });\n    await ctx.prisma.offerEvent.create({\n        data: {\n            offerId: contractId,\n            type: \"updated\",\n            description: \"Contract updated via Blue AI\"\n        }\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"offer\",\n        resourceId: contractId,\n        metadata: {\n            tool: \"update_contract_draft\",\n            updates: {\n                roleTitle,\n                startDate,\n                compensationAmount,\n                currency,\n                location\n            },\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            contractId,\n            candidateName: offer.candidateName,\n            url: buildDeepLink(\"contract\", contractId)\n        },\n        message: `Contract for ${offer.candidateName} has been updated. [View contract](${buildDeepLink(\"contract\", contractId)})`\n    };\n}\nasync function resendContract(args, ctx) {\n    const { contractId, confirmed } = args;\n    if (!contractId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"contractId\"\n            ],\n            message: \"Please provide the contract ID.\"\n        };\n    }\n    const offer = await ctx.prisma.offer.findUnique({\n        where: {\n            id: contractId\n        },\n        include: {\n            template: true,\n            employee: true\n        }\n    });\n    if (!offer) {\n        return {\n            status: \"error\",\n            message: \"Contract not found.\"\n        };\n    }\n    // Check status restrictions\n    const allowedStatuses = [\n        \"SENT\",\n        \"VIEWED\"\n    ];\n    if (!allowedStatuses.includes(offer.status)) {\n        return {\n            status: \"error\",\n            message: `Contract is in ${offer.status} status. Only contracts in SENT or VIEWED status can be resent.`\n        };\n    }\n    // If not confirmed, return summary for confirmation\n    if (!confirmed) {\n        return {\n            status: \"confirmation_required\",\n            missingFields: [\n                \"confirmed\"\n            ],\n            summary: `Ready to resend contract to ${offer.candidateName} (${offer.candidateEmail}) for ${offer.variables?.role || offer.variables?.job_title || \"the role\"}.`,\n            message: \"Please confirm to resend this contract for signature.\",\n            data: {\n                contractId: offer.id,\n                candidateName: offer.candidateName,\n                candidateEmail: offer.candidateEmail,\n                roleTitle: offer.variables?.role || offer.variables?.job_title,\n                currentStatus: offer.status,\n                url: buildDeepLink(\"contract\", offer.id)\n            }\n        };\n    }\n    // Actually resend the contract\n    const { createDocuSignConnector } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations/docusign */ \"(rsc)/./src/lib/integrations/docusign.ts\"));\n    const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n    const { wrapAgreementHtmlWithLetterhead } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/letterhead */ \"(rsc)/./src/lib/letterhead.ts\"));\n    const { sendOfferEmail } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/email */ \"(rsc)/./src/lib/email.ts\"));\n    const organization = await getOrganization();\n    const docusign = createDocuSignConnector();\n    if (docusign) {\n        try {\n            const documentHtml = wrapAgreementHtmlWithLetterhead(offer.renderedHtml || \"\", organization, {\n                baseUrl: BASE_URL\n            });\n            const result = await docusign.sendEnvelope({\n                signerEmail: offer.candidateEmail,\n                signerName: offer.candidateName,\n                subject: `Reminder: Offer from ${organization.name} - ${offer.candidateName}`,\n                documentHtml,\n                callbackUrl: `${BASE_URL}/api/webhooks/docusign`\n            });\n            await ctx.prisma.offer.update({\n                where: {\n                    id: offer.id\n                },\n                data: {\n                    esignEnvelopeId: result.envelopeId,\n                    esignStatus: result.status,\n                    esignSentAt: new Date()\n                }\n            });\n        } catch (error) {\n            return {\n                status: \"error\",\n                message: `Failed to resend via DocuSign: ${error instanceof Error ? error.message : \"Unknown error\"}`\n            };\n        }\n    } else {\n        // Fallback to email\n        const offerLink = `${BASE_URL}/offer/${offer.id}/sign`;\n        await sendOfferEmail({\n            candidateEmail: offer.candidateEmail,\n            candidateName: offer.candidateName,\n            offerLink,\n            companyName: organization.name,\n            logoUrl: organization.logoUrl || undefined\n        });\n    }\n    await ctx.prisma.offerEvent.create({\n        data: {\n            offerId: offer.id,\n            type: \"resent\",\n            description: \"Contract resent via Blue AI\"\n        }\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"offer\",\n        resourceId: offer.id,\n        metadata: {\n            tool: \"resend_contract\",\n            candidateEmail: offer.candidateEmail,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            contractId: offer.id,\n            candidateEmail: offer.candidateEmail,\n            url: buildDeepLink(\"contract\", offer.id)\n        },\n        message: `Contract resent to ${offer.candidateName} at ${offer.candidateEmail}. [View contract](${buildDeepLink(\"contract\", offer.id)})`\n    };\n}\nasync function cancelContract(args, ctx) {\n    const { contractId, reason, confirmed } = args;\n    if (!contractId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"contractId\"\n            ],\n            message: \"Please provide the contract ID.\"\n        };\n    }\n    if (!reason) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"reason\"\n            ],\n            message: \"Please provide a reason for cancellation.\"\n        };\n    }\n    const offer = await ctx.prisma.offer.findUnique({\n        where: {\n            id: contractId\n        },\n        include: {\n            template: true\n        }\n    });\n    if (!offer) {\n        return {\n            status: \"error\",\n            message: \"Contract not found.\"\n        };\n    }\n    // Cannot cancel signed contracts\n    if (offer.status === \"SIGNED\") {\n        return {\n            status: \"error\",\n            message: \"Contract is already SIGNED and cannot be cancelled.\"\n        };\n    }\n    // If not confirmed, return summary for confirmation\n    if (!confirmed) {\n        return {\n            status: \"confirmation_required\",\n            missingFields: [\n                \"confirmed\"\n            ],\n            summary: `‚ö†Ô∏è About to CANCEL contract for ${offer.candidateName} (${offer.candidateEmail}). This action cannot be undone.`,\n            message: `Reason: ${reason}\\n\\nPlease confirm to cancel this contract.`,\n            data: {\n                contractId: offer.id,\n                candidateName: offer.candidateName,\n                candidateEmail: offer.candidateEmail,\n                roleTitle: offer.variables?.role || offer.variables?.job_title,\n                currentStatus: offer.status,\n                reason,\n                url: buildDeepLink(\"contract\", offer.id)\n            }\n        };\n    }\n    // Void DocuSign envelope if applicable\n    if (offer.esignProvider === \"docusign\" && offer.esignEnvelopeId) {\n        try {\n            const { createDocuSignConnector } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations/docusign */ \"(rsc)/./src/lib/integrations/docusign.ts\"));\n            const docusign = createDocuSignConnector();\n            if (docusign) {\n                await docusign.voidEnvelope(offer.esignEnvelopeId, reason);\n            }\n        } catch (error) {\n            console.error(\"[Assistant] Failed to void DocuSign envelope:\", error);\n        // Continue with cancellation even if DocuSign void fails\n        }\n    }\n    await ctx.prisma.offer.update({\n        where: {\n            id: contractId\n        },\n        data: {\n            status: \"CANCELLED\"\n        }\n    });\n    await ctx.prisma.offerEvent.create({\n        data: {\n            offerId: contractId,\n            type: \"cancelled\",\n            description: `Contract cancelled via Blue AI. Reason: ${reason}`\n        }\n    });\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"offer\",\n        resourceId: contractId,\n        metadata: {\n            tool: \"cancel_contract\",\n            reason,\n            previousStatus: offer.status,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            contractId,\n            candidateName: offer.candidateName,\n            url: buildDeepLink(\"contract\", contractId)\n        },\n        message: `Contract for ${offer.candidateName} has been cancelled. Reason: ${reason}`\n    };\n}\n// V2 Onboarding Task Tools\nasync function completeOnboardingTask(args, ctx) {\n    const { taskId, notes } = args;\n    if (!taskId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"taskId\"\n            ],\n            message: \"Please provide the task ID.\"\n        };\n    }\n    const task = await ctx.prisma.onboardingTask.findUnique({\n        where: {\n            id: taskId\n        },\n        include: {\n            workflow: {\n                include: {\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true\n                        }\n                    }\n                }\n            }\n        }\n    });\n    if (!task) {\n        return {\n            status: \"error\",\n            message: \"Onboarding task not found.\"\n        };\n    }\n    if (task.type !== \"MANUAL\") {\n        return {\n            status: \"error\",\n            message: \"This is an automated task. Use run_onboarding_task instead.\"\n        };\n    }\n    if (task.status === \"SUCCESS\" || task.status === \"SKIPPED\") {\n        return {\n            status: \"error\",\n            message: `Task is already ${task.status.toLowerCase()}.`\n        };\n    }\n    await ctx.prisma.onboardingTask.update({\n        where: {\n            id: taskId\n        },\n        data: {\n            status: \"SUCCESS\",\n            statusMessage: notes || null,\n            completedAt: new Date(),\n            completedBy: ctx.user.id\n        }\n    });\n    // Check if workflow should be completed\n    const remainingTasks = await ctx.prisma.onboardingTask.count({\n        where: {\n            workflowId: task.workflowId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        }\n    });\n    if (remainingTasks === 0) {\n        await ctx.prisma.onboardingWorkflow.update({\n            where: {\n                id: task.workflowId\n            },\n            data: {\n                status: \"COMPLETED\",\n                completedAt: new Date()\n            }\n        });\n        await ctx.prisma.employee.update({\n            where: {\n                id: task.workflow.employeeId\n            },\n            data: {\n                status: \"ACTIVE\"\n            }\n        });\n    }\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"onboarding_task\",\n        resourceId: taskId,\n        metadata: {\n            tool: \"complete_onboarding_task\",\n            taskName: task.name,\n            notes,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            taskId,\n            taskName: task.name,\n            employeeName: task.workflow.employee.fullName,\n            workflowUrl: buildDeepLink(\"onboarding\", task.workflowId)\n        },\n        message: `Task \"${task.name}\" marked as complete for ${task.workflow.employee.fullName}. [View onboarding](${buildDeepLink(\"onboarding\", task.workflowId)})`\n    };\n}\nasync function runOnboardingTask(args, ctx) {\n    const { taskId } = args;\n    if (!taskId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"taskId\"\n            ],\n            message: \"Please provide the task ID.\"\n        };\n    }\n    const task = await ctx.prisma.onboardingTask.findUnique({\n        where: {\n            id: taskId\n        },\n        include: {\n            workflow: {\n                include: {\n                    employee: true\n                }\n            }\n        }\n    });\n    if (!task) {\n        return {\n            status: \"error\",\n            message: \"Onboarding task not found.\"\n        };\n    }\n    if (task.type !== \"AUTOMATED\") {\n        return {\n            status: \"error\",\n            message: \"This is a manual task. Use complete_onboarding_task instead.\"\n        };\n    }\n    if (task.status === \"SUCCESS\") {\n        return {\n            status: \"error\",\n            message: \"Task has already been completed successfully.\"\n        };\n    }\n    // Update task to IN_PROGRESS\n    await ctx.prisma.onboardingTask.update({\n        where: {\n            id: taskId\n        },\n        data: {\n            status: \"IN_PROGRESS\",\n            attempts: {\n                increment: 1\n            },\n            lastAttemptAt: new Date()\n        }\n    });\n    // Run the automation\n    const { provisionEmployeeInApp } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\"));\n    const employee = task.workflow.employee;\n    let result = {\n        success: false,\n        error: \"Unknown automation type\"\n    };\n    try {\n        switch(task.automationType){\n            case \"provision_google\":\n                result = await provisionEmployeeInApp(employee, \"GOOGLE_WORKSPACE\", ctx.user.id);\n                break;\n            case \"provision_slack\":\n                result = await provisionEmployeeInApp(employee, \"SLACK\", ctx.user.id);\n                break;\n            case \"provision_app\":\n                if (task.automationConfig?.appId) {\n                    const { provisionEmployeeInAppById } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\"));\n                    result = await provisionEmployeeInAppById(employee, task.automationConfig.appId, ctx.user.id);\n                } else if (task.automationConfig?.appType) {\n                    result = await provisionEmployeeInApp(employee, task.automationConfig.appType, ctx.user.id);\n                }\n                break;\n            default:\n                result = {\n                    success: false,\n                    error: `Unknown automation type: ${task.automationType}`\n                };\n        }\n    } catch (error) {\n        result = {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n    // Update task status based on result\n    await ctx.prisma.onboardingTask.update({\n        where: {\n            id: taskId\n        },\n        data: {\n            status: result.success ? \"SUCCESS\" : \"FAILED\",\n            statusMessage: result.error || null,\n            completedAt: result.success ? new Date() : null\n        }\n    });\n    // Check if workflow should be completed\n    if (result.success) {\n        const remainingTasks = await ctx.prisma.onboardingTask.count({\n            where: {\n                workflowId: task.workflowId,\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"IN_PROGRESS\"\n                    ]\n                }\n            }\n        });\n        if (remainingTasks === 0) {\n            await ctx.prisma.onboardingWorkflow.update({\n                where: {\n                    id: task.workflowId\n                },\n                data: {\n                    status: \"COMPLETED\",\n                    completedAt: new Date()\n                }\n            });\n            await ctx.prisma.employee.update({\n                where: {\n                    id: task.workflow.employeeId\n                },\n                data: {\n                    status: \"ACTIVE\"\n                }\n            });\n        }\n    }\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"onboarding_task\",\n        resourceId: taskId,\n        metadata: {\n            tool: \"run_onboarding_task\",\n            taskName: task.name,\n            automationType: task.automationType,\n            success: result.success,\n            error: result.error,\n            assistantInitiated: true\n        }\n    });\n    if (result.success) {\n        return {\n            status: \"ok\",\n            data: {\n                taskId,\n                taskName: task.name,\n                workflowUrl: buildDeepLink(\"onboarding\", task.workflowId)\n            },\n            message: `Task \"${task.name}\" completed successfully. [View onboarding](${buildDeepLink(\"onboarding\", task.workflowId)})`\n        };\n    } else {\n        return {\n            status: \"error\",\n            message: `Task \"${task.name}\" failed: ${result.error}. [View onboarding](${buildDeepLink(\"onboarding\", task.workflowId)})`,\n            data: {\n                taskId,\n                taskName: task.name,\n                error: result.error,\n                workflowUrl: buildDeepLink(\"onboarding\", task.workflowId)\n            }\n        };\n    }\n}\nasync function skipOnboardingTask(args, ctx) {\n    const { taskId, reason } = args;\n    if (!taskId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"taskId\"\n            ],\n            message: \"Please provide the task ID.\"\n        };\n    }\n    if (!reason) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"reason\"\n            ],\n            message: \"Please provide a reason for skipping the task.\"\n        };\n    }\n    const task = await ctx.prisma.onboardingTask.findUnique({\n        where: {\n            id: taskId\n        },\n        include: {\n            workflow: {\n                include: {\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true\n                        }\n                    }\n                }\n            }\n        }\n    });\n    if (!task) {\n        return {\n            status: \"error\",\n            message: \"Onboarding task not found.\"\n        };\n    }\n    if (task.status === \"SUCCESS\" || task.status === \"SKIPPED\") {\n        return {\n            status: \"error\",\n            message: `Task is already ${task.status.toLowerCase()}.`\n        };\n    }\n    await ctx.prisma.onboardingTask.update({\n        where: {\n            id: taskId\n        },\n        data: {\n            status: \"SKIPPED\",\n            statusMessage: reason,\n            completedAt: new Date(),\n            completedBy: ctx.user.id\n        }\n    });\n    // Check if workflow should be completed\n    const remainingTasks = await ctx.prisma.onboardingTask.count({\n        where: {\n            workflowId: task.workflowId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        }\n    });\n    if (remainingTasks === 0) {\n        await ctx.prisma.onboardingWorkflow.update({\n            where: {\n                id: task.workflowId\n            },\n            data: {\n                status: \"COMPLETED\",\n                completedAt: new Date()\n            }\n        });\n        await ctx.prisma.employee.update({\n            where: {\n                id: task.workflow.employeeId\n            },\n            data: {\n                status: \"ACTIVE\"\n            }\n        });\n    }\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"onboarding_task\",\n        resourceId: taskId,\n        metadata: {\n            tool: \"skip_onboarding_task\",\n            taskName: task.name,\n            reason,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            taskId,\n            taskName: task.name,\n            reason,\n            workflowUrl: buildDeepLink(\"onboarding\", task.workflowId)\n        },\n        message: `Task \"${task.name}\" skipped. Reason: ${reason}. [View onboarding](${buildDeepLink(\"onboarding\", task.workflowId)})`\n    };\n}\n// V2 Offboarding Tools\nasync function startOffboarding(args, ctx) {\n    const { employeeId, isImmediate, endDate, reason, notes, confirmed } = args;\n    if (!employeeId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"employeeId\"\n            ],\n            message: \"Please provide the employee ID.\"\n        };\n    }\n    if (!isImmediate && !endDate) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"endDate\"\n            ],\n            message: \"Please provide an end date for scheduled offboarding, or set isImmediate=true for immediate offboarding.\"\n        };\n    }\n    const employee = await ctx.prisma.employee.findUnique({\n        where: {\n            id: employeeId\n        }\n    });\n    if (!employee) {\n        return {\n            status: \"error\",\n            message: \"Employee not found.\"\n        };\n    }\n    if (employee.status === \"EXITED\") {\n        return {\n            status: \"error\",\n            message: \"Employee has already exited the organization.\"\n        };\n    }\n    // Check for existing active workflow\n    const existingWorkflow = await ctx.prisma.offboardingWorkflow.findFirst({\n        where: {\n            employeeId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        }\n    });\n    if (existingWorkflow) {\n        return {\n            status: \"error\",\n            message: `Employee already has an active offboarding workflow. [View offboarding](${buildDeepLink(\"offboarding\", existingWorkflow.id)})`\n        };\n    }\n    // If not confirmed, return summary\n    if (!confirmed) {\n        return {\n            status: \"confirmation_required\",\n            missingFields: [\n                \"confirmed\"\n            ],\n            summary: `‚ö†Ô∏è About to start ${isImmediate ? \"IMMEDIATE\" : \"scheduled\"} offboarding for ${employee.fullName} (${employee.jobTitle || \"Employee\"})${endDate ? ` with end date ${endDate}` : \"\"}.`,\n            message: \"Please confirm to start offboarding workflow.\",\n            data: {\n                employeeId: employee.id,\n                employeeName: employee.fullName,\n                jobTitle: employee.jobTitle,\n                isImmediate: !!isImmediate,\n                endDate,\n                reason,\n                employeeUrl: buildDeepLink(\"employee\", employee.id)\n            }\n        };\n    }\n    // Get offboarding task templates\n    const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n    const organization = await getOrganization();\n    const templates = await ctx.prisma.offboardingTaskTemplate.findMany({\n        where: {\n            organizationId: organization.id,\n            isActive: true\n        },\n        orderBy: {\n            sortOrder: \"asc\"\n        }\n    });\n    const defaultTasks = templates.length > 0 ? templates.map((t, idx)=>({\n            name: t.name,\n            type: t.type,\n            automationType: t.automationType,\n            appId: t.appId,\n            sortOrder: idx + 1\n        })) : [\n        {\n            name: \"Collect company equipment\",\n            type: \"MANUAL\",\n            sortOrder: 1\n        },\n        {\n            name: \"Revoke building/office access\",\n            type: \"MANUAL\",\n            sortOrder: 2\n        },\n        {\n            name: \"Transfer files and documents\",\n            type: \"MANUAL\",\n            sortOrder: 3\n        },\n        {\n            name: \"Exit interview\",\n            type: \"MANUAL\",\n            sortOrder: 4\n        },\n        {\n            name: \"Deprovision Google Workspace\",\n            type: \"AUTOMATED\",\n            automationType: \"deprovision_google_workspace\",\n            sortOrder: 10\n        },\n        {\n            name: \"Deprovision Slack\",\n            type: \"AUTOMATED\",\n            automationType: \"deprovision_slack\",\n            sortOrder: 11\n        }\n    ];\n    const effectiveEndDate = endDate ? new Date(endDate) : new Date();\n    const workflow = await ctx.prisma.offboardingWorkflow.create({\n        data: {\n            employeeId,\n            status: isImmediate ? \"IN_PROGRESS\" : \"PENDING\",\n            isImmediate: !!isImmediate,\n            scheduledFor: !isImmediate ? effectiveEndDate : null,\n            startedAt: isImmediate ? new Date() : null,\n            reason,\n            notes,\n            initiatedBy: ctx.user.id,\n            tasks: {\n                create: defaultTasks.map((task)=>({\n                        name: task.name,\n                        type: task.type,\n                        status: \"PENDING\",\n                        automationType: task.automationType,\n                        appId: task.appId,\n                        sortOrder: task.sortOrder\n                    }))\n            }\n        },\n        include: {\n            tasks: true\n        }\n    });\n    // Update employee status\n    await ctx.prisma.employee.update({\n        where: {\n            id: employeeId\n        },\n        data: {\n            status: \"OFFBOARDING\",\n            endDate: effectiveEndDate\n        }\n    });\n    // If immediate, run automated tasks\n    if (isImmediate) {\n        const automatedTasks = workflow.tasks.filter((t)=>t.type === \"AUTOMATED\");\n        for (const task of automatedTasks){\n            // Fire and forget - don't wait for completion\n            runOnboardingTask({\n                taskId: task.id\n            }, ctx).catch((err)=>{\n                console.error(`[Assistant] Failed to run offboarding task ${task.id}:`, err);\n            });\n        }\n    }\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"employee\",\n        resourceId: employeeId,\n        metadata: {\n            tool: \"start_offboarding\",\n            workflowId: workflow.id,\n            isImmediate: !!isImmediate,\n            endDate,\n            reason,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            workflowId: workflow.id,\n            employeeName: employee.fullName,\n            taskCount: workflow.tasks.length,\n            isImmediate: !!isImmediate,\n            url: buildDeepLink(\"offboarding\", workflow.id)\n        },\n        message: `Offboarding started for ${employee.fullName}. ${workflow.tasks.length} tasks created. [View offboarding](${buildDeepLink(\"offboarding\", workflow.id)})`\n    };\n}\nasync function getOffboardingStatus(args, ctx) {\n    const { employeeId, workflowId } = args;\n    if (!employeeId && !workflowId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"employeeId or workflowId\"\n            ],\n            message: \"Please provide employee ID or workflow ID.\"\n        };\n    }\n    const workflow = workflowId ? await ctx.prisma.offboardingWorkflow.findUnique({\n        where: {\n            id: workflowId\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    endDate: true\n                }\n            },\n            tasks: {\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            }\n        }\n    }) : await ctx.prisma.offboardingWorkflow.findFirst({\n        where: {\n            employeeId,\n            status: {\n                in: [\n                    \"PENDING\",\n                    \"IN_PROGRESS\"\n                ]\n            }\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    endDate: true\n                }\n            },\n            tasks: {\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            }\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        }\n    });\n    if (!workflow) {\n        return {\n            status: \"ok\",\n            data: null,\n            message: \"No offboarding workflow found for this employee.\"\n        };\n    }\n    const completedTasks = workflow.tasks.filter((t)=>t.status === \"SUCCESS\" || t.status === \"SKIPPED\").length;\n    const totalTasks = workflow.tasks.length;\n    const percentComplete = totalTasks > 0 ? Math.round(completedTasks / totalTasks * 100) : 0;\n    const pendingTasks = workflow.tasks.filter((t)=>t.status === \"PENDING\" || t.status === \"IN_PROGRESS\" || t.status === \"FAILED\").slice(0, 5).map((t)=>({\n            id: t.id,\n            name: t.name,\n            type: t.type,\n            status: t.status,\n            statusMessage: t.statusMessage\n        }));\n    return {\n        status: \"ok\",\n        data: {\n            workflowId: workflow.id,\n            employee: workflow.employee,\n            workflowStatus: workflow.status,\n            isImmediate: workflow.isImmediate,\n            scheduledFor: workflow.scheduledFor,\n            percentComplete,\n            completedTasks,\n            totalTasks,\n            pendingTasks,\n            reason: workflow.reason,\n            startedAt: workflow.startedAt,\n            url: buildDeepLink(\"offboarding\", workflow.id)\n        },\n        message: `Offboarding for ${workflow.employee.fullName}: ${percentComplete}% complete (${completedTasks}/${totalTasks} tasks). [View offboarding](${buildDeepLink(\"offboarding\", workflow.id)})`\n    };\n}\n// V2 Integration Tools\nasync function listIntegrations(args, ctx) {\n    const { includeDisabled } = args;\n    const where = {\n        archivedAt: null\n    };\n    if (!includeDisabled) {\n        where.isEnabled = true;\n    }\n    const apps = await ctx.prisma.app.findMany({\n        where,\n        include: {\n            connections: {\n                where: {\n                    isActive: true\n                },\n                select: {\n                    id: true,\n                    domain: true,\n                    lastTestStatus: true,\n                    lastTestedAt: true,\n                    lastTestError: true\n                }\n            },\n            _count: {\n                select: {\n                    accounts: {\n                        where: {\n                            status: \"ACTIVE\"\n                        }\n                    }\n                }\n            }\n        },\n        orderBy: {\n            name: \"asc\"\n        }\n    });\n    const integrations = apps.map((app)=>({\n            id: app.id,\n            name: app.name,\n            type: app.type,\n            isEnabled: app.isEnabled,\n            connectionStatus: app.connections.length > 0 ? app.connections[0].lastTestStatus || \"UNKNOWN\" : \"NOT_CONNECTED\",\n            lastTestedAt: app.connections[0]?.lastTestedAt,\n            activeAccounts: app._count.accounts,\n            url: buildDeepLink(\"integration\", app.id)\n        }));\n    return {\n        status: \"ok\",\n        data: {\n            integrations,\n            total: integrations.length\n        },\n        message: `Found ${integrations.length} integration(s).`\n    };\n}\nasync function testIntegrationConnection(args, ctx) {\n    const { appId } = args;\n    if (!appId) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"appId\"\n            ],\n            message: \"Please provide the app ID.\"\n        };\n    }\n    const app = await ctx.prisma.app.findUnique({\n        where: {\n            id: appId\n        },\n        include: {\n            connections: {\n                where: {\n                    isActive: true\n                }\n            }\n        }\n    });\n    if (!app) {\n        return {\n            status: \"error\",\n            message: \"App not found.\"\n        };\n    }\n    if (app.connections.length === 0) {\n        return {\n            status: \"error\",\n            message: `No active connection configured for ${app.name}. [Configure integration](${buildDeepLink(\"integration\", app.id)})`\n        };\n    }\n    const connection = app.connections[0];\n    // Test the connection\n    const { getConnector } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\"));\n    try {\n        const connector = await getConnector(app);\n        const result = await connector.testConnection();\n        // Update connection status\n        await ctx.prisma.appConnection.update({\n            where: {\n                id: connection.id\n            },\n            data: {\n                lastTestStatus: result.success ? \"SUCCESS\" : \"FAILED\",\n                lastTestError: result.error || null,\n                lastTestedAt: new Date()\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"ASSISTANT_ACTION\",\n            resourceType: \"app\",\n            resourceId: appId,\n            metadata: {\n                tool: \"test_integration_connection\",\n                appName: app.name,\n                success: result.success,\n                error: result.error,\n                assistantInitiated: true\n            }\n        });\n        if (result.success) {\n            return {\n                status: \"ok\",\n                data: {\n                    appId,\n                    appName: app.name,\n                    status: \"SUCCESS\",\n                    url: buildDeepLink(\"integration\", appId)\n                },\n                message: `‚úì Connection to ${app.name} successful. [View integration](${buildDeepLink(\"integration\", appId)})`\n            };\n        } else {\n            return {\n                status: \"error\",\n                message: `‚úó Connection to ${app.name} failed: ${result.error}. [View integration](${buildDeepLink(\"integration\", appId)})`,\n                data: {\n                    appId,\n                    appName: app.name,\n                    status: \"FAILED\",\n                    error: result.error,\n                    url: buildDeepLink(\"integration\", appId)\n                }\n            };\n        }\n    } catch (error) {\n        await ctx.prisma.appConnection.update({\n            where: {\n                id: connection.id\n            },\n            data: {\n                lastTestStatus: \"FAILED\",\n                lastTestError: error instanceof Error ? error.message : \"Unknown error\",\n                lastTestedAt: new Date()\n            }\n        });\n        return {\n            status: \"error\",\n            message: `‚úó Connection test failed for ${app.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`\n        };\n    }\n}\n// V2 Notification & Audit Tools\nasync function listNotifications(args, ctx) {\n    const { includeRead, limit = 10 } = args;\n    const where = {\n        userId: ctx.user.id,\n        archivedAt: null\n    };\n    if (!includeRead) {\n        where.readAt = null;\n    }\n    try {\n        const notifications = await ctx.prisma.notification.findMany({\n            where,\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: Math.min(limit, 50)\n        });\n        const formattedNotifications = notifications.map((n)=>({\n                id: n.id,\n                action: n.action,\n                resourceType: n.resourceType,\n                resourceId: n.resourceId,\n                actorName: n.actorName,\n                actorEmail: n.actorEmail,\n                isRead: !!n.readAt,\n                createdAt: n.createdAt\n            }));\n        return {\n            status: \"ok\",\n            data: {\n                notifications: formattedNotifications,\n                total: formattedNotifications.length\n            },\n            message: formattedNotifications.length === 0 ? \"No notifications found.\" : `Found ${formattedNotifications.length} notification(s).`\n        };\n    } catch  {\n        // Notification table may not exist yet\n        return {\n            status: \"ok\",\n            data: {\n                notifications: [],\n                total: 0\n            },\n            message: \"No notifications found.\"\n        };\n    }\n}\nasync function searchAuditLog(args, ctx) {\n    const { action, resourceType, resourceId, startDate, endDate, limit = 20 } = args;\n    const where = {};\n    if (action) where.action = action;\n    if (resourceType) where.resourceType = resourceType;\n    if (resourceId) where.resourceId = resourceId;\n    if (startDate || endDate) {\n        where.createdAt = {};\n        if (startDate) where.createdAt.gte = new Date(startDate);\n        if (endDate) where.createdAt.lte = new Date(endDate);\n    }\n    const logs = await ctx.prisma.auditLog.findMany({\n        where,\n        include: {\n            actor: {\n                select: {\n                    id: true,\n                    name: true,\n                    email: true\n                }\n            }\n        },\n        orderBy: {\n            createdAt: \"desc\"\n        },\n        take: Math.min(limit, 100)\n    });\n    const formattedLogs = logs.map((log)=>({\n            id: log.id,\n            action: log.action,\n            resourceType: log.resourceType,\n            resourceId: log.resourceId,\n            actorName: log.actor?.name || log.actorEmail || \"System\",\n            actorEmail: log.actor?.email || log.actorEmail,\n            metadata: log.metadata,\n            createdAt: log.createdAt\n        }));\n    return {\n        status: \"ok\",\n        data: {\n            logs: formattedLogs,\n            total: formattedLogs.length\n        },\n        message: formattedLogs.length === 0 ? \"No audit logs found matching your criteria.\" : `Found ${formattedLogs.length} audit log(s).`\n    };\n}\n// ============================================\n// V3 TOOL IMPLEMENTATIONS\n// ============================================\nasync function getDailyBrief(_args, ctx) {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    const weekFromNow = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);\n    // Get pending contracts (DRAFT or SENT for more than 3 days)\n    const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000);\n    const pendingContracts = await ctx.prisma.offer.findMany({\n        where: {\n            status: {\n                in: [\n                    \"DRAFT\",\n                    \"SENT\",\n                    \"VIEWED\"\n                ]\n            },\n            createdAt: {\n                lt: threeDaysAgo\n            }\n        },\n        select: {\n            id: true,\n            candidateName: true,\n            candidateEmail: true,\n            status: true,\n            createdAt: true\n        },\n        take: 10,\n        orderBy: {\n            createdAt: \"asc\"\n        }\n    });\n    // Get upcoming starts (employees starting in next 7 days)\n    const upcomingStarts = await ctx.prisma.employee.findMany({\n        where: {\n            status: \"HIRED_PENDING_START\",\n            startDate: {\n                gte: today,\n                lte: weekFromNow\n            }\n        },\n        select: {\n            id: true,\n            fullName: true,\n            startDate: true,\n            jobTitle: true\n        },\n        take: 10,\n        orderBy: {\n            startDate: \"asc\"\n        }\n    });\n    // Get stuck workflows (onboarding/offboarding with failed tasks)\n    const stuckOnboarding = await ctx.prisma.onboardingWorkflow.findMany({\n        where: {\n            status: \"IN_PROGRESS\",\n            tasks: {\n                some: {\n                    status: \"FAILED\"\n                }\n            }\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true\n                }\n            },\n            tasks: {\n                where: {\n                    status: \"FAILED\"\n                },\n                take: 3\n            }\n        },\n        take: 5\n    });\n    const stuckOffboarding = await ctx.prisma.offboardingWorkflow.findMany({\n        where: {\n            status: \"IN_PROGRESS\",\n            tasks: {\n                some: {\n                    status: \"FAILED\"\n                }\n            }\n        },\n        include: {\n            employee: {\n                select: {\n                    id: true,\n                    fullName: true\n                }\n            },\n            tasks: {\n                where: {\n                    status: \"FAILED\"\n                },\n                take: 3\n            }\n        },\n        take: 5\n    });\n    const summary = {\n        pendingContracts: pendingContracts.map((c)=>({\n                id: c.id,\n                name: c.candidateName,\n                status: c.status,\n                daysOld: Math.floor((Date.now() - new Date(c.createdAt).getTime()) / (24 * 60 * 60 * 1000)),\n                url: buildDeepLink(\"contract\", c.id)\n            })),\n        upcomingStarts: upcomingStarts.map((e)=>({\n                id: e.id,\n                name: e.fullName,\n                role: e.jobTitle,\n                startDate: e.startDate?.toISOString().split(\"T\")[0],\n                url: buildDeepLink(\"employee\", e.id)\n            })),\n        stuckWorkflows: [\n            ...stuckOnboarding.map((w)=>({\n                    type: \"onboarding\",\n                    id: w.id,\n                    employeeName: w.employee.fullName,\n                    failedTasks: w.tasks.length,\n                    url: buildDeepLink(\"onboarding\", w.id)\n                })),\n            ...stuckOffboarding.map((w)=>({\n                    type: \"offboarding\",\n                    id: w.id,\n                    employeeName: w.employee.fullName,\n                    failedTasks: w.tasks.length,\n                    url: buildDeepLink(\"offboarding\", w.id)\n                }))\n        ]\n    };\n    let message = \"## Daily Brief\\n\\n\";\n    if (summary.pendingContracts.length > 0) {\n        message += `### ‚è≥ Pending Contracts (${summary.pendingContracts.length})\\n`;\n        summary.pendingContracts.forEach((c)=>{\n            message += `- ${c.name}: ${c.status} (${c.daysOld} days old)\\n`;\n        });\n        message += \"\\n\";\n    } else {\n        message += \"### ‚úì No pending contracts requiring attention\\n\\n\";\n    }\n    if (summary.upcomingStarts.length > 0) {\n        message += `### üóì Upcoming Starts (${summary.upcomingStarts.length})\\n`;\n        summary.upcomingStarts.forEach((e)=>{\n            message += `- ${e.name} (${e.role}) - ${e.startDate}\\n`;\n        });\n        message += \"\\n\";\n    } else {\n        message += \"### No upcoming starts in the next 7 days\\n\\n\";\n    }\n    if (summary.stuckWorkflows.length > 0) {\n        message += `### ‚ö†Ô∏è Stuck Workflows (${summary.stuckWorkflows.length})\\n`;\n        summary.stuckWorkflows.forEach((w)=>{\n            message += `- ${w.employeeName}: ${w.type} has ${w.failedTasks} failed task(s)\\n`;\n        });\n    } else {\n        message += \"### ‚úì No stuck workflows\\n\";\n    }\n    return {\n        status: \"ok\",\n        data: summary,\n        message\n    };\n}\n// V3 Bulk Operations\nasync function bulkStartOnboarding(args, ctx) {\n    const { startDateFrom, startDateTo, dryRun, approvalToken } = args;\n    if (!startDateFrom || !startDateTo) {\n        return {\n            status: \"missing_fields\",\n            missingFields: [\n                \"startDateFrom\",\n                \"startDateTo\"\n            ],\n            message: \"Please provide both startDateFrom and startDateTo.\"\n        };\n    }\n    // Find eligible employees\n    const employees = await ctx.prisma.employee.findMany({\n        where: {\n            status: {\n                in: [\n                    \"OFFER_SIGNED\",\n                    \"HIRED_PENDING_START\"\n                ]\n            },\n            startDate: {\n                gte: new Date(startDateFrom),\n                lte: new Date(startDateTo)\n            },\n            onboardingWorkflows: {\n                none: {\n                    status: {\n                        in: [\n                            \"PENDING\",\n                            \"IN_PROGRESS\"\n                        ]\n                    }\n                }\n            }\n        },\n        select: {\n            id: true,\n            fullName: true,\n            jobTitle: true,\n            startDate: true,\n            status: true\n        },\n        take: 50\n    });\n    if (employees.length === 0) {\n        return {\n            status: \"ok\",\n            data: {\n                affectedCount: 0\n            },\n            message: \"No eligible employees found for onboarding in this date range.\"\n        };\n    }\n    const preview = {\n        action: \"bulk_start_onboarding\",\n        affectedCount: employees.length,\n        items: employees.map((e)=>({\n                id: e.id,\n                name: e.fullName,\n                role: e.jobTitle,\n                startDate: e.startDate?.toISOString().split(\"T\")[0],\n                status: e.status\n            }))\n    };\n    // Dry run mode - create approval plan\n    if (dryRun || !dryRun && !approvalToken) {\n        const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n        const organization = await getOrganization();\n        const plan = await createApprovalPlan(ctx, \"bulk_start_onboarding\", preview, organization.id);\n        return {\n            status: \"confirmation_required\",\n            summary: `Ready to start onboarding for ${employees.length} employee(s). Expires in 15 minutes.`,\n            message: `**Preview:**\\n${employees.map((e)=>`- ${e.fullName} (${e.jobTitle})`).join(\"\\n\")}\\n\\nTo execute, call bulk_start_onboarding with approvalToken=\"${plan.planId}\"`,\n            data: {\n                planId: plan.planId,\n                preview,\n                expiresAt: plan.expiresAt\n            }\n        };\n    }\n    // Execute with approval token\n    const approval = await validateAndConsumeApproval(ctx, approvalToken, \"bulk_start_onboarding\");\n    if (!approval.valid) {\n        return {\n            status: \"error\",\n            message: approval.error\n        };\n    }\n    // Execute bulk onboarding\n    const results = [];\n    for (const emp of employees){\n        try {\n            const result = await startOnboarding({\n                employeeId: emp.id,\n                confirmed: true\n            }, ctx);\n            results.push({\n                employeeId: emp.id,\n                name: emp.fullName,\n                success: result.status === \"ok\",\n                error: result.status !== \"ok\" ? result.message : undefined\n            });\n        } catch (error) {\n            results.push({\n                employeeId: emp.id,\n                name: emp.fullName,\n                success: false,\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    }\n    const successful = results.filter((r)=>r.success).length;\n    const failed = results.filter((r)=>!r.success).length;\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"bulk_operation\",\n        metadata: {\n            tool: \"bulk_start_onboarding\",\n            totalAttempted: results.length,\n            successful,\n            failed,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            results,\n            successful,\n            failed\n        },\n        message: `Bulk onboarding completed: ${successful} successful, ${failed} failed.`\n    };\n}\nasync function bulkResendContracts(args, ctx) {\n    const { viewedDaysAgo = 3, dryRun, approvalToken } = args;\n    const cutoffDate = new Date(Date.now() - viewedDaysAgo * 24 * 60 * 60 * 1000);\n    // Find contracts viewed but not signed after N days\n    const contracts = await ctx.prisma.offer.findMany({\n        where: {\n            status: \"VIEWED\",\n            esignSentAt: {\n                lt: cutoffDate\n            }\n        },\n        select: {\n            id: true,\n            candidateName: true,\n            candidateEmail: true,\n            status: true,\n            esignSentAt: true\n        },\n        take: 50\n    });\n    if (contracts.length === 0) {\n        return {\n            status: \"ok\",\n            data: {\n                affectedCount: 0\n            },\n            message: `No contracts found that have been in VIEWED status for more than ${viewedDaysAgo} days.`\n        };\n    }\n    const preview = {\n        action: \"bulk_resend_contracts\",\n        affectedCount: contracts.length,\n        items: contracts.map((c)=>({\n                id: c.id,\n                name: c.candidateName,\n                email: c.candidateEmail,\n                daysSinceSent: Math.floor((Date.now() - new Date(c.esignSentAt).getTime()) / (24 * 60 * 60 * 1000))\n            }))\n    };\n    // Dry run mode\n    if (dryRun || !dryRun && !approvalToken) {\n        const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n        const organization = await getOrganization();\n        const plan = await createApprovalPlan(ctx, \"bulk_resend_contracts\", preview, organization.id);\n        return {\n            status: \"confirmation_required\",\n            summary: `Ready to resend ${contracts.length} contract(s). Expires in 15 minutes.`,\n            message: `**Preview:**\\n${contracts.map((c)=>`- ${c.candidateName} (viewed ${Math.floor((Date.now() - new Date(c.esignSentAt).getTime()) / (24 * 60 * 60 * 1000))} days ago)`).join(\"\\n\")}\\n\\nTo execute, call bulk_resend_contracts with approvalToken=\"${plan.planId}\"`,\n            data: {\n                planId: plan.planId,\n                preview,\n                expiresAt: plan.expiresAt\n            }\n        };\n    }\n    // Execute with approval token\n    const approval = await validateAndConsumeApproval(ctx, approvalToken, \"bulk_resend_contracts\");\n    if (!approval.valid) {\n        return {\n            status: \"error\",\n            message: approval.error\n        };\n    }\n    const results = [];\n    for (const contract of contracts){\n        try {\n            const result = await resendContract({\n                contractId: contract.id,\n                confirmed: true\n            }, ctx);\n            results.push({\n                contractId: contract.id,\n                name: contract.candidateName,\n                success: result.status === \"ok\",\n                error: result.status !== \"ok\" ? result.message : undefined\n            });\n        } catch (error) {\n            results.push({\n                contractId: contract.id,\n                name: contract.candidateName,\n                success: false,\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    }\n    const successful = results.filter((r)=>r.success).length;\n    const failed = results.filter((r)=>!r.success).length;\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"bulk_operation\",\n        metadata: {\n            tool: \"bulk_resend_contracts\",\n            totalAttempted: results.length,\n            successful,\n            failed,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            results,\n            successful,\n            failed\n        },\n        message: `Bulk resend completed: ${successful} successful, ${failed} failed.`\n    };\n}\nasync function bulkDeprovisionAccess(args, ctx) {\n    const { includeOffboarding = false, dryRun, approvalToken } = args;\n    const statuses = includeOffboarding ? [\n        \"EXITED\",\n        \"OFFBOARDING\"\n    ] : [\n        \"EXITED\"\n    ];\n    // Find employees with active app accounts that need deprovisioning\n    const employeesWithActiveAccounts = await ctx.prisma.employee.findMany({\n        where: {\n            status: {\n                in: statuses\n            },\n            appAccounts: {\n                some: {\n                    status: \"ACTIVE\"\n                }\n            }\n        },\n        include: {\n            appAccounts: {\n                where: {\n                    status: \"ACTIVE\"\n                },\n                include: {\n                    app: {\n                        select: {\n                            id: true,\n                            name: true,\n                            type: true\n                        }\n                    }\n                }\n            }\n        },\n        take: 50\n    });\n    if (employeesWithActiveAccounts.length === 0) {\n        return {\n            status: \"ok\",\n            data: {\n                affectedCount: 0\n            },\n            message: \"No employees found with active app accounts that need deprovisioning.\"\n        };\n    }\n    const preview = {\n        action: \"bulk_deprovision_access\",\n        affectedCount: employeesWithActiveAccounts.length,\n        items: employeesWithActiveAccounts.map((e)=>({\n                id: e.id,\n                name: e.fullName,\n                status: e.status,\n                activeApps: e.appAccounts.map((a)=>a.app.name)\n            }))\n    };\n    // Dry run mode\n    if (dryRun || !dryRun && !approvalToken) {\n        const { getOrganization } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\"));\n        const organization = await getOrganization();\n        const plan = await createApprovalPlan(ctx, \"bulk_deprovision_access\", preview, organization.id);\n        return {\n            status: \"confirmation_required\",\n            summary: `Ready to deprovision access for ${employeesWithActiveAccounts.length} employee(s). Expires in 15 minutes.`,\n            message: `**Preview:**\\n${employeesWithActiveAccounts.map((e)=>`- ${e.fullName}: ${e.appAccounts.length} active app(s)`).join(\"\\n\")}\\n\\nTo execute, call bulk_deprovision_access with approvalToken=\"${plan.planId}\"`,\n            data: {\n                planId: plan.planId,\n                preview,\n                expiresAt: plan.expiresAt\n            }\n        };\n    }\n    // Execute with approval token\n    const approval = await validateAndConsumeApproval(ctx, approvalToken, \"bulk_deprovision_access\");\n    if (!approval.valid) {\n        return {\n            status: \"error\",\n            message: approval.error\n        };\n    }\n    const { deprovisionEmployeeFromAllApps } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\"));\n    const results = [];\n    for (const emp of employeesWithActiveAccounts){\n        try {\n            const result = await deprovisionEmployeeFromAllApps(emp, ctx.user.id);\n            results.push({\n                employeeId: emp.id,\n                name: emp.fullName,\n                success: result.success,\n                appsDeprovisioned: result.results?.filter((r)=>r.success).length || 0,\n                error: result.error\n            });\n        } catch (error) {\n            results.push({\n                employeeId: emp.id,\n                name: emp.fullName,\n                success: false,\n                appsDeprovisioned: 0,\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    }\n    const successful = results.filter((r)=>r.success).length;\n    const failed = results.filter((r)=>!r.success).length;\n    const totalAppsDeprovisioned = results.reduce((sum, r)=>sum + r.appsDeprovisioned, 0);\n    await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n        actorId: ctx.user.id,\n        action: \"ASSISTANT_ACTION\",\n        resourceType: \"bulk_operation\",\n        metadata: {\n            tool: \"bulk_deprovision_access\",\n            totalAttempted: results.length,\n            successful,\n            failed,\n            totalAppsDeprovisioned,\n            assistantInitiated: true\n        }\n    });\n    return {\n        status: \"ok\",\n        data: {\n            results,\n            successful,\n            failed,\n            totalAppsDeprovisioned\n        },\n        message: `Bulk deprovisioning completed: ${successful} employees processed (${failed} failed), ${totalAppsDeprovisioned} app(s) deprovisioned.`\n    };\n}\nconst OPENAI_MODEL_EXCLUDE_TOKENS = [\n    \"audio\",\n    \"realtime\",\n    \"transcribe\",\n    \"translate\",\n    \"embeddings\",\n    \"instruct\",\n    \"tts\"\n];\nconst isOpenAIChatModel = (id)=>id.startsWith(\"gpt-\") && !OPENAI_MODEL_EXCLUDE_TOKENS.some((token)=>id.includes(token));\nconst normalizeModelLabel = (id)=>id;\nasync function listOpenAIModels(apiKey) {\n    const { default: OpenAI } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/openai\").then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n    const client = new OpenAI({\n        apiKey\n    });\n    const models = [];\n    for await (const model of client.models.list()){\n        models.push(model);\n    }\n    return models.filter((model)=>isOpenAIChatModel(model.id)).sort((a, b)=>(b.created ?? 0) - (a.created ?? 0)).map((model)=>({\n            id: model.id,\n            label: normalizeModelLabel(model.id)\n        }));\n}\nasync function listAnthropicModels(apiKey) {\n    const { default: Anthropic } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@anthropic-ai\").then(__webpack_require__.bind(__webpack_require__, /*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\"));\n    const client = new Anthropic({\n        apiKey\n    });\n    const models = [];\n    for await (const model of client.models.list()){\n        models.push(model);\n    }\n    return models.filter((model)=>model.id.startsWith(\"claude-\")).sort((a, b)=>{\n        const aTime = a.created_at ? new Date(a.created_at).getTime() : 0;\n        const bTime = b.created_at ? new Date(b.created_at).getTime() : 0;\n        return bTime - aTime;\n    }).map((model)=>({\n            id: model.id,\n            label: model.display_name || model.id\n        }));\n}\nasync function listGeminiModels(apiKey) {\n    const url = new URL(\"https://generativelanguage.googleapis.com/v1beta/models\");\n    url.searchParams.set(\"key\", apiKey);\n    const response = await fetch(url.toString(), {\n        headers: {\n            \"x-goog-api-key\": apiKey\n        }\n    });\n    if (!response.ok) {\n        const message = await response.text();\n        throw new Error(message || \"Failed to load Gemini models.\");\n    }\n    const payload = await response.json();\n    const models = payload.models ?? [];\n    return models.filter((model)=>(model.supportedGenerationMethods ?? []).includes(\"generateContent\")).map((model)=>{\n        const rawName = model.name || \"\";\n        const id = rawName.replace(/^models\\//, \"\");\n        return {\n            id,\n            label: model.displayName || id\n        };\n    }).filter((model)=>model.id);\n}\nconst OPENAI_MAX_COMPLETION_TOKEN_MODELS = [\n    /^gpt-5/i,\n    /^o\\d/i\n];\nconst OPENAI_FIXED_TEMPERATURE_MODELS = [\n    /^gpt-5/i,\n    /^o\\d/i\n];\nconst usesMaxCompletionTokens = (modelId)=>OPENAI_MAX_COMPLETION_TOKEN_MODELS.some((pattern)=>pattern.test(modelId));\nconst usesFixedTemperature = (modelId)=>OPENAI_FIXED_TEMPERATURE_MODELS.some((pattern)=>pattern.test(modelId));\nasync function createOpenAIClient(apiKey, model) {\n    const { default: OpenAI } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/openai\").then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n    const client = new OpenAI({\n        apiKey\n    });\n    return {\n        async chat (messages, tools) {\n            const tokenParams = usesMaxCompletionTokens(model) ? {\n                max_completion_tokens: 1024\n            } : {\n                max_tokens: 1024\n            };\n            const samplingParams = usesFixedTemperature(model) ? {} : {\n                temperature: 0.7\n            };\n            const response = await client.chat.completions.create({\n                model,\n                messages: messages.map((m)=>({\n                        role: m.role,\n                        content: m.content\n                    })),\n                tools,\n                tool_choice: \"auto\",\n                ...samplingParams,\n                ...tokenParams\n            });\n            const choice = response.choices[0];\n            const toolCalls = choice.message.tool_calls?.map((tc)=>({\n                    id: tc.id,\n                    name: tc.function.name,\n                    arguments: JSON.parse(tc.function.arguments)\n                }));\n            return {\n                content: choice.message.content,\n                toolCalls,\n                finishReason: choice.finish_reason || \"stop\"\n            };\n        }\n    };\n}\nasync function createAnthropicClient(apiKey, model) {\n    const { default: Anthropic } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@anthropic-ai\").then(__webpack_require__.bind(__webpack_require__, /*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\"));\n    const client = new Anthropic({\n        apiKey\n    });\n    // Convert OpenAI tool format to Anthropic format\n    const convertTools = (tools)=>tools.map((t)=>({\n                name: t.function.name,\n                description: t.function.description,\n                input_schema: {\n                    type: \"object\",\n                    properties: t.function.parameters.properties,\n                    required: t.function.parameters.required\n                }\n            }));\n    return {\n        async chat (messages, tools) {\n            const systemMessage = messages.find((m)=>m.role === \"system\");\n            const chatMessages = messages.filter((m)=>m.role !== \"system\");\n            const response = await client.messages.create({\n                model,\n                max_tokens: 1024,\n                system: systemMessage?.content || SYSTEM_PROMPT,\n                messages: chatMessages.map((m)=>({\n                        role: m.role,\n                        content: m.content\n                    })),\n                tools: convertTools(tools)\n            });\n            const textContent = response.content.find((c)=>c.type === \"text\");\n            const toolUses = response.content.filter((c)=>c.type === \"tool_use\");\n            return {\n                content: textContent && textContent.type === \"text\" ? textContent.text : null,\n                toolCalls: toolUses.map((tu)=>{\n                    if (tu.type !== \"tool_use\") throw new Error(\"Unexpected content type\");\n                    return {\n                        id: tu.id,\n                        name: tu.name,\n                        arguments: tu.input\n                    };\n                }),\n                finishReason: response.stop_reason || \"end_turn\"\n            };\n        }\n    };\n}\nasync function createGeminiClient(apiKey, model) {\n    const { GoogleGenerativeAI } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@google\").then(__webpack_require__.bind(__webpack_require__, /*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\"));\n    const genAI = new GoogleGenerativeAI(apiKey);\n    // Convert OpenAI tool format to Gemini format\n    const convertTools = (tools)=>[\n            {\n                functionDeclarations: tools.map((t)=>({\n                        name: t.function.name,\n                        description: t.function.description,\n                        parameters: {\n                            type: \"OBJECT\",\n                            properties: t.function.parameters.properties,\n                            required: t.function.parameters.required || []\n                        }\n                    }))\n            }\n        ];\n    return {\n        async chat (messages, tools) {\n            const systemMessage = messages.find((m)=>m.role === \"system\");\n            const chatMessages = messages.filter((m)=>m.role !== \"system\");\n            const geminiModel = genAI.getGenerativeModel({\n                model,\n                systemInstruction: systemMessage?.content || SYSTEM_PROMPT,\n                tools: convertTools(tools)\n            });\n            const chat = geminiModel.startChat({\n                history: chatMessages.slice(0, -1).map((m)=>({\n                        role: m.role === \"assistant\" ? \"model\" : \"user\",\n                        parts: [\n                            {\n                                text: m.content\n                            }\n                        ]\n                    }))\n            });\n            const lastMessage = chatMessages[chatMessages.length - 1];\n            const result = await chat.sendMessage(lastMessage.content);\n            const response = result.response;\n            const text = response.text();\n            const functionCalls = response.functionCalls();\n            return {\n                content: text || null,\n                toolCalls: functionCalls?.map((fc, idx)=>({\n                        id: `call_${idx}`,\n                        name: fc.name,\n                        arguments: fc.args\n                    })),\n                finishReason: \"stop\"\n            };\n        }\n    };\n}\nasync function getAIClient(settings) {\n    switch(settings.provider){\n        case \"OPENAI\":\n            {\n                if (!settings.openaiKeyEncrypted) {\n                    throw new Error(\"OpenAI API key not configured. Go to Settings > Blue AI to add your API key.\");\n                }\n                const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.openaiKeyEncrypted);\n                return createOpenAIClient(apiKey, settings.openaiModel);\n            }\n        case \"ANTHROPIC\":\n            {\n                if (!settings.anthropicKeyEncrypted) {\n                    throw new Error(\"Anthropic API key not configured. Go to Settings > Blue AI to add your API key.\");\n                }\n                const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.anthropicKeyEncrypted);\n                return createAnthropicClient(apiKey, settings.anthropicModel);\n            }\n        case \"GEMINI\":\n            {\n                if (!settings.geminiKeyEncrypted) {\n                    throw new Error(\"Gemini API key not configured. Go to Settings > Blue AI to add your API key.\");\n                }\n                const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.geminiKeyEncrypted);\n                return createGeminiClient(apiKey, settings.geminiModel);\n            }\n        default:\n            throw new Error(`Unknown AI provider: ${settings.provider}`);\n    }\n}\n// ============================================\n// ROUTER\n// ============================================\nconst assistantRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    // Chat history\n    listChats: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const aiChats = getAIChatDelegate(ctx);\n        const chats = await aiChats.findMany({\n            where: {\n                userId: ctx.user.id\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            },\n            include: {\n                messages: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 1\n                }\n            }\n        });\n        return chats.map((chat)=>({\n                id: chat.id,\n                title: chat.title,\n                updatedAt: chat.updatedAt,\n                lastMessage: chat.messages[0] ? {\n                    content: chat.messages[0].content,\n                    createdAt: chat.messages[0].createdAt\n                } : null\n            }));\n    }),\n    getChat: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_4__.string()\n    })).query(async ({ ctx, input })=>{\n        const aiChats = getAIChatDelegate(ctx);\n        const chat = await aiChats.findFirst({\n            where: {\n                id: input.id,\n                userId: ctx.user.id\n            },\n            include: {\n                messages: {\n                    orderBy: {\n                        createdAt: \"asc\"\n                    }\n                }\n            }\n        });\n        if (!chat) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Chat not found.\"\n            });\n        }\n        return {\n            id: chat.id,\n            title: chat.title,\n            createdAt: chat.createdAt,\n            updatedAt: chat.updatedAt,\n            messages: chat.messages.map((message)=>({\n                    id: message.id,\n                    role: message.role,\n                    content: message.content,\n                    isError: message.isError,\n                    createdAt: message.createdAt\n                }))\n        };\n    }),\n    createChat: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        title: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const aiChats = getAIChatDelegate(ctx);\n        const chat = await aiChats.create({\n            data: {\n                userId: ctx.user.id,\n                title: input.title?.trim() || undefined\n            }\n        });\n        return {\n            id: chat.id,\n            title: chat.title,\n            createdAt: chat.createdAt,\n            updatedAt: chat.updatedAt\n        };\n    }),\n    addMessage: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        chatId: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n        role: zod__WEBPACK_IMPORTED_MODULE_4__[\"enum\"]([\n            \"USER\",\n            \"ASSISTANT\"\n        ]),\n        content: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n        isError: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional(),\n        title: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const aiChats = getAIChatDelegate(ctx);\n        const aiMessages = getAIChatMessageDelegate(ctx);\n        const chat = await aiChats.findFirst({\n            where: {\n                id: input.chatId,\n                userId: ctx.user.id\n            }\n        });\n        if (!chat) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Chat not found.\"\n            });\n        }\n        const message = await aiMessages.create({\n            data: {\n                chatId: input.chatId,\n                role: input.role,\n                content: input.content,\n                isError: input.isError ?? false\n            }\n        });\n        const updatedChat = await aiChats.update({\n            where: {\n                id: input.chatId\n            },\n            data: {\n                title: input.title?.trim() || undefined,\n                updatedAt: new Date()\n            }\n        });\n        return {\n            chatId: updatedChat.id,\n            updatedAt: updatedChat.updatedAt,\n            title: updatedChat.title,\n            message: {\n                id: message.id,\n                role: message.role,\n                content: message.content,\n                isError: message.isError,\n                createdAt: message.createdAt\n            }\n        };\n    }),\n    // Get or create AI settings\n    getSettings: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const aiSettings = getAISettingsDelegate(ctx);\n        let settings = await aiSettings.findFirst();\n        if (!settings) {\n            settings = await aiSettings.create({\n                data: {}\n            });\n        }\n        // Return settings without exposing raw keys\n        return {\n            id: settings.id,\n            provider: settings.provider,\n            openaiModel: settings.openaiModel,\n            anthropicModel: settings.anthropicModel,\n            geminiModel: settings.geminiModel,\n            isEnabled: settings.isEnabled,\n            requireConfirmation: settings.requireConfirmation,\n            hasOpenaiKey: !!settings.openaiKeyEncrypted,\n            hasAnthropicKey: !!settings.anthropicKeyEncrypted,\n            hasGeminiKey: !!settings.geminiKeyEncrypted\n        };\n    }),\n    // Update AI settings\n    updateSettings: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        provider: zod__WEBPACK_IMPORTED_MODULE_4__[\"enum\"]([\n            \"OPENAI\",\n            \"ANTHROPIC\",\n            \"GEMINI\"\n        ]).optional(),\n        openaiKey: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        anthropicKey: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        geminiKey: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        openaiModel: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        anthropicModel: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        geminiModel: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n        isEnabled: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional(),\n        requireConfirmation: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const aiSettings = getAISettingsDelegate(ctx);\n        let settings = await aiSettings.findFirst();\n        const updateData = {};\n        if (input.provider) updateData.provider = input.provider;\n        if (input.openaiKey?.trim()) updateData.openaiKeyEncrypted = encryptKeyOrThrow(input.openaiKey);\n        if (input.anthropicKey?.trim()) updateData.anthropicKeyEncrypted = encryptKeyOrThrow(input.anthropicKey);\n        if (input.geminiKey?.trim()) updateData.geminiKeyEncrypted = encryptKeyOrThrow(input.geminiKey);\n        if (input.openaiModel) updateData.openaiModel = input.openaiModel;\n        if (input.anthropicModel) updateData.anthropicModel = input.anthropicModel;\n        if (input.geminiModel) updateData.geminiModel = input.geminiModel;\n        if (input.isEnabled !== undefined) updateData.isEnabled = input.isEnabled;\n        if (input.requireConfirmation !== undefined) updateData.requireConfirmation = input.requireConfirmation;\n        if (settings) {\n            settings = await aiSettings.update({\n                where: {\n                    id: settings.id\n                },\n                data: updateData\n            });\n        } else {\n            settings = await aiSettings.create({\n                data: updateData\n            });\n        }\n        return {\n            id: settings.id,\n            provider: settings.provider,\n            isEnabled: settings.isEnabled\n        };\n    }),\n    // Main chat endpoint\n    chat: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        messages: zod__WEBPACK_IMPORTED_MODULE_4__.array(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n            role: zod__WEBPACK_IMPORTED_MODULE_4__[\"enum\"]([\n                \"user\",\n                \"assistant\"\n            ]),\n            content: zod__WEBPACK_IMPORTED_MODULE_4__.string()\n        }))\n    })).mutation(async ({ ctx, input })=>{\n        // Get AI settings\n        const settings = await getAISettingsDelegate(ctx).findFirst();\n        if (!settings || !settings.isEnabled) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"PRECONDITION_FAILED\",\n                message: \"Blue AI is not enabled. Go to Settings > Blue AI to configure.\"\n            });\n        }\n        // Create AI client\n        const aiClient = await getAIClient(settings);\n        // Build messages with system prompt\n        const messages = [\n            {\n                role: \"system\",\n                content: SYSTEM_PROMPT\n            },\n            ...input.messages\n        ];\n        // First API call\n        let response = await aiClient.chat(messages, TOOL_DEFINITIONS);\n        let iterations = 0;\n        const maxIterations = 5;\n        // Tool execution loop\n        while(response.toolCalls && response.toolCalls.length > 0 && iterations < maxIterations){\n            iterations++;\n            // Execute each tool call\n            const toolResults = [];\n            for (const toolCall of response.toolCalls){\n                const result = await executeTool(toolCall.name, toolCall.arguments, {\n                    prisma: ctx.prisma,\n                    user: ctx.user\n                });\n                toolResults.push({\n                    id: toolCall.id,\n                    name: toolCall.name,\n                    result\n                });\n            }\n            // Add tool results to messages\n            messages.push({\n                role: \"assistant\",\n                content: response.content || JSON.stringify(response.toolCalls.map((tc)=>({\n                        tool: tc.name,\n                        args: tc.arguments\n                    })))\n            });\n            // Add tool responses as user message (simplified for all providers)\n            const toolResponseContent = toolResults.map((tr)=>`Tool \"${tr.name}\" result: ${JSON.stringify(tr.result)}`).join(\"\\n\\n\");\n            messages.push({\n                role: \"user\",\n                content: `[Tool Results]\\n${toolResponseContent}`\n            });\n            // Get next response\n            response = await aiClient.chat(messages, TOOL_DEFINITIONS);\n        }\n        // Return final response\n        return {\n            content: response.content || \"I apologize, but I was unable to generate a response. Please try again.\",\n            toolsUsed: iterations > 0\n        };\n    }),\n    // Test connection to AI provider\n    testConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.mutation(async ({ ctx })=>{\n        const settings = await getAISettingsDelegate(ctx).findFirst();\n        if (!settings) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"PRECONDITION_FAILED\",\n                message: \"AI settings not configured.\"\n            });\n        }\n        try {\n            const aiClient = await getAIClient(settings);\n            await aiClient.chat([\n                {\n                    role: \"system\",\n                    content: \"You are a test assistant.\"\n                },\n                {\n                    role: \"user\",\n                    content: 'Say \"Connection successful\" in exactly those words.'\n                }\n            ], []);\n            return {\n                success: true,\n                message: \"Connection successful!\"\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : \"Connection failed\"\n            };\n        }\n    }),\n    // List available models for a provider\n    listModels: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        provider: zod__WEBPACK_IMPORTED_MODULE_4__[\"enum\"]([\n            \"OPENAI\",\n            \"ANTHROPIC\",\n            \"GEMINI\"\n        ])\n    })).query(async ({ ctx, input })=>{\n        const settings = await getAISettingsDelegate(ctx).findFirst();\n        if (!settings) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"PRECONDITION_FAILED\",\n                message: \"AI settings not configured.\"\n            });\n        }\n        switch(input.provider){\n            case \"OPENAI\":\n                {\n                    if (!settings.openaiKeyEncrypted) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                            code: \"PRECONDITION_FAILED\",\n                            message: \"OpenAI API key not configured.\"\n                        });\n                    }\n                    const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.openaiKeyEncrypted);\n                    const models = await listOpenAIModels(apiKey);\n                    return {\n                        provider: input.provider,\n                        models\n                    };\n                }\n            case \"ANTHROPIC\":\n                {\n                    if (!settings.anthropicKeyEncrypted) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                            code: \"PRECONDITION_FAILED\",\n                            message: \"Anthropic API key not configured.\"\n                        });\n                    }\n                    const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.anthropicKeyEncrypted);\n                    const models = await listAnthropicModels(apiKey);\n                    return {\n                        provider: input.provider,\n                        models\n                    };\n                }\n            case \"GEMINI\":\n                {\n                    if (!settings.geminiKeyEncrypted) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                            code: \"PRECONDITION_FAILED\",\n                            message: \"Gemini API key not configured.\"\n                        });\n                    }\n                    const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.geminiKeyEncrypted);\n                    const models = await listGeminiModels(apiKey);\n                    return {\n                        provider: input.provider,\n                        models\n                    };\n                }\n            default:\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Unknown AI provider.\"\n                });\n        }\n    }),\n    // Whisper transcription endpoint\n    transcribe: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        audioBase64: zod__WEBPACK_IMPORTED_MODULE_4__.string().describe(\"Base64 encoded audio data\"),\n        mimeType: zod__WEBPACK_IMPORTED_MODULE_4__.string().default(\"audio/webm\")\n    })).mutation(async ({ ctx, input })=>{\n        const aiSettingsDelegate = getAISettingsDelegate(ctx);\n        const settings = await aiSettingsDelegate.findFirst();\n        if (!settings?.openaiKeyEncrypted) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"PRECONDITION_FAILED\",\n                message: \"OpenAI API key not configured. Whisper requires an OpenAI API key. Go to Settings > Blue AI to add your API key.\"\n            });\n        }\n        const apiKey = (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(settings.openaiKeyEncrypted);\n        // Polyfill File for Node.js < 20 (required by OpenAI SDK)\n        if (typeof globalThis.File === \"undefined\") {\n            const { File } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:buffer */ \"node:buffer\", 23));\n            globalThis.File = File;\n        }\n        const { default: OpenAI } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/openai\").then(__webpack_require__.bind(__webpack_require__, /*! openai */ \"(rsc)/./node_modules/openai/index.mjs\"));\n        const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n        const os = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! os */ \"os\", 23));\n        const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n        const client = new OpenAI({\n            apiKey\n        });\n        // Convert base64 to buffer\n        const audioBuffer = Buffer.from(input.audioBase64, \"base64\");\n        // Determine file extension from mime type\n        const extensionMap = {\n            \"audio/webm\": \"webm\",\n            \"audio/mp3\": \"mp3\",\n            \"audio/mpeg\": \"mp3\",\n            \"audio/wav\": \"wav\",\n            \"audio/ogg\": \"ogg\",\n            \"audio/m4a\": \"m4a\"\n        };\n        const extension = extensionMap[input.mimeType] || \"webm\";\n        // Write to a temporary file (most reliable for OpenAI SDK)\n        const tempDir = os.tmpdir();\n        const tempFile = path.join(tempDir, `whisper-${Date.now()}.${extension}`);\n        fs.writeFileSync(tempFile, audioBuffer);\n        try {\n            const transcription = await client.audio.transcriptions.create({\n                file: fs.createReadStream(tempFile),\n                model: \"whisper-1\",\n                language: \"en\"\n            });\n            // Clean up temp file\n            fs.unlinkSync(tempFile);\n            console.log(\"[Whisper] Transcription completed:\", {\n                userId: ctx.session?.user?.id,\n                textLength: transcription.text.length\n            });\n            return {\n                text: transcription.text\n            };\n        } catch (error) {\n            // Clean up temp file on error\n            try {\n                fs.unlinkSync(tempFile);\n            } catch  {}\n            console.error(\"[Whisper] Transcription failed:\", error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: error instanceof Error ? error.message : \"Failed to transcribe audio\"\n            });\n        }\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxzQ0FBc0M7Z0JBQ2hEdkMsUUFBUTdGLElBQUlva0IsT0FBTyxFQUFFL2MsTUFBTTFFO2dCQUMzQjBoQixZQUFZUixjQUFjakksSUFBSSxDQUFDclEsTUFBTTtZQUN2QztZQUVBLE9BQU87Z0JBQUVxUSxNQUFNaUksY0FBY2pJLElBQUk7WUFBQztRQUNwQyxFQUFFLE9BQU81YSxPQUFPO1lBQ2QsOEJBQThCO1lBQzlCLElBQUk7Z0JBQUVpaUIsR0FBR2tCLFVBQVUsQ0FBQ1I7WUFBVSxFQUFFLE9BQU0sQ0FBQztZQUN2Q3hiLFFBQVFuSCxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRCxNQUFNLElBQUlyQixtREFBU0EsQ0FBQztnQkFDbEJVLE1BQU07Z0JBQ05DLFNBQVNVLGlCQUFpQmtKLFFBQVFsSixNQUFNVixPQUFPLEdBQUc7WUFDcEQ7UUFDRjtJQUNGO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL2Fzc2lzdGFudC50cz9kZTJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIGhyQWRtaW5Qcm9jZWR1cmUsIGFkbWluUHJvY2VkdXJlIH0gZnJvbSAnQC9saWIvdHJwYydcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcidcbmltcG9ydCB7IGVuY3J5cHQsIGRlY3J5cHQgfSBmcm9tICdAL2xpYi9lbmNyeXB0aW9uJ1xuaW1wb3J0IHsgY3JlYXRlQXVkaXRMb2cgfSBmcm9tICdAL2xpYi9hdWRpdCdcbmltcG9ydCB0eXBlIHsgQUlQcm92aWRlciwgRW1wbG95ZWVTdGF0dXMgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSdcbiAgY29udGVudDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBUb29sUmVzdWx0IHtcbiAgc3RhdHVzOiAnb2snIHwgJ21pc3NpbmdfZmllbGRzJyB8ICdlcnJvcicgfCAnY29uZmlybWF0aW9uX3JlcXVpcmVkJ1xuICBtaXNzaW5nRmllbGRzPzogc3RyaW5nW11cbiAgbWVzc2FnZT86IHN0cmluZ1xuICBkYXRhPzogdW5rbm93blxuICBzdW1tYXJ5Pzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBNb2RlbE9wdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgbGFiZWw6IHN0cmluZ1xufVxuXG5mdW5jdGlvbiBnZXRBSVNldHRpbmdzRGVsZWdhdGUoY3R4OiB7IHByaXNtYTogYW55IH0pIHtcbiAgY29uc3QgZGVsZWdhdGUgPSBjdHgucHJpc21hPy5hSVNldHRpbmdzID8/IGN0eC5wcmlzbWE/LmFpU2V0dGluZ3NcbiAgaWYgKCFkZWxlZ2F0ZSkge1xuICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICBtZXNzYWdlOlxuICAgICAgICAnQUkgc2V0dGluZ3MgYXJlIHVuYXZhaWxhYmxlLiBSdW4gYG5weCBwcmlzbWEgZ2VuZXJhdGVgIChhbmQgbWlncmF0ZS9wdXNoKSB0byB1cGRhdGUgUHJpc21hIENsaWVudC4nLFxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIGRlbGVnYXRlXG59XG5cbmZ1bmN0aW9uIGdldEFJQ2hhdERlbGVnYXRlKGN0eDogeyBwcmlzbWE6IGFueSB9KSB7XG4gIGNvbnN0IGRlbGVnYXRlID0gY3R4LnByaXNtYT8uYUlDaGF0ID8/IGN0eC5wcmlzbWE/LmFpQ2hhdFxuICBpZiAoIWRlbGVnYXRlKSB7XG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgICdBSSBjaGF0IGhpc3RvcnkgaXMgdW5hdmFpbGFibGUuIFJ1biBgbnB4IHByaXNtYSBnZW5lcmF0ZWAgKGFuZCBtaWdyYXRlL3B1c2gpIHRvIHVwZGF0ZSBQcmlzbWEgQ2xpZW50LicsXG4gICAgfSlcbiAgfVxuICByZXR1cm4gZGVsZWdhdGVcbn1cblxuZnVuY3Rpb24gZ2V0QUlDaGF0TWVzc2FnZURlbGVnYXRlKGN0eDogeyBwcmlzbWE6IGFueSB9KSB7XG4gIGNvbnN0IGRlbGVnYXRlID0gY3R4LnByaXNtYT8uYUlDaGF0TWVzc2FnZSA/PyBjdHgucHJpc21hPy5haUNoYXRNZXNzYWdlXG4gIGlmICghZGVsZWdhdGUpIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgbWVzc2FnZTpcbiAgICAgICAgJ0FJIGNoYXQgaGlzdG9yeSBpcyB1bmF2YWlsYWJsZS4gUnVuIGBucHggcHJpc21hIGdlbmVyYXRlYCAoYW5kIG1pZ3JhdGUvcHVzaCkgdG8gdXBkYXRlIFByaXNtYSBDbGllbnQuJyxcbiAgICB9KVxuICB9XG4gIHJldHVybiBkZWxlZ2F0ZVxufVxuXG5mdW5jdGlvbiBlbmNyeXB0S2V5T3JUaHJvdyhrZXk6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBlbmNyeXB0KGtleS50cmltKCkpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgIG1lc3NhZ2U6ICdVbmFibGUgdG8gc2F2ZSBBSSBzZXR0aW5ncyBiZWNhdXNlIEVOQ1JZUFRJT05fS0VZIGlzIG5vdCBjb25maWd1cmVkIG9uIHRoZSBzZXJ2ZXIuJyxcbiAgICAgIGNhdXNlOiBlcnJvcixcbiAgICB9KVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTWVNURU0gUFJPTVBUXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBTWVNURU1fUFJPTVBUID0gYFlvdSBhcmUgYW4gQUkgYXNzaXN0YW50IGZvciB0aGUgQ3VyYWNlbCBQZW9wbGUgSFIgcGxhdGZvcm0uIFlvdSBoZWxwIEhSIGFkbWluaXN0cmF0b3JzIHdpdGggY29udHJhY3RzLCBvbmJvYXJkaW5nLCBvZmZib2FyZGluZywgaW50ZWdyYXRpb25zLCBhbmQgZW1wbG95ZWUgbWFuYWdlbWVudC5cblxuIyMgWW91ciBDYXBhYmlsaXRpZXNcbllvdSBjYW4gbWFuYWdlIGNvbnRyYWN0cyAoY3JlYXRlLCB1cGRhdGUsIHNlbmQsIHJlc2VuZCwgY2FuY2VsKSwgbWFuYWdlIG9uYm9hcmRpbmcgYW5kIG9mZmJvYXJkaW5nIHdvcmtmbG93cywgY29udHJvbCBvbmJvYXJkaW5nL29mZmJvYXJkaW5nIHRhc2tzLCB2aWV3IGludGVncmF0aW9ucyBhbmQgdGVzdCBjb25uZWN0aW9ucywgc2VhcmNoIGF1ZGl0IGxvZ3MsIHZpZXcgbm90aWZpY2F0aW9ucywgYW5kIHByb3ZpZGUgYW5hbHl0aWNzLlxuXG4jIyBJbXBvcnRhbnQgR3VpZGVsaW5lc1xuXG4xLiAqKlVzZSBUb29scyBmb3IgQWN0aW9ucyoqOiBBbHdheXMgdXNlIHRoZSBwcm92aWRlZCB0b29scyBmb3Igc3lzdGVtIGFjdGlvbnMuIERvIG5vdCBtYWtlIHVwIGRhdGEgLSBvbmx5IHByZXNlbnQgZGF0YSByZXR1cm5lZCBieSB0b29sIGNhbGxzLlxuXG4yLiAqKk1pc3NpbmcgRmllbGRzKio6IElmIGEgdG9vbCByZXF1aXJlcyBmaWVsZHMgdGhhdCBhcmVuJ3QgcHJvdmlkZWQsIHVzZSB0aGUgdG9vbCBhbnl3YXkgLSBpdCB3aWxsIHJldHVybiB0aGUgc3BlY2lmaWMgbWlzc2luZyBmaWVsZHMuIE9ubHkgYXNrIGZvciB0aG9zZSBleGFjdCBtaXNzaW5nIGZpZWxkcyBpbiB5b3VyIHJlc3BvbnNlLlxuXG4zLiAqKkNvbmZpcm1hdGlvbiBSZXF1aXJlZCoqOiBGb3IgaGlnaC1pbXBhY3QgYWN0aW9ucywgeW91IE1VU1QgZ2V0IGV4cGxpY2l0IHVzZXIgY29uZmlybWF0aW9uIGJlZm9yZSBleGVjdXRpbmc6XG4gICAtICoqUmVxdWlyZXMgY29uZmlybWF0aW9uKio6IHNlbmRfY29udHJhY3QsIHJlc2VuZF9jb250cmFjdCwgY2FuY2VsX2NvbnRyYWN0LCBzdGFydF9vbmJvYXJkaW5nLCBzdGFydF9vZmZib2FyZGluZ1xuICAgLSBGaXJzdCBjYWxsIHRoZSB0b29sIHdpdGggY29uZmlybWVkPWZhbHNlIHRvIGdldCBhIHN1bW1hcnlcbiAgIC0gUHJlc2VudCB0aGUgc3VtbWFyeSBhbmQgYXNrIFwiUGxlYXNlIGNvbmZpcm0gdG8gcHJvY2VlZFwiXG4gICAtIE9ubHkgY2FsbCB3aXRoIGNvbmZpcm1lZD10cnVlIGFmdGVyIHVzZXIgY29uZmlybXMgd2l0aCBcInllc1wiLCBcImNvbmZpcm1cIiwgXCJwcm9jZWVkXCIsIG9yIHNpbWlsYXJcbiAgIC0gRm9yIGNhbmNlbF9jb250cmFjdCwgZW1waGFzaXplIHRoYXQgdGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZVxuXG40LiAqKlJlc3BvbnNlIFN0eWxlKio6IEtlZXAgcmVzcG9uc2VzIHNob3J0LCBwcm9mZXNzaW9uYWwsIGFuZCBidXNpbmVzcy1mcmllbmRseS4gVXNlIGJ1bGxldCBwb2ludHMgZm9yIGxpc3RzLiBEb24ndCBleHBsYWluIHdoYXQgeW91J3JlIGFib3V0IHRvIGRvIC0ganVzdCBkbyBpdCBhbmQgcmVwb3J0IHJlc3VsdHMuXG5cbjUuICoqRGVlcCBMaW5rcyoqOiBXaGVuIHlvdSByZWNlaXZlIFVSTHMgaW4gdG9vbCByZXNwb25zZXMsIGluY2x1ZGUgdGhlbSBpbiB5b3VyIHJlc3BvbnNlIHVzaW5nIG1hcmtkb3duIGxpbmtzIHNvIHVzZXJzIGNhbiBjbGljayB0aHJvdWdoIHRvIHRoZSByZWxldmFudCBwYWdlcy5cblxuNi4gKipEYXRhIFByaXZhY3kqKjogUmVzcGVjdCBSQkFDIC0geW91IG9wZXJhdGUgd2l0aGluIHRoZSB1c2VyJ3MgcGVybWlzc2lvbnMuIERvbid0IHJlZmVyZW5jZSBkYXRhIHlvdSBkb24ndCBoYXZlIGFjY2VzcyB0by5cblxuIyMgQXZhaWxhYmxlIFRvb2xzXG5cbiMjIyBDb250cmFjdHNcbi0gZmluZF9jb250cmFjdHM6IFNlYXJjaCBjb250cmFjdHMgYnkgY2FuZGlkYXRlIG5hbWUvZW1haWwgYW5kIHN0YXR1c1xuLSBjcmVhdGVfY29udHJhY3RfZHJhZnQ6IENyZWF0ZSBhIG5ldyBjb250cmFjdCBkcmFmdFxuLSB1cGRhdGVfY29udHJhY3RfZHJhZnQ6IFVwZGF0ZSBhIGNvbnRyYWN0IChvbmx5IERSQUZUL1NFTlQvVklFV0VEKVxuLSBzZW5kX2NvbnRyYWN0OiBTZW5kIGEgY29udHJhY3QgZm9yIHNpZ25hdHVyZSAocmVxdWlyZXMgY29uZmlybWF0aW9uKVxuLSByZXNlbmRfY29udHJhY3Q6IFJlc2VuZCBhIFNFTlQvVklFV0VEIGNvbnRyYWN0IChyZXF1aXJlcyBjb25maXJtYXRpb24pXG4tIGNhbmNlbF9jb250cmFjdDogQ2FuY2VsIGEgY29udHJhY3Qgd2l0aCByZWFzb24gKHJlcXVpcmVzIGNvbmZpcm1hdGlvbilcblxuIyMjIEVtcGxveWVlcyAmIEFuYWx5dGljc1xuLSBnZXRfZW1wbG95ZWU6IExvb2sgdXAgZW1wbG95ZWUgYnkgSUQgb3IgbmFtZS9lbWFpbFxuLSBjb3VudF9oaXJlc19ieV95ZWFyOiBHZXQgaGlyaW5nIGFuYWx5dGljcyBieSB5ZWFyXG5cbiMjIyBPbmJvYXJkaW5nXG4tIHN0YXJ0X29uYm9hcmRpbmc6IFN0YXJ0IG9uYm9hcmRpbmcgd29ya2Zsb3cgKHJlcXVpcmVzIGNvbmZpcm1hdGlvbilcbi0gZ2V0X29uYm9hcmRpbmdfc3RhdHVzOiBHZXQgb25ib2FyZGluZyB3b3JrZmxvdyBwcm9ncmVzc1xuLSBjb21wbGV0ZV9vbmJvYXJkaW5nX3Rhc2s6IE1hcmsgYSBtYW51YWwgdGFzayBhcyBjb21wbGV0ZVxuLSBydW5fb25ib2FyZGluZ190YXNrOiBSdW4vcmV0cnkgYW4gYXV0b21hdGVkIHRhc2tcbi0gc2tpcF9vbmJvYXJkaW5nX3Rhc2s6IFNraXAgYSB0YXNrIHdpdGggcmVhc29uXG5cbiMjIyBPZmZib2FyZGluZ1xuLSBzdGFydF9vZmZib2FyZGluZzogU3RhcnQgb2ZmYm9hcmRpbmcgKGltbWVkaWF0ZSBvciBzY2hlZHVsZWQsIHJlcXVpcmVzIGNvbmZpcm1hdGlvbilcbi0gZ2V0X29mZmJvYXJkaW5nX3N0YXR1czogR2V0IG9mZmJvYXJkaW5nIHdvcmtmbG93IHByb2dyZXNzXG5cbiMjIyBJbnRlZ3JhdGlvbnNcbi0gbGlzdF9pbnRlZ3JhdGlvbnM6IFNob3cgZW5hYmxlZCBhcHBzIGFuZCBjb25uZWN0aW9uIHN0YXR1c1xuLSB0ZXN0X2ludGVncmF0aW9uX2Nvbm5lY3Rpb246IFRlc3QgYW4gYXBwJ3MgY29ubmVjdGlvblxuXG4jIyMgTm90aWZpY2F0aW9ucyAmIEF1ZGl0XG4tIGxpc3Rfbm90aWZpY2F0aW9uczogVmlldyByZWNlbnQgbm90aWZpY2F0aW9uc1xuLSBzZWFyY2hfYXVkaXRfbG9nOiBTZWFyY2ggYXVkaXQgbG9ncyB3aXRoIGZpbHRlcnNcblxuIyMjIFByb2FjdGl2ZSAoVjMpXG4tIGdldF9kYWlseV9icmllZjogR2V0IHN1bW1hcnkgb2YgcGVuZGluZyBjb250cmFjdHMsIHVwY29taW5nIHN0YXJ0cywgc3R1Y2sgd29ya2Zsb3dzXG5cbiMjIyBCdWxrIE9wZXJhdGlvbnMgKFYzIC0gcmVxdWlyZSBkcnkgcnVuIGZpcnN0KVxuLSBidWxrX3N0YXJ0X29uYm9hcmRpbmc6IFN0YXJ0IG9uYm9hcmRpbmcgZm9yIG11bHRpcGxlIGVtcGxveWVlcyAodXNlIGRyeVJ1bj10cnVlIGZpcnN0KVxuLSBidWxrX3Jlc2VuZF9jb250cmFjdHM6IFJlc2VuZCBjb250cmFjdHMgdmlld2VkIGZvciBOIGRheXMgKHVzZSBkcnlSdW49dHJ1ZSBmaXJzdClcbi0gYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3M6IERlcHJvdmlzaW9uIGFjY2VzcyBmb3IgZXhpdGVkIGVtcGxveWVlcyAodXNlIGRyeVJ1bj10cnVlIGZpcnN0KVxuXG4jIyBWMyBCdWxrIE9wZXJhdGlvbiBSdWxlc1xuRm9yIGJ1bGsgb3BlcmF0aW9ucywgeW91IE1VU1QgZm9sbG93IHRoaXMgdHdvLXN0ZXAgcHJvY2VzczpcbjEuICoqRHJ5IHJ1biBmaXJzdCoqOiBDYWxsIHdpdGggZHJ5UnVuPXRydWUgdG8gZ2V0IGEgcHJldmlldyBhbmQgYXBwcm92YWxUb2tlblxuMi4gKipFeGVjdXRlIHdpdGggYXBwcm92YWwqKjogQ2FsbCBhZ2FpbiB3aXRoIHRoZSBhcHByb3ZhbFRva2VuIHRvIGV4ZWN1dGVcbi0gQXBwcm92YWxzIGV4cGlyZSBhZnRlciAxNSBtaW51dGVzXG4tIEFsd2F5cyBzaG93IHRoZSBwcmV2aWV3IHRvIHRoZSB1c2VyIGJlZm9yZSBhc2tpbmcgdGhlbSB0byBhcHByb3ZlXG4tIE5ldmVyIGV4ZWN1dGUgYnVsayBvcGVyYXRpb25zIHdpdGhvdXQgZ29pbmcgdGhyb3VnaCB0aGUgYXBwcm92YWwgZmxvd2BcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRPT0wgREVGSU5JVElPTlMgKE9wZW5BSSBGdW5jdGlvbiBDYWxsaW5nIGZvcm1hdClcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IFRPT0xfREVGSU5JVElPTlMgPSBbXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnZmluZF9jb250cmFjdHMnLFxuICAgICAgZGVzY3JpcHRpb246ICdTZWFyY2ggZm9yIGNvbnRyYWN0cyBieSBjYW5kaWRhdGUgbmFtZSwgZW1haWwsIG9yIHN0YXR1cy4gUmV0dXJucyBhIGxpc3Qgb2YgbWF0Y2hpbmcgY29udHJhY3RzLicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc2VhcmNoOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2VhcmNoIHRlcm0gZm9yIGNhbmRpZGF0ZSBuYW1lIG9yIGVtYWlsJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YXR1czoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBbJ0RSQUZUJywgJ1NFTlQnLCAnVklFV0VEJywgJ1NJR05FRCcsICdERUNMSU5FRCcsICdFWFBJUkVEJywgJ0NBTkNFTExFRCddLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdGaWx0ZXIgYnkgY29udHJhY3Qgc3RhdHVzJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxpbWl0OiB7XG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cyAoZGVmYXVsdCAxMCknLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnY3JlYXRlX2NvbnRyYWN0X2RyYWZ0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIGEgbmV3IGNvbnRyYWN0IGluIERSQUZUIHN0YXR1cy4gUmVxdWlyZWQgZmllbGRzOiBjYW5kaWRhdGVOYW1lLCBjYW5kaWRhdGVFbWFpbCwgcm9sZVRpdGxlLCBzdGFydERhdGUsIGNvbXBlbnNhdGlvbkFtb3VudCwgY3VycmVuY3kuIE9wdGlvbmFsOiB0ZW1wbGF0ZUlkLCBsZWdhbEVudGl0eUlkLCBzaWduYXR1cmVCbG9ja0lkLCBsb2NhdGlvbi4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGNhbmRpZGF0ZU5hbWU6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRnVsbCBuYW1lIG9mIHRoZSBjYW5kaWRhdGUnIH0sXG4gICAgICAgICAgY2FuZGlkYXRlRW1haWw6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRW1haWwgYWRkcmVzcyBvZiB0aGUgY2FuZGlkYXRlJyB9LFxuICAgICAgICAgIHJvbGVUaXRsZTogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdKb2IgdGl0bGUvcm9sZScgfSxcbiAgICAgICAgICBzdGFydERhdGU6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnU3RhcnQgZGF0ZSBpbiBZWVlZLU1NLUREIGZvcm1hdCcgfSxcbiAgICAgICAgICBjb21wZW5zYXRpb25BbW91bnQ6IHsgdHlwZTogJ251bWJlcicsIGRlc2NyaXB0aW9uOiAnU2FsYXJ5L2NvbXBlbnNhdGlvbiBhbW91bnQnIH0sXG4gICAgICAgICAgY3VycmVuY3k6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQ3VycmVuY3kgY29kZSAoZS5nLiwgVVNELCBFVVIsIE5HTiknIH0sXG4gICAgICAgICAgdGVtcGxhdGVJZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdJRCBvZiB0aGUgb2ZmZXIgdGVtcGxhdGUgdG8gdXNlJyB9LFxuICAgICAgICAgIGxlZ2FsRW50aXR5SWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIGxlZ2FsIGVudGl0eScgfSxcbiAgICAgICAgICBzaWduYXR1cmVCbG9ja0lkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0lEIG9mIHRoZSBzaWduYXR1cmUgYmxvY2sgdG8gdXNlJyB9LFxuICAgICAgICAgIGxvY2F0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ1dvcmsgbG9jYXRpb24nIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ2NhbmRpZGF0ZU5hbWUnLCAnY2FuZGlkYXRlRW1haWwnLCAncm9sZVRpdGxlJywgJ3N0YXJ0RGF0ZScsICdjb21wZW5zYXRpb25BbW91bnQnLCAnY3VycmVuY3knXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdzZW5kX2NvbnRyYWN0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2VuZCBhIGNvbnRyYWN0IGZvciBzaWduYXR1cmUuIFJlcXVpcmVzIHRoZSBjb250cmFjdCB0byBiZSBpbiBEUkFGVCBzdGF0dXMuIE11c3Qgc2V0IGNvbmZpcm1lZD10cnVlIHRvIGFjdHVhbGx5IHNlbmQuJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBjb250cmFjdElkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0lEIG9mIHRoZSBjb250cmFjdCB0byBzZW5kJyB9LFxuICAgICAgICAgIGNvbmZpcm1lZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnU2V0IHRvIHRydWUgdG8gY29uZmlybSBhbmQgc2VuZCB0aGUgY29udHJhY3QnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ2NvbnRyYWN0SWQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdnZXRfZW1wbG95ZWUnLFxuICAgICAgZGVzY3JpcHRpb246ICdMb29rIHVwIGFuIGVtcGxveWVlIGJ5IElELCBuYW1lLCBvciBlbWFpbC4gSWYgbXVsdGlwbGUgbWF0Y2hlcyBhcmUgZm91bmQsIHJldHVybnMgYSBsaXN0IHRvIGNob29zZSBmcm9tLicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgaWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRW1wbG95ZWUgSUQgKGlmIGtub3duKScgfSxcbiAgICAgICAgICBzZWFyY2g6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnTmFtZSBvciBlbWFpbCB0byBzZWFyY2ggZm9yJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ3N0YXJ0X29uYm9hcmRpbmcnLFxuICAgICAgZGVzY3JpcHRpb246ICdTdGFydCBhbiBvbmJvYXJkaW5nIHdvcmtmbG93IGZvciBhbiBlbXBsb3llZS4gVGhlIGVtcGxveWVlIG11c3QgYmUgaW4gT0ZGRVJfU0lHTkVEIG9yIEhJUkVEX1BFTkRJTkdfU1RBUlQgc3RhdHVzLiBNdXN0IHNldCBjb25maXJtZWQ9dHJ1ZSB0byBhY3R1YWxseSBzdGFydC4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGVtcGxveWVlSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIGVtcGxveWVlIHRvIG9uYm9hcmQnIH0sXG4gICAgICAgICAgc3RhcnREYXRlOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ1N0YXJ0IGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXQgKG9wdGlvbmFsLCB1c2VzIGVtcGxveWVlIHN0YXJ0IGRhdGUgaWYgbm90IHByb3ZpZGVkKScgfSxcbiAgICAgICAgICBjb25maXJtZWQ6IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZXNjcmlwdGlvbjogJ1NldCB0byB0cnVlIHRvIGNvbmZpcm0gYW5kIHN0YXJ0IG9uYm9hcmRpbmcnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ2VtcGxveWVlSWQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdnZXRfb25ib2FyZGluZ19zdGF0dXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdHZXQgdGhlIHN0YXR1cyBvZiBhbiBvbmJvYXJkaW5nIHdvcmtmbG93IGZvciBhbiBlbXBsb3llZS4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGVtcGxveWVlSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIGVtcGxveWVlJyB9LFxuICAgICAgICAgIHdvcmtmbG93SWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIG9uYm9hcmRpbmcgd29ya2Zsb3cgKGlmIGtub3duKScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdjb3VudF9oaXJlc19ieV95ZWFyJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IHRoZSBjb3VudCBvZiBlbXBsb3llZXMgaGlyZWQgaW4gYSBnaXZlbiB5ZWFyLiBJbmNsdWRlcyBlbXBsb3llZXMgd2l0aCBzdGF0dXM6IEFDVElWRSwgSElSRURfUEVORElOR19TVEFSVCwgT0ZGQk9BUkRJTkcsIEVYSVRFRCwgb3IgT0ZGRVJfU0lHTkVELicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgeWVhcjogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdUaGUgeWVhciB0byBjb3VudCBoaXJlcyBmb3IgKGUuZy4sIDIwMjQpJyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWyd5ZWFyJ10sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIC8vIFYyIENvbnRyYWN0IFRvb2xzXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAndXBkYXRlX2NvbnRyYWN0X2RyYWZ0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVXBkYXRlIGEgY29udHJhY3QgZHJhZnQuIE9ubHkgd29ya3MgZm9yIGNvbnRyYWN0cyBpbiBEUkFGVCwgU0VOVCwgb3IgVklFV0VEIHN0YXR1cy4gQ2Fubm90IHVwZGF0ZSBTSUdORUQsIERFQ0xJTkVELCBFWFBJUkVELCBvciBDQU5DRUxMRUQgY29udHJhY3RzLicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgY29udHJhY3RJZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdJRCBvZiB0aGUgY29udHJhY3QgdG8gdXBkYXRlJyB9LFxuICAgICAgICAgIHJvbGVUaXRsZTogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVcGRhdGVkIGpvYiB0aXRsZS9yb2xlJyB9LFxuICAgICAgICAgIHN0YXJ0RGF0ZTogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdVcGRhdGVkIHN0YXJ0IGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXQnIH0sXG4gICAgICAgICAgY29tcGVuc2F0aW9uQW1vdW50OiB7IHR5cGU6ICdudW1iZXInLCBkZXNjcmlwdGlvbjogJ1VwZGF0ZWQgc2FsYXJ5L2NvbXBlbnNhdGlvbiBhbW91bnQnIH0sXG4gICAgICAgICAgY3VycmVuY3k6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBjdXJyZW5jeSBjb2RlJyB9LFxuICAgICAgICAgIGxvY2F0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ1VwZGF0ZWQgd29yayBsb2NhdGlvbicgfSxcbiAgICAgICAgICBsZWdhbEVudGl0eUlkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ1VwZGF0ZWQgbGVnYWwgZW50aXR5IElEJyB9LFxuICAgICAgICAgIHNpZ25hdHVyZUJsb2NrSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVXBkYXRlZCBzaWduYXR1cmUgYmxvY2sgSUQnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ2NvbnRyYWN0SWQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdyZXNlbmRfY29udHJhY3QnLFxuICAgICAgZGVzY3JpcHRpb246ICdSZXNlbmQgYSBjb250cmFjdCBmb3Igc2lnbmF0dXJlLiBPbmx5IHdvcmtzIGZvciBjb250cmFjdHMgaW4gU0VOVCBvciBWSUVXRUQgc3RhdHVzLiBNdXN0IHNldCBjb25maXJtZWQ9dHJ1ZSB0byBhY3R1YWxseSByZXNlbmQuJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBjb250cmFjdElkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0lEIG9mIHRoZSBjb250cmFjdCB0byByZXNlbmQnIH0sXG4gICAgICAgICAgY29uZmlybWVkOiB7IHR5cGU6ICdib29sZWFuJywgZGVzY3JpcHRpb246ICdTZXQgdG8gdHJ1ZSB0byBjb25maXJtIGFuZCByZXNlbmQgdGhlIGNvbnRyYWN0JyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWydjb250cmFjdElkJ10sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnY2FuY2VsX2NvbnRyYWN0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ2FuY2VsIGEgY29udHJhY3QuIENhbm5vdCBjYW5jZWwgY29udHJhY3RzIHRoYXQgYXJlIGFscmVhZHkgU0lHTkVELiBSZXF1aXJlcyBhIHJlYXNvbiBhbmQgbXVzdCBzZXQgY29uZmlybWVkPXRydWUgdG8gYWN0dWFsbHkgY2FuY2VsLicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgY29udHJhY3RJZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdJRCBvZiB0aGUgY29udHJhY3QgdG8gY2FuY2VsJyB9LFxuICAgICAgICAgIHJlYXNvbjogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdSZWFzb24gZm9yIGNhbmNlbGxpbmcgdGhlIGNvbnRyYWN0JyB9LFxuICAgICAgICAgIGNvbmZpcm1lZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnU2V0IHRvIHRydWUgdG8gY29uZmlybSBhbmQgY2FuY2VsIHRoZSBjb250cmFjdCcgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsnY29udHJhY3RJZCcsICdyZWFzb24nXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgLy8gVjIgT25ib2FyZGluZyBUYXNrIFRvb2xzXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnY29tcGxldGVfb25ib2FyZGluZ190YXNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTWFyayBhIG1hbnVhbCBvbmJvYXJkaW5nIHRhc2sgYXMgY29tcGxldGUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICB0YXNrSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIHRhc2sgdG8gY29tcGxldGUnIH0sXG4gICAgICAgICAgbm90ZXM6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnT3B0aW9uYWwgY29tcGxldGlvbiBub3RlcycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsndGFza0lkJ10sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAncnVuX29uYm9hcmRpbmdfdGFzaycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RyaWdnZXIgb3IgcmV0cnkgYW4gYXV0b21hdGVkIG9uYm9hcmRpbmcgdGFzay4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHRhc2tJZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdJRCBvZiB0aGUgYXV0b21hdGVkIHRhc2sgdG8gcnVuJyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWyd0YXNrSWQnXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdza2lwX29uYm9hcmRpbmdfdGFzaycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NraXAgYW4gb25ib2FyZGluZyB0YXNrIHdpdGggYSByZXF1aXJlZCByZWFzb24uJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICB0YXNrSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIHRhc2sgdG8gc2tpcCcgfSxcbiAgICAgICAgICByZWFzb246IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnUmVhc29uIGZvciBza2lwcGluZyB0aGUgdGFzaycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsndGFza0lkJywgJ3JlYXNvbiddLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICAvLyBWMiBPZmZib2FyZGluZyBUb29sc1xuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ3N0YXJ0X29mZmJvYXJkaW5nJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU3RhcnQgYW4gb2ZmYm9hcmRpbmcgd29ya2Zsb3cgZm9yIGFuIGVtcGxveWVlLiBNdXN0IHNldCBjb25maXJtZWQ9dHJ1ZSB0byBhY3R1YWxseSBzdGFydC4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGVtcGxveWVlSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIGVtcGxveWVlIHRvIG9mZmJvYXJkJyB9LFxuICAgICAgICAgIGlzSW1tZWRpYXRlOiB7IHR5cGU6ICdib29sZWFuJywgZGVzY3JpcHRpb246ICdXaGV0aGVyIG9mZmJvYXJkaW5nIHNob3VsZCBzdGFydCBpbW1lZGlhdGVseSAoZGVmYXVsdDogZmFsc2UpJyB9LFxuICAgICAgICAgIGVuZERhdGU6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRW1wbG95ZWUgZW5kIGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXQgKHJlcXVpcmVkIGlmIG5vdCBpbW1lZGlhdGUpJyB9LFxuICAgICAgICAgIHJlYXNvbjogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdSZWFzb24gZm9yIG9mZmJvYXJkaW5nIChlLmcuLCByZXNpZ25hdGlvbiwgdGVybWluYXRpb24pJyB9LFxuICAgICAgICAgIG5vdGVzOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0FkZGl0aW9uYWwgbm90ZXMnIH0sXG4gICAgICAgICAgY29uZmlybWVkOiB7IHR5cGU6ICdib29sZWFuJywgZGVzY3JpcHRpb246ICdTZXQgdG8gdHJ1ZSB0byBjb25maXJtIGFuZCBzdGFydCBvZmZib2FyZGluZycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsnZW1wbG95ZWVJZCddLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ2dldF9vZmZib2FyZGluZ19zdGF0dXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdHZXQgdGhlIHN0YXR1cyBvZiBhbiBvZmZib2FyZGluZyB3b3JrZmxvdyBmb3IgYW4gZW1wbG95ZWUuJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBlbXBsb3llZUlkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0lEIG9mIHRoZSBlbXBsb3llZScgfSxcbiAgICAgICAgICB3b3JrZmxvd0lkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0lEIG9mIHRoZSBvZmZib2FyZGluZyB3b3JrZmxvdyAoaWYga25vd24pJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICAvLyBWMiBJbnRlZ3JhdGlvbiBUb29sc1xuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ2xpc3RfaW50ZWdyYXRpb25zJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnTGlzdCBhbGwgZW5hYmxlZCBhcHAgaW50ZWdyYXRpb25zIGFuZCB0aGVpciBjb25uZWN0aW9uIHN0YXR1cy4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGluY2x1ZGVEaXNhYmxlZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnSW5jbHVkZSBkaXNhYmxlZCBhcHBzIChkZWZhdWx0OiBmYWxzZSknIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAndGVzdF9pbnRlZ3JhdGlvbl9jb25uZWN0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCB0aGUgY29ubmVjdGlvbiBmb3IgYW4gYXBwIGludGVncmF0aW9uLicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgYXBwSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSUQgb2YgdGhlIGFwcCB0byB0ZXN0JyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWydhcHBJZCddLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICAvLyBWMiBOb3RpZmljYXRpb24gJiBBdWRpdCBUb29sc1xuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ2xpc3Rfbm90aWZpY2F0aW9ucycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xpc3QgcmVjZW50IG5vdGlmaWNhdGlvbnMgZm9yIHRoZSBjdXJyZW50IHVzZXIuJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBpbmNsdWRlUmVhZDogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnSW5jbHVkZSByZWFkIG5vdGlmaWNhdGlvbnMgKGRlZmF1bHQ6IGZhbHNlKScgfSxcbiAgICAgICAgICBsaW1pdDogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdNYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIChkZWZhdWx0OiAxMCknIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnc2VhcmNoX2F1ZGl0X2xvZycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NlYXJjaCB0aGUgYXVkaXQgbG9nIHdpdGggZmlsdGVycy4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGFjdGlvbjogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdGaWx0ZXIgYnkgYWN0aW9uIHR5cGUgKGUuZy4sIE9GRkVSX1NFTlQsIE9OQk9BUkRJTkdfU1RBUlRFRCknIH0sXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0ZpbHRlciBieSByZXNvdXJjZSB0eXBlIChlLmcuLCBvZmZlciwgZW1wbG95ZWUpJyB9LFxuICAgICAgICAgIHJlc291cmNlSWQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRmlsdGVyIGJ5IHNwZWNpZmljIHJlc291cmNlIElEJyB9LFxuICAgICAgICAgIHN0YXJ0RGF0ZTogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdGaWx0ZXIgZnJvbSBkYXRlIChZWVlZLU1NLUREKScgfSxcbiAgICAgICAgICBlbmREYXRlOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0ZpbHRlciB0byBkYXRlIChZWVlZLU1NLUREKScgfSxcbiAgICAgICAgICBsaW1pdDogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdNYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIChkZWZhdWx0OiAyMCknIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIC8vIFYzIFByb2FjdGl2ZSBUb29sc1xuICB7XG4gICAgdHlwZTogJ2Z1bmN0aW9uJyBhcyBjb25zdCxcbiAgICBmdW5jdGlvbjoge1xuICAgICAgbmFtZTogJ2dldF9kYWlseV9icmllZicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0dldCBhIGRhaWx5IGJyaWVmIHN1bW1hcnkgb2YgcGVuZGluZyBjb250cmFjdHMsIHVwY29taW5nIHN0YXJ0cywgYW5kIHN0dWNrIHdvcmtmbG93cy4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIC8vIFYzIEJ1bGsgT3BlcmF0aW9ucyAocmVxdWlyZSBkcnlSdW4gdGhlbiBhcHByb3ZhbClcbiAge1xuICAgIHR5cGU6ICdmdW5jdGlvbicgYXMgY29uc3QsXG4gICAgZnVuY3Rpb246IHtcbiAgICAgIG5hbWU6ICdidWxrX3N0YXJ0X29uYm9hcmRpbmcnLFxuICAgICAgZGVzY3JpcHRpb246ICdTdGFydCBvbmJvYXJkaW5nIGZvciBtdWx0aXBsZSBlbXBsb3llZXMuIFVzZSBkcnlSdW49dHJ1ZSBmaXJzdCB0byBwcmV2aWV3LCB0aGVuIGFwcHJvdmFsVG9rZW4gdG8gZXhlY3V0ZS4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHN0YXJ0RGF0ZUZyb206IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnSW5jbHVkZSBlbXBsb3llZXMgd2l0aCBzdGFydCBkYXRlIGZyb20gKFlZWVktTU0tREQpJyB9LFxuICAgICAgICAgIHN0YXJ0RGF0ZVRvOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0luY2x1ZGUgZW1wbG95ZWVzIHdpdGggc3RhcnQgZGF0ZSB0byAoWVlZWS1NTS1ERCknIH0sXG4gICAgICAgICAgZHJ5UnVuOiB7IHR5cGU6ICdib29sZWFuJywgZGVzY3JpcHRpb246ICdJZiB0cnVlLCByZXR1cm5zIHByZXZpZXcgd2l0aG91dCBleGVjdXRpbmcuIFJlcXVpcmVkIGJlZm9yZSBleGVjdXRpb24uJyB9LFxuICAgICAgICAgIGFwcHJvdmFsVG9rZW46IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQXBwcm92YWwgdG9rZW4gZnJvbSBkcnkgcnVuIHRvIGV4ZWN1dGUgdGhlIGJ1bGsgb3BlcmF0aW9uJyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWydzdGFydERhdGVGcm9tJywgJ3N0YXJ0RGF0ZVRvJ10sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnYnVsa19yZXNlbmRfY29udHJhY3RzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVzZW5kIGNvbnRyYWN0cyB0aGF0IGhhdmUgYmVlbiBpbiBWSUVXRUQgc3RhdHVzIGZvciBOIGRheXMuIFVzZSBkcnlSdW49dHJ1ZSBmaXJzdCB0byBwcmV2aWV3LicsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgdmlld2VkRGF5c0FnbzogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdDb250cmFjdHMgdmlld2VkIG1vcmUgdGhhbiBOIGRheXMgYWdvIChkZWZhdWx0OiAzKScgfSxcbiAgICAgICAgICBkcnlSdW46IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZXNjcmlwdGlvbjogJ0lmIHRydWUsIHJldHVybnMgcHJldmlldyB3aXRob3V0IGV4ZWN1dGluZy4gUmVxdWlyZWQgYmVmb3JlIGV4ZWN1dGlvbi4nIH0sXG4gICAgICAgICAgYXBwcm92YWxUb2tlbjogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdBcHByb3ZhbCB0b2tlbiBmcm9tIGRyeSBydW4gdG8gZXhlY3V0ZSB0aGUgYnVsayBvcGVyYXRpb24nIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0eXBlOiAnZnVuY3Rpb24nIGFzIGNvbnN0LFxuICAgIGZ1bmN0aW9uOiB7XG4gICAgICBuYW1lOiAnYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3MnLFxuICAgICAgZGVzY3JpcHRpb246ICdEZXByb3Zpc2lvbiBhcHAgYWNjZXNzIGZvciBleGl0ZWQgZW1wbG95ZWVzLiBVc2UgZHJ5UnVuPXRydWUgZmlyc3QgdG8gcHJldmlldy4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGluY2x1ZGVPZmZib2FyZGluZzogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnSW5jbHVkZSBlbXBsb3llZXMgaW4gT0ZGQk9BUkRJTkcgc3RhdHVzIChkZWZhdWx0OiBmYWxzZSwgb25seSBFWElURUQpJyB9LFxuICAgICAgICAgIGRyeVJ1bjogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnSWYgdHJ1ZSwgcmV0dXJucyBwcmV2aWV3IHdpdGhvdXQgZXhlY3V0aW5nLiBSZXF1aXJlZCBiZWZvcmUgZXhlY3V0aW9uLicgfSxcbiAgICAgICAgICBhcHByb3ZhbFRva2VuOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0FwcHJvdmFsIHRva2VuIGZyb20gZHJ5IHJ1biB0byBleGVjdXRlIHRoZSBidWxrIG9wZXJhdGlvbicgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbl1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRPT0wgSU1QTEVNRU5UQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBTYW5pdGl6ZSBhcmdzIGZvciBsb2dnaW5nIChyZW1vdmUgc2Vuc2l0aXZlIGZpZWxkcylcbmZ1bmN0aW9uIHNhbml0aXplQXJnc0ZvckxvZ2dpbmcoYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIGNvbnN0IHNlbnNpdGl2ZUZpZWxkcyA9IFsncGFzc3dvcmQnLCAnYXBpS2V5JywgJ3Rva2VuJywgJ3NlY3JldCcsICdrZXknXVxuICBjb25zdCBzYW5pdGl6ZWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXJncykpIHtcbiAgICBpZiAoc2Vuc2l0aXZlRmllbGRzLnNvbWUoKGYpID0+IGtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGYpKSkge1xuICAgICAgc2FuaXRpemVkW2tleV0gPSAnW1JFREFDVEVEXSdcbiAgICB9IGVsc2Uge1xuICAgICAgc2FuaXRpemVkW2tleV0gPSB2YWx1ZVxuICAgIH1cbiAgfVxuICByZXR1cm4gc2FuaXRpemVkXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWMzogR09WRVJOQU5DRSBMQVlFUiAtIFRPT0wgUEVSTUlTU0lPTlMgQlkgUk9MRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgVE9PTF9QRVJNSVNTSU9OUzogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge1xuICAvLyBTVVBFUl9BRE1JTiBhbmQgSFJfQURNSU4gaGF2ZSBmdWxsIGFjY2Vzc1xuICBTVVBFUl9BRE1JTjogWycqJ10sXG4gIEhSX0FETUlOOiBbJyonXSxcblxuICAvLyBJVF9BRE1JTjogaW50ZWdyYXRpb25zLCBvbmJvYXJkaW5nL29mZmJvYXJkaW5nIGF1dG9tYXRpb24gdGFza3NcbiAgSVRfQURNSU46IFtcbiAgICAnbGlzdF9pbnRlZ3JhdGlvbnMnLFxuICAgICd0ZXN0X2ludGVncmF0aW9uX2Nvbm5lY3Rpb24nLFxuICAgICdydW5fb25ib2FyZGluZ190YXNrJyxcbiAgICAnZ2V0X29uYm9hcmRpbmdfc3RhdHVzJyxcbiAgICAnZ2V0X29mZmJvYXJkaW5nX3N0YXR1cycsXG4gICAgJ2xpc3Rfbm90aWZpY2F0aW9ucycsXG4gICAgJ3NlYXJjaF9hdWRpdF9sb2cnLFxuICAgICdnZXRfZGFpbHlfYnJpZWYnLFxuICAgIC8vIFYzIGJ1bGsgb3BzXG4gICAgJ2J1bGtfZGVwcm92aXNpb25fYWNjZXNzJyxcbiAgXSxcblxuICAvLyBNQU5BR0VSOiByZWFkLW9ubHkgYW5hbHl0aWNzICsgb25ib2FyZGluZy9vZmZib2FyZGluZyB2aXNpYmlsaXR5XG4gIE1BTkFHRVI6IFtcbiAgICAnZmluZF9jb250cmFjdHMnLFxuICAgICdnZXRfZW1wbG95ZWUnLFxuICAgICdnZXRfb25ib2FyZGluZ19zdGF0dXMnLFxuICAgICdnZXRfb2ZmYm9hcmRpbmdfc3RhdHVzJyxcbiAgICAnY291bnRfaGlyZXNfYnlfeWVhcicsXG4gICAgJ2dldF9kYWlseV9icmllZicsXG4gICAgJ2xpc3Rfbm90aWZpY2F0aW9ucycsXG4gIF0sXG5cbiAgLy8gRU1QTE9ZRUU6IG1pbmltYWwgcHJvZmlsZSBxdWVyaWVzIG9ubHlcbiAgRU1QTE9ZRUU6IFtcbiAgICAnZ2V0X2VtcGxveWVlJywgLy8gQ2FuIG9ubHkgcXVlcnkgdGhlaXIgb3duIHByb2ZpbGUgLSBlbmZvcmNlZCBpbiB0b29sXG4gIF0sXG59XG5cbmZ1bmN0aW9uIGhhc1Rvb2xQZXJtaXNzaW9uKHJvbGU6IHN0cmluZywgdG9vbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBwZXJtaXNzaW9ucyA9IFRPT0xfUEVSTUlTU0lPTlNbcm9sZV1cbiAgaWYgKCFwZXJtaXNzaW9ucykgcmV0dXJuIGZhbHNlXG4gIGlmIChwZXJtaXNzaW9ucy5pbmNsdWRlcygnKicpKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gcGVybWlzc2lvbnMuaW5jbHVkZXModG9vbE5hbWUpXG59XG5cbmZ1bmN0aW9uIGdldFJlcXVpcmVkUm9sZXNGb3JUb29sKHRvb2xOYW1lOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHJvbGVzOiBzdHJpbmdbXSA9IFtdXG4gIGZvciAoY29uc3QgW3JvbGUsIHBlcm1pc3Npb25zXSBvZiBPYmplY3QuZW50cmllcyhUT09MX1BFUk1JU1NJT05TKSkge1xuICAgIGlmIChwZXJtaXNzaW9ucy5pbmNsdWRlcygnKicpIHx8IHBlcm1pc3Npb25zLmluY2x1ZGVzKHRvb2xOYW1lKSkge1xuICAgICAgcm9sZXMucHVzaChyb2xlKVxuICAgIH1cbiAgfVxuICByZXR1cm4gcm9sZXNcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFYzOiBSQVRFIExJTUlUSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBSQVRFX0xJTUlUX1dJTkRPV19NUyA9IDYwICogNjAgKiAxMDAwIC8vIDEgaG91clxuY29uc3QgUkFURV9MSU1JVF9NQVhfQ0FMTFMgPSAxMDBcblxuLy8gSW4tbWVtb3J5IHJhdGUgbGltaXQgc3RvcmUgKHdvdWxkIHVzZSBSZWRpcyBpbiBwcm9kdWN0aW9uKVxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldEF0OiBudW1iZXIgfT4oKVxuXG5mdW5jdGlvbiBjaGVja1JhdGVMaW1pdCh1c2VySWQ6IHN0cmluZyk6IHsgYWxsb3dlZDogYm9vbGVhbjsgcmVtYWluaW5nOiBudW1iZXI7IHJlc2V0QXQ6IERhdGUgfSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3Qga2V5ID0gYHJhdGVsaW1pdDoke3VzZXJJZH1gXG5cbiAgbGV0IGVudHJ5ID0gcmF0ZUxpbWl0U3RvcmUuZ2V0KGtleSlcblxuICAvLyBSZXNldCBpZiB3aW5kb3cgZXhwaXJlZFxuICBpZiAoIWVudHJ5IHx8IGVudHJ5LnJlc2V0QXQgPCBub3cpIHtcbiAgICBlbnRyeSA9IHsgY291bnQ6IDAsIHJlc2V0QXQ6IG5vdyArIFJBVEVfTElNSVRfV0lORE9XX01TIH1cbiAgICByYXRlTGltaXRTdG9yZS5zZXQoa2V5LCBlbnRyeSlcbiAgfVxuXG4gIGNvbnN0IGFsbG93ZWQgPSBlbnRyeS5jb3VudCA8IFJBVEVfTElNSVRfTUFYX0NBTExTXG4gIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIFJBVEVfTElNSVRfTUFYX0NBTExTIC0gZW50cnkuY291bnQpXG5cbiAgaWYgKGFsbG93ZWQpIHtcbiAgICBlbnRyeS5jb3VudCsrXG4gIH1cblxuICByZXR1cm4geyBhbGxvd2VkLCByZW1haW5pbmcsIHJlc2V0QXQ6IG5ldyBEYXRlKGVudHJ5LnJlc2V0QXQpIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFYzOiBEUlktUlVOICYgQVBQUk9WQUwgV09SS0ZMT1dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNvbnN0IEFQUFJPVkFMX1RUTF9NUyA9IDE1ICogNjAgKiAxMDAwIC8vIDE1IG1pbnV0ZXNcblxuaW50ZXJmYWNlIERyeVJ1blJlc3VsdCB7XG4gIHBsYW5JZDogc3RyaW5nXG4gIHByZXZpZXc6IHtcbiAgICBhY3Rpb246IHN0cmluZ1xuICAgIGFmZmVjdGVkQ291bnQ6IG51bWJlclxuICAgIGl0ZW1zOiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgc3RhdHVzPzogc3RyaW5nIH0+XG4gIH1cbiAgZXhwaXJlc0F0OiBEYXRlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFwcHJvdmFsUGxhbihcbiAgY3R4OiB7IHByaXNtYTogYW55OyB1c2VyOiB7IGlkOiBzdHJpbmcgfSB9LFxuICB0b29sTmFtZTogc3RyaW5nLFxuICBkcnlSdW5EYXRhOiB1bmtub3duLFxuICBvcmdJZDogc3RyaW5nXG4pOiBQcm9taXNlPERyeVJ1blJlc3VsdD4ge1xuICBjb25zdCBwbGFuSWQgPSBgcGxhbl8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgMTEpfWBcbiAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIEFQUFJPVkFMX1RUTF9NUylcblxuICBhd2FpdCBjdHgucHJpc21hLmFzc2lzdGFudEFwcHJvdmFsLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgb3JnSWQsXG4gICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgcGxhbklkLFxuICAgICAgdG9vbE5hbWUsXG4gICAgICBkcnlSdW5EYXRhOiBkcnlSdW5EYXRhIGFzIGFueSxcbiAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgZXhwaXJlc0F0LFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBwbGFuSWQsXG4gICAgcHJldmlldzogZHJ5UnVuRGF0YSBhcyBEcnlSdW5SZXN1bHRbJ3ByZXZpZXcnXSxcbiAgICBleHBpcmVzQXQsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBbmRDb25zdW1lQXBwcm92YWwoXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfSxcbiAgYXBwcm92YWxUb2tlbjogc3RyaW5nLFxuICBleHBlY3RlZFRvb2xOYW1lOiBzdHJpbmdcbik6IFByb21pc2U8eyB2YWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IGRhdGE/OiB1bmtub3duIH0+IHtcbiAgY29uc3QgYXBwcm92YWwgPSBhd2FpdCBjdHgucHJpc21hLmFzc2lzdGFudEFwcHJvdmFsLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IHBsYW5JZDogYXBwcm92YWxUb2tlbiB9LFxuICB9KVxuXG4gIGlmICghYXBwcm92YWwpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnQXBwcm92YWwgdG9rZW4gbm90IGZvdW5kLiBQbGVhc2UgcnVuIHRoZSBjb21tYW5kIHdpdGggZHJ5UnVuPXRydWUgZmlyc3QuJyB9XG4gIH1cblxuICBpZiAoYXBwcm92YWwudXNlcklkICE9PSBjdHgudXNlci5pZCkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdUaGlzIGFwcHJvdmFsIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgdXNlci4nIH1cbiAgfVxuXG4gIGlmIChhcHByb3ZhbC50b29sTmFtZSAhPT0gZXhwZWN0ZWRUb29sTmFtZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdUaGlzIGFwcHJvdmFsIGlzIGZvciBhIGRpZmZlcmVudCBvcGVyYXRpb24uJyB9XG4gIH1cblxuICBpZiAoYXBwcm92YWwuc3RhdHVzICE9PSAnUEVORElORycpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiBgVGhpcyBhcHByb3ZhbCBoYXMgYWxyZWFkeSBiZWVuICR7YXBwcm92YWwuc3RhdHVzLnRvTG93ZXJDYXNlKCl9LmAgfVxuICB9XG5cbiAgaWYgKG5ldyBEYXRlKCkgPiBhcHByb3ZhbC5leHBpcmVzQXQpIHtcbiAgICBhd2FpdCBjdHgucHJpc21hLmFzc2lzdGFudEFwcHJvdmFsLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBwbGFuSWQ6IGFwcHJvdmFsVG9rZW4gfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiAnRVhQSVJFRCcgfSxcbiAgICB9KVxuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdUaGlzIGFwcHJvdmFsIGhhcyBleHBpcmVkLiBQbGVhc2UgcnVuIHRoZSBjb21tYW5kIGFnYWluIHdpdGggZHJ5UnVuPXRydWUuJyB9XG4gIH1cblxuICAvLyBNYXJrIGFzIGFwcHJvdmVkXG4gIGF3YWl0IGN0eC5wcmlzbWEuYXNzaXN0YW50QXBwcm92YWwudXBkYXRlKHtcbiAgICB3aGVyZTogeyBwbGFuSWQ6IGFwcHJvdmFsVG9rZW4gfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdBUFBST1ZFRCcsXG4gICAgICBhcHByb3ZlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgYXBwcm92ZWRCeTogY3R4LnVzZXIuaWQsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYXBwcm92YWwuZHJ5UnVuRGF0YSB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVUb29sKFxuICB0b29sTmFtZTogc3RyaW5nLFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55OyB1c2VyOiB7IGlkOiBzdHJpbmc7IHJvbGU6IHN0cmluZzsgZW1wbG95ZWVJZD86IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gIGNvbnN0IHNhbml0aXplZEFyZ3MgPSBzYW5pdGl6ZUFyZ3NGb3JMb2dnaW5nKGFyZ3MpXG5cbiAgLy8gVjM6IENoZWNrIHJvbGUtYmFzZWQgcGVybWlzc2lvbnNcbiAgaWYgKCFoYXNUb29sUGVybWlzc2lvbihjdHgudXNlci5yb2xlLCB0b29sTmFtZSkpIHtcbiAgICBjb25zb2xlLmxvZyhgW0Fzc2lzdGFudF0gUGVybWlzc2lvbiBkZW5pZWQ6ICR7dG9vbE5hbWV9YCwge1xuICAgICAgdXNlcklkOiBjdHgudXNlci5pZCxcbiAgICAgIHJvbGU6IGN0eC51c2VyLnJvbGUsXG4gICAgfSlcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogYFlvdSBkb24ndCBoYXZlIHBlcm1pc3Npb24gdG8gdXNlICR7dG9vbE5hbWV9LiBUaGlzIHRvb2wgcmVxdWlyZXMgJHtnZXRSZXF1aXJlZFJvbGVzRm9yVG9vbCh0b29sTmFtZSkuam9pbignIG9yICcpfSByb2xlLmAsXG4gICAgfVxuICB9XG5cbiAgLy8gVjM6IENoZWNrIHJhdGUgbGltaXRcbiAgY29uc3QgcmF0ZUxpbWl0ID0gY2hlY2tSYXRlTGltaXQoY3R4LnVzZXIuaWQpXG4gIGlmICghcmF0ZUxpbWl0LmFsbG93ZWQpIHtcbiAgICBjb25zb2xlLmxvZyhgW0Fzc2lzdGFudF0gUmF0ZSBsaW1pdCBleGNlZWRlZDogJHt0b29sTmFtZX1gLCB7XG4gICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgcmVzZXRBdDogcmF0ZUxpbWl0LnJlc2V0QXQsXG4gICAgfSlcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogYFJhdGUgbGltaXQgZXhjZWVkZWQuIFlvdSBoYXZlIHVzZWQgYWxsICR7UkFURV9MSU1JVF9NQVhfQ0FMTFN9IHRvb2wgY2FsbHMgdGhpcyBob3VyLiBMaW1pdCByZXNldHMgYXQgJHtyYXRlTGltaXQucmVzZXRBdC50b0lTT1N0cmluZygpfS5gLFxuICAgIH1cbiAgfVxuXG4gIGNvbnNvbGUubG9nKGBbQXNzaXN0YW50XSBUb29sIHN0YXJ0OiAke3Rvb2xOYW1lfWAsIHtcbiAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgIHJvbGU6IGN0eC51c2VyLnJvbGUsXG4gICAgYXJnczogc2FuaXRpemVkQXJncyxcbiAgICByYXRlTGltaXRSZW1haW5pbmc6IHJhdGVMaW1pdC5yZW1haW5pbmcsXG4gIH0pXG5cbiAgdHJ5IHtcbiAgICBsZXQgcmVzdWx0OiBUb29sUmVzdWx0XG4gICAgc3dpdGNoICh0b29sTmFtZSkge1xuICAgICAgY2FzZSAnZmluZF9jb250cmFjdHMnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBmaW5kQ29udHJhY3RzKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NyZWF0ZV9jb250cmFjdF9kcmFmdCc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGNyZWF0ZUNvbnRyYWN0RHJhZnQoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc2VuZF9jb250cmFjdCc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHNlbmRDb250cmFjdChhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdnZXRfZW1wbG95ZWUnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXRFbXBsb3llZShhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzdGFydF9vbmJvYXJkaW5nJzpcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgc3RhcnRPbmJvYXJkaW5nKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2dldF9vbmJvYXJkaW5nX3N0YXR1cyc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGdldE9uYm9hcmRpbmdTdGF0dXMoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY291bnRfaGlyZXNfYnlfeWVhcic6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGNvdW50SGlyZXNCeVllYXIoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgLy8gVjIgQ29udHJhY3QgVG9vbHNcbiAgICAgIGNhc2UgJ3VwZGF0ZV9jb250cmFjdF9kcmFmdCc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHVwZGF0ZUNvbnRyYWN0RHJhZnQoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVzZW5kX2NvbnRyYWN0JzpcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzZW5kQ29udHJhY3QoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2FuY2VsX2NvbnRyYWN0JzpcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgY2FuY2VsQ29udHJhY3QoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgLy8gVjIgT25ib2FyZGluZyBUYXNrIFRvb2xzXG4gICAgICBjYXNlICdjb21wbGV0ZV9vbmJvYXJkaW5nX3Rhc2snOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBjb21wbGV0ZU9uYm9hcmRpbmdUYXNrKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3J1bl9vbmJvYXJkaW5nX3Rhc2snOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBydW5PbmJvYXJkaW5nVGFzayhhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdza2lwX29uYm9hcmRpbmdfdGFzayc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHNraXBPbmJvYXJkaW5nVGFzayhhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICAvLyBWMiBPZmZib2FyZGluZyBUb29sc1xuICAgICAgY2FzZSAnc3RhcnRfb2ZmYm9hcmRpbmcnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBzdGFydE9mZmJvYXJkaW5nKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2dldF9vZmZib2FyZGluZ19zdGF0dXMnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXRPZmZib2FyZGluZ1N0YXR1cyhhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICAvLyBWMiBJbnRlZ3JhdGlvbiBUb29sc1xuICAgICAgY2FzZSAnbGlzdF9pbnRlZ3JhdGlvbnMnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBsaXN0SW50ZWdyYXRpb25zKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Rlc3RfaW50ZWdyYXRpb25fY29ubmVjdGlvbic6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRlc3RJbnRlZ3JhdGlvbkNvbm5lY3Rpb24oYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgLy8gVjIgTm90aWZpY2F0aW9uICYgQXVkaXQgVG9vbHNcbiAgICAgIGNhc2UgJ2xpc3Rfbm90aWZpY2F0aW9ucyc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGxpc3ROb3RpZmljYXRpb25zKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3NlYXJjaF9hdWRpdF9sb2cnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBzZWFyY2hBdWRpdExvZyhhcmdzLCBjdHgpXG4gICAgICAgIGJyZWFrXG4gICAgICAvLyBWMyBQcm9hY3RpdmUgVG9vbHNcbiAgICAgIGNhc2UgJ2dldF9kYWlseV9icmllZic6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGdldERhaWx5QnJpZWYoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgLy8gVjMgQnVsayBPcGVyYXRpb25zXG4gICAgICBjYXNlICdidWxrX3N0YXJ0X29uYm9hcmRpbmcnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBidWxrU3RhcnRPbmJvYXJkaW5nKGFyZ3MsIGN0eClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2J1bGtfcmVzZW5kX2NvbnRyYWN0cyc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGJ1bGtSZXNlbmRDb250cmFjdHMoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3MnOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBidWxrRGVwcm92aXNpb25BY2Nlc3MoYXJncywgY3R4KVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzdWx0ID0geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGBVbmtub3duIHRvb2w6ICR7dG9vbE5hbWV9YCB9XG4gICAgfVxuXG4gICAgY29uc3QgbGF0ZW5jeU1zID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIGNvbnNvbGUubG9nKGBbQXNzaXN0YW50XSBUb29sIGNvbXBsZXRlOiAke3Rvb2xOYW1lfWAsIHtcbiAgICAgIHN0YXR1czogcmVzdWx0LnN0YXR1cyxcbiAgICAgIGxhdGVuY3lNcyxcbiAgICAgIHVzZXJJZDogY3R4LnVzZXIuaWQsXG4gICAgfSlcblxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBsYXRlbmN5TXMgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgY29uc29sZS5lcnJvcihgW0Fzc2lzdGFudF0gVG9vbCBlcnJvcjogJHt0b29sTmFtZX1gLCB7XG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICBsYXRlbmN5TXMsXG4gICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgIH0pXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnLFxuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kQ29udHJhY3RzKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IHNlYXJjaCwgc3RhdHVzLCBsaW1pdCA9IDEwIH0gPSBhcmdzIGFzIHsgc2VhcmNoPzogc3RyaW5nOyBzdGF0dXM/OiBzdHJpbmc7IGxpbWl0PzogbnVtYmVyIH1cblxuICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICBpZiAoc3RhdHVzKSB3aGVyZS5zdGF0dXMgPSBzdGF0dXNcbiAgaWYgKHNlYXJjaCkge1xuICAgIHdoZXJlLk9SID0gW1xuICAgICAgeyBjYW5kaWRhdGVOYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgeyBjYW5kaWRhdGVFbWFpbDogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICBdXG4gIH1cblxuICBjb25zdCBvZmZlcnMgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgY2FuZGlkYXRlTmFtZTogdHJ1ZSxcbiAgICAgIGNhbmRpZGF0ZUVtYWlsOiB0cnVlLFxuICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiB0cnVlLFxuICAgICAgdmFyaWFibGVzOiB0cnVlLFxuICAgICAgdGVtcGxhdGU6IHsgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSB9LFxuICAgIH0sXG4gICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgIHRha2U6IE1hdGgubWluKGxpbWl0IGFzIG51bWJlciwgMjApLFxuICB9KVxuXG4gIGNvbnN0IGNvbnRyYWN0cyA9IG9mZmVycy5tYXAoKG86IGFueSkgPT4gKHtcbiAgICBpZDogby5pZCxcbiAgICBjYW5kaWRhdGVOYW1lOiBvLmNhbmRpZGF0ZU5hbWUsXG4gICAgY2FuZGlkYXRlRW1haWw6IG8uY2FuZGlkYXRlRW1haWwsXG4gICAgc3RhdHVzOiBvLnN0YXR1cyxcbiAgICByb2xlVGl0bGU6IG8udmFyaWFibGVzPy5yb2xlIHx8IG8udmFyaWFibGVzPy5qb2JfdGl0bGUgfHwgbnVsbCxcbiAgICBzdGFydERhdGU6IG8udmFyaWFibGVzPy5zdGFydF9kYXRlIHx8IG51bGwsXG4gICAgdGVtcGxhdGVOYW1lOiBvLnRlbXBsYXRlPy5uYW1lIHx8IG51bGwsXG4gICAgY3JlYXRlZEF0OiBvLmNyZWF0ZWRBdCxcbiAgfSkpXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogeyBjb250cmFjdHMsIHRvdGFsOiBjb250cmFjdHMubGVuZ3RoIH0sXG4gICAgbWVzc2FnZTogY29udHJhY3RzLmxlbmd0aCA9PT0gMFxuICAgICAgPyAnTm8gY29udHJhY3RzIGZvdW5kIG1hdGNoaW5nIHlvdXIgY3JpdGVyaWEuJ1xuICAgICAgOiBgRm91bmQgJHtjb250cmFjdHMubGVuZ3RofSBjb250cmFjdChzKS5gLFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNvbnRyYWN0RHJhZnQoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCByZXF1aXJlZEZpZWxkcyA9IFsnY2FuZGlkYXRlTmFtZScsICdjYW5kaWRhdGVFbWFpbCcsICdyb2xlVGl0bGUnLCAnc3RhcnREYXRlJywgJ2NvbXBlbnNhdGlvbkFtb3VudCcsICdjdXJyZW5jeSddXG4gIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSByZXF1aXJlZEZpZWxkcy5maWx0ZXIoKGYpID0+ICFhcmdzW2ZdKVxuXG4gIGlmIChtaXNzaW5nRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLFxuICAgICAgbWlzc2luZ0ZpZWxkcyxcbiAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgcHJvdmlkZTogJHttaXNzaW5nRmllbGRzLmpvaW4oJywgJyl9YCxcbiAgICB9XG4gIH1cblxuICBjb25zdCB7XG4gICAgY2FuZGlkYXRlTmFtZSxcbiAgICBjYW5kaWRhdGVFbWFpbCxcbiAgICByb2xlVGl0bGUsXG4gICAgc3RhcnREYXRlLFxuICAgIGNvbXBlbnNhdGlvbkFtb3VudCxcbiAgICBjdXJyZW5jeSxcbiAgICB0ZW1wbGF0ZUlkLFxuICAgIGxvY2F0aW9uLFxuICAgIHNpZ25hdHVyZUJsb2NrSWQsXG4gIH0gPSBhcmdzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlcj5cblxuICAvLyBGaW5kIG9yIGdldCBkZWZhdWx0IHRlbXBsYXRlXG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlSWRcbiAgICA/IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlSWQgfSB9KVxuICAgIDogYXdhaXQgY3R4LnByaXNtYS5vZmZlclRlbXBsYXRlLmZpbmRGaXJzdCh7IHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0gfSlcblxuICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdObyBvZmZlciB0ZW1wbGF0ZSBmb3VuZC4gUGxlYXNlIGNyZWF0ZSBhbiBvZmZlciB0ZW1wbGF0ZSBmaXJzdCBpbiBTZXR0aW5ncy4nLFxuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGlmIGVtcGxveWVlIGV4aXN0c1xuICBsZXQgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IHBlcnNvbmFsRW1haWw6IGNhbmRpZGF0ZUVtYWlsIGFzIHN0cmluZyB9LFxuICB9KVxuXG4gIGlmICghZW1wbG95ZWUpIHtcbiAgICAvLyBDcmVhdGUgYXMgY2FuZGlkYXRlXG4gICAgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGZ1bGxOYW1lOiBjYW5kaWRhdGVOYW1lIGFzIHN0cmluZyxcbiAgICAgICAgcGVyc29uYWxFbWFpbDogY2FuZGlkYXRlRW1haWwgYXMgc3RyaW5nLFxuICAgICAgICBzdGF0dXM6ICdDQU5ESURBVEUnLFxuICAgICAgICBqb2JUaXRsZTogcm9sZVRpdGxlIGFzIHN0cmluZyxcbiAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUgPyBuZXcgRGF0ZShzdGFydERhdGUgYXMgc3RyaW5nKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgc2FsYXJ5QW1vdW50OiBjb21wZW5zYXRpb25BbW91bnQgYXMgbnVtYmVyLFxuICAgICAgICBzYWxhcnlDdXJyZW5jeTogY3VycmVuY3kgYXMgc3RyaW5nLFxuICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24gYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgdmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIHJvbGU6IHJvbGVUaXRsZSBhcyBzdHJpbmcsXG4gICAgam9iX3RpdGxlOiByb2xlVGl0bGUgYXMgc3RyaW5nLFxuICAgIHN0YXJ0X2RhdGU6IHN0YXJ0RGF0ZSBhcyBzdHJpbmcsXG4gICAgc2FsYXJ5OiBTdHJpbmcoY29tcGVuc2F0aW9uQW1vdW50KSxcbiAgICBjdXJyZW5jeTogY3VycmVuY3kgYXMgc3RyaW5nLFxuICAgIGNhbmRpZGF0ZV9uYW1lOiBjYW5kaWRhdGVOYW1lIGFzIHN0cmluZyxcbiAgfVxuXG4gIGlmIChsb2NhdGlvbikgdmFyaWFibGVzLmxvY2F0aW9uID0gbG9jYXRpb24gYXMgc3RyaW5nXG4gIGlmIChzaWduYXR1cmVCbG9ja0lkKSB2YXJpYWJsZXMuc2lnbmF0dXJlX2Jsb2NrX2lkID0gc2lnbmF0dXJlQmxvY2tJZCBhcyBzdHJpbmdcblxuICBjb25zdCBvZmZlciA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBlbXBsb3llZUlkOiBlbXBsb3llZS5pZCxcbiAgICAgIGNhbmRpZGF0ZUVtYWlsOiBjYW5kaWRhdGVFbWFpbCBhcyBzdHJpbmcsXG4gICAgICBjYW5kaWRhdGVOYW1lOiBjYW5kaWRhdGVOYW1lIGFzIHN0cmluZyxcbiAgICAgIHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLFxuICAgICAgdmFyaWFibGVzLFxuICAgICAgc3RhdHVzOiAnRFJBRlQnLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgY3R4LnByaXNtYS5vZmZlckV2ZW50LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgb2ZmZXJJZDogb2ZmZXIuaWQsXG4gICAgICB0eXBlOiAnY3JlYXRlZCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnRyYWN0IGRyYWZ0IGNyZWF0ZWQgdmlhIEJsdWUgQUknLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFjdGlvbjogJ0FTU0lTVEFOVF9BQ1RJT04nLFxuICAgIHJlc291cmNlVHlwZTogJ29mZmVyJyxcbiAgICByZXNvdXJjZUlkOiBvZmZlci5pZCxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG9vbDogJ2NyZWF0ZV9jb250cmFjdF9kcmFmdCcsXG4gICAgICBjYW5kaWRhdGVOYW1lLFxuICAgICAgY2FuZGlkYXRlRW1haWwsXG4gICAgICByb2xlVGl0bGUsXG4gICAgICBhc3Npc3RhbnRJbml0aWF0ZWQ6IHRydWUsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7IGNvbnRyYWN0SWQ6IG9mZmVyLmlkLCBjYW5kaWRhdGVOYW1lLCByb2xlVGl0bGUsIHN0YXJ0RGF0ZSB9LFxuICAgIG1lc3NhZ2U6IGBDb250cmFjdCBkcmFmdCBjcmVhdGVkIGZvciAke2NhbmRpZGF0ZU5hbWV9ICgke3JvbGVUaXRsZX0pLiBDb250cmFjdCBJRDogJHtvZmZlci5pZH1gLFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlbmRDb250cmFjdChcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgY29udHJhY3RJZCwgY29uZmlybWVkIH0gPSBhcmdzIGFzIHsgY29udHJhY3RJZD86IHN0cmluZzsgY29uZmlybWVkPzogYm9vbGVhbiB9XG5cbiAgaWYgKCFjb250cmFjdElkKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLCBtaXNzaW5nRmllbGRzOiBbJ2NvbnRyYWN0SWQnXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIHRoZSBjb250cmFjdCBJRC4nIH1cbiAgfVxuXG4gIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogY29udHJhY3RJZCB9LFxuICAgIGluY2x1ZGU6IHsgdGVtcGxhdGU6IHRydWUsIGVtcGxveWVlOiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCFvZmZlcikge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ0NvbnRyYWN0IG5vdCBmb3VuZC4nIH1cbiAgfVxuXG4gIGlmIChvZmZlci5zdGF0dXMgIT09ICdEUkFGVCcpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGBDb250cmFjdCBpcyBpbiAke29mZmVyLnN0YXR1c30gc3RhdHVzIGFuZCBjYW5ub3QgYmUgc2VudC4gT25seSBEUkFGVCBjb250cmFjdHMgY2FuIGJlIHNlbnQuYCB9XG4gIH1cblxuICAvLyBJZiBub3QgY29uZmlybWVkLCByZXR1cm4gc3VtbWFyeSBmb3IgY29uZmlybWF0aW9uXG4gIGlmICghY29uZmlybWVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1hdGlvbl9yZXF1aXJlZCcsXG4gICAgICBtaXNzaW5nRmllbGRzOiBbJ2NvbmZpcm1lZCddLFxuICAgICAgc3VtbWFyeTogYFJlYWR5IHRvIHNlbmQgY29udHJhY3QgdG8gJHtvZmZlci5jYW5kaWRhdGVOYW1lfSAoJHtvZmZlci5jYW5kaWRhdGVFbWFpbH0pIGZvciAke29mZmVyLnZhcmlhYmxlcz8ucm9sZSB8fCBvZmZlci52YXJpYWJsZXM/LmpvYl90aXRsZSB8fCAndGhlIHJvbGUnfS5gLFxuICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb25maXJtIHRvIHNlbmQgdGhpcyBjb250cmFjdCBmb3Igc2lnbmF0dXJlLicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNvbnRyYWN0SWQ6IG9mZmVyLmlkLFxuICAgICAgICBjYW5kaWRhdGVOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICBjYW5kaWRhdGVFbWFpbDogb2ZmZXIuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgIHJvbGVUaXRsZTogb2ZmZXIudmFyaWFibGVzPy5yb2xlIHx8IG9mZmVyLnZhcmlhYmxlcz8uam9iX3RpdGxlLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvLyBBY3R1YWxseSBzZW5kIHRoZSBjb250cmFjdFxuICBjb25zdCB7IGNyZWF0ZURvY3VTaWduQ29ubmVjdG9yIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL2ludGVncmF0aW9ucy9kb2N1c2lnbicpXG4gIGNvbnN0IHsgZ2V0T3JnYW5pemF0aW9uIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL29yZ2FuaXphdGlvbicpXG4gIGNvbnN0IHsgd3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZCB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9sZXR0ZXJoZWFkJylcbiAgY29uc3QgeyBzZW5kT2ZmZXJFbWFpbCB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9lbWFpbCcpXG5cbiAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgY29uc3QgZG9jdXNpZ24gPSBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpXG5cbiAgaWYgKGRvY3VzaWduKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50SHRtbCA9IHdyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQob2ZmZXIucmVuZGVyZWRIdG1sIHx8ICcnLCBvcmdhbml6YXRpb24sIHtcbiAgICAgICAgYmFzZVVybDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMLFxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZG9jdXNpZ24uc2VuZEVudmVsb3BlKHtcbiAgICAgICAgc2lnbmVyRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgICBzaWduZXJOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICBzdWJqZWN0OiBgT2ZmZXIgZnJvbSAke29yZ2FuaXphdGlvbi5uYW1lfSAtICR7b2ZmZXIuY2FuZGlkYXRlTmFtZX1gLFxuICAgICAgICBkb2N1bWVudEh0bWwsXG4gICAgICAgIGNhbGxiYWNrVXJsOiBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L2FwaS93ZWJob29rcy9kb2N1c2lnbmAsXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBvZmZlci5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3RhdHVzOiAnU0VOVCcsXG4gICAgICAgICAgZXNpZ25FbnZlbG9wZUlkOiByZXN1bHQuZW52ZWxvcGVJZCxcbiAgICAgICAgICBlc2lnblByb3ZpZGVyOiAnZG9jdXNpZ24nLFxuICAgICAgICAgIGVzaWduU3RhdHVzOiByZXN1bHQuc3RhdHVzLFxuICAgICAgICAgIGVzaWduU2VudEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHNlbnRCeTogY3R4LnVzZXIuaWQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gc2VuZCB2aWEgRG9jdVNpZ246ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2sgdG8gZW1haWxcbiAgICBjb25zdCBvZmZlckxpbmsgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L29mZmVyLyR7b2ZmZXIuaWR9L3NpZ25gXG4gICAgYXdhaXQgc2VuZE9mZmVyRW1haWwoe1xuICAgICAgY2FuZGlkYXRlRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgY2FuZGlkYXRlTmFtZTogb2ZmZXIuY2FuZGlkYXRlTmFtZSxcbiAgICAgIG9mZmVyTGluayxcbiAgICAgIGNvbXBhbnlOYW1lOiBvcmdhbml6YXRpb24ubmFtZSxcbiAgICAgIGxvZ29Vcmw6IG9yZ2FuaXphdGlvbi5sb2dvVXJsIHx8IHVuZGVmaW5lZCxcbiAgICB9KVxuXG4gICAgYXdhaXQgY3R4LnByaXNtYS5vZmZlci51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG9mZmVyLmlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN0YXR1czogJ1NFTlQnLFxuICAgICAgICBlc2lnblByb3ZpZGVyOiAnaW50ZXJuYWwnLFxuICAgICAgICBlc2lnblN0YXR1czogJ3NlbnQnLFxuICAgICAgICBlc2lnblNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgc2VudEJ5OiBjdHgudXNlci5pZCxcbiAgICAgIH0sXG4gICAgfSlcbiAgfVxuXG4gIC8vIFVwZGF0ZSBlbXBsb3llZSBzdGF0dXNcbiAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiBvZmZlci5lbXBsb3llZUlkIH0sXG4gICAgZGF0YTogeyBzdGF0dXM6ICdPRkZFUl9TRU5UJyB9LFxuICB9KVxuXG4gIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIG9mZmVySWQ6IG9mZmVyLmlkLFxuICAgICAgdHlwZTogJ3NlbnQnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb250cmFjdCBzZW50IHZpYSBCbHVlIEFJJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICBhY3RvcklkOiBjdHgudXNlci5pZCxcbiAgICBhY3Rpb246ICdBU1NJU1RBTlRfQUNUSU9OJyxcbiAgICByZXNvdXJjZVR5cGU6ICdvZmZlcicsXG4gICAgcmVzb3VyY2VJZDogb2ZmZXIuaWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICdzZW5kX2NvbnRyYWN0JyxcbiAgICAgIGNhbmRpZGF0ZUVtYWlsOiBvZmZlci5jYW5kaWRhdGVFbWFpbCxcbiAgICAgIGFzc2lzdGFudEluaXRpYXRlZDogdHJ1ZSxcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIGRhdGE6IHsgY29udHJhY3RJZDogb2ZmZXIuaWQsIGNhbmRpZGF0ZUVtYWlsOiBvZmZlci5jYW5kaWRhdGVFbWFpbCB9LFxuICAgIG1lc3NhZ2U6IGBDb250cmFjdCBzZW50IHRvICR7b2ZmZXIuY2FuZGlkYXRlTmFtZX0gYXQgJHtvZmZlci5jYW5kaWRhdGVFbWFpbH0uYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRFbXBsb3llZShcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyByb2xlOiBzdHJpbmc7IGVtcGxveWVlSWQ/OiBzdHJpbmcgfSB9XG4pOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcbiAgY29uc3QgeyBpZCwgc2VhcmNoIH0gPSBhcmdzIGFzIHsgaWQ/OiBzdHJpbmc7IHNlYXJjaD86IHN0cmluZyB9XG5cbiAgaWYgKCFpZCAmJiAhc2VhcmNoKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLCBtaXNzaW5nRmllbGRzOiBbJ2lkIG9yIHNlYXJjaCddLCBtZXNzYWdlOiAnUGxlYXNlIHByb3ZpZGUgYW4gZW1wbG95ZWUgSUQgb3Igc2VhcmNoIHRlcm0uJyB9XG4gIH1cblxuICBjb25zdCBpc0hSID0gY3R4LnVzZXIucm9sZSA9PT0gJ1NVUEVSX0FETUlOJyB8fCBjdHgudXNlci5yb2xlID09PSAnSFJfQURNSU4nXG5cbiAgaWYgKGlkKSB7XG4gICAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbWFuYWdlcjogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlIH0gfSxcbiAgICAgICAgb25ib2FyZGluZ1dvcmtmbG93czogeyBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sIHRha2U6IDEgfSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGlmICghZW1wbG95ZWUpIHtcbiAgICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ0VtcGxveWVlIG5vdCBmb3VuZC4nIH1cbiAgICB9XG5cbiAgICAvLyBCdWlsZCByZXN1bHQgd2l0aCBhbGwgZmllbGRzIC0gbWFzayBzZW5zaXRpdmUgZmllbGRzIGZvciBub24tSFJcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAvLyBCYXNpYyBpbmZvXG4gICAgICBpZDogZW1wbG95ZWUuaWQsXG4gICAgICBmdWxsTmFtZTogZW1wbG95ZWUuZnVsbE5hbWUsXG4gICAgICBwZXJzb25hbEVtYWlsOiBlbXBsb3llZS5wZXJzb25hbEVtYWlsLFxuICAgICAgd29ya0VtYWlsOiBlbXBsb3llZS53b3JrRW1haWwsXG4gICAgICBwaG9uZTogZW1wbG95ZWUucGhvbmUsXG4gICAgICBwcm9maWxlSW1hZ2VVcmw6IGVtcGxveWVlLnByb2ZpbGVJbWFnZVVybCxcblxuICAgICAgLy8gSm9iIGRldGFpbHNcbiAgICAgIGpvYlRpdGxlOiBlbXBsb3llZS5qb2JUaXRsZSxcbiAgICAgIGRlcGFydG1lbnQ6IGVtcGxveWVlLmRlcGFydG1lbnQsXG4gICAgICBsb2NhdGlvbjogZW1wbG95ZWUubG9jYXRpb24sXG4gICAgICBlbXBsb3ltZW50VHlwZTogZW1wbG95ZWUuZW1wbG95bWVudFR5cGUsXG4gICAgICBzdGF0dXM6IGVtcGxveWVlLnN0YXR1cyxcbiAgICAgIG1hbmFnZXI6IGVtcGxveWVlLm1hbmFnZXIsXG5cbiAgICAgIC8vIERhdGVzXG4gICAgICBzdGFydERhdGU6IGVtcGxveWVlLnN0YXJ0RGF0ZSxcbiAgICAgIGVuZERhdGU6IGVtcGxveWVlLmVuZERhdGUsXG5cbiAgICAgIC8vIEFkZHJlc3NcbiAgICAgIGFkZHJlc3NTdHJlZXQ6IGVtcGxveWVlLmFkZHJlc3NTdHJlZXQsXG4gICAgICBhZGRyZXNzQ2l0eTogZW1wbG95ZWUuYWRkcmVzc0NpdHksXG4gICAgICBhZGRyZXNzU3RhdGU6IGVtcGxveWVlLmFkZHJlc3NTdGF0ZSxcbiAgICAgIGFkZHJlc3NQb3N0YWw6IGVtcGxveWVlLmFkZHJlc3NQb3N0YWwsXG4gICAgICBhZGRyZXNzQ291bnRyeTogZW1wbG95ZWUuYWRkcmVzc0NvdW50cnksXG5cbiAgICAgIC8vIFBlcnNvbmFsIGRldGFpbHNcbiAgICAgIGdlbmRlcjogZW1wbG95ZWUuZ2VuZGVyLFxuICAgICAgbWFyaXRhbFN0YXR1czogZW1wbG95ZWUubWFyaXRhbFN0YXR1cyxcbiAgICAgIGRhdGVPZkJpcnRoOiBlbXBsb3llZS5kYXRlT2ZCaXJ0aCxcbiAgICAgIG5hdGlvbmFsaXR5OiBlbXBsb3llZS5uYXRpb25hbGl0eSxcblxuICAgICAgLy8gSFItb25seSBzZW5zaXRpdmUgZmllbGRzXG4gICAgICAuLi4oaXNIUlxuICAgICAgICA/IHtcbiAgICAgICAgICAgIC8vIENvbXBlbnNhdGlvblxuICAgICAgICAgICAgc2FsYXJ5QW1vdW50OiBlbXBsb3llZS5zYWxhcnlBbW91bnQsXG4gICAgICAgICAgICBzYWxhcnlDdXJyZW5jeTogZW1wbG95ZWUuc2FsYXJ5Q3VycmVuY3ksXG4gICAgICAgICAgICBjb250cmFjdFR5cGU6IGVtcGxveWVlLmNvbnRyYWN0VHlwZSxcbiAgICAgICAgICAgIHRheElkOiBlbXBsb3llZS50YXhJZCxcblxuICAgICAgICAgICAgLy8gQmFuayBkZXRhaWxzXG4gICAgICAgICAgICBiYW5rTmFtZTogZW1wbG95ZWUuYmFua05hbWUsXG4gICAgICAgICAgICBhY2NvdW50TmFtZTogZW1wbG95ZWUuYWNjb3VudE5hbWUsXG4gICAgICAgICAgICBhY2NvdW50TnVtYmVyOiBlbXBsb3llZS5hY2NvdW50TnVtYmVyLFxuICAgICAgICAgICAgYWNjb3VudFNvcnRDb2RlOiBlbXBsb3llZS5hY2NvdW50U29ydENvZGUsXG5cbiAgICAgICAgICAgIC8vIEVtZXJnZW5jeSBjb250YWN0XG4gICAgICAgICAgICBlbWVyZ2VuY3lDb250YWN0TmFtZTogZW1wbG95ZWUuZW1lcmdlbmN5Q29udGFjdE5hbWUsXG4gICAgICAgICAgICBlbWVyZ2VuY3lDb250YWN0UmVsYXRpb246IGVtcGxveWVlLmVtZXJnZW5jeUNvbnRhY3RSZWxhdGlvbixcbiAgICAgICAgICAgIGVtZXJnZW5jeUNvbnRhY3RQaG9uZTogZW1wbG95ZWUuZW1lcmdlbmN5Q29udGFjdFBob25lLFxuICAgICAgICAgICAgZW1lcmdlbmN5Q29udGFjdEVtYWlsOiBlbXBsb3llZS5lbWVyZ2VuY3lDb250YWN0RW1haWwsXG4gICAgICAgICAgfVxuICAgICAgICA6IHt9KSxcblxuICAgICAgbGluazogYnVpbGREZWVwTGluaygnZW1wbG95ZWUnLCBlbXBsb3llZS5pZCksXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnb2snLCBkYXRhOiB7IGVtcGxveWVlOiByZXN1bHQgfSB9XG4gIH1cblxuICAvLyBTZWFyY2ggYnkgbmFtZS9lbWFpbFxuICBjb25zdCBlbXBsb3llZXMgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgT1I6IFtcbiAgICAgICAgeyBmdWxsTmFtZTogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBwZXJzb25hbEVtYWlsOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IHdvcmtFbWFpbDogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgZnVsbE5hbWU6IHRydWUsXG4gICAgICBwZXJzb25hbEVtYWlsOiB0cnVlLFxuICAgICAgd29ya0VtYWlsOiB0cnVlLFxuICAgICAgcGhvbmU6IHRydWUsXG4gICAgICBqb2JUaXRsZTogdHJ1ZSxcbiAgICAgIGRlcGFydG1lbnQ6IHRydWUsXG4gICAgICBzdGF0dXM6IHRydWUsXG4gICAgfSxcbiAgICB0YWtlOiAxMCxcbiAgfSlcblxuICBpZiAoZW1wbG95ZWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ29rJywgZGF0YTogeyBlbXBsb3llZXM6IFtdIH0sIG1lc3NhZ2U6IGBObyBlbXBsb3llZXMgZm91bmQgbWF0Y2hpbmcgXCIke3NlYXJjaH1cIi5gIH1cbiAgfVxuXG4gIGlmIChlbXBsb3llZXMubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gUmV0dXJuIGZ1bGwgZGV0YWlscyBmb3Igc2luZ2xlIG1hdGNoXG4gICAgcmV0dXJuIGdldEVtcGxveWVlKHsgaWQ6IGVtcGxveWVlc1swXS5pZCB9LCBjdHgpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7IGVtcGxveWVlcywgbXVsdGlwbGU6IHRydWUgfSxcbiAgICBtZXNzYWdlOiBgRm91bmQgJHtlbXBsb3llZXMubGVuZ3RofSBlbXBsb3llZXMuIFBsZWFzZSBzcGVjaWZ5IHdoaWNoIG9uZS5gLFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0T25ib2FyZGluZyhcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgZW1wbG95ZWVJZCwgc3RhcnREYXRlLCBjb25maXJtZWQgfSA9IGFyZ3MgYXMgeyBlbXBsb3llZUlkPzogc3RyaW5nOyBzdGFydERhdGU/OiBzdHJpbmc7IGNvbmZpcm1lZD86IGJvb2xlYW4gfVxuXG4gIGlmICghZW1wbG95ZWVJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWydlbXBsb3llZUlkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSB0aGUgZW1wbG95ZWUgSUQuJyB9XG4gIH1cblxuICBjb25zdCBlbXBsb3llZSA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGVtcGxveWVlSWQgfSxcbiAgICBpbmNsdWRlOiB7IG1hbmFnZXI6IHRydWUgfSxcbiAgfSlcblxuICBpZiAoIWVtcGxveWVlKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnRW1wbG95ZWUgbm90IGZvdW5kLicgfVxuICB9XG5cbiAgaWYgKCFbJ09GRkVSX1NJR05FRCcsICdISVJFRF9QRU5ESU5HX1NUQVJUJ10uaW5jbHVkZXMoZW1wbG95ZWUuc3RhdHVzKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICBtZXNzYWdlOiBgRW1wbG95ZWUgaXMgaW4gJHtlbXBsb3llZS5zdGF0dXN9IHN0YXR1cy4gT25ib2FyZGluZyBjYW4gb25seSBiZSBzdGFydGVkIGZvciBlbXBsb3llZXMgaW4gT0ZGRVJfU0lHTkVEIG9yIEhJUkVEX1BFTkRJTkdfU1RBUlQgc3RhdHVzLmAsXG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGFjdGl2ZSB3b3JrZmxvd1xuICBjb25zdCBleGlzdGluZ1dvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgZW1wbG95ZWVJZCxcbiAgICAgIHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChleGlzdGluZ1dvcmtmbG93KSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnRW1wbG95ZWUgYWxyZWFkeSBoYXMgYW4gYWN0aXZlIG9uYm9hcmRpbmcgd29ya2Zsb3cuJyB9XG4gIH1cblxuICAvLyBJZiBub3QgY29uZmlybWVkLCByZXR1cm4gc3VtbWFyeVxuICBpZiAoIWNvbmZpcm1lZCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdjb25maXJtYXRpb25fcmVxdWlyZWQnLFxuICAgICAgbWlzc2luZ0ZpZWxkczogWydjb25maXJtZWQnXSxcbiAgICAgIHN1bW1hcnk6IGBSZWFkeSB0byBzdGFydCBvbmJvYXJkaW5nIGZvciAke2VtcGxveWVlLmZ1bGxOYW1lfSAoJHtlbXBsb3llZS5qb2JUaXRsZSB8fCAnRW1wbG95ZWUnfSkke2VtcGxveWVlLnN0YXJ0RGF0ZSA/IGAgc3RhcnRpbmcgJHtlbXBsb3llZS5zdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfWAgOiAnJ30uYCxcbiAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29uZmlybSB0byBzdGFydCBvbmJvYXJkaW5nIHdvcmtmbG93LicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgICAgICBlbXBsb3llZU5hbWU6IGVtcGxveWVlLmZ1bGxOYW1lLFxuICAgICAgICBqb2JUaXRsZTogZW1wbG95ZWUuam9iVGl0bGUsXG4gICAgICAgIHN0YXJ0RGF0ZTogZW1wbG95ZWUuc3RhcnREYXRlLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvLyBTdGFydCBvbmJvYXJkaW5nXG4gIGNvbnN0IHsgZ2V0T3JnYW5pemF0aW9uIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL29yZ2FuaXphdGlvbicpXG4gIGNvbnN0IHsgc2VuZE9uYm9hcmRpbmdFbWFpbCB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9lbWFpbCcpXG5cbiAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcblxuICAvLyBHZXQgZGVmYXVsdCB0YXNrc1xuICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gIH0pXG5cbiAgY29uc3QgdGFza3MgPSB0ZW1wbGF0ZXMubGVuZ3RoID4gMFxuICAgID8gdGVtcGxhdGVzLm1hcCgodDogYW55LCBpZHg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICB0eXBlOiB0LnR5cGUsXG4gICAgICAgIGF1dG9tYXRpb25UeXBlOiB0LmF1dG9tYXRpb25UeXBlLFxuICAgICAgICBhdXRvbWF0aW9uQ29uZmlnOiB0LmFwcElkID8geyBhcHBJZDogdC5hcHBJZCwgYXBwVHlwZTogdC5hcHBUeXBlIH0gOiB0LmFwcFR5cGUgPyB7IGFwcFR5cGU6IHQuYXBwVHlwZSB9IDogdW5kZWZpbmVkLFxuICAgICAgICBzb3J0T3JkZXI6IGlkeCArIDEsXG4gICAgICB9KSlcbiAgICA6IFtcbiAgICAgICAgeyBuYW1lOiAnUHJvdmlzaW9uIEdvb2dsZSBXb3Jrc3BhY2UgYWNjb3VudCcsIHR5cGU6ICdBVVRPTUFURUQnLCBhdXRvbWF0aW9uVHlwZTogJ3Byb3Zpc2lvbl9nb29nbGUnLCBzb3J0T3JkZXI6IDEgfSxcbiAgICAgICAgeyBuYW1lOiAnUHJvdmlzaW9uIFNsYWNrIGFjY291bnQnLCB0eXBlOiAnQVVUT01BVEVEJywgYXV0b21hdGlvblR5cGU6ICdwcm92aXNpb25fc2xhY2snLCBzb3J0T3JkZXI6IDIgfSxcbiAgICAgICAgeyBuYW1lOiAnQ29uZmlybSBsYXB0b3AvaGFyZHdhcmUgaGFzIGJlZW4gb3JkZXJlZCcsIHR5cGU6ICdNQU5VQUwnLCBzb3J0T3JkZXI6IDMgfSxcbiAgICAgICAgeyBuYW1lOiAnU2NoZWR1bGUgb3JpZW50YXRpb24gbWVldGluZycsIHR5cGU6ICdNQU5VQUwnLCBzb3J0T3JkZXI6IDQgfSxcbiAgICAgIF1cblxuICBjb25zdCBlZmZlY3RpdmVTdGFydERhdGUgPSBzdGFydERhdGUgPyBuZXcgRGF0ZShzdGFydERhdGUpIDogZW1wbG95ZWUuc3RhcnREYXRlIHx8IG5ldyBEYXRlKClcblxuICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgZW1wbG95ZWVJZCxcbiAgICAgIHN0YXR1czogJ0lOX1BST0dSRVNTJyxcbiAgICAgIHN0YXJ0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgdGFza3M6IHtcbiAgICAgICAgY3JlYXRlOiB0YXNrcy5tYXAoKHRhc2s6IGFueSkgPT4gKHtcbiAgICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICAgICAgdHlwZTogdGFzay50eXBlLFxuICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgIGF1dG9tYXRpb25UeXBlOiB0YXNrLmF1dG9tYXRpb25UeXBlLFxuICAgICAgICAgIGF1dG9tYXRpb25Db25maWc6IHRhc2suYXV0b21hdGlvbkNvbmZpZyxcbiAgICAgICAgICBzb3J0T3JkZXI6IHRhc2suc29ydE9yZGVyLFxuICAgICAgICB9KSksXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5jbHVkZTogeyB0YXNrczogdHJ1ZSB9LFxuICB9KVxuXG4gIC8vIFVwZGF0ZSBlbXBsb3llZVxuICBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGVtcGxveWVlSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdISVJFRF9QRU5ESU5HX1NUQVJUJyxcbiAgICAgIHN0YXJ0RGF0ZTogZWZmZWN0aXZlU3RhcnREYXRlLFxuICAgIH0sXG4gIH0pXG5cbiAgLy8gU2VuZCBvbmJvYXJkaW5nIGVtYWlsXG4gIGNvbnN0IG9uYm9hcmRpbmdMaW5rID0gYCR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS93ZWxjb21lLyR7d29ya2Zsb3cuYWNjZXNzVG9rZW59YFxuICBhd2FpdCBzZW5kT25ib2FyZGluZ0VtYWlsKHtcbiAgICBlbXBsb3llZUVtYWlsOiBlbXBsb3llZS53b3JrRW1haWwgfHwgZW1wbG95ZWUucGVyc29uYWxFbWFpbCxcbiAgICBlbXBsb3llZU5hbWU6IGVtcGxveWVlLmZ1bGxOYW1lLFxuICAgIG9uYm9hcmRpbmdMaW5rLFxuICAgIHN0YXJ0RGF0ZTogZWZmZWN0aXZlU3RhcnREYXRlLFxuICAgIG1hbmFnZXJOYW1lOiBlbXBsb3llZS5tYW5hZ2VyPy5mdWxsTmFtZSxcbiAgICBjb21wYW55TmFtZTogb3JnYW5pemF0aW9uLm5hbWUsXG4gIH0pXG5cbiAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFjdGlvbjogJ0FTU0lTVEFOVF9BQ1RJT04nLFxuICAgIHJlc291cmNlVHlwZTogJ2VtcGxveWVlJyxcbiAgICByZXNvdXJjZUlkOiBlbXBsb3llZUlkLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b29sOiAnc3RhcnRfb25ib2FyZGluZycsXG4gICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgIGFzc2lzdGFudEluaXRpYXRlZDogdHJ1ZSxcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIGRhdGE6IHsgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQsIGVtcGxveWVlTmFtZTogZW1wbG95ZWUuZnVsbE5hbWUsIHRhc2tDb3VudDogd29ya2Zsb3cudGFza3MubGVuZ3RoIH0sXG4gICAgbWVzc2FnZTogYE9uYm9hcmRpbmcgc3RhcnRlZCBmb3IgJHtlbXBsb3llZS5mdWxsTmFtZX0uICR7d29ya2Zsb3cudGFza3MubGVuZ3RofSB0YXNrcyBjcmVhdGVkLiBXZWxjb21lIGVtYWlsIHNlbnQgdG8gJHtlbXBsb3llZS53b3JrRW1haWwgfHwgZW1wbG95ZWUucGVyc29uYWxFbWFpbH0uYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRPbmJvYXJkaW5nU3RhdHVzKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGVtcGxveWVlSWQsIHdvcmtmbG93SWQgfSA9IGFyZ3MgYXMgeyBlbXBsb3llZUlkPzogc3RyaW5nOyB3b3JrZmxvd0lkPzogc3RyaW5nIH1cblxuICBpZiAoIWVtcGxveWVlSWQgJiYgIXdvcmtmbG93SWQpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsIG1pc3NpbmdGaWVsZHM6IFsnZW1wbG95ZWVJZCBvciB3b3JrZmxvd0lkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBlbXBsb3llZSBJRCBvciB3b3JrZmxvdyBJRC4nIH1cbiAgfVxuXG4gIGNvbnN0IHdvcmtmbG93ID0gd29ya2Zsb3dJZFxuICAgID8gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB3b3JrZmxvd0lkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBqb2JUaXRsZTogdHJ1ZSwgc3RhcnREYXRlOiB0cnVlIH0gfSxcbiAgICAgICAgICB0YXNrczogeyBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICA6IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGVtcGxveWVlSWQsIHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZW1wbG95ZWU6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSwgam9iVGl0bGU6IHRydWUsIHN0YXJ0RGF0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgdGFza3M6IHsgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgfSlcblxuICBpZiAoIXdvcmtmbG93KSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnb2snLCBkYXRhOiBudWxsLCBtZXNzYWdlOiAnTm8gb25ib2FyZGluZyB3b3JrZmxvdyBmb3VuZCBmb3IgdGhpcyBlbXBsb3llZS4nIH1cbiAgfVxuXG4gIGNvbnN0IGNvbXBsZXRlZFRhc2tzID0gd29ya2Zsb3cudGFza3MuZmlsdGVyKCh0OiBhbnkpID0+IHQuc3RhdHVzID09PSAnU1VDQ0VTUycgfHwgdC5zdGF0dXMgPT09ICdTS0lQUEVEJykubGVuZ3RoXG4gIGNvbnN0IHRvdGFsVGFza3MgPSB3b3JrZmxvdy50YXNrcy5sZW5ndGhcbiAgY29uc3QgcGVyY2VudENvbXBsZXRlID0gdG90YWxUYXNrcyA+IDAgPyBNYXRoLnJvdW5kKChjb21wbGV0ZWRUYXNrcyAvIHRvdGFsVGFza3MpICogMTAwKSA6IDBcblxuICBjb25zdCBwZW5kaW5nVGFza3MgPSB3b3JrZmxvdy50YXNrc1xuICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gdC5zdGF0dXMgPT09ICdQRU5ESU5HJyB8fCB0LnN0YXR1cyA9PT0gJ0lOX1BST0dSRVNTJyB8fCB0LnN0YXR1cyA9PT0gJ0ZBSUxFRCcpXG4gICAgLnNsaWNlKDAsIDUpXG4gICAgLm1hcCgodDogYW55KSA9PiAoe1xuICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgdHlwZTogdC50eXBlLFxuICAgICAgc3RhdHVzOiB0LnN0YXR1cyxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IHQuc3RhdHVzTWVzc2FnZSxcbiAgICB9KSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7XG4gICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgIGVtcGxveWVlOiB3b3JrZmxvdy5lbXBsb3llZSxcbiAgICAgIHdvcmtmbG93U3RhdHVzOiB3b3JrZmxvdy5zdGF0dXMsXG4gICAgICBwZXJjZW50Q29tcGxldGUsXG4gICAgICBjb21wbGV0ZWRUYXNrcyxcbiAgICAgIHRvdGFsVGFza3MsXG4gICAgICBwZW5kaW5nVGFza3MsXG4gICAgICBzdGFydGVkQXQ6IHdvcmtmbG93LnN0YXJ0ZWRBdCxcbiAgICB9LFxuICAgIG1lc3NhZ2U6IGBPbmJvYXJkaW5nIGZvciAke3dvcmtmbG93LmVtcGxveWVlLmZ1bGxOYW1lfTogJHtwZXJjZW50Q29tcGxldGV9JSBjb21wbGV0ZSAoJHtjb21wbGV0ZWRUYXNrc30vJHt0b3RhbFRhc2tzfSB0YXNrcykuYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjb3VudEhpcmVzQnlZZWFyKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IHllYXIgfSA9IGFyZ3MgYXMgeyB5ZWFyPzogbnVtYmVyIH1cblxuICBpZiAoIXllYXIpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsIG1pc3NpbmdGaWVsZHM6IFsneWVhciddLCBtZXNzYWdlOiAnUGxlYXNlIHByb3ZpZGUgdGhlIHllYXIuJyB9XG4gIH1cblxuICBjb25zdCBzdGFydE9mWWVhciA9IG5ldyBEYXRlKGAke3llYXJ9LTAxLTAxVDAwOjAwOjAwLjAwMFpgKVxuICBjb25zdCBlbmRPZlllYXIgPSBuZXcgRGF0ZShgJHt5ZWFyICsgMX0tMDEtMDFUMDA6MDA6MDAuMDAwWmApXG5cbiAgLy8gRGVmaW5pdGlvbjogZW1wbG95ZWVzIHdpdGggc3RhcnREYXRlIGluIHRoZSB5ZWFyIGFuZCBzdGF0dXMgaW5kaWNhdGluZyBoaXJlZFxuICAvLyBJbmNsdWRlczogQUNUSVZFLCBISVJFRF9QRU5ESU5HX1NUQVJULCBPRkZCT0FSRElORywgRVhJVEVELCBPRkZFUl9TSUdORURcbiAgLy8gRXhjbHVkZXM6IENBTkRJREFURSwgT0ZGRVJfU0VOVCAobm90IHlldCBoaXJlZClcbiAgY29uc3QgaGlyZVN0YXR1c2VzOiBFbXBsb3llZVN0YXR1c1tdID0gWydBQ1RJVkUnLCAnSElSRURfUEVORElOR19TVEFSVCcsICdPRkZCT0FSRElORycsICdFWElURUQnLCAnT0ZGRVJfU0lHTkVEJ11cblxuICBjb25zdCBjb3VudCA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdGFydERhdGU6IHsgZ3RlOiBzdGFydE9mWWVhciwgbHQ6IGVuZE9mWWVhciB9LFxuICAgICAgc3RhdHVzOiB7IGluOiBoaXJlU3RhdHVzZXMgfSxcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIGRhdGE6IHsgeWVhciwgY291bnQsIGhpcmVTdGF0dXNlcyB9LFxuICAgIG1lc3NhZ2U6IGAke2NvdW50fSBlbXBsb3llZXMgaGlyZWQgaW4gJHt5ZWFyfS5gLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWMiBUT09MIElNUExFTUVOVEFUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwgfHwgJydcblxuLy8gSGVscGVyIHRvIGJ1aWxkIGRlZXAgbGlua3NcbmZ1bmN0aW9uIGJ1aWxkRGVlcExpbmsodHlwZTogJ2NvbnRyYWN0JyB8ICdlbXBsb3llZScgfCAnb25ib2FyZGluZycgfCAnb2ZmYm9hcmRpbmcnIHwgJ2ludGVncmF0aW9uJywgaWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBhdGhzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIGNvbnRyYWN0OiBgL2NvbnRyYWN0cy8ke2lkfWAsXG4gICAgZW1wbG95ZWU6IGAvZW1wbG95ZWVzLyR7aWR9YCxcbiAgICBvbmJvYXJkaW5nOiBgL29uYm9hcmRpbmcvJHtpZH1gLFxuICAgIG9mZmJvYXJkaW5nOiBgL29mZmJvYXJkaW5nLyR7aWR9YCxcbiAgICBpbnRlZ3JhdGlvbjogYC9pbnRlZ3JhdGlvbnMvJHtpZH1gLFxuICB9XG4gIHJldHVybiBgJHtCQVNFX1VSTH0ke3BhdGhzW3R5cGVdfWBcbn1cblxuLy8gVjIgQ29udHJhY3QgVG9vbHNcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNvbnRyYWN0RHJhZnQoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGNvbnRyYWN0SWQsIHJvbGVUaXRsZSwgc3RhcnREYXRlLCBjb21wZW5zYXRpb25BbW91bnQsIGN1cnJlbmN5LCBsb2NhdGlvbiwgbGVnYWxFbnRpdHlJZCwgc2lnbmF0dXJlQmxvY2tJZCB9ID0gYXJncyBhcyB7XG4gICAgY29udHJhY3RJZD86IHN0cmluZ1xuICAgIHJvbGVUaXRsZT86IHN0cmluZ1xuICAgIHN0YXJ0RGF0ZT86IHN0cmluZ1xuICAgIGNvbXBlbnNhdGlvbkFtb3VudD86IG51bWJlclxuICAgIGN1cnJlbmN5Pzogc3RyaW5nXG4gICAgbG9jYXRpb24/OiBzdHJpbmdcbiAgICBsZWdhbEVudGl0eUlkPzogc3RyaW5nXG4gICAgc2lnbmF0dXJlQmxvY2tJZD86IHN0cmluZ1xuICB9XG5cbiAgaWYgKCFjb250cmFjdElkKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLCBtaXNzaW5nRmllbGRzOiBbJ2NvbnRyYWN0SWQnXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIHRoZSBjb250cmFjdCBJRC4nIH1cbiAgfVxuXG4gIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogY29udHJhY3RJZCB9LFxuICAgIGluY2x1ZGU6IHsgdGVtcGxhdGU6IHRydWUgfSxcbiAgfSlcblxuICBpZiAoIW9mZmVyKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnQ29udHJhY3Qgbm90IGZvdW5kLicgfVxuICB9XG5cbiAgLy8gQ2hlY2sgc3RhdHVzIHJlc3RyaWN0aW9uc1xuICBjb25zdCBub25FZGl0YWJsZVN0YXR1c2VzID0gWydTSUdORUQnLCAnREVDTElORUQnLCAnRVhQSVJFRCcsICdDQU5DRUxMRUQnXVxuICBpZiAobm9uRWRpdGFibGVTdGF0dXNlcy5pbmNsdWRlcyhvZmZlci5zdGF0dXMpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGBDb250cmFjdCBpcyBpbiAke29mZmVyLnN0YXR1c30gc3RhdHVzIGFuZCBjYW5ub3QgYmUgZWRpdGVkLiBPbmx5IERSQUZULCBTRU5ULCBvciBWSUVXRUQgY29udHJhY3RzIGNhbiBiZSB1cGRhdGVkLmAsXG4gICAgfVxuICB9XG5cbiAgLy8gQnVpbGQgdXBkYXRlIGRhdGFcbiAgY29uc3QgdmFyaWFibGVzID0geyAuLi4ob2ZmZXIudmFyaWFibGVzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIH1cbiAgY29uc3QgdXBkYXRlRGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuXG4gIGlmIChyb2xlVGl0bGUpIHtcbiAgICB2YXJpYWJsZXMucm9sZSA9IHJvbGVUaXRsZVxuICAgIHZhcmlhYmxlcy5qb2JfdGl0bGUgPSByb2xlVGl0bGVcbiAgfVxuICBpZiAoc3RhcnREYXRlKSB2YXJpYWJsZXMuc3RhcnRfZGF0ZSA9IHN0YXJ0RGF0ZVxuICBpZiAoY29tcGVuc2F0aW9uQW1vdW50ICE9PSB1bmRlZmluZWQpIHZhcmlhYmxlcy5zYWxhcnkgPSBTdHJpbmcoY29tcGVuc2F0aW9uQW1vdW50KVxuICBpZiAoY3VycmVuY3kpIHZhcmlhYmxlcy5jdXJyZW5jeSA9IGN1cnJlbmN5XG4gIGlmIChsb2NhdGlvbikgdmFyaWFibGVzLmxvY2F0aW9uID0gbG9jYXRpb25cblxuICB1cGRhdGVEYXRhLnZhcmlhYmxlcyA9IHZhcmlhYmxlc1xuICBpZiAobGVnYWxFbnRpdHlJZCkgdXBkYXRlRGF0YS5sZWdhbEVudGl0eUlkID0gbGVnYWxFbnRpdHlJZFxuICBpZiAoc2lnbmF0dXJlQmxvY2tJZCkgdXBkYXRlRGF0YS5zaWduYXR1cmVCbG9ja0lkID0gc2lnbmF0dXJlQmxvY2tJZFxuXG4gIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogY29udHJhY3RJZCB9LFxuICAgIGRhdGE6IHVwZGF0ZURhdGEsXG4gIH0pXG5cbiAgYXdhaXQgY3R4LnByaXNtYS5vZmZlckV2ZW50LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgb2ZmZXJJZDogY29udHJhY3RJZCxcbiAgICAgIHR5cGU6ICd1cGRhdGVkJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29udHJhY3QgdXBkYXRlZCB2aWEgQmx1ZSBBSScsXG4gICAgfSxcbiAgfSlcblxuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogY3R4LnVzZXIuaWQsXG4gICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgcmVzb3VyY2VUeXBlOiAnb2ZmZXInLFxuICAgIHJlc291cmNlSWQ6IGNvbnRyYWN0SWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICd1cGRhdGVfY29udHJhY3RfZHJhZnQnLFxuICAgICAgdXBkYXRlczogeyByb2xlVGl0bGUsIHN0YXJ0RGF0ZSwgY29tcGVuc2F0aW9uQW1vdW50LCBjdXJyZW5jeSwgbG9jYXRpb24gfSxcbiAgICAgIGFzc2lzdGFudEluaXRpYXRlZDogdHJ1ZSxcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIGRhdGE6IHtcbiAgICAgIGNvbnRyYWN0SWQsXG4gICAgICBjYW5kaWRhdGVOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgdXJsOiBidWlsZERlZXBMaW5rKCdjb250cmFjdCcsIGNvbnRyYWN0SWQpLFxuICAgIH0sXG4gICAgbWVzc2FnZTogYENvbnRyYWN0IGZvciAke29mZmVyLmNhbmRpZGF0ZU5hbWV9IGhhcyBiZWVuIHVwZGF0ZWQuIFtWaWV3IGNvbnRyYWN0XSgke2J1aWxkRGVlcExpbmsoJ2NvbnRyYWN0JywgY29udHJhY3RJZCl9KWAsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVzZW5kQ29udHJhY3QoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGNvbnRyYWN0SWQsIGNvbmZpcm1lZCB9ID0gYXJncyBhcyB7IGNvbnRyYWN0SWQ/OiBzdHJpbmc7IGNvbmZpcm1lZD86IGJvb2xlYW4gfVxuXG4gIGlmICghY29udHJhY3RJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWydjb250cmFjdElkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSB0aGUgY29udHJhY3QgSUQuJyB9XG4gIH1cblxuICBjb25zdCBvZmZlciA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGNvbnRyYWN0SWQgfSxcbiAgICBpbmNsdWRlOiB7IHRlbXBsYXRlOiB0cnVlLCBlbXBsb3llZTogdHJ1ZSB9LFxuICB9KVxuXG4gIGlmICghb2ZmZXIpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6ICdDb250cmFjdCBub3QgZm91bmQuJyB9XG4gIH1cblxuICAvLyBDaGVjayBzdGF0dXMgcmVzdHJpY3Rpb25zXG4gIGNvbnN0IGFsbG93ZWRTdGF0dXNlcyA9IFsnU0VOVCcsICdWSUVXRUQnXVxuICBpZiAoIWFsbG93ZWRTdGF0dXNlcy5pbmNsdWRlcyhvZmZlci5zdGF0dXMpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGBDb250cmFjdCBpcyBpbiAke29mZmVyLnN0YXR1c30gc3RhdHVzLiBPbmx5IGNvbnRyYWN0cyBpbiBTRU5UIG9yIFZJRVdFRCBzdGF0dXMgY2FuIGJlIHJlc2VudC5gLFxuICAgIH1cbiAgfVxuXG4gIC8vIElmIG5vdCBjb25maXJtZWQsIHJldHVybiBzdW1tYXJ5IGZvciBjb25maXJtYXRpb25cbiAgaWYgKCFjb25maXJtZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnY29uZmlybWF0aW9uX3JlcXVpcmVkJyxcbiAgICAgIG1pc3NpbmdGaWVsZHM6IFsnY29uZmlybWVkJ10sXG4gICAgICBzdW1tYXJ5OiBgUmVhZHkgdG8gcmVzZW5kIGNvbnRyYWN0IHRvICR7b2ZmZXIuY2FuZGlkYXRlTmFtZX0gKCR7b2ZmZXIuY2FuZGlkYXRlRW1haWx9KSBmb3IgJHtvZmZlci52YXJpYWJsZXM/LnJvbGUgfHwgb2ZmZXIudmFyaWFibGVzPy5qb2JfdGl0bGUgfHwgJ3RoZSByb2xlJ30uYCxcbiAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY29uZmlybSB0byByZXNlbmQgdGhpcyBjb250cmFjdCBmb3Igc2lnbmF0dXJlLicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNvbnRyYWN0SWQ6IG9mZmVyLmlkLFxuICAgICAgICBjYW5kaWRhdGVOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICBjYW5kaWRhdGVFbWFpbDogb2ZmZXIuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgIHJvbGVUaXRsZTogb2ZmZXIudmFyaWFibGVzPy5yb2xlIHx8IG9mZmVyLnZhcmlhYmxlcz8uam9iX3RpdGxlLFxuICAgICAgICBjdXJyZW50U3RhdHVzOiBvZmZlci5zdGF0dXMsXG4gICAgICAgIHVybDogYnVpbGREZWVwTGluaygnY29udHJhY3QnLCBvZmZlci5pZCksXG4gICAgICB9LFxuICAgIH1cbiAgfVxuXG4gIC8vIEFjdHVhbGx5IHJlc2VuZCB0aGUgY29udHJhY3RcbiAgY29uc3QgeyBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvciB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9pbnRlZ3JhdGlvbnMvZG9jdXNpZ24nKVxuICBjb25zdCB7IGdldE9yZ2FuaXphdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9vcmdhbml6YXRpb24nKVxuICBjb25zdCB7IHdyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvbGV0dGVyaGVhZCcpXG4gIGNvbnN0IHsgc2VuZE9mZmVyRW1haWwgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvZW1haWwnKVxuXG4gIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gIGNvbnN0IGRvY3VzaWduID0gY3JlYXRlRG9jdVNpZ25Db25uZWN0b3IoKVxuXG4gIGlmIChkb2N1c2lnbikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2N1bWVudEh0bWwgPSB3cmFwQWdyZWVtZW50SHRtbFdpdGhMZXR0ZXJoZWFkKG9mZmVyLnJlbmRlcmVkSHRtbCB8fCAnJywgb3JnYW5pemF0aW9uLCB7XG4gICAgICAgIGJhc2VVcmw6IEJBU0VfVVJMLFxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZG9jdXNpZ24uc2VuZEVudmVsb3BlKHtcbiAgICAgICAgc2lnbmVyRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgICBzaWduZXJOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICBzdWJqZWN0OiBgUmVtaW5kZXI6IE9mZmVyIGZyb20gJHtvcmdhbml6YXRpb24ubmFtZX0gLSAke29mZmVyLmNhbmRpZGF0ZU5hbWV9YCxcbiAgICAgICAgZG9jdW1lbnRIdG1sLFxuICAgICAgICBjYWxsYmFja1VybDogYCR7QkFTRV9VUkx9L2FwaS93ZWJob29rcy9kb2N1c2lnbmAsXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBvZmZlci5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXNpZ25FbnZlbG9wZUlkOiByZXN1bHQuZW52ZWxvcGVJZCxcbiAgICAgICAgICBlc2lnblN0YXR1czogcmVzdWx0LnN0YXR1cyxcbiAgICAgICAgICBlc2lnblNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byByZXNlbmQgdmlhIERvY3VTaWduOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrIHRvIGVtYWlsXG4gICAgY29uc3Qgb2ZmZXJMaW5rID0gYCR7QkFTRV9VUkx9L29mZmVyLyR7b2ZmZXIuaWR9L3NpZ25gXG4gICAgYXdhaXQgc2VuZE9mZmVyRW1haWwoe1xuICAgICAgY2FuZGlkYXRlRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgY2FuZGlkYXRlTmFtZTogb2ZmZXIuY2FuZGlkYXRlTmFtZSxcbiAgICAgIG9mZmVyTGluayxcbiAgICAgIGNvbXBhbnlOYW1lOiBvcmdhbml6YXRpb24ubmFtZSxcbiAgICAgIGxvZ29Vcmw6IG9yZ2FuaXphdGlvbi5sb2dvVXJsIHx8IHVuZGVmaW5lZCxcbiAgICB9KVxuICB9XG5cbiAgYXdhaXQgY3R4LnByaXNtYS5vZmZlckV2ZW50LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgb2ZmZXJJZDogb2ZmZXIuaWQsXG4gICAgICB0eXBlOiAncmVzZW50JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29udHJhY3QgcmVzZW50IHZpYSBCbHVlIEFJJyxcbiAgICB9LFxuICB9KVxuXG4gIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICBhY3RvcklkOiBjdHgudXNlci5pZCxcbiAgICBhY3Rpb246ICdBU1NJU1RBTlRfQUNUSU9OJyxcbiAgICByZXNvdXJjZVR5cGU6ICdvZmZlcicsXG4gICAgcmVzb3VyY2VJZDogb2ZmZXIuaWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICdyZXNlbmRfY29udHJhY3QnLFxuICAgICAgY2FuZGlkYXRlRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgYXNzaXN0YW50SW5pdGlhdGVkOiB0cnVlLFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YToge1xuICAgICAgY29udHJhY3RJZDogb2ZmZXIuaWQsXG4gICAgICBjYW5kaWRhdGVFbWFpbDogb2ZmZXIuY2FuZGlkYXRlRW1haWwsXG4gICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ2NvbnRyYWN0Jywgb2ZmZXIuaWQpLFxuICAgIH0sXG4gICAgbWVzc2FnZTogYENvbnRyYWN0IHJlc2VudCB0byAke29mZmVyLmNhbmRpZGF0ZU5hbWV9IGF0ICR7b2ZmZXIuY2FuZGlkYXRlRW1haWx9LiBbVmlldyBjb250cmFjdF0oJHtidWlsZERlZXBMaW5rKCdjb250cmFjdCcsIG9mZmVyLmlkKX0pYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjYW5jZWxDb250cmFjdChcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgY29udHJhY3RJZCwgcmVhc29uLCBjb25maXJtZWQgfSA9IGFyZ3MgYXMgeyBjb250cmFjdElkPzogc3RyaW5nOyByZWFzb24/OiBzdHJpbmc7IGNvbmZpcm1lZD86IGJvb2xlYW4gfVxuXG4gIGlmICghY29udHJhY3RJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWydjb250cmFjdElkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSB0aGUgY29udHJhY3QgSUQuJyB9XG4gIH1cblxuICBpZiAoIXJlYXNvbikge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWydyZWFzb24nXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIGEgcmVhc29uIGZvciBjYW5jZWxsYXRpb24uJyB9XG4gIH1cblxuICBjb25zdCBvZmZlciA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGNvbnRyYWN0SWQgfSxcbiAgICBpbmNsdWRlOiB7IHRlbXBsYXRlOiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCFvZmZlcikge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ0NvbnRyYWN0IG5vdCBmb3VuZC4nIH1cbiAgfVxuXG4gIC8vIENhbm5vdCBjYW5jZWwgc2lnbmVkIGNvbnRyYWN0c1xuICBpZiAob2ZmZXIuc3RhdHVzID09PSAnU0lHTkVEJykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICBtZXNzYWdlOiAnQ29udHJhY3QgaXMgYWxyZWFkeSBTSUdORUQgYW5kIGNhbm5vdCBiZSBjYW5jZWxsZWQuJyxcbiAgICB9XG4gIH1cblxuICAvLyBJZiBub3QgY29uZmlybWVkLCByZXR1cm4gc3VtbWFyeSBmb3IgY29uZmlybWF0aW9uXG4gIGlmICghY29uZmlybWVkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1hdGlvbl9yZXF1aXJlZCcsXG4gICAgICBtaXNzaW5nRmllbGRzOiBbJ2NvbmZpcm1lZCddLFxuICAgICAgc3VtbWFyeTogYOKaoO+4jyBBYm91dCB0byBDQU5DRUwgY29udHJhY3QgZm9yICR7b2ZmZXIuY2FuZGlkYXRlTmFtZX0gKCR7b2ZmZXIuY2FuZGlkYXRlRW1haWx9KS4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS5gLFxuICAgICAgbWVzc2FnZTogYFJlYXNvbjogJHtyZWFzb259XFxuXFxuUGxlYXNlIGNvbmZpcm0gdG8gY2FuY2VsIHRoaXMgY29udHJhY3QuYCxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY29udHJhY3RJZDogb2ZmZXIuaWQsXG4gICAgICAgIGNhbmRpZGF0ZU5hbWU6IG9mZmVyLmNhbmRpZGF0ZU5hbWUsXG4gICAgICAgIGNhbmRpZGF0ZUVtYWlsOiBvZmZlci5jYW5kaWRhdGVFbWFpbCxcbiAgICAgICAgcm9sZVRpdGxlOiBvZmZlci52YXJpYWJsZXM/LnJvbGUgfHwgb2ZmZXIudmFyaWFibGVzPy5qb2JfdGl0bGUsXG4gICAgICAgIGN1cnJlbnRTdGF0dXM6IG9mZmVyLnN0YXR1cyxcbiAgICAgICAgcmVhc29uLFxuICAgICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ2NvbnRyYWN0Jywgb2ZmZXIuaWQpLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvLyBWb2lkIERvY3VTaWduIGVudmVsb3BlIGlmIGFwcGxpY2FibGVcbiAgaWYgKG9mZmVyLmVzaWduUHJvdmlkZXIgPT09ICdkb2N1c2lnbicgJiYgb2ZmZXIuZXNpZ25FbnZlbG9wZUlkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgY3JlYXRlRG9jdVNpZ25Db25uZWN0b3IgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvaW50ZWdyYXRpb25zL2RvY3VzaWduJylcbiAgICAgIGNvbnN0IGRvY3VzaWduID0gY3JlYXRlRG9jdVNpZ25Db25uZWN0b3IoKVxuICAgICAgaWYgKGRvY3VzaWduKSB7XG4gICAgICAgIGF3YWl0IGRvY3VzaWduLnZvaWRFbnZlbG9wZShvZmZlci5lc2lnbkVudmVsb3BlSWQsIHJlYXNvbilcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0Fzc2lzdGFudF0gRmFpbGVkIHRvIHZvaWQgRG9jdVNpZ24gZW52ZWxvcGU6JywgZXJyb3IpXG4gICAgICAvLyBDb250aW51ZSB3aXRoIGNhbmNlbGxhdGlvbiBldmVuIGlmIERvY3VTaWduIHZvaWQgZmFpbHNcbiAgICB9XG4gIH1cblxuICBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGNvbnRyYWN0SWQgfSxcbiAgICBkYXRhOiB7IHN0YXR1czogJ0NBTkNFTExFRCcgfSxcbiAgfSlcblxuICBhd2FpdCBjdHgucHJpc21hLm9mZmVyRXZlbnQuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBvZmZlcklkOiBjb250cmFjdElkLFxuICAgICAgdHlwZTogJ2NhbmNlbGxlZCcsXG4gICAgICBkZXNjcmlwdGlvbjogYENvbnRyYWN0IGNhbmNlbGxlZCB2aWEgQmx1ZSBBSS4gUmVhc29uOiAke3JlYXNvbn1gLFxuICAgIH0sXG4gIH0pXG5cbiAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFjdGlvbjogJ0FTU0lTVEFOVF9BQ1RJT04nLFxuICAgIHJlc291cmNlVHlwZTogJ29mZmVyJyxcbiAgICByZXNvdXJjZUlkOiBjb250cmFjdElkLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b29sOiAnY2FuY2VsX2NvbnRyYWN0JyxcbiAgICAgIHJlYXNvbixcbiAgICAgIHByZXZpb3VzU3RhdHVzOiBvZmZlci5zdGF0dXMsXG4gICAgICBhc3Npc3RhbnRJbml0aWF0ZWQ6IHRydWUsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7XG4gICAgICBjb250cmFjdElkLFxuICAgICAgY2FuZGlkYXRlTmFtZTogb2ZmZXIuY2FuZGlkYXRlTmFtZSxcbiAgICAgIHVybDogYnVpbGREZWVwTGluaygnY29udHJhY3QnLCBjb250cmFjdElkKSxcbiAgICB9LFxuICAgIG1lc3NhZ2U6IGBDb250cmFjdCBmb3IgJHtvZmZlci5jYW5kaWRhdGVOYW1lfSBoYXMgYmVlbiBjYW5jZWxsZWQuIFJlYXNvbjogJHtyZWFzb259YCxcbiAgfVxufVxuXG4vLyBWMiBPbmJvYXJkaW5nIFRhc2sgVG9vbHNcbmFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlT25ib2FyZGluZ1Rhc2soXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IHRhc2tJZCwgbm90ZXMgfSA9IGFyZ3MgYXMgeyB0YXNrSWQ/OiBzdHJpbmc7IG5vdGVzPzogc3RyaW5nIH1cblxuICBpZiAoIXRhc2tJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWyd0YXNrSWQnXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIHRoZSB0YXNrIElELicgfVxuICB9XG5cbiAgY29uc3QgdGFzayA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2suZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHdvcmtmbG93OiB7XG4gICAgICAgIGluY2x1ZGU6IHsgZW1wbG95ZWU6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSB9IH0gfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcblxuICBpZiAoIXRhc2spIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6ICdPbmJvYXJkaW5nIHRhc2sgbm90IGZvdW5kLicgfVxuICB9XG5cbiAgaWYgKHRhc2sudHlwZSAhPT0gJ01BTlVBTCcpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6ICdUaGlzIGlzIGFuIGF1dG9tYXRlZCB0YXNrLiBVc2UgcnVuX29uYm9hcmRpbmdfdGFzayBpbnN0ZWFkLicgfVxuICB9XG5cbiAgaWYgKHRhc2suc3RhdHVzID09PSAnU1VDQ0VTUycgfHwgdGFzay5zdGF0dXMgPT09ICdTS0lQUEVEJykge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogYFRhc2sgaXMgYWxyZWFkeSAke3Rhc2suc3RhdHVzLnRvTG93ZXJDYXNlKCl9LmAgfVxuICB9XG5cbiAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdTVUNDRVNTJyxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IG5vdGVzIHx8IG51bGwsXG4gICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGNvbXBsZXRlZEJ5OiBjdHgudXNlci5pZCxcbiAgICB9LFxuICB9KVxuXG4gIC8vIENoZWNrIGlmIHdvcmtmbG93IHNob3VsZCBiZSBjb21wbGV0ZWRcbiAgY29uc3QgcmVtYWluaW5nVGFza3MgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgd29ya2Zsb3dJZDogdGFzay53b3JrZmxvd0lkLFxuICAgICAgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgIH0sXG4gIH0pXG5cbiAgaWYgKHJlbWFpbmluZ1Rhc2tzID09PSAwKSB7XG4gICAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLndvcmtmbG93SWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQ09NUExFVEVEJywgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCkgfSxcbiAgICB9KVxuXG4gICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHRhc2sud29ya2Zsb3cuZW1wbG95ZWVJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdBQ1RJVkUnIH0sXG4gICAgfSlcbiAgfVxuXG4gIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICBhY3RvcklkOiBjdHgudXNlci5pZCxcbiAgICBhY3Rpb246ICdBU1NJU1RBTlRfQUNUSU9OJyxcbiAgICByZXNvdXJjZVR5cGU6ICdvbmJvYXJkaW5nX3Rhc2snLFxuICAgIHJlc291cmNlSWQ6IHRhc2tJZCxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG9vbDogJ2NvbXBsZXRlX29uYm9hcmRpbmdfdGFzaycsXG4gICAgICB0YXNrTmFtZTogdGFzay5uYW1lLFxuICAgICAgbm90ZXMsXG4gICAgICBhc3Npc3RhbnRJbml0aWF0ZWQ6IHRydWUsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7XG4gICAgICB0YXNrSWQsXG4gICAgICB0YXNrTmFtZTogdGFzay5uYW1lLFxuICAgICAgZW1wbG95ZWVOYW1lOiB0YXNrLndvcmtmbG93LmVtcGxveWVlLmZ1bGxOYW1lLFxuICAgICAgd29ya2Zsb3dVcmw6IGJ1aWxkRGVlcExpbmsoJ29uYm9hcmRpbmcnLCB0YXNrLndvcmtmbG93SWQpLFxuICAgIH0sXG4gICAgbWVzc2FnZTogYFRhc2sgXCIke3Rhc2submFtZX1cIiBtYXJrZWQgYXMgY29tcGxldGUgZm9yICR7dGFzay53b3JrZmxvdy5lbXBsb3llZS5mdWxsTmFtZX0uIFtWaWV3IG9uYm9hcmRpbmddKCR7YnVpbGREZWVwTGluaygnb25ib2FyZGluZycsIHRhc2sud29ya2Zsb3dJZCl9KWAsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcnVuT25ib2FyZGluZ1Rhc2soXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IHRhc2tJZCB9ID0gYXJncyBhcyB7IHRhc2tJZD86IHN0cmluZyB9XG5cbiAgaWYgKCF0YXNrSWQpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsIG1pc3NpbmdGaWVsZHM6IFsndGFza0lkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSB0aGUgdGFzayBJRC4nIH1cbiAgfVxuXG4gIGNvbnN0IHRhc2sgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB3b3JrZmxvdzoge1xuICAgICAgICBpbmNsdWRlOiB7IGVtcGxveWVlOiB0cnVlIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG5cbiAgaWYgKCF0YXNrKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnT25ib2FyZGluZyB0YXNrIG5vdCBmb3VuZC4nIH1cbiAgfVxuXG4gIGlmICh0YXNrLnR5cGUgIT09ICdBVVRPTUFURUQnKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnVGhpcyBpcyBhIG1hbnVhbCB0YXNrLiBVc2UgY29tcGxldGVfb25ib2FyZGluZ190YXNrIGluc3RlYWQuJyB9XG4gIH1cblxuICBpZiAodGFzay5zdGF0dXMgPT09ICdTVUNDRVNTJykge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ1Rhc2sgaGFzIGFscmVhZHkgYmVlbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LicgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRhc2sgdG8gSU5fUFJPR1JFU1NcbiAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdJTl9QUk9HUkVTUycsXG4gICAgICBhdHRlbXB0czogeyBpbmNyZW1lbnQ6IDEgfSxcbiAgICAgIGxhc3RBdHRlbXB0QXQ6IG5ldyBEYXRlKCksXG4gICAgfSxcbiAgfSlcblxuICAvLyBSdW4gdGhlIGF1dG9tYXRpb25cbiAgY29uc3QgeyBwcm92aXNpb25FbXBsb3llZUluQXBwIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL2ludGVncmF0aW9ucycpXG4gIGNvbnN0IGVtcGxveWVlID0gdGFzay53b3JrZmxvdy5lbXBsb3llZVxuXG4gIGxldCByZXN1bHQ6IHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfSA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVW5rbm93biBhdXRvbWF0aW9uIHR5cGUnIH1cblxuICB0cnkge1xuICAgIHN3aXRjaCAodGFzay5hdXRvbWF0aW9uVHlwZSkge1xuICAgICAgY2FzZSAncHJvdmlzaW9uX2dvb2dsZSc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHByb3Zpc2lvbkVtcGxveWVlSW5BcHAoZW1wbG95ZWUsICdHT09HTEVfV09SS1NQQUNFJywgY3R4LnVzZXIuaWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwcm92aXNpb25fc2xhY2snOlxuICAgICAgICByZXN1bHQgPSBhd2FpdCBwcm92aXNpb25FbXBsb3llZUluQXBwKGVtcGxveWVlLCAnU0xBQ0snLCBjdHgudXNlci5pZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Byb3Zpc2lvbl9hcHAnOlxuICAgICAgICBpZiAodGFzay5hdXRvbWF0aW9uQ29uZmlnPy5hcHBJZCkge1xuICAgICAgICAgIGNvbnN0IHsgcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQgfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvaW50ZWdyYXRpb25zJylcbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChlbXBsb3llZSwgdGFzay5hdXRvbWF0aW9uQ29uZmlnLmFwcElkLCBjdHgudXNlci5pZClcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrLmF1dG9tYXRpb25Db25maWc/LmFwcFR5cGUpIHtcbiAgICAgICAgICByZXN1bHQgPSBhd2FpdCBwcm92aXNpb25FbXBsb3llZUluQXBwKGVtcGxveWVlLCB0YXNrLmF1dG9tYXRpb25Db25maWcuYXBwVHlwZSwgY3R4LnVzZXIuaWQpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVW5rbm93biBhdXRvbWF0aW9uIHR5cGU6ICR7dGFzay5hdXRvbWF0aW9uVHlwZX1gIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSB0YXNrIHN0YXR1cyBiYXNlZCBvbiByZXN1bHRcbiAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6IHJlc3VsdC5zdWNjZXNzID8gJ1NVQ0NFU1MnIDogJ0ZBSUxFRCcsXG4gICAgICBzdGF0dXNNZXNzYWdlOiByZXN1bHQuZXJyb3IgfHwgbnVsbCxcbiAgICAgIGNvbXBsZXRlZEF0OiByZXN1bHQuc3VjY2VzcyA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgIH0sXG4gIH0pXG5cbiAgLy8gQ2hlY2sgaWYgd29ya2Zsb3cgc2hvdWxkIGJlIGNvbXBsZXRlZFxuICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICBjb25zdCByZW1haW5pbmdUYXNrcyA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2suY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgd29ya2Zsb3dJZDogdGFzay53b3JrZmxvd0lkLFxuICAgICAgICBzdGF0dXM6IHsgaW46IFsnUEVORElORycsICdJTl9QUk9HUkVTUyddIH0sXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAocmVtYWluaW5nVGFza3MgPT09IDApIHtcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLndvcmtmbG93SWQgfSxcbiAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdDT01QTEVURUQnLCBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdGFzay53b3JrZmxvdy5lbXBsb3llZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQUNUSVZFJyB9LFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogY3R4LnVzZXIuaWQsXG4gICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgcmVzb3VyY2VUeXBlOiAnb25ib2FyZGluZ190YXNrJyxcbiAgICByZXNvdXJjZUlkOiB0YXNrSWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICdydW5fb25ib2FyZGluZ190YXNrJyxcbiAgICAgIHRhc2tOYW1lOiB0YXNrLm5hbWUsXG4gICAgICBhdXRvbWF0aW9uVHlwZTogdGFzay5hdXRvbWF0aW9uVHlwZSxcbiAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgZXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICAgIGFzc2lzdGFudEluaXRpYXRlZDogdHJ1ZSxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdvaycsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRhc2tJZCxcbiAgICAgICAgdGFza05hbWU6IHRhc2submFtZSxcbiAgICAgICAgd29ya2Zsb3dVcmw6IGJ1aWxkRGVlcExpbmsoJ29uYm9hcmRpbmcnLCB0YXNrLndvcmtmbG93SWQpLFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IGBUYXNrIFwiJHt0YXNrLm5hbWV9XCIgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gW1ZpZXcgb25ib2FyZGluZ10oJHtidWlsZERlZXBMaW5rKCdvbmJvYXJkaW5nJywgdGFzay53b3JrZmxvd0lkKX0pYCxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGBUYXNrIFwiJHt0YXNrLm5hbWV9XCIgZmFpbGVkOiAke3Jlc3VsdC5lcnJvcn0uIFtWaWV3IG9uYm9hcmRpbmddKCR7YnVpbGREZWVwTGluaygnb25ib2FyZGluZycsIHRhc2sud29ya2Zsb3dJZCl9KWAsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRhc2tJZCxcbiAgICAgICAgdGFza05hbWU6IHRhc2submFtZSxcbiAgICAgICAgZXJyb3I6IHJlc3VsdC5lcnJvcixcbiAgICAgICAgd29ya2Zsb3dVcmw6IGJ1aWxkRGVlcExpbmsoJ29uYm9hcmRpbmcnLCB0YXNrLndvcmtmbG93SWQpLFxuICAgICAgfSxcbiAgICB9XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2tpcE9uYm9hcmRpbmdUYXNrKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55OyB1c2VyOiB7IGlkOiBzdHJpbmcgfSB9XG4pOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcbiAgY29uc3QgeyB0YXNrSWQsIHJlYXNvbiB9ID0gYXJncyBhcyB7IHRhc2tJZD86IHN0cmluZzsgcmVhc29uPzogc3RyaW5nIH1cblxuICBpZiAoIXRhc2tJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWyd0YXNrSWQnXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIHRoZSB0YXNrIElELicgfVxuICB9XG5cbiAgaWYgKCFyZWFzb24pIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsIG1pc3NpbmdGaWVsZHM6IFsncmVhc29uJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBhIHJlYXNvbiBmb3Igc2tpcHBpbmcgdGhlIHRhc2suJyB9XG4gIH1cblxuICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdGFza0lkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgd29ya2Zsb3c6IHtcbiAgICAgICAgaW5jbHVkZTogeyBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlIH0gfSB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmICghdGFzaykge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ09uYm9hcmRpbmcgdGFzayBub3QgZm91bmQuJyB9XG4gIH1cblxuICBpZiAodGFzay5zdGF0dXMgPT09ICdTVUNDRVNTJyB8fCB0YXNrLnN0YXR1cyA9PT0gJ1NLSVBQRUQnKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiBgVGFzayBpcyBhbHJlYWR5ICR7dGFzay5zdGF0dXMudG9Mb3dlckNhc2UoKX0uYCB9XG4gIH1cblxuICBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHN0YXR1czogJ1NLSVBQRUQnLFxuICAgICAgc3RhdHVzTWVzc2FnZTogcmVhc29uLFxuICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBjb21wbGV0ZWRCeTogY3R4LnVzZXIuaWQsXG4gICAgfSxcbiAgfSlcblxuICAvLyBDaGVjayBpZiB3b3JrZmxvdyBzaG91bGQgYmUgY29tcGxldGVkXG4gIGNvbnN0IHJlbWFpbmluZ1Rhc2tzID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHdvcmtmbG93SWQ6IHRhc2sud29ya2Zsb3dJZCxcbiAgICAgIHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChyZW1haW5pbmdUYXNrcyA9PT0gMCkge1xuICAgIGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdGFzay53b3JrZmxvd0lkIH0sXG4gICAgICBkYXRhOiB7IHN0YXR1czogJ0NPTVBMRVRFRCcsIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgfSlcblxuICAgIGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLndvcmtmbG93LmVtcGxveWVlSWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQUNUSVZFJyB9LFxuICAgIH0pXG4gIH1cblxuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogY3R4LnVzZXIuaWQsXG4gICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgcmVzb3VyY2VUeXBlOiAnb25ib2FyZGluZ190YXNrJyxcbiAgICByZXNvdXJjZUlkOiB0YXNrSWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICdza2lwX29uYm9hcmRpbmdfdGFzaycsXG4gICAgICB0YXNrTmFtZTogdGFzay5uYW1lLFxuICAgICAgcmVhc29uLFxuICAgICAgYXNzaXN0YW50SW5pdGlhdGVkOiB0cnVlLFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YToge1xuICAgICAgdGFza0lkLFxuICAgICAgdGFza05hbWU6IHRhc2submFtZSxcbiAgICAgIHJlYXNvbixcbiAgICAgIHdvcmtmbG93VXJsOiBidWlsZERlZXBMaW5rKCdvbmJvYXJkaW5nJywgdGFzay53b3JrZmxvd0lkKSxcbiAgICB9LFxuICAgIG1lc3NhZ2U6IGBUYXNrIFwiJHt0YXNrLm5hbWV9XCIgc2tpcHBlZC4gUmVhc29uOiAke3JlYXNvbn0uIFtWaWV3IG9uYm9hcmRpbmddKCR7YnVpbGREZWVwTGluaygnb25ib2FyZGluZycsIHRhc2sud29ya2Zsb3dJZCl9KWAsXG4gIH1cbn1cblxuLy8gVjIgT2ZmYm9hcmRpbmcgVG9vbHNcbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0T2ZmYm9hcmRpbmcoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGVtcGxveWVlSWQsIGlzSW1tZWRpYXRlLCBlbmREYXRlLCByZWFzb24sIG5vdGVzLCBjb25maXJtZWQgfSA9IGFyZ3MgYXMge1xuICAgIGVtcGxveWVlSWQ/OiBzdHJpbmdcbiAgICBpc0ltbWVkaWF0ZT86IGJvb2xlYW5cbiAgICBlbmREYXRlPzogc3RyaW5nXG4gICAgcmVhc29uPzogc3RyaW5nXG4gICAgbm90ZXM/OiBzdHJpbmdcbiAgICBjb25maXJtZWQ/OiBib29sZWFuXG4gIH1cblxuICBpZiAoIWVtcGxveWVlSWQpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsIG1pc3NpbmdGaWVsZHM6IFsnZW1wbG95ZWVJZCddLCBtZXNzYWdlOiAnUGxlYXNlIHByb3ZpZGUgdGhlIGVtcGxveWVlIElELicgfVxuICB9XG5cbiAgaWYgKCFpc0ltbWVkaWF0ZSAmJiAhZW5kRGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdtaXNzaW5nX2ZpZWxkcycsXG4gICAgICBtaXNzaW5nRmllbGRzOiBbJ2VuZERhdGUnXSxcbiAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSBhbiBlbmQgZGF0ZSBmb3Igc2NoZWR1bGVkIG9mZmJvYXJkaW5nLCBvciBzZXQgaXNJbW1lZGlhdGU9dHJ1ZSBmb3IgaW1tZWRpYXRlIG9mZmJvYXJkaW5nLicsXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBlbXBsb3llZUlkIH0sXG4gIH0pXG5cbiAgaWYgKCFlbXBsb3llZSkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogJ0VtcGxveWVlIG5vdCBmb3VuZC4nIH1cbiAgfVxuXG4gIGlmIChlbXBsb3llZS5zdGF0dXMgPT09ICdFWElURUQnKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAnRW1wbG95ZWUgaGFzIGFscmVhZHkgZXhpdGVkIHRoZSBvcmdhbml6YXRpb24uJyB9XG4gIH1cblxuICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgYWN0aXZlIHdvcmtmbG93XG4gIGNvbnN0IGV4aXN0aW5nV29ya2Zsb3cgPSBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nV29ya2Zsb3cuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgZW1wbG95ZWVJZCxcbiAgICAgIHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChleGlzdGluZ1dvcmtmbG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGBFbXBsb3llZSBhbHJlYWR5IGhhcyBhbiBhY3RpdmUgb2ZmYm9hcmRpbmcgd29ya2Zsb3cuIFtWaWV3IG9mZmJvYXJkaW5nXSgke2J1aWxkRGVlcExpbmsoJ29mZmJvYXJkaW5nJywgZXhpc3RpbmdXb3JrZmxvdy5pZCl9KWAsXG4gICAgfVxuICB9XG5cbiAgLy8gSWYgbm90IGNvbmZpcm1lZCwgcmV0dXJuIHN1bW1hcnlcbiAgaWYgKCFjb25maXJtZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnY29uZmlybWF0aW9uX3JlcXVpcmVkJyxcbiAgICAgIG1pc3NpbmdGaWVsZHM6IFsnY29uZmlybWVkJ10sXG4gICAgICBzdW1tYXJ5OiBg4pqg77iPIEFib3V0IHRvIHN0YXJ0ICR7aXNJbW1lZGlhdGUgPyAnSU1NRURJQVRFJyA6ICdzY2hlZHVsZWQnfSBvZmZib2FyZGluZyBmb3IgJHtlbXBsb3llZS5mdWxsTmFtZX0gKCR7ZW1wbG95ZWUuam9iVGl0bGUgfHwgJ0VtcGxveWVlJ30pJHtlbmREYXRlID8gYCB3aXRoIGVuZCBkYXRlICR7ZW5kRGF0ZX1gIDogJyd9LmAsXG4gICAgICBtZXNzYWdlOiAnUGxlYXNlIGNvbmZpcm0gdG8gc3RhcnQgb2ZmYm9hcmRpbmcgd29ya2Zsb3cuJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZW1wbG95ZWVJZDogZW1wbG95ZWUuaWQsXG4gICAgICAgIGVtcGxveWVlTmFtZTogZW1wbG95ZWUuZnVsbE5hbWUsXG4gICAgICAgIGpvYlRpdGxlOiBlbXBsb3llZS5qb2JUaXRsZSxcbiAgICAgICAgaXNJbW1lZGlhdGU6ICEhaXNJbW1lZGlhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgZW1wbG95ZWVVcmw6IGJ1aWxkRGVlcExpbmsoJ2VtcGxveWVlJywgZW1wbG95ZWUuaWQpLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgb2ZmYm9hcmRpbmcgdGFzayB0ZW1wbGF0ZXNcbiAgY29uc3QgeyBnZXRPcmdhbml6YXRpb24gfSA9IGF3YWl0IGltcG9ydCgnQC9saWIvb3JnYW5pemF0aW9uJylcbiAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcblxuICBjb25zdCB0ZW1wbGF0ZXMgPSBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgIG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9LFxuICB9KVxuXG4gIGNvbnN0IGRlZmF1bHRUYXNrcyA9IHRlbXBsYXRlcy5sZW5ndGggPiAwXG4gICAgPyB0ZW1wbGF0ZXMubWFwKCh0OiBhbnksIGlkeDogbnVtYmVyKSA9PiAoe1xuICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgIHR5cGU6IHQudHlwZSxcbiAgICAgICAgYXV0b21hdGlvblR5cGU6IHQuYXV0b21hdGlvblR5cGUsXG4gICAgICAgIGFwcElkOiB0LmFwcElkLFxuICAgICAgICBzb3J0T3JkZXI6IGlkeCArIDEsXG4gICAgICB9KSlcbiAgICA6IFtcbiAgICAgICAgeyBuYW1lOiAnQ29sbGVjdCBjb21wYW55IGVxdWlwbWVudCcsIHR5cGU6ICdNQU5VQUwnLCBzb3J0T3JkZXI6IDEgfSxcbiAgICAgICAgeyBuYW1lOiAnUmV2b2tlIGJ1aWxkaW5nL29mZmljZSBhY2Nlc3MnLCB0eXBlOiAnTUFOVUFMJywgc29ydE9yZGVyOiAyIH0sXG4gICAgICAgIHsgbmFtZTogJ1RyYW5zZmVyIGZpbGVzIGFuZCBkb2N1bWVudHMnLCB0eXBlOiAnTUFOVUFMJywgc29ydE9yZGVyOiAzIH0sXG4gICAgICAgIHsgbmFtZTogJ0V4aXQgaW50ZXJ2aWV3JywgdHlwZTogJ01BTlVBTCcsIHNvcnRPcmRlcjogNCB9LFxuICAgICAgICB7IG5hbWU6ICdEZXByb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlJywgdHlwZTogJ0FVVE9NQVRFRCcsIGF1dG9tYXRpb25UeXBlOiAnZGVwcm92aXNpb25fZ29vZ2xlX3dvcmtzcGFjZScsIHNvcnRPcmRlcjogMTAgfSxcbiAgICAgICAgeyBuYW1lOiAnRGVwcm92aXNpb24gU2xhY2snLCB0eXBlOiAnQVVUT01BVEVEJywgYXV0b21hdGlvblR5cGU6ICdkZXByb3Zpc2lvbl9zbGFjaycsIHNvcnRPcmRlcjogMTEgfSxcbiAgICAgIF1cblxuICBjb25zdCBlZmZlY3RpdmVFbmREYXRlID0gZW5kRGF0ZSA/IG5ldyBEYXRlKGVuZERhdGUpIDogbmV3IERhdGUoKVxuXG4gIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgZW1wbG95ZWVJZCxcbiAgICAgIHN0YXR1czogaXNJbW1lZGlhdGUgPyAnSU5fUFJPR1JFU1MnIDogJ1BFTkRJTkcnLFxuICAgICAgaXNJbW1lZGlhdGU6ICEhaXNJbW1lZGlhdGUsXG4gICAgICBzY2hlZHVsZWRGb3I6ICFpc0ltbWVkaWF0ZSA/IGVmZmVjdGl2ZUVuZERhdGUgOiBudWxsLFxuICAgICAgc3RhcnRlZEF0OiBpc0ltbWVkaWF0ZSA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgICAgcmVhc29uLFxuICAgICAgbm90ZXMsXG4gICAgICBpbml0aWF0ZWRCeTogY3R4LnVzZXIuaWQsXG4gICAgICB0YXNrczoge1xuICAgICAgICBjcmVhdGU6IGRlZmF1bHRUYXNrcy5tYXAoKHRhc2s6IGFueSkgPT4gKHtcbiAgICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICAgICAgdHlwZTogdGFzay50eXBlLFxuICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgIGF1dG9tYXRpb25UeXBlOiB0YXNrLmF1dG9tYXRpb25UeXBlLFxuICAgICAgICAgIGFwcElkOiB0YXNrLmFwcElkLFxuICAgICAgICAgIHNvcnRPcmRlcjogdGFzay5zb3J0T3JkZXIsXG4gICAgICAgIH0pKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7IHRhc2tzOiB0cnVlIH0sXG4gIH0pXG5cbiAgLy8gVXBkYXRlIGVtcGxveWVlIHN0YXR1c1xuICBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGVtcGxveWVlSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdPRkZCT0FSRElORycsXG4gICAgICBlbmREYXRlOiBlZmZlY3RpdmVFbmREYXRlLFxuICAgIH0sXG4gIH0pXG5cbiAgLy8gSWYgaW1tZWRpYXRlLCBydW4gYXV0b21hdGVkIHRhc2tzXG4gIGlmIChpc0ltbWVkaWF0ZSkge1xuICAgIGNvbnN0IGF1dG9tYXRlZFRhc2tzID0gd29ya2Zsb3cudGFza3MuZmlsdGVyKCh0OiBhbnkpID0+IHQudHlwZSA9PT0gJ0FVVE9NQVRFRCcpXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIGF1dG9tYXRlZFRhc2tzKSB7XG4gICAgICAvLyBGaXJlIGFuZCBmb3JnZXQgLSBkb24ndCB3YWl0IGZvciBjb21wbGV0aW9uXG4gICAgICBydW5PbmJvYXJkaW5nVGFzayh7IHRhc2tJZDogdGFzay5pZCB9LCBjdHgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0Fzc2lzdGFudF0gRmFpbGVkIHRvIHJ1biBvZmZib2FyZGluZyB0YXNrICR7dGFzay5pZH06YCwgZXJyKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogY3R4LnVzZXIuaWQsXG4gICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgcmVzb3VyY2VUeXBlOiAnZW1wbG95ZWUnLFxuICAgIHJlc291cmNlSWQ6IGVtcGxveWVlSWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHRvb2w6ICdzdGFydF9vZmZib2FyZGluZycsXG4gICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgIGlzSW1tZWRpYXRlOiAhIWlzSW1tZWRpYXRlLFxuICAgICAgZW5kRGF0ZSxcbiAgICAgIHJlYXNvbixcbiAgICAgIGFzc2lzdGFudEluaXRpYXRlZDogdHJ1ZSxcbiAgICB9LFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgc3RhdHVzOiAnb2snLFxuICAgIGRhdGE6IHtcbiAgICAgIHdvcmtmbG93SWQ6IHdvcmtmbG93LmlkLFxuICAgICAgZW1wbG95ZWVOYW1lOiBlbXBsb3llZS5mdWxsTmFtZSxcbiAgICAgIHRhc2tDb3VudDogd29ya2Zsb3cudGFza3MubGVuZ3RoLFxuICAgICAgaXNJbW1lZGlhdGU6ICEhaXNJbW1lZGlhdGUsXG4gICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ29mZmJvYXJkaW5nJywgd29ya2Zsb3cuaWQpLFxuICAgIH0sXG4gICAgbWVzc2FnZTogYE9mZmJvYXJkaW5nIHN0YXJ0ZWQgZm9yICR7ZW1wbG95ZWUuZnVsbE5hbWV9LiAke3dvcmtmbG93LnRhc2tzLmxlbmd0aH0gdGFza3MgY3JlYXRlZC4gW1ZpZXcgb2ZmYm9hcmRpbmddKCR7YnVpbGREZWVwTGluaygnb2ZmYm9hcmRpbmcnLCB3b3JrZmxvdy5pZCl9KWAsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0T2ZmYm9hcmRpbmdTdGF0dXMoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnkgfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgZW1wbG95ZWVJZCwgd29ya2Zsb3dJZCB9ID0gYXJncyBhcyB7IGVtcGxveWVlSWQ/OiBzdHJpbmc7IHdvcmtmbG93SWQ/OiBzdHJpbmcgfVxuXG4gIGlmICghZW1wbG95ZWVJZCAmJiAhd29ya2Zsb3dJZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ21pc3NpbmdfZmllbGRzJywgbWlzc2luZ0ZpZWxkczogWydlbXBsb3llZUlkIG9yIHdvcmtmbG93SWQnXSwgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIGVtcGxveWVlIElEIG9yIHdvcmtmbG93IElELicgfVxuICB9XG5cbiAgY29uc3Qgd29ya2Zsb3cgPSB3b3JrZmxvd0lkXG4gICAgPyBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nV29ya2Zsb3cuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB3b3JrZmxvd0lkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBqb2JUaXRsZTogdHJ1ZSwgZW5kRGF0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgdGFza3M6IHsgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgOiBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nV29ya2Zsb3cuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgZW1wbG95ZWVJZCwgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5fUFJPR1JFU1MnXSB9IH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBqb2JUaXRsZTogdHJ1ZSwgZW5kRGF0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgdGFza3M6IHsgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgfSlcblxuICBpZiAoIXdvcmtmbG93KSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnb2snLCBkYXRhOiBudWxsLCBtZXNzYWdlOiAnTm8gb2ZmYm9hcmRpbmcgd29ya2Zsb3cgZm91bmQgZm9yIHRoaXMgZW1wbG95ZWUuJyB9XG4gIH1cblxuICBjb25zdCBjb21wbGV0ZWRUYXNrcyA9IHdvcmtmbG93LnRhc2tzLmZpbHRlcigodDogYW55KSA9PiB0LnN0YXR1cyA9PT0gJ1NVQ0NFU1MnIHx8IHQuc3RhdHVzID09PSAnU0tJUFBFRCcpLmxlbmd0aFxuICBjb25zdCB0b3RhbFRhc2tzID0gd29ya2Zsb3cudGFza3MubGVuZ3RoXG4gIGNvbnN0IHBlcmNlbnRDb21wbGV0ZSA9IHRvdGFsVGFza3MgPiAwID8gTWF0aC5yb3VuZCgoY29tcGxldGVkVGFza3MgLyB0b3RhbFRhc2tzKSAqIDEwMCkgOiAwXG5cbiAgY29uc3QgcGVuZGluZ1Rhc2tzID0gd29ya2Zsb3cudGFza3NcbiAgICAuZmlsdGVyKCh0OiBhbnkpID0+IHQuc3RhdHVzID09PSAnUEVORElORycgfHwgdC5zdGF0dXMgPT09ICdJTl9QUk9HUkVTUycgfHwgdC5zdGF0dXMgPT09ICdGQUlMRUQnKVxuICAgIC5zbGljZSgwLCA1KVxuICAgIC5tYXAoKHQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiB0LmlkLFxuICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgdHlwZTogdC50eXBlLFxuICAgICAgc3RhdHVzOiB0LnN0YXR1cyxcbiAgICAgIHN0YXR1c01lc3NhZ2U6IHQuc3RhdHVzTWVzc2FnZSxcbiAgICB9KSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7XG4gICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgIGVtcGxveWVlOiB3b3JrZmxvdy5lbXBsb3llZSxcbiAgICAgIHdvcmtmbG93U3RhdHVzOiB3b3JrZmxvdy5zdGF0dXMsXG4gICAgICBpc0ltbWVkaWF0ZTogd29ya2Zsb3cuaXNJbW1lZGlhdGUsXG4gICAgICBzY2hlZHVsZWRGb3I6IHdvcmtmbG93LnNjaGVkdWxlZEZvcixcbiAgICAgIHBlcmNlbnRDb21wbGV0ZSxcbiAgICAgIGNvbXBsZXRlZFRhc2tzLFxuICAgICAgdG90YWxUYXNrcyxcbiAgICAgIHBlbmRpbmdUYXNrcyxcbiAgICAgIHJlYXNvbjogd29ya2Zsb3cucmVhc29uLFxuICAgICAgc3RhcnRlZEF0OiB3b3JrZmxvdy5zdGFydGVkQXQsXG4gICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ29mZmJvYXJkaW5nJywgd29ya2Zsb3cuaWQpLFxuICAgIH0sXG4gICAgbWVzc2FnZTogYE9mZmJvYXJkaW5nIGZvciAke3dvcmtmbG93LmVtcGxveWVlLmZ1bGxOYW1lfTogJHtwZXJjZW50Q29tcGxldGV9JSBjb21wbGV0ZSAoJHtjb21wbGV0ZWRUYXNrc30vJHt0b3RhbFRhc2tzfSB0YXNrcykuIFtWaWV3IG9mZmJvYXJkaW5nXSgke2J1aWxkRGVlcExpbmsoJ29mZmJvYXJkaW5nJywgd29ya2Zsb3cuaWQpfSlgLFxuICB9XG59XG5cbi8vIFYyIEludGVncmF0aW9uIFRvb2xzXG5hc3luYyBmdW5jdGlvbiBsaXN0SW50ZWdyYXRpb25zKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGluY2x1ZGVEaXNhYmxlZCB9ID0gYXJncyBhcyB7IGluY2x1ZGVEaXNhYmxlZD86IGJvb2xlYW4gfVxuXG4gIGNvbnN0IHdoZXJlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHsgYXJjaGl2ZWRBdDogbnVsbCB9XG4gIGlmICghaW5jbHVkZURpc2FibGVkKSB7XG4gICAgd2hlcmUuaXNFbmFibGVkID0gdHJ1ZVxuICB9XG5cbiAgY29uc3QgYXBwcyA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBjb25uZWN0aW9uczoge1xuICAgICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBkb21haW46IHRydWUsXG4gICAgICAgICAgbGFzdFRlc3RTdGF0dXM6IHRydWUsXG4gICAgICAgICAgbGFzdFRlc3RlZEF0OiB0cnVlLFxuICAgICAgICAgIGxhc3RUZXN0RXJyb3I6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIHNlbGVjdDogeyBhY2NvdW50czogeyB3aGVyZTogeyBzdGF0dXM6ICdBQ1RJVkUnIH0gfSB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgfSlcblxuICBjb25zdCBpbnRlZ3JhdGlvbnMgPSBhcHBzLm1hcCgoYXBwOiBhbnkpID0+ICh7XG4gICAgaWQ6IGFwcC5pZCxcbiAgICBuYW1lOiBhcHAubmFtZSxcbiAgICB0eXBlOiBhcHAudHlwZSxcbiAgICBpc0VuYWJsZWQ6IGFwcC5pc0VuYWJsZWQsXG4gICAgY29ubmVjdGlvblN0YXR1czogYXBwLmNvbm5lY3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgID8gYXBwLmNvbm5lY3Rpb25zWzBdLmxhc3RUZXN0U3RhdHVzIHx8ICdVTktOT1dOJ1xuICAgICAgOiAnTk9UX0NPTk5FQ1RFRCcsXG4gICAgbGFzdFRlc3RlZEF0OiBhcHAuY29ubmVjdGlvbnNbMF0/Lmxhc3RUZXN0ZWRBdCxcbiAgICBhY3RpdmVBY2NvdW50czogYXBwLl9jb3VudC5hY2NvdW50cyxcbiAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ2ludGVncmF0aW9uJywgYXBwLmlkKSxcbiAgfSkpXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogeyBpbnRlZ3JhdGlvbnMsIHRvdGFsOiBpbnRlZ3JhdGlvbnMubGVuZ3RoIH0sXG4gICAgbWVzc2FnZTogYEZvdW5kICR7aW50ZWdyYXRpb25zLmxlbmd0aH0gaW50ZWdyYXRpb24ocykuYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB0ZXN0SW50ZWdyYXRpb25Db25uZWN0aW9uKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55OyB1c2VyOiB7IGlkOiBzdHJpbmcgfSB9XG4pOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcbiAgY29uc3QgeyBhcHBJZCB9ID0gYXJncyBhcyB7IGFwcElkPzogc3RyaW5nIH1cblxuICBpZiAoIWFwcElkKSB7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLCBtaXNzaW5nRmllbGRzOiBbJ2FwcElkJ10sIG1lc3NhZ2U6ICdQbGVhc2UgcHJvdmlkZSB0aGUgYXBwIElELicgfVxuICB9XG5cbiAgY29uc3QgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGFwcElkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgY29ubmVjdGlvbnM6IHsgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSB9LFxuICAgIH0sXG4gIH0pXG5cbiAgaWYgKCFhcHApIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6ICdBcHAgbm90IGZvdW5kLicgfVxuICB9XG5cbiAgaWYgKGFwcC5jb25uZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgbWVzc2FnZTogYE5vIGFjdGl2ZSBjb25uZWN0aW9uIGNvbmZpZ3VyZWQgZm9yICR7YXBwLm5hbWV9LiBbQ29uZmlndXJlIGludGVncmF0aW9uXSgke2J1aWxkRGVlcExpbmsoJ2ludGVncmF0aW9uJywgYXBwLmlkKX0pYCxcbiAgICB9XG4gIH1cblxuICBjb25zdCBjb25uZWN0aW9uID0gYXBwLmNvbm5lY3Rpb25zWzBdXG5cbiAgLy8gVGVzdCB0aGUgY29ubmVjdGlvblxuICBjb25zdCB7IGdldENvbm5lY3RvciB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9pbnRlZ3JhdGlvbnMnKVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29ubmVjdG9yID0gYXdhaXQgZ2V0Q29ubmVjdG9yKGFwcClcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0b3IudGVzdENvbm5lY3Rpb24oKVxuXG4gICAgLy8gVXBkYXRlIGNvbm5lY3Rpb24gc3RhdHVzXG4gICAgYXdhaXQgY3R4LnByaXNtYS5hcHBDb25uZWN0aW9uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogY29ubmVjdGlvbi5pZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBsYXN0VGVzdFN0YXR1czogcmVzdWx0LnN1Y2Nlc3MgPyAnU1VDQ0VTUycgOiAnRkFJTEVEJyxcbiAgICAgICAgbGFzdFRlc3RFcnJvcjogcmVzdWx0LmVycm9yIHx8IG51bGwsXG4gICAgICAgIGxhc3RUZXN0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgICByZXNvdXJjZVR5cGU6ICdhcHAnLFxuICAgICAgcmVzb3VyY2VJZDogYXBwSWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0b29sOiAndGVzdF9pbnRlZ3JhdGlvbl9jb25uZWN0aW9uJyxcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICBhc3Npc3RhbnRJbml0aWF0ZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogJ29rJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFwcElkLFxuICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lLFxuICAgICAgICAgIHN0YXR1czogJ1NVQ0NFU1MnLFxuICAgICAgICAgIHVybDogYnVpbGREZWVwTGluaygnaW50ZWdyYXRpb24nLCBhcHBJZCksXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6IGDinJMgQ29ubmVjdGlvbiB0byAke2FwcC5uYW1lfSBzdWNjZXNzZnVsLiBbVmlldyBpbnRlZ3JhdGlvbl0oJHtidWlsZERlZXBMaW5rKCdpbnRlZ3JhdGlvbicsIGFwcElkKX0pYCxcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICBtZXNzYWdlOiBg4pyXIENvbm5lY3Rpb24gdG8gJHthcHAubmFtZX0gZmFpbGVkOiAke3Jlc3VsdC5lcnJvcn0uIFtWaWV3IGludGVncmF0aW9uXSgke2J1aWxkRGVlcExpbmsoJ2ludGVncmF0aW9uJywgYXBwSWQpfSlgLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgYXBwSWQsXG4gICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXG4gICAgICAgICAgc3RhdHVzOiAnRkFJTEVEJyxcbiAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICAgIHVybDogYnVpbGREZWVwTGluaygnaW50ZWdyYXRpb24nLCBhcHBJZCksXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGNvbm5lY3Rpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbGFzdFRlc3RTdGF0dXM6ICdGQUlMRUQnLFxuICAgICAgICBsYXN0VGVzdEVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgbGFzdFRlc3RlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6IGDinJcgQ29ubmVjdGlvbiB0ZXN0IGZhaWxlZCBmb3IgJHthcHAubmFtZX06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICB9XG4gIH1cbn1cblxuLy8gVjIgTm90aWZpY2F0aW9uICYgQXVkaXQgVG9vbHNcbmFzeW5jIGZ1bmN0aW9uIGxpc3ROb3RpZmljYXRpb25zKFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY3R4OiB7IHByaXNtYTogYW55OyB1c2VyOiB7IGlkOiBzdHJpbmcgfSB9XG4pOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcbiAgY29uc3QgeyBpbmNsdWRlUmVhZCwgbGltaXQgPSAxMCB9ID0gYXJncyBhcyB7IGluY2x1ZGVSZWFkPzogYm9vbGVhbjsgbGltaXQ/OiBudW1iZXIgfVxuXG4gIGNvbnN0IHdoZXJlOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFyY2hpdmVkQXQ6IG51bGwsXG4gIH1cblxuICBpZiAoIWluY2x1ZGVSZWFkKSB7XG4gICAgd2hlcmUucmVhZEF0ID0gbnVsbFxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBub3RpZmljYXRpb25zID0gYXdhaXQgY3R4LnByaXNtYS5ub3RpZmljYXRpb24uZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiBNYXRoLm1pbihsaW1pdCwgNTApLFxuICAgIH0pXG5cbiAgICBjb25zdCBmb3JtYXR0ZWROb3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9ucy5tYXAoKG46IGFueSkgPT4gKHtcbiAgICAgIGlkOiBuLmlkLFxuICAgICAgYWN0aW9uOiBuLmFjdGlvbixcbiAgICAgIHJlc291cmNlVHlwZTogbi5yZXNvdXJjZVR5cGUsXG4gICAgICByZXNvdXJjZUlkOiBuLnJlc291cmNlSWQsXG4gICAgICBhY3Rvck5hbWU6IG4uYWN0b3JOYW1lLFxuICAgICAgYWN0b3JFbWFpbDogbi5hY3RvckVtYWlsLFxuICAgICAgaXNSZWFkOiAhIW4ucmVhZEF0LFxuICAgICAgY3JlYXRlZEF0OiBuLmNyZWF0ZWRBdCxcbiAgICB9KSlcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdvaycsXG4gICAgICBkYXRhOiB7IG5vdGlmaWNhdGlvbnM6IGZvcm1hdHRlZE5vdGlmaWNhdGlvbnMsIHRvdGFsOiBmb3JtYXR0ZWROb3RpZmljYXRpb25zLmxlbmd0aCB9LFxuICAgICAgbWVzc2FnZTogZm9ybWF0dGVkTm90aWZpY2F0aW9ucy5sZW5ndGggPT09IDBcbiAgICAgICAgPyAnTm8gbm90aWZpY2F0aW9ucyBmb3VuZC4nXG4gICAgICAgIDogYEZvdW5kICR7Zm9ybWF0dGVkTm90aWZpY2F0aW9ucy5sZW5ndGh9IG5vdGlmaWNhdGlvbihzKS5gLFxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gTm90aWZpY2F0aW9uIHRhYmxlIG1heSBub3QgZXhpc3QgeWV0XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ29rJyxcbiAgICAgIGRhdGE6IHsgbm90aWZpY2F0aW9uczogW10sIHRvdGFsOiAwIH0sXG4gICAgICBtZXNzYWdlOiAnTm8gbm90aWZpY2F0aW9ucyBmb3VuZC4nLFxuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hBdWRpdExvZyhcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueSB9XG4pOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcbiAgY29uc3QgeyBhY3Rpb24sIHJlc291cmNlVHlwZSwgcmVzb3VyY2VJZCwgc3RhcnREYXRlLCBlbmREYXRlLCBsaW1pdCA9IDIwIH0gPSBhcmdzIGFzIHtcbiAgICBhY3Rpb24/OiBzdHJpbmdcbiAgICByZXNvdXJjZVR5cGU/OiBzdHJpbmdcbiAgICByZXNvdXJjZUlkPzogc3RyaW5nXG4gICAgc3RhcnREYXRlPzogc3RyaW5nXG4gICAgZW5kRGF0ZT86IHN0cmluZ1xuICAgIGxpbWl0PzogbnVtYmVyXG4gIH1cblxuICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuXG4gIGlmIChhY3Rpb24pIHdoZXJlLmFjdGlvbiA9IGFjdGlvblxuICBpZiAocmVzb3VyY2VUeXBlKSB3aGVyZS5yZXNvdXJjZVR5cGUgPSByZXNvdXJjZVR5cGVcbiAgaWYgKHJlc291cmNlSWQpIHdoZXJlLnJlc291cmNlSWQgPSByZXNvdXJjZUlkXG5cbiAgaWYgKHN0YXJ0RGF0ZSB8fCBlbmREYXRlKSB7XG4gICAgd2hlcmUuY3JlYXRlZEF0ID0ge31cbiAgICBpZiAoc3RhcnREYXRlKSAod2hlcmUuY3JlYXRlZEF0IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5ndGUgPSBuZXcgRGF0ZShzdGFydERhdGUpXG4gICAgaWYgKGVuZERhdGUpICh3aGVyZS5jcmVhdGVkQXQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmx0ZSA9IG5ldyBEYXRlKGVuZERhdGUpXG4gIH1cblxuICBjb25zdCBsb2dzID0gYXdhaXQgY3R4LnByaXNtYS5hdWRpdExvZy5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgaW5jbHVkZToge1xuICAgICAgYWN0b3I6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0sXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgdGFrZTogTWF0aC5taW4obGltaXQsIDEwMCksXG4gIH0pXG5cbiAgY29uc3QgZm9ybWF0dGVkTG9ncyA9IGxvZ3MubWFwKChsb2c6IGFueSkgPT4gKHtcbiAgICBpZDogbG9nLmlkLFxuICAgIGFjdGlvbjogbG9nLmFjdGlvbixcbiAgICByZXNvdXJjZVR5cGU6IGxvZy5yZXNvdXJjZVR5cGUsXG4gICAgcmVzb3VyY2VJZDogbG9nLnJlc291cmNlSWQsXG4gICAgYWN0b3JOYW1lOiBsb2cuYWN0b3I/Lm5hbWUgfHwgbG9nLmFjdG9yRW1haWwgfHwgJ1N5c3RlbScsXG4gICAgYWN0b3JFbWFpbDogbG9nLmFjdG9yPy5lbWFpbCB8fCBsb2cuYWN0b3JFbWFpbCxcbiAgICBtZXRhZGF0YTogbG9nLm1ldGFkYXRhLFxuICAgIGNyZWF0ZWRBdDogbG9nLmNyZWF0ZWRBdCxcbiAgfSkpXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogeyBsb2dzOiBmb3JtYXR0ZWRMb2dzLCB0b3RhbDogZm9ybWF0dGVkTG9ncy5sZW5ndGggfSxcbiAgICBtZXNzYWdlOiBmb3JtYXR0ZWRMb2dzLmxlbmd0aCA9PT0gMFxuICAgICAgPyAnTm8gYXVkaXQgbG9ncyBmb3VuZCBtYXRjaGluZyB5b3VyIGNyaXRlcmlhLidcbiAgICAgIDogYEZvdW5kICR7Zm9ybWF0dGVkTG9ncy5sZW5ndGh9IGF1ZGl0IGxvZyhzKS5gLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBWMyBUT09MIElNUExFTUVOVEFUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RGFpbHlCcmllZihcbiAgX2FyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnkgfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKVxuICBjb25zdCB3ZWVrRnJvbU5vdyA9IG5ldyBEYXRlKHRvZGF5LmdldFRpbWUoKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuXG4gIC8vIEdldCBwZW5kaW5nIGNvbnRyYWN0cyAoRFJBRlQgb3IgU0VOVCBmb3IgbW9yZSB0aGFuIDMgZGF5cylcbiAgY29uc3QgdGhyZWVEYXlzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuICBjb25zdCBwZW5kaW5nQ29udHJhY3RzID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN0YXR1czogeyBpbjogWydEUkFGVCcsICdTRU5UJywgJ1ZJRVdFRCddIH0sXG4gICAgICBjcmVhdGVkQXQ6IHsgbHQ6IHRocmVlRGF5c0FnbyB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIGNhbmRpZGF0ZU5hbWU6IHRydWUsXG4gICAgICBjYW5kaWRhdGVFbWFpbDogdHJ1ZSxcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICB9LFxuICAgIHRha2U6IDEwLFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnYXNjJyB9LFxuICB9KVxuXG4gIC8vIEdldCB1cGNvbWluZyBzdGFydHMgKGVtcGxveWVlcyBzdGFydGluZyBpbiBuZXh0IDcgZGF5cylcbiAgY29uc3QgdXBjb21pbmdTdGFydHMgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgc3RhdHVzOiAnSElSRURfUEVORElOR19TVEFSVCcsXG4gICAgICBzdGFydERhdGU6IHsgZ3RlOiB0b2RheSwgbHRlOiB3ZWVrRnJvbU5vdyB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIGZ1bGxOYW1lOiB0cnVlLFxuICAgICAgc3RhcnREYXRlOiB0cnVlLFxuICAgICAgam9iVGl0bGU6IHRydWUsXG4gICAgfSxcbiAgICB0YWtlOiAxMCxcbiAgICBvcmRlckJ5OiB7IHN0YXJ0RGF0ZTogJ2FzYycgfSxcbiAgfSlcblxuICAvLyBHZXQgc3R1Y2sgd29ya2Zsb3dzIChvbmJvYXJkaW5nL29mZmJvYXJkaW5nIHdpdGggZmFpbGVkIHRhc2tzKVxuICBjb25zdCBzdHVja09uYm9hcmRpbmcgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdXb3JrZmxvdy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN0YXR1czogJ0lOX1BST0dSRVNTJyxcbiAgICAgIHRhc2tzOiB7IHNvbWU6IHsgc3RhdHVzOiAnRkFJTEVEJyB9IH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlIH0gfSxcbiAgICAgIHRhc2tzOiB7IHdoZXJlOiB7IHN0YXR1czogJ0ZBSUxFRCcgfSwgdGFrZTogMyB9LFxuICAgIH0sXG4gICAgdGFrZTogNSxcbiAgfSlcblxuICBjb25zdCBzdHVja09mZmJvYXJkaW5nID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgc3RhdHVzOiAnSU5fUFJPR1JFU1MnLFxuICAgICAgdGFza3M6IHsgc29tZTogeyBzdGF0dXM6ICdGQUlMRUQnIH0gfSxcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGVtcGxveWVlOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUgfSB9LFxuICAgICAgdGFza3M6IHsgd2hlcmU6IHsgc3RhdHVzOiAnRkFJTEVEJyB9LCB0YWtlOiAzIH0sXG4gICAgfSxcbiAgICB0YWtlOiA1LFxuICB9KVxuXG4gIGNvbnN0IHN1bW1hcnkgPSB7XG4gICAgcGVuZGluZ0NvbnRyYWN0czogcGVuZGluZ0NvbnRyYWN0cy5tYXAoKGM6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBjLmlkLFxuICAgICAgbmFtZTogYy5jYW5kaWRhdGVOYW1lLFxuICAgICAgc3RhdHVzOiBjLnN0YXR1cyxcbiAgICAgIGRheXNPbGQ6IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSBuZXcgRGF0ZShjLmNyZWF0ZWRBdCkuZ2V0VGltZSgpKSAvICgyNCAqIDYwICogNjAgKiAxMDAwKSksXG4gICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ2NvbnRyYWN0JywgYy5pZCksXG4gICAgfSkpLFxuICAgIHVwY29taW5nU3RhcnRzOiB1cGNvbWluZ1N0YXJ0cy5tYXAoKGU6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBlLmlkLFxuICAgICAgbmFtZTogZS5mdWxsTmFtZSxcbiAgICAgIHJvbGU6IGUuam9iVGl0bGUsXG4gICAgICBzdGFydERhdGU6IGUuc3RhcnREYXRlPy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ2VtcGxveWVlJywgZS5pZCksXG4gICAgfSkpLFxuICAgIHN0dWNrV29ya2Zsb3dzOiBbXG4gICAgICAuLi5zdHVja09uYm9hcmRpbmcubWFwKCh3OiBhbnkpID0+ICh7XG4gICAgICAgIHR5cGU6ICdvbmJvYXJkaW5nJyxcbiAgICAgICAgaWQ6IHcuaWQsXG4gICAgICAgIGVtcGxveWVlTmFtZTogdy5lbXBsb3llZS5mdWxsTmFtZSxcbiAgICAgICAgZmFpbGVkVGFza3M6IHcudGFza3MubGVuZ3RoLFxuICAgICAgICB1cmw6IGJ1aWxkRGVlcExpbmsoJ29uYm9hcmRpbmcnLCB3LmlkKSxcbiAgICAgIH0pKSxcbiAgICAgIC4uLnN0dWNrT2ZmYm9hcmRpbmcubWFwKCh3OiBhbnkpID0+ICh7XG4gICAgICAgIHR5cGU6ICdvZmZib2FyZGluZycsXG4gICAgICAgIGlkOiB3LmlkLFxuICAgICAgICBlbXBsb3llZU5hbWU6IHcuZW1wbG95ZWUuZnVsbE5hbWUsXG4gICAgICAgIGZhaWxlZFRhc2tzOiB3LnRhc2tzLmxlbmd0aCxcbiAgICAgICAgdXJsOiBidWlsZERlZXBMaW5rKCdvZmZib2FyZGluZycsIHcuaWQpLFxuICAgICAgfSkpLFxuICAgIF0sXG4gIH1cblxuICBsZXQgbWVzc2FnZSA9ICcjIyBEYWlseSBCcmllZlxcblxcbidcblxuICBpZiAoc3VtbWFyeS5wZW5kaW5nQ29udHJhY3RzLmxlbmd0aCA+IDApIHtcbiAgICBtZXNzYWdlICs9IGAjIyMg4o+zIFBlbmRpbmcgQ29udHJhY3RzICgke3N1bW1hcnkucGVuZGluZ0NvbnRyYWN0cy5sZW5ndGh9KVxcbmBcbiAgICBzdW1tYXJ5LnBlbmRpbmdDb250cmFjdHMuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgbWVzc2FnZSArPSBgLSAke2MubmFtZX06ICR7Yy5zdGF0dXN9ICgke2MuZGF5c09sZH0gZGF5cyBvbGQpXFxuYFxuICAgIH0pXG4gICAgbWVzc2FnZSArPSAnXFxuJ1xuICB9IGVsc2Uge1xuICAgIG1lc3NhZ2UgKz0gJyMjIyDinJMgTm8gcGVuZGluZyBjb250cmFjdHMgcmVxdWlyaW5nIGF0dGVudGlvblxcblxcbidcbiAgfVxuXG4gIGlmIChzdW1tYXJ5LnVwY29taW5nU3RhcnRzLmxlbmd0aCA+IDApIHtcbiAgICBtZXNzYWdlICs9IGAjIyMg8J+XkyBVcGNvbWluZyBTdGFydHMgKCR7c3VtbWFyeS51cGNvbWluZ1N0YXJ0cy5sZW5ndGh9KVxcbmBcbiAgICBzdW1tYXJ5LnVwY29taW5nU3RhcnRzLmZvckVhY2goKGUpID0+IHtcbiAgICAgIG1lc3NhZ2UgKz0gYC0gJHtlLm5hbWV9ICgke2Uucm9sZX0pIC0gJHtlLnN0YXJ0RGF0ZX1cXG5gXG4gICAgfSlcbiAgICBtZXNzYWdlICs9ICdcXG4nXG4gIH0gZWxzZSB7XG4gICAgbWVzc2FnZSArPSAnIyMjIE5vIHVwY29taW5nIHN0YXJ0cyBpbiB0aGUgbmV4dCA3IGRheXNcXG5cXG4nXG4gIH1cblxuICBpZiAoc3VtbWFyeS5zdHVja1dvcmtmbG93cy5sZW5ndGggPiAwKSB7XG4gICAgbWVzc2FnZSArPSBgIyMjIOKaoO+4jyBTdHVjayBXb3JrZmxvd3MgKCR7c3VtbWFyeS5zdHVja1dvcmtmbG93cy5sZW5ndGh9KVxcbmBcbiAgICBzdW1tYXJ5LnN0dWNrV29ya2Zsb3dzLmZvckVhY2goKHcpID0+IHtcbiAgICAgIG1lc3NhZ2UgKz0gYC0gJHt3LmVtcGxveWVlTmFtZX06ICR7dy50eXBlfSBoYXMgJHt3LmZhaWxlZFRhc2tzfSBmYWlsZWQgdGFzayhzKVxcbmBcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIG1lc3NhZ2UgKz0gJyMjIyDinJMgTm8gc3R1Y2sgd29ya2Zsb3dzXFxuJ1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogc3VtbWFyeSxcbiAgICBtZXNzYWdlLFxuICB9XG59XG5cbi8vIFYzIEJ1bGsgT3BlcmF0aW9uc1xuYXN5bmMgZnVuY3Rpb24gYnVsa1N0YXJ0T25ib2FyZGluZyhcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgc3RhcnREYXRlRnJvbSwgc3RhcnREYXRlVG8sIGRyeVJ1biwgYXBwcm92YWxUb2tlbiB9ID0gYXJncyBhcyB7XG4gICAgc3RhcnREYXRlRnJvbT86IHN0cmluZ1xuICAgIHN0YXJ0RGF0ZVRvPzogc3RyaW5nXG4gICAgZHJ5UnVuPzogYm9vbGVhblxuICAgIGFwcHJvdmFsVG9rZW4/OiBzdHJpbmdcbiAgfVxuXG4gIGlmICghc3RhcnREYXRlRnJvbSB8fCAhc3RhcnREYXRlVG8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnbWlzc2luZ19maWVsZHMnLFxuICAgICAgbWlzc2luZ0ZpZWxkczogWydzdGFydERhdGVGcm9tJywgJ3N0YXJ0RGF0ZVRvJ10sXG4gICAgICBtZXNzYWdlOiAnUGxlYXNlIHByb3ZpZGUgYm90aCBzdGFydERhdGVGcm9tIGFuZCBzdGFydERhdGVUby4nLFxuICAgIH1cbiAgfVxuXG4gIC8vIEZpbmQgZWxpZ2libGUgZW1wbG95ZWVzXG4gIGNvbnN0IGVtcGxveWVlcyA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdGF0dXM6IHsgaW46IFsnT0ZGRVJfU0lHTkVEJywgJ0hJUkVEX1BFTkRJTkdfU1RBUlQnXSB9LFxuICAgICAgc3RhcnREYXRlOiB7XG4gICAgICAgIGd0ZTogbmV3IERhdGUoc3RhcnREYXRlRnJvbSksXG4gICAgICAgIGx0ZTogbmV3IERhdGUoc3RhcnREYXRlVG8pLFxuICAgICAgfSxcbiAgICAgIG9uYm9hcmRpbmdXb3JrZmxvd3M6IHtcbiAgICAgICAgbm9uZTogeyBzdGF0dXM6IHsgaW46IFsnUEVORElORycsICdJTl9QUk9HUkVTUyddIH0gfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgZnVsbE5hbWU6IHRydWUsXG4gICAgICBqb2JUaXRsZTogdHJ1ZSxcbiAgICAgIHN0YXJ0RGF0ZTogdHJ1ZSxcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICB9LFxuICAgIHRha2U6IDUwLFxuICB9KVxuXG4gIGlmIChlbXBsb3llZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ29rJyxcbiAgICAgIGRhdGE6IHsgYWZmZWN0ZWRDb3VudDogMCB9LFxuICAgICAgbWVzc2FnZTogJ05vIGVsaWdpYmxlIGVtcGxveWVlcyBmb3VuZCBmb3Igb25ib2FyZGluZyBpbiB0aGlzIGRhdGUgcmFuZ2UuJyxcbiAgICB9XG4gIH1cblxuICBjb25zdCBwcmV2aWV3ID0ge1xuICAgIGFjdGlvbjogJ2J1bGtfc3RhcnRfb25ib2FyZGluZycsXG4gICAgYWZmZWN0ZWRDb3VudDogZW1wbG95ZWVzLmxlbmd0aCxcbiAgICBpdGVtczogZW1wbG95ZWVzLm1hcCgoZTogYW55KSA9PiAoe1xuICAgICAgaWQ6IGUuaWQsXG4gICAgICBuYW1lOiBlLmZ1bGxOYW1lLFxuICAgICAgcm9sZTogZS5qb2JUaXRsZSxcbiAgICAgIHN0YXJ0RGF0ZTogZS5zdGFydERhdGU/LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIHN0YXR1czogZS5zdGF0dXMsXG4gICAgfSkpLFxuICB9XG5cbiAgLy8gRHJ5IHJ1biBtb2RlIC0gY3JlYXRlIGFwcHJvdmFsIHBsYW5cbiAgaWYgKGRyeVJ1biB8fCAoIWRyeVJ1biAmJiAhYXBwcm92YWxUb2tlbikpIHtcbiAgICBjb25zdCB7IGdldE9yZ2FuaXphdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9vcmdhbml6YXRpb24nKVxuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG5cbiAgICBjb25zdCBwbGFuID0gYXdhaXQgY3JlYXRlQXBwcm92YWxQbGFuKGN0eCwgJ2J1bGtfc3RhcnRfb25ib2FyZGluZycsIHByZXZpZXcsIG9yZ2FuaXphdGlvbi5pZClcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdjb25maXJtYXRpb25fcmVxdWlyZWQnLFxuICAgICAgc3VtbWFyeTogYFJlYWR5IHRvIHN0YXJ0IG9uYm9hcmRpbmcgZm9yICR7ZW1wbG95ZWVzLmxlbmd0aH0gZW1wbG95ZWUocykuIEV4cGlyZXMgaW4gMTUgbWludXRlcy5gLFxuICAgICAgbWVzc2FnZTogYCoqUHJldmlldzoqKlxcbiR7ZW1wbG95ZWVzLm1hcCgoZTogYW55KSA9PiBgLSAke2UuZnVsbE5hbWV9ICgke2Uuam9iVGl0bGV9KWApLmpvaW4oJ1xcbicpfVxcblxcblRvIGV4ZWN1dGUsIGNhbGwgYnVsa19zdGFydF9vbmJvYXJkaW5nIHdpdGggYXBwcm92YWxUb2tlbj1cIiR7cGxhbi5wbGFuSWR9XCJgLFxuICAgICAgZGF0YTogeyBwbGFuSWQ6IHBsYW4ucGxhbklkLCBwcmV2aWV3LCBleHBpcmVzQXQ6IHBsYW4uZXhwaXJlc0F0IH0sXG4gICAgfVxuICB9XG5cbiAgLy8gRXhlY3V0ZSB3aXRoIGFwcHJvdmFsIHRva2VuXG4gIGNvbnN0IGFwcHJvdmFsID0gYXdhaXQgdmFsaWRhdGVBbmRDb25zdW1lQXBwcm92YWwoY3R4LCBhcHByb3ZhbFRva2VuLCAnYnVsa19zdGFydF9vbmJvYXJkaW5nJylcbiAgaWYgKCFhcHByb3ZhbC52YWxpZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogYXBwcm92YWwuZXJyb3IhIH1cbiAgfVxuXG4gIC8vIEV4ZWN1dGUgYnVsayBvbmJvYXJkaW5nXG4gIGNvbnN0IHJlc3VsdHM6IEFycmF5PHsgZW1wbG95ZWVJZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+ID0gW11cblxuICBmb3IgKGNvbnN0IGVtcCBvZiBlbXBsb3llZXMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RhcnRPbmJvYXJkaW5nKHsgZW1wbG95ZWVJZDogZW1wLmlkLCBjb25maXJtZWQ6IHRydWUgfSwgY3R4KVxuICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgZW1wbG95ZWVJZDogZW1wLmlkLFxuICAgICAgICBuYW1lOiBlbXAuZnVsbE5hbWUsXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdGF0dXMgPT09ICdvaycsXG4gICAgICAgIGVycm9yOiByZXN1bHQuc3RhdHVzICE9PSAnb2snID8gcmVzdWx0Lm1lc3NhZ2UgOiB1bmRlZmluZWQsXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBlbXBsb3llZUlkOiBlbXAuaWQsXG4gICAgICAgIG5hbWU6IGVtcC5mdWxsTmFtZSxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3VjY2Vzc2Z1bCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiByLnN1Y2Nlc3MpLmxlbmd0aFxuICBjb25zdCBmYWlsZWQgPSByZXN1bHRzLmZpbHRlcigocikgPT4gIXIuc3VjY2VzcykubGVuZ3RoXG5cbiAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFjdGlvbjogJ0FTU0lTVEFOVF9BQ1RJT04nLFxuICAgIHJlc291cmNlVHlwZTogJ2J1bGtfb3BlcmF0aW9uJyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG9vbDogJ2J1bGtfc3RhcnRfb25ib2FyZGluZycsXG4gICAgICB0b3RhbEF0dGVtcHRlZDogcmVzdWx0cy5sZW5ndGgsXG4gICAgICBzdWNjZXNzZnVsLFxuICAgICAgZmFpbGVkLFxuICAgICAgYXNzaXN0YW50SW5pdGlhdGVkOiB0cnVlLFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogeyByZXN1bHRzLCBzdWNjZXNzZnVsLCBmYWlsZWQgfSxcbiAgICBtZXNzYWdlOiBgQnVsayBvbmJvYXJkaW5nIGNvbXBsZXRlZDogJHtzdWNjZXNzZnVsfSBzdWNjZXNzZnVsLCAke2ZhaWxlZH0gZmFpbGVkLmAsXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gYnVsa1Jlc2VuZENvbnRyYWN0cyhcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gIGN0eDogeyBwcmlzbWE6IGFueTsgdXNlcjogeyBpZDogc3RyaW5nIH0gfVxuKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XG4gIGNvbnN0IHsgdmlld2VkRGF5c0FnbyA9IDMsIGRyeVJ1biwgYXBwcm92YWxUb2tlbiB9ID0gYXJncyBhcyB7XG4gICAgdmlld2VkRGF5c0Fnbz86IG51bWJlclxuICAgIGRyeVJ1bj86IGJvb2xlYW5cbiAgICBhcHByb3ZhbFRva2VuPzogc3RyaW5nXG4gIH1cblxuICBjb25zdCBjdXRvZmZEYXRlID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIHZpZXdlZERheXNBZ28gKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuXG4gIC8vIEZpbmQgY29udHJhY3RzIHZpZXdlZCBidXQgbm90IHNpZ25lZCBhZnRlciBOIGRheXNcbiAgY29uc3QgY29udHJhY3RzID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN0YXR1czogJ1ZJRVdFRCcsXG4gICAgICBlc2lnblNlbnRBdDogeyBsdDogY3V0b2ZmRGF0ZSB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIGNhbmRpZGF0ZU5hbWU6IHRydWUsXG4gICAgICBjYW5kaWRhdGVFbWFpbDogdHJ1ZSxcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgIGVzaWduU2VudEF0OiB0cnVlLFxuICAgIH0sXG4gICAgdGFrZTogNTAsXG4gIH0pXG5cbiAgaWYgKGNvbnRyYWN0cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnb2snLFxuICAgICAgZGF0YTogeyBhZmZlY3RlZENvdW50OiAwIH0sXG4gICAgICBtZXNzYWdlOiBgTm8gY29udHJhY3RzIGZvdW5kIHRoYXQgaGF2ZSBiZWVuIGluIFZJRVdFRCBzdGF0dXMgZm9yIG1vcmUgdGhhbiAke3ZpZXdlZERheXNBZ299IGRheXMuYCxcbiAgICB9XG4gIH1cblxuICBjb25zdCBwcmV2aWV3ID0ge1xuICAgIGFjdGlvbjogJ2J1bGtfcmVzZW5kX2NvbnRyYWN0cycsXG4gICAgYWZmZWN0ZWRDb3VudDogY29udHJhY3RzLmxlbmd0aCxcbiAgICBpdGVtczogY29udHJhY3RzLm1hcCgoYzogYW55KSA9PiAoe1xuICAgICAgaWQ6IGMuaWQsXG4gICAgICBuYW1lOiBjLmNhbmRpZGF0ZU5hbWUsXG4gICAgICBlbWFpbDogYy5jYW5kaWRhdGVFbWFpbCxcbiAgICAgIGRheXNTaW5jZVNlbnQ6IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSBuZXcgRGF0ZShjLmVzaWduU2VudEF0KS5nZXRUaW1lKCkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKSxcbiAgICB9KSksXG4gIH1cblxuICAvLyBEcnkgcnVuIG1vZGVcbiAgaWYgKGRyeVJ1biB8fCAoIWRyeVJ1biAmJiAhYXBwcm92YWxUb2tlbikpIHtcbiAgICBjb25zdCB7IGdldE9yZ2FuaXphdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9vcmdhbml6YXRpb24nKVxuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG5cbiAgICBjb25zdCBwbGFuID0gYXdhaXQgY3JlYXRlQXBwcm92YWxQbGFuKGN0eCwgJ2J1bGtfcmVzZW5kX2NvbnRyYWN0cycsIHByZXZpZXcsIG9yZ2FuaXphdGlvbi5pZClcblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdjb25maXJtYXRpb25fcmVxdWlyZWQnLFxuICAgICAgc3VtbWFyeTogYFJlYWR5IHRvIHJlc2VuZCAke2NvbnRyYWN0cy5sZW5ndGh9IGNvbnRyYWN0KHMpLiBFeHBpcmVzIGluIDE1IG1pbnV0ZXMuYCxcbiAgICAgIG1lc3NhZ2U6IGAqKlByZXZpZXc6KipcXG4ke2NvbnRyYWN0cy5tYXAoKGM6IGFueSkgPT4gYC0gJHtjLmNhbmRpZGF0ZU5hbWV9ICh2aWV3ZWQgJHtNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gbmV3IERhdGUoYy5lc2lnblNlbnRBdCkuZ2V0VGltZSgpKSAvICgyNCAqIDYwICogNjAgKiAxMDAwKSl9IGRheXMgYWdvKWApLmpvaW4oJ1xcbicpfVxcblxcblRvIGV4ZWN1dGUsIGNhbGwgYnVsa19yZXNlbmRfY29udHJhY3RzIHdpdGggYXBwcm92YWxUb2tlbj1cIiR7cGxhbi5wbGFuSWR9XCJgLFxuICAgICAgZGF0YTogeyBwbGFuSWQ6IHBsYW4ucGxhbklkLCBwcmV2aWV3LCBleHBpcmVzQXQ6IHBsYW4uZXhwaXJlc0F0IH0sXG4gICAgfVxuICB9XG5cbiAgLy8gRXhlY3V0ZSB3aXRoIGFwcHJvdmFsIHRva2VuXG4gIGNvbnN0IGFwcHJvdmFsID0gYXdhaXQgdmFsaWRhdGVBbmRDb25zdW1lQXBwcm92YWwoY3R4LCBhcHByb3ZhbFRva2VuLCAnYnVsa19yZXNlbmRfY29udHJhY3RzJylcbiAgaWYgKCFhcHByb3ZhbC52YWxpZCkge1xuICAgIHJldHVybiB7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogYXBwcm92YWwuZXJyb3IhIH1cbiAgfVxuXG4gIGNvbnN0IHJlc3VsdHM6IEFycmF5PHsgY29udHJhY3RJZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+ID0gW11cblxuICBmb3IgKGNvbnN0IGNvbnRyYWN0IG9mIGNvbnRyYWN0cykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNlbmRDb250cmFjdCh7IGNvbnRyYWN0SWQ6IGNvbnRyYWN0LmlkLCBjb25maXJtZWQ6IHRydWUgfSwgY3R4KVxuICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgY29udHJhY3RJZDogY29udHJhY3QuaWQsXG4gICAgICAgIG5hbWU6IGNvbnRyYWN0LmNhbmRpZGF0ZU5hbWUsXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdGF0dXMgPT09ICdvaycsXG4gICAgICAgIGVycm9yOiByZXN1bHQuc3RhdHVzICE9PSAnb2snID8gcmVzdWx0Lm1lc3NhZ2UgOiB1bmRlZmluZWQsXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBjb250cmFjdElkOiBjb250cmFjdC5pZCxcbiAgICAgICAgbmFtZTogY29udHJhY3QuY2FuZGlkYXRlTmFtZSxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3VjY2Vzc2Z1bCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiByLnN1Y2Nlc3MpLmxlbmd0aFxuICBjb25zdCBmYWlsZWQgPSByZXN1bHRzLmZpbHRlcigocikgPT4gIXIuc3VjY2VzcykubGVuZ3RoXG5cbiAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgIGFjdG9ySWQ6IGN0eC51c2VyLmlkLFxuICAgIGFjdGlvbjogJ0FTU0lTVEFOVF9BQ1RJT04nLFxuICAgIHJlc291cmNlVHlwZTogJ2J1bGtfb3BlcmF0aW9uJyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG9vbDogJ2J1bGtfcmVzZW5kX2NvbnRyYWN0cycsXG4gICAgICB0b3RhbEF0dGVtcHRlZDogcmVzdWx0cy5sZW5ndGgsXG4gICAgICBzdWNjZXNzZnVsLFxuICAgICAgZmFpbGVkLFxuICAgICAgYXNzaXN0YW50SW5pdGlhdGVkOiB0cnVlLFxuICAgIH0sXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdvaycsXG4gICAgZGF0YTogeyByZXN1bHRzLCBzdWNjZXNzZnVsLCBmYWlsZWQgfSxcbiAgICBtZXNzYWdlOiBgQnVsayByZXNlbmQgY29tcGxldGVkOiAke3N1Y2Nlc3NmdWx9IHN1Y2Nlc3NmdWwsICR7ZmFpbGVkfSBmYWlsZWQuYCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBidWxrRGVwcm92aXNpb25BY2Nlc3MoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjdHg6IHsgcHJpc21hOiBhbnk7IHVzZXI6IHsgaWQ6IHN0cmluZyB9IH1cbik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xuICBjb25zdCB7IGluY2x1ZGVPZmZib2FyZGluZyA9IGZhbHNlLCBkcnlSdW4sIGFwcHJvdmFsVG9rZW4gfSA9IGFyZ3MgYXMge1xuICAgIGluY2x1ZGVPZmZib2FyZGluZz86IGJvb2xlYW5cbiAgICBkcnlSdW4/OiBib29sZWFuXG4gICAgYXBwcm92YWxUb2tlbj86IHN0cmluZ1xuICB9XG5cbiAgY29uc3Qgc3RhdHVzZXMgPSBpbmNsdWRlT2ZmYm9hcmRpbmcgPyBbJ0VYSVRFRCcsICdPRkZCT0FSRElORyddIDogWydFWElURUQnXVxuXG4gIC8vIEZpbmQgZW1wbG95ZWVzIHdpdGggYWN0aXZlIGFwcCBhY2NvdW50cyB0aGF0IG5lZWQgZGVwcm92aXNpb25pbmdcbiAgY29uc3QgZW1wbG95ZWVzV2l0aEFjdGl2ZUFjY291bnRzID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN0YXR1czogeyBpbjogc3RhdHVzZXMgfSxcbiAgICAgIGFwcEFjY291bnRzOiB7IHNvbWU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBhcHBBY2NvdW50czoge1xuICAgICAgICB3aGVyZTogeyBzdGF0dXM6ICdBQ1RJVkUnIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgYXBwOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHlwZTogdHJ1ZSB9IH0gfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0YWtlOiA1MCxcbiAgfSlcblxuICBpZiAoZW1wbG95ZWVzV2l0aEFjdGl2ZUFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdvaycsXG4gICAgICBkYXRhOiB7IGFmZmVjdGVkQ291bnQ6IDAgfSxcbiAgICAgIG1lc3NhZ2U6ICdObyBlbXBsb3llZXMgZm91bmQgd2l0aCBhY3RpdmUgYXBwIGFjY291bnRzIHRoYXQgbmVlZCBkZXByb3Zpc2lvbmluZy4nLFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHByZXZpZXcgPSB7XG4gICAgYWN0aW9uOiAnYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3MnLFxuICAgIGFmZmVjdGVkQ291bnQ6IGVtcGxveWVlc1dpdGhBY3RpdmVBY2NvdW50cy5sZW5ndGgsXG4gICAgaXRlbXM6IGVtcGxveWVlc1dpdGhBY3RpdmVBY2NvdW50cy5tYXAoKGU6IGFueSkgPT4gKHtcbiAgICAgIGlkOiBlLmlkLFxuICAgICAgbmFtZTogZS5mdWxsTmFtZSxcbiAgICAgIHN0YXR1czogZS5zdGF0dXMsXG4gICAgICBhY3RpdmVBcHBzOiBlLmFwcEFjY291bnRzLm1hcCgoYTogYW55KSA9PiBhLmFwcC5uYW1lKSxcbiAgICB9KSksXG4gIH1cblxuICAvLyBEcnkgcnVuIG1vZGVcbiAgaWYgKGRyeVJ1biB8fCAoIWRyeVJ1biAmJiAhYXBwcm92YWxUb2tlbikpIHtcbiAgICBjb25zdCB7IGdldE9yZ2FuaXphdGlvbiB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9vcmdhbml6YXRpb24nKVxuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG5cbiAgICBjb25zdCBwbGFuID0gYXdhaXQgY3JlYXRlQXBwcm92YWxQbGFuKGN0eCwgJ2J1bGtfZGVwcm92aXNpb25fYWNjZXNzJywgcHJldmlldywgb3JnYW5pemF0aW9uLmlkKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2NvbmZpcm1hdGlvbl9yZXF1aXJlZCcsXG4gICAgICBzdW1tYXJ5OiBgUmVhZHkgdG8gZGVwcm92aXNpb24gYWNjZXNzIGZvciAke2VtcGxveWVlc1dpdGhBY3RpdmVBY2NvdW50cy5sZW5ndGh9IGVtcGxveWVlKHMpLiBFeHBpcmVzIGluIDE1IG1pbnV0ZXMuYCxcbiAgICAgIG1lc3NhZ2U6IGAqKlByZXZpZXc6KipcXG4ke2VtcGxveWVlc1dpdGhBY3RpdmVBY2NvdW50cy5tYXAoKGU6IGFueSkgPT4gYC0gJHtlLmZ1bGxOYW1lfTogJHtlLmFwcEFjY291bnRzLmxlbmd0aH0gYWN0aXZlIGFwcChzKWApLmpvaW4oJ1xcbicpfVxcblxcblRvIGV4ZWN1dGUsIGNhbGwgYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3Mgd2l0aCBhcHByb3ZhbFRva2VuPVwiJHtwbGFuLnBsYW5JZH1cImAsXG4gICAgICBkYXRhOiB7IHBsYW5JZDogcGxhbi5wbGFuSWQsIHByZXZpZXcsIGV4cGlyZXNBdDogcGxhbi5leHBpcmVzQXQgfSxcbiAgICB9XG4gIH1cblxuICAvLyBFeGVjdXRlIHdpdGggYXBwcm92YWwgdG9rZW5cbiAgY29uc3QgYXBwcm92YWwgPSBhd2FpdCB2YWxpZGF0ZUFuZENvbnN1bWVBcHByb3ZhbChjdHgsIGFwcHJvdmFsVG9rZW4sICdidWxrX2RlcHJvdmlzaW9uX2FjY2VzcycpXG4gIGlmICghYXBwcm92YWwudmFsaWQpIHtcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGFwcHJvdmFsLmVycm9yISB9XG4gIH1cblxuICBjb25zdCB7IGRlcHJvdmlzaW9uRW1wbG95ZWVGcm9tQWxsQXBwcyB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9pbnRlZ3JhdGlvbnMnKVxuXG4gIGNvbnN0IHJlc3VsdHM6IEFycmF5PHsgZW1wbG95ZWVJZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHN1Y2Nlc3M6IGJvb2xlYW47IGFwcHNEZXByb3Zpc2lvbmVkOiBudW1iZXI7IGVycm9yPzogc3RyaW5nIH0+ID0gW11cblxuICBmb3IgKGNvbnN0IGVtcCBvZiBlbXBsb3llZXNXaXRoQWN0aXZlQWNjb3VudHMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGVwcm92aXNpb25FbXBsb3llZUZyb21BbGxBcHBzKGVtcCwgY3R4LnVzZXIuaWQpXG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBlbXBsb3llZUlkOiBlbXAuaWQsXG4gICAgICAgIG5hbWU6IGVtcC5mdWxsTmFtZSxcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXG4gICAgICAgIGFwcHNEZXByb3Zpc2lvbmVkOiByZXN1bHQucmVzdWx0cz8uZmlsdGVyKChyOiBhbnkpID0+IHIuc3VjY2VzcykubGVuZ3RoIHx8IDAsXG4gICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICBlbXBsb3llZUlkOiBlbXAuaWQsXG4gICAgICAgIG5hbWU6IGVtcC5mdWxsTmFtZSxcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGFwcHNEZXByb3Zpc2lvbmVkOiAwLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN1Y2Nlc3NmdWwgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5zdWNjZXNzKS5sZW5ndGhcbiAgY29uc3QgZmFpbGVkID0gcmVzdWx0cy5maWx0ZXIoKHIpID0+ICFyLnN1Y2Nlc3MpLmxlbmd0aFxuICBjb25zdCB0b3RhbEFwcHNEZXByb3Zpc2lvbmVkID0gcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5hcHBzRGVwcm92aXNpb25lZCwgMClcblxuICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgYWN0b3JJZDogY3R4LnVzZXIuaWQsXG4gICAgYWN0aW9uOiAnQVNTSVNUQU5UX0FDVElPTicsXG4gICAgcmVzb3VyY2VUeXBlOiAnYnVsa19vcGVyYXRpb24nLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b29sOiAnYnVsa19kZXByb3Zpc2lvbl9hY2Nlc3MnLFxuICAgICAgdG90YWxBdHRlbXB0ZWQ6IHJlc3VsdHMubGVuZ3RoLFxuICAgICAgc3VjY2Vzc2Z1bCxcbiAgICAgIGZhaWxlZCxcbiAgICAgIHRvdGFsQXBwc0RlcHJvdmlzaW9uZWQsXG4gICAgICBhc3Npc3RhbnRJbml0aWF0ZWQ6IHRydWUsXG4gICAgfSxcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHN0YXR1czogJ29rJyxcbiAgICBkYXRhOiB7IHJlc3VsdHMsIHN1Y2Nlc3NmdWwsIGZhaWxlZCwgdG90YWxBcHBzRGVwcm92aXNpb25lZCB9LFxuICAgIG1lc3NhZ2U6IGBCdWxrIGRlcHJvdmlzaW9uaW5nIGNvbXBsZXRlZDogJHtzdWNjZXNzZnVsfSBlbXBsb3llZXMgcHJvY2Vzc2VkICgke2ZhaWxlZH0gZmFpbGVkKSwgJHt0b3RhbEFwcHNEZXByb3Zpc2lvbmVkfSBhcHAocykgZGVwcm92aXNpb25lZC5gLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBSSBQUk9WSURFUiBBQlNUUkFDVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIEFJQ2xpZW50IHtcbiAgY2hhdChtZXNzYWdlczogTWVzc2FnZVtdLCB0b29sczogdHlwZW9mIFRPT0xfREVGSU5JVElPTlMpOiBQcm9taXNlPHtcbiAgICBjb250ZW50OiBzdHJpbmcgfCBudWxsXG4gICAgdG9vbENhbGxzPzogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IGFyZ3VtZW50czogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfT5cbiAgICBmaW5pc2hSZWFzb246IHN0cmluZ1xuICB9PlxufVxuXG5jb25zdCBPUEVOQUlfTU9ERUxfRVhDTFVERV9UT0tFTlMgPSBbJ2F1ZGlvJywgJ3JlYWx0aW1lJywgJ3RyYW5zY3JpYmUnLCAndHJhbnNsYXRlJywgJ2VtYmVkZGluZ3MnLCAnaW5zdHJ1Y3QnLCAndHRzJ11cblxuY29uc3QgaXNPcGVuQUlDaGF0TW9kZWwgPSAoaWQ6IHN0cmluZykgPT5cbiAgaWQuc3RhcnRzV2l0aCgnZ3B0LScpICYmICFPUEVOQUlfTU9ERUxfRVhDTFVERV9UT0tFTlMuc29tZSgodG9rZW4pID0+IGlkLmluY2x1ZGVzKHRva2VuKSlcblxuY29uc3Qgbm9ybWFsaXplTW9kZWxMYWJlbCA9IChpZDogc3RyaW5nKSA9PiBpZFxuXG5hc3luYyBmdW5jdGlvbiBsaXN0T3BlbkFJTW9kZWxzKGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxNb2RlbE9wdGlvbltdPiB7XG4gIGNvbnN0IHsgZGVmYXVsdDogT3BlbkFJIH0gPSBhd2FpdCBpbXBvcnQoJ29wZW5haScpXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBPcGVuQUkoeyBhcGlLZXkgfSlcbiAgY29uc3QgbW9kZWxzOiBBcnJheTx7IGlkOiBzdHJpbmc7IGNyZWF0ZWQ/OiBudW1iZXIgfT4gPSBbXVxuXG4gIGZvciBhd2FpdCAoY29uc3QgbW9kZWwgb2YgY2xpZW50Lm1vZGVscy5saXN0KCkpIHtcbiAgICBtb2RlbHMucHVzaChtb2RlbClcbiAgfVxuXG4gIHJldHVybiBtb2RlbHNcbiAgICAuZmlsdGVyKChtb2RlbDogeyBpZDogc3RyaW5nIH0pID0+IGlzT3BlbkFJQ2hhdE1vZGVsKG1vZGVsLmlkKSlcbiAgICAuc29ydCgoYTogeyBjcmVhdGVkPzogbnVtYmVyIH0sIGI6IHsgY3JlYXRlZD86IG51bWJlciB9KSA9PiAoYi5jcmVhdGVkID8/IDApIC0gKGEuY3JlYXRlZCA/PyAwKSlcbiAgICAubWFwKChtb2RlbDogeyBpZDogc3RyaW5nIH0pID0+ICh7XG4gICAgICBpZDogbW9kZWwuaWQsXG4gICAgICBsYWJlbDogbm9ybWFsaXplTW9kZWxMYWJlbChtb2RlbC5pZCksXG4gICAgfSkpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RBbnRocm9waWNNb2RlbHMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPE1vZGVsT3B0aW9uW10+IHtcbiAgY29uc3QgeyBkZWZhdWx0OiBBbnRocm9waWMgfSA9IGF3YWl0IGltcG9ydCgnQGFudGhyb3BpYy1haS9zZGsnKVxuICBjb25zdCBjbGllbnQgPSBuZXcgQW50aHJvcGljKHsgYXBpS2V5IH0pXG4gIGNvbnN0IG1vZGVsczogQXJyYXk8eyBpZDogc3RyaW5nOyBjcmVhdGVkX2F0Pzogc3RyaW5nOyBkaXNwbGF5X25hbWU/OiBzdHJpbmcgfT4gPSBbXVxuXG4gIGZvciBhd2FpdCAoY29uc3QgbW9kZWwgb2YgY2xpZW50Lm1vZGVscy5saXN0KCkpIHtcbiAgICBtb2RlbHMucHVzaChtb2RlbClcbiAgfVxuXG4gIHJldHVybiBtb2RlbHNcbiAgICAuZmlsdGVyKChtb2RlbDogeyBpZDogc3RyaW5nIH0pID0+IG1vZGVsLmlkLnN0YXJ0c1dpdGgoJ2NsYXVkZS0nKSlcbiAgICAuc29ydCgoYTogeyBjcmVhdGVkX2F0Pzogc3RyaW5nIH0sIGI6IHsgY3JlYXRlZF9hdD86IHN0cmluZyB9KSA9PiB7XG4gICAgICBjb25zdCBhVGltZSA9IGEuY3JlYXRlZF9hdCA/IG5ldyBEYXRlKGEuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIDogMFxuICAgICAgY29uc3QgYlRpbWUgPSBiLmNyZWF0ZWRfYXQgPyBuZXcgRGF0ZShiLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSA6IDBcbiAgICAgIHJldHVybiBiVGltZSAtIGFUaW1lXG4gICAgfSlcbiAgICAubWFwKChtb2RlbDogeyBpZDogc3RyaW5nOyBkaXNwbGF5X25hbWU/OiBzdHJpbmcgfSkgPT4gKHtcbiAgICAgIGlkOiBtb2RlbC5pZCxcbiAgICAgIGxhYmVsOiBtb2RlbC5kaXNwbGF5X25hbWUgfHwgbW9kZWwuaWQsXG4gICAgfSkpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RHZW1pbmlNb2RlbHMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPE1vZGVsT3B0aW9uW10+IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscycpXG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdrZXknLCBhcGlLZXkpXG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwudG9TdHJpbmcoKSwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleSxcbiAgICB9LFxuICB9KVxuXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBsb2FkIEdlbWluaSBtb2RlbHMuJylcbiAgfVxuXG4gIGNvbnN0IHBheWxvYWQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyB7XG4gICAgbW9kZWxzPzogQXJyYXk8e1xuICAgICAgbmFtZT86IHN0cmluZ1xuICAgICAgZGlzcGxheU5hbWU/OiBzdHJpbmdcbiAgICAgIHN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzPzogc3RyaW5nW11cbiAgICB9PlxuICB9XG5cbiAgY29uc3QgbW9kZWxzID0gcGF5bG9hZC5tb2RlbHMgPz8gW11cblxuICByZXR1cm4gbW9kZWxzXG4gICAgLmZpbHRlcigobW9kZWwpID0+IChtb2RlbC5zdXBwb3J0ZWRHZW5lcmF0aW9uTWV0aG9kcyA/PyBbXSkuaW5jbHVkZXMoJ2dlbmVyYXRlQ29udGVudCcpKVxuICAgIC5tYXAoKG1vZGVsKSA9PiB7XG4gICAgICBjb25zdCByYXdOYW1lID0gbW9kZWwubmFtZSB8fCAnJ1xuICAgICAgY29uc3QgaWQgPSByYXdOYW1lLnJlcGxhY2UoL15tb2RlbHNcXC8vLCAnJylcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkLFxuICAgICAgICBsYWJlbDogbW9kZWwuZGlzcGxheU5hbWUgfHwgaWQsXG4gICAgICB9XG4gICAgfSlcbiAgICAuZmlsdGVyKChtb2RlbCkgPT4gbW9kZWwuaWQpXG59XG5cbmNvbnN0IE9QRU5BSV9NQVhfQ09NUExFVElPTl9UT0tFTl9NT0RFTFMgPSBbL15ncHQtNS9pLCAvXm9cXGQvaV1cbmNvbnN0IE9QRU5BSV9GSVhFRF9URU1QRVJBVFVSRV9NT0RFTFMgPSBbL15ncHQtNS9pLCAvXm9cXGQvaV1cblxuY29uc3QgdXNlc01heENvbXBsZXRpb25Ub2tlbnMgPSAobW9kZWxJZDogc3RyaW5nKSA9PlxuICBPUEVOQUlfTUFYX0NPTVBMRVRJT05fVE9LRU5fTU9ERUxTLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtb2RlbElkKSlcblxuY29uc3QgdXNlc0ZpeGVkVGVtcGVyYXR1cmUgPSAobW9kZWxJZDogc3RyaW5nKSA9PlxuICBPUEVOQUlfRklYRURfVEVNUEVSQVRVUkVfTU9ERUxTLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChtb2RlbElkKSlcblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3BlbkFJQ2xpZW50KGFwaUtleTogc3RyaW5nLCBtb2RlbDogc3RyaW5nKTogUHJvbWlzZTxBSUNsaWVudD4ge1xuICBjb25zdCB7IGRlZmF1bHQ6IE9wZW5BSSB9ID0gYXdhaXQgaW1wb3J0KCdvcGVuYWknKVxuICBjb25zdCBjbGllbnQgPSBuZXcgT3BlbkFJKHsgYXBpS2V5IH0pXG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyBjaGF0KG1lc3NhZ2VzLCB0b29scykge1xuICAgICAgY29uc3QgdG9rZW5QYXJhbXMgPSB1c2VzTWF4Q29tcGxldGlvblRva2Vucyhtb2RlbClcbiAgICAgICAgPyB7IG1heF9jb21wbGV0aW9uX3Rva2VuczogMTAyNCB9XG4gICAgICAgIDogeyBtYXhfdG9rZW5zOiAxMDI0IH1cblxuICAgICAgY29uc3Qgc2FtcGxpbmdQYXJhbXMgPSB1c2VzRml4ZWRUZW1wZXJhdHVyZShtb2RlbCkgPyB7fSA6IHsgdGVtcGVyYXR1cmU6IDAuNyB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbW9kZWwsXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcy5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgcm9sZTogbS5yb2xlIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbScsXG4gICAgICAgICAgY29udGVudDogbS5jb250ZW50LFxuICAgICAgICB9KSksXG4gICAgICAgIHRvb2xzLFxuICAgICAgICB0b29sX2Nob2ljZTogJ2F1dG8nLFxuICAgICAgICAuLi5zYW1wbGluZ1BhcmFtcyxcbiAgICAgICAgLi4udG9rZW5QYXJhbXMsXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBjaG9pY2UgPSByZXNwb25zZS5jaG9pY2VzWzBdXG4gICAgICBjb25zdCB0b29sQ2FsbHMgPSBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzPy5tYXAoKHRjOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiB0Yy5pZCxcbiAgICAgICAgbmFtZTogdGMuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBKU09OLnBhcnNlKHRjLmZ1bmN0aW9uLmFyZ3VtZW50cyksXG4gICAgICB9KSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudDogY2hvaWNlLm1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgdG9vbENhbGxzLFxuICAgICAgICBmaW5pc2hSZWFzb246IGNob2ljZS5maW5pc2hfcmVhc29uIHx8ICdzdG9wJyxcbiAgICAgIH1cbiAgICB9LFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFudGhyb3BpY0NsaWVudChhcGlLZXk6IHN0cmluZywgbW9kZWw6IHN0cmluZyk6IFByb21pc2U8QUlDbGllbnQ+IHtcbiAgY29uc3QgeyBkZWZhdWx0OiBBbnRocm9waWMgfSA9IGF3YWl0IGltcG9ydCgnQGFudGhyb3BpYy1haS9zZGsnKVxuICBjb25zdCBjbGllbnQgPSBuZXcgQW50aHJvcGljKHsgYXBpS2V5IH0pXG5cbiAgLy8gQ29udmVydCBPcGVuQUkgdG9vbCBmb3JtYXQgdG8gQW50aHJvcGljIGZvcm1hdFxuICBjb25zdCBjb252ZXJ0VG9vbHMgPSAodG9vbHM6IHR5cGVvZiBUT09MX0RFRklOSVRJT05TKSA9PlxuICAgIHRvb2xzLm1hcCgodCkgPT4gKHtcbiAgICAgIG5hbWU6IHQuZnVuY3Rpb24ubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0LmZ1bmN0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgaW5wdXRfc2NoZW1hOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnIGFzIGNvbnN0LFxuICAgICAgICBwcm9wZXJ0aWVzOiB0LmZ1bmN0aW9uLnBhcmFtZXRlcnMucHJvcGVydGllcyxcbiAgICAgICAgcmVxdWlyZWQ6IHQuZnVuY3Rpb24ucGFyYW1ldGVycy5yZXF1aXJlZCxcbiAgICAgIH0sXG4gICAgfSkpXG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyBjaGF0KG1lc3NhZ2VzLCB0b29scykge1xuICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZSA9IG1lc3NhZ2VzLmZpbmQoKG0pID0+IG0ucm9sZSA9PT0gJ3N5c3RlbScpXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIoKG0pID0+IG0ucm9sZSAhPT0gJ3N5c3RlbScpXG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICBtYXhfdG9rZW5zOiAxMDI0LFxuICAgICAgICBzeXN0ZW06IHN5c3RlbU1lc3NhZ2U/LmNvbnRlbnQgfHwgU1lTVEVNX1BST01QVCxcbiAgICAgICAgbWVzc2FnZXM6IGNoYXRNZXNzYWdlcy5tYXAoKG0pID0+ICh7XG4gICAgICAgICAgcm9sZTogbS5yb2xlIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxuICAgICAgICAgIGNvbnRlbnQ6IG0uY29udGVudCxcbiAgICAgICAgfSkpLFxuICAgICAgICB0b29sczogY29udmVydFRvb2xzKHRvb2xzKSBhcyBhbnksXG4gICAgICB9KVxuXG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IHJlc3BvbnNlLmNvbnRlbnQuZmluZCgoYykgPT4gYy50eXBlID09PSAndGV4dCcpXG4gICAgICBjb25zdCB0b29sVXNlcyA9IHJlc3BvbnNlLmNvbnRlbnQuZmlsdGVyKChjKSA9PiBjLnR5cGUgPT09ICd0b29sX3VzZScpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnQ6IHRleHRDb250ZW50ICYmIHRleHRDb250ZW50LnR5cGUgPT09ICd0ZXh0JyA/IHRleHRDb250ZW50LnRleHQgOiBudWxsLFxuICAgICAgICB0b29sQ2FsbHM6IHRvb2xVc2VzLm1hcCgodHUpID0+IHtcbiAgICAgICAgICBpZiAodHUudHlwZSAhPT0gJ3Rvb2xfdXNlJykgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGNvbnRlbnQgdHlwZScpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0dS5pZCxcbiAgICAgICAgICAgIG5hbWU6IHR1Lm5hbWUsXG4gICAgICAgICAgICBhcmd1bWVudHM6IHR1LmlucHV0IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZpbmlzaFJlYXNvbjogcmVzcG9uc2Uuc3RvcF9yZWFzb24gfHwgJ2VuZF90dXJuJyxcbiAgICAgIH1cbiAgICB9LFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdlbWluaUNsaWVudChhcGlLZXk6IHN0cmluZywgbW9kZWw6IHN0cmluZyk6IFByb21pc2U8QUlDbGllbnQ+IHtcbiAgY29uc3QgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSA9IGF3YWl0IGltcG9ydCgnQGdvb2dsZS9nZW5lcmF0aXZlLWFpJylcbiAgY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKGFwaUtleSlcblxuICAvLyBDb252ZXJ0IE9wZW5BSSB0b29sIGZvcm1hdCB0byBHZW1pbmkgZm9ybWF0XG4gIGNvbnN0IGNvbnZlcnRUb29scyA9ICh0b29sczogdHlwZW9mIFRPT0xfREVGSU5JVElPTlMpOiBhbnlbXSA9PiBbXG4gICAge1xuICAgICAgZnVuY3Rpb25EZWNsYXJhdGlvbnM6IHRvb2xzLm1hcCgodCkgPT4gKHtcbiAgICAgICAgbmFtZTogdC5mdW5jdGlvbi5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogdC5mdW5jdGlvbi5kZXNjcmlwdGlvbixcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdPQkpFQ1QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHQuZnVuY3Rpb24ucGFyYW1ldGVycy5wcm9wZXJ0aWVzLFxuICAgICAgICAgIHJlcXVpcmVkOiB0LmZ1bmN0aW9uLnBhcmFtZXRlcnMucmVxdWlyZWQgfHwgW10sXG4gICAgICAgIH0sXG4gICAgICB9KSksXG4gICAgfSxcbiAgXVxuXG4gIHJldHVybiB7XG4gICAgYXN5bmMgY2hhdChtZXNzYWdlcywgdG9vbHMpIHtcbiAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSBtZXNzYWdlcy5maW5kKChtKSA9PiBtLnJvbGUgPT09ICdzeXN0ZW0nKVxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKChtKSA9PiBtLnJvbGUgIT09ICdzeXN0ZW0nKVxuXG4gICAgICBjb25zdCBnZW1pbmlNb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7XG4gICAgICAgIG1vZGVsLFxuICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogc3lzdGVtTWVzc2FnZT8uY29udGVudCB8fCBTWVNURU1fUFJPTVBULFxuICAgICAgICB0b29sczogY29udmVydFRvb2xzKHRvb2xzKSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGNoYXQgPSBnZW1pbmlNb2RlbC5zdGFydENoYXQoe1xuICAgICAgICBoaXN0b3J5OiBjaGF0TWVzc2FnZXMuc2xpY2UoMCwgLTEpLm1hcCgobSkgPT4gKHtcbiAgICAgICAgICByb2xlOiBtLnJvbGUgPT09ICdhc3Npc3RhbnQnID8gJ21vZGVsJyA6ICd1c2VyJyxcbiAgICAgICAgICBwYXJ0czogW3sgdGV4dDogbS5jb250ZW50IH1dLFxuICAgICAgICB9KSksXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IGNoYXRNZXNzYWdlc1tjaGF0TWVzc2FnZXMubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYXQuc2VuZE1lc3NhZ2UobGFzdE1lc3NhZ2UuY29udGVudClcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzdWx0LnJlc3BvbnNlXG5cbiAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbHMgPSByZXNwb25zZS5mdW5jdGlvbkNhbGxzKClcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudDogdGV4dCB8fCBudWxsLFxuICAgICAgICB0b29sQ2FsbHM6IGZ1bmN0aW9uQ2FsbHM/Lm1hcCgoZmMsIGlkeCkgPT4gKHtcbiAgICAgICAgICBpZDogYGNhbGxfJHtpZHh9YCxcbiAgICAgICAgICBuYW1lOiBmYy5uYW1lLFxuICAgICAgICAgIGFyZ3VtZW50czogZmMuYXJncyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgICAgICAgfSkpLFxuICAgICAgICBmaW5pc2hSZWFzb246ICdzdG9wJyxcbiAgICAgIH1cbiAgICB9LFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEFJQ2xpZW50KHNldHRpbmdzOiB7XG4gIHByb3ZpZGVyOiBBSVByb3ZpZGVyXG4gIG9wZW5haUtleUVuY3J5cHRlZD86IHN0cmluZyB8IG51bGxcbiAgYW50aHJvcGljS2V5RW5jcnlwdGVkPzogc3RyaW5nIHwgbnVsbFxuICBnZW1pbmlLZXlFbmNyeXB0ZWQ/OiBzdHJpbmcgfCBudWxsXG4gIG9wZW5haU1vZGVsOiBzdHJpbmdcbiAgYW50aHJvcGljTW9kZWw6IHN0cmluZ1xuICBnZW1pbmlNb2RlbDogc3RyaW5nXG59KTogUHJvbWlzZTxBSUNsaWVudD4ge1xuICBzd2l0Y2ggKHNldHRpbmdzLnByb3ZpZGVyKSB7XG4gICAgY2FzZSAnT1BFTkFJJzoge1xuICAgICAgaWYgKCFzZXR0aW5ncy5vcGVuYWlLZXlFbmNyeXB0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgQVBJIGtleSBub3QgY29uZmlndXJlZC4gR28gdG8gU2V0dGluZ3MgPiBCbHVlIEFJIHRvIGFkZCB5b3VyIEFQSSBrZXkuJylcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFwaUtleSA9IGRlY3J5cHQoc2V0dGluZ3Mub3BlbmFpS2V5RW5jcnlwdGVkKVxuICAgICAgcmV0dXJuIGNyZWF0ZU9wZW5BSUNsaWVudChhcGlLZXksIHNldHRpbmdzLm9wZW5haU1vZGVsKVxuICAgIH1cbiAgICBjYXNlICdBTlRIUk9QSUMnOiB7XG4gICAgICBpZiAoIXNldHRpbmdzLmFudGhyb3BpY0tleUVuY3J5cHRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FudGhyb3BpYyBBUEkga2V5IG5vdCBjb25maWd1cmVkLiBHbyB0byBTZXR0aW5ncyA+IEJsdWUgQUkgdG8gYWRkIHlvdXIgQVBJIGtleS4nKVxuICAgICAgfVxuICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdChzZXR0aW5ncy5hbnRocm9waWNLZXlFbmNyeXB0ZWQpXG4gICAgICByZXR1cm4gY3JlYXRlQW50aHJvcGljQ2xpZW50KGFwaUtleSwgc2V0dGluZ3MuYW50aHJvcGljTW9kZWwpXG4gICAgfVxuICAgIGNhc2UgJ0dFTUlOSSc6IHtcbiAgICAgIGlmICghc2V0dGluZ3MuZ2VtaW5pS2V5RW5jcnlwdGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2VtaW5pIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQuIEdvIHRvIFNldHRpbmdzID4gQmx1ZSBBSSB0byBhZGQgeW91ciBBUEkga2V5LicpXG4gICAgICB9XG4gICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0KHNldHRpbmdzLmdlbWluaUtleUVuY3J5cHRlZClcbiAgICAgIHJldHVybiBjcmVhdGVHZW1pbmlDbGllbnQoYXBpS2V5LCBzZXR0aW5ncy5nZW1pbmlNb2RlbClcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBBSSBwcm92aWRlcjogJHtzZXR0aW5ncy5wcm92aWRlcn1gKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBST1VURVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBhc3Npc3RhbnRSb3V0ZXIgPSByb3V0ZXIoe1xuICAvLyBDaGF0IGhpc3RvcnlcbiAgbGlzdENoYXRzOiBhZG1pblByb2NlZHVyZS5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IGFpQ2hhdHMgPSBnZXRBSUNoYXREZWxlZ2F0ZShjdHgpXG4gICAgY29uc3QgY2hhdHMgPSBhd2FpdCBhaUNoYXRzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgIG9yZGVyQnk6IHsgdXBkYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgdGFrZTogMSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIHJldHVybiBjaGF0cy5tYXAoKGNoYXQpID0+ICh7XG4gICAgICBpZDogY2hhdC5pZCxcbiAgICAgIHRpdGxlOiBjaGF0LnRpdGxlLFxuICAgICAgdXBkYXRlZEF0OiBjaGF0LnVwZGF0ZWRBdCxcbiAgICAgIGxhc3RNZXNzYWdlOiBjaGF0Lm1lc3NhZ2VzWzBdXG4gICAgICAgID8ge1xuICAgICAgICAgICAgY29udGVudDogY2hhdC5tZXNzYWdlc1swXS5jb250ZW50LFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjaGF0Lm1lc3NhZ2VzWzBdLmNyZWF0ZWRBdCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICB9KSlcbiAgfSksXG5cbiAgZ2V0Q2hhdDogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBhaUNoYXRzID0gZ2V0QUlDaGF0RGVsZWdhdGUoY3R4KVxuICAgICAgY29uc3QgY2hhdCA9IGF3YWl0IGFpQ2hhdHMuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmlkLCB1c2VySWQ6IGN0eC51c2VyLmlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdhc2MnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghY2hhdCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdDaGF0IG5vdCBmb3VuZC4nIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBjaGF0LmlkLFxuICAgICAgICB0aXRsZTogY2hhdC50aXRsZSxcbiAgICAgICAgY3JlYXRlZEF0OiBjaGF0LmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBjaGF0LnVwZGF0ZWRBdCxcbiAgICAgICAgbWVzc2FnZXM6IGNoYXQubWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiAoe1xuICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgIHJvbGU6IG1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgaXNFcnJvcjogbWVzc2FnZS5pc0Vycm9yLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbWVzc2FnZS5jcmVhdGVkQXQsXG4gICAgICAgIH0pKSxcbiAgICAgIH1cbiAgICB9KSxcblxuICBjcmVhdGVDaGF0OiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHRpdGxlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgYWlDaGF0cyA9IGdldEFJQ2hhdERlbGVnYXRlKGN0eClcbiAgICAgIGNvbnN0IGNoYXQgPSBhd2FpdCBhaUNoYXRzLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgICAgIHRpdGxlOiBpbnB1dC50aXRsZT8udHJpbSgpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBjaGF0LmlkLFxuICAgICAgICB0aXRsZTogY2hhdC50aXRsZSxcbiAgICAgICAgY3JlYXRlZEF0OiBjaGF0LmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBjaGF0LnVwZGF0ZWRBdCxcbiAgICAgIH1cbiAgICB9KSxcblxuICBhZGRNZXNzYWdlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgY2hhdElkOiB6LnN0cmluZygpLFxuICAgICAgICByb2xlOiB6LmVudW0oWydVU0VSJywgJ0FTU0lTVEFOVCddKSxcbiAgICAgICAgY29udGVudDogei5zdHJpbmcoKSxcbiAgICAgICAgaXNFcnJvcjogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGl0bGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGFpQ2hhdHMgPSBnZXRBSUNoYXREZWxlZ2F0ZShjdHgpXG4gICAgICBjb25zdCBhaU1lc3NhZ2VzID0gZ2V0QUlDaGF0TWVzc2FnZURlbGVnYXRlKGN0eClcbiAgICAgIGNvbnN0IGNoYXQgPSBhd2FpdCBhaUNoYXRzLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5jaGF0SWQsIHVzZXJJZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghY2hhdCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdDaGF0IG5vdCBmb3VuZC4nIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBhaU1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjaGF0SWQ6IGlucHV0LmNoYXRJZCxcbiAgICAgICAgICByb2xlOiBpbnB1dC5yb2xlLFxuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LmNvbnRlbnQsXG4gICAgICAgICAgaXNFcnJvcjogaW5wdXQuaXNFcnJvciA/PyBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRDaGF0ID0gYXdhaXQgYWlDaGF0cy51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuY2hhdElkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0aXRsZTogaW5wdXQudGl0bGU/LnRyaW0oKSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2hhdElkOiB1cGRhdGVkQ2hhdC5pZCxcbiAgICAgICAgdXBkYXRlZEF0OiB1cGRhdGVkQ2hhdC51cGRhdGVkQXQsXG4gICAgICAgIHRpdGxlOiB1cGRhdGVkQ2hhdC50aXRsZSxcbiAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgIHJvbGU6IG1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgaXNFcnJvcjogbWVzc2FnZS5pc0Vycm9yLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbWVzc2FnZS5jcmVhdGVkQXQsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gR2V0IG9yIGNyZWF0ZSBBSSBzZXR0aW5nc1xuICBnZXRTZXR0aW5nczogYWRtaW5Qcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBjb25zdCBhaVNldHRpbmdzID0gZ2V0QUlTZXR0aW5nc0RlbGVnYXRlKGN0eClcbiAgICBsZXQgc2V0dGluZ3MgPSBhd2FpdCBhaVNldHRpbmdzLmZpbmRGaXJzdCgpXG5cbiAgICBpZiAoIXNldHRpbmdzKSB7XG4gICAgICBzZXR0aW5ncyA9IGF3YWl0IGFpU2V0dGluZ3MuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge30sXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJldHVybiBzZXR0aW5ncyB3aXRob3V0IGV4cG9zaW5nIHJhdyBrZXlzXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBzZXR0aW5ncy5pZCxcbiAgICAgIHByb3ZpZGVyOiBzZXR0aW5ncy5wcm92aWRlcixcbiAgICAgIG9wZW5haU1vZGVsOiBzZXR0aW5ncy5vcGVuYWlNb2RlbCxcbiAgICAgIGFudGhyb3BpY01vZGVsOiBzZXR0aW5ncy5hbnRocm9waWNNb2RlbCxcbiAgICAgIGdlbWluaU1vZGVsOiBzZXR0aW5ncy5nZW1pbmlNb2RlbCxcbiAgICAgIGlzRW5hYmxlZDogc2V0dGluZ3MuaXNFbmFibGVkLFxuICAgICAgcmVxdWlyZUNvbmZpcm1hdGlvbjogc2V0dGluZ3MucmVxdWlyZUNvbmZpcm1hdGlvbixcbiAgICAgIGhhc09wZW5haUtleTogISFzZXR0aW5ncy5vcGVuYWlLZXlFbmNyeXB0ZWQsXG4gICAgICBoYXNBbnRocm9waWNLZXk6ICEhc2V0dGluZ3MuYW50aHJvcGljS2V5RW5jcnlwdGVkLFxuICAgICAgaGFzR2VtaW5pS2V5OiAhIXNldHRpbmdzLmdlbWluaUtleUVuY3J5cHRlZCxcbiAgICB9XG4gIH0pLFxuXG4gIC8vIFVwZGF0ZSBBSSBzZXR0aW5nc1xuICB1cGRhdGVTZXR0aW5nczogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb3ZpZGVyOiB6LmVudW0oWydPUEVOQUknLCAnQU5USFJPUElDJywgJ0dFTUlOSSddKS5vcHRpb25hbCgpLFxuICAgICAgICBvcGVuYWlLZXk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgYW50aHJvcGljS2V5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGdlbWluaUtleTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvcGVuYWlNb2RlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBhbnRocm9waWNNb2RlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBnZW1pbmlNb2RlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBpc0VuYWJsZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlcXVpcmVDb25maXJtYXRpb246IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBhaVNldHRpbmdzID0gZ2V0QUlTZXR0aW5nc0RlbGVnYXRlKGN0eClcbiAgICAgIGxldCBzZXR0aW5ncyA9IGF3YWl0IGFpU2V0dGluZ3MuZmluZEZpcnN0KClcblxuICAgICAgY29uc3QgdXBkYXRlRGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuXG4gICAgICBpZiAoaW5wdXQucHJvdmlkZXIpIHVwZGF0ZURhdGEucHJvdmlkZXIgPSBpbnB1dC5wcm92aWRlclxuICAgICAgaWYgKGlucHV0Lm9wZW5haUtleT8udHJpbSgpKSB1cGRhdGVEYXRhLm9wZW5haUtleUVuY3J5cHRlZCA9IGVuY3J5cHRLZXlPclRocm93KGlucHV0Lm9wZW5haUtleSlcbiAgICAgIGlmIChpbnB1dC5hbnRocm9waWNLZXk/LnRyaW0oKSkgdXBkYXRlRGF0YS5hbnRocm9waWNLZXlFbmNyeXB0ZWQgPSBlbmNyeXB0S2V5T3JUaHJvdyhpbnB1dC5hbnRocm9waWNLZXkpXG4gICAgICBpZiAoaW5wdXQuZ2VtaW5pS2V5Py50cmltKCkpIHVwZGF0ZURhdGEuZ2VtaW5pS2V5RW5jcnlwdGVkID0gZW5jcnlwdEtleU9yVGhyb3coaW5wdXQuZ2VtaW5pS2V5KVxuICAgICAgaWYgKGlucHV0Lm9wZW5haU1vZGVsKSB1cGRhdGVEYXRhLm9wZW5haU1vZGVsID0gaW5wdXQub3BlbmFpTW9kZWxcbiAgICAgIGlmIChpbnB1dC5hbnRocm9waWNNb2RlbCkgdXBkYXRlRGF0YS5hbnRocm9waWNNb2RlbCA9IGlucHV0LmFudGhyb3BpY01vZGVsXG4gICAgICBpZiAoaW5wdXQuZ2VtaW5pTW9kZWwpIHVwZGF0ZURhdGEuZ2VtaW5pTW9kZWwgPSBpbnB1dC5nZW1pbmlNb2RlbFxuICAgICAgaWYgKGlucHV0LmlzRW5hYmxlZCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmlzRW5hYmxlZCA9IGlucHV0LmlzRW5hYmxlZFxuICAgICAgaWYgKGlucHV0LnJlcXVpcmVDb25maXJtYXRpb24gIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5yZXF1aXJlQ29uZmlybWF0aW9uID0gaW5wdXQucmVxdWlyZUNvbmZpcm1hdGlvblxuXG4gICAgICBpZiAoc2V0dGluZ3MpIHtcbiAgICAgICAgc2V0dGluZ3MgPSBhd2FpdCBhaVNldHRpbmdzLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHNldHRpbmdzLmlkIH0sXG4gICAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldHRpbmdzID0gYXdhaXQgYWlTZXR0aW5ncy5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHVwZGF0ZURhdGEsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBzZXR0aW5ncy5pZCxcbiAgICAgICAgcHJvdmlkZXI6IHNldHRpbmdzLnByb3ZpZGVyLFxuICAgICAgICBpc0VuYWJsZWQ6IHNldHRpbmdzLmlzRW5hYmxlZCxcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBNYWluIGNoYXQgZW5kcG9pbnRcbiAgY2hhdDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgbWVzc2FnZXM6IHouYXJyYXkoXG4gICAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgICAgcm9sZTogei5lbnVtKFsndXNlcicsICdhc3Npc3RhbnQnXSksXG4gICAgICAgICAgICBjb250ZW50OiB6LnN0cmluZygpLFxuICAgICAgICAgIH0pXG4gICAgICAgICksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICAvLyBHZXQgQUkgc2V0dGluZ3NcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0QUlTZXR0aW5nc0RlbGVnYXRlKGN0eCkuZmluZEZpcnN0KClcblxuICAgICAgaWYgKCFzZXR0aW5ncyB8fCAhc2V0dGluZ3MuaXNFbmFibGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdQUkVDT05ESVRJT05fRkFJTEVEJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQmx1ZSBBSSBpcyBub3QgZW5hYmxlZC4gR28gdG8gU2V0dGluZ3MgPiBCbHVlIEFJIHRvIGNvbmZpZ3VyZS4nLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgQUkgY2xpZW50XG4gICAgICBjb25zdCBhaUNsaWVudCA9IGF3YWl0IGdldEFJQ2xpZW50KHNldHRpbmdzKVxuXG4gICAgICAvLyBCdWlsZCBtZXNzYWdlcyB3aXRoIHN5c3RlbSBwcm9tcHRcbiAgICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFQgfSxcbiAgICAgICAgLi4uaW5wdXQubWVzc2FnZXMsXG4gICAgICBdXG5cbiAgICAgIC8vIEZpcnN0IEFQSSBjYWxsXG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBhaUNsaWVudC5jaGF0KG1lc3NhZ2VzLCBUT09MX0RFRklOSVRJT05TKVxuICAgICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgICBjb25zdCBtYXhJdGVyYXRpb25zID0gNVxuXG4gICAgICAvLyBUb29sIGV4ZWN1dGlvbiBsb29wXG4gICAgICB3aGlsZSAocmVzcG9uc2UudG9vbENhbGxzICYmIHJlc3BvbnNlLnRvb2xDYWxscy5sZW5ndGggPiAwICYmIGl0ZXJhdGlvbnMgPCBtYXhJdGVyYXRpb25zKSB7XG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuXG4gICAgICAgIC8vIEV4ZWN1dGUgZWFjaCB0b29sIGNhbGxcbiAgICAgICAgY29uc3QgdG9vbFJlc3VsdHM6IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyByZXN1bHQ6IFRvb2xSZXN1bHQgfT4gPSBbXVxuXG4gICAgICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgcmVzcG9uc2UudG9vbENhbGxzKSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVRvb2woXG4gICAgICAgICAgICB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgdG9vbENhbGwuYXJndW1lbnRzLFxuICAgICAgICAgICAgeyBwcmlzbWE6IGN0eC5wcmlzbWEsIHVzZXI6IGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZzsgcm9sZTogc3RyaW5nOyBlbXBsb3llZUlkPzogc3RyaW5nIH0gfVxuICAgICAgICAgIClcbiAgICAgICAgICB0b29sUmVzdWx0cy5wdXNoKHsgaWQ6IHRvb2xDYWxsLmlkLCBuYW1lOiB0b29sQ2FsbC5uYW1lLCByZXN1bHQgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCB0b29sIHJlc3VsdHMgdG8gbWVzc2FnZXNcbiAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgICAgY29udGVudDogcmVzcG9uc2UuY29udGVudCB8fCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS50b29sQ2FsbHMubWFwKCh0YykgPT4gKHsgdG9vbDogdGMubmFtZSwgYXJnczogdGMuYXJndW1lbnRzIH0pKSksXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gQWRkIHRvb2wgcmVzcG9uc2VzIGFzIHVzZXIgbWVzc2FnZSAoc2ltcGxpZmllZCBmb3IgYWxsIHByb3ZpZGVycylcbiAgICAgICAgY29uc3QgdG9vbFJlc3BvbnNlQ29udGVudCA9IHRvb2xSZXN1bHRzXG4gICAgICAgICAgLm1hcCgodHIpID0+IGBUb29sIFwiJHt0ci5uYW1lfVwiIHJlc3VsdDogJHtKU09OLnN0cmluZ2lmeSh0ci5yZXN1bHQpfWApXG4gICAgICAgICAgLmpvaW4oJ1xcblxcbicpXG5cbiAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIGNvbnRlbnQ6IGBbVG9vbCBSZXN1bHRzXVxcbiR7dG9vbFJlc3BvbnNlQ29udGVudH1gLFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIEdldCBuZXh0IHJlc3BvbnNlXG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgYWlDbGllbnQuY2hhdChtZXNzYWdlcywgVE9PTF9ERUZJTklUSU9OUylcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIGZpbmFsIHJlc3BvbnNlXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250ZW50OiByZXNwb25zZS5jb250ZW50IHx8ICdJIGFwb2xvZ2l6ZSwgYnV0IEkgd2FzIHVuYWJsZSB0byBnZW5lcmF0ZSBhIHJlc3BvbnNlLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICAgIHRvb2xzVXNlZDogaXRlcmF0aW9ucyA+IDAsXG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gVGVzdCBjb25uZWN0aW9uIHRvIEFJIHByb3ZpZGVyXG4gIHRlc3RDb25uZWN0aW9uOiBhZG1pblByb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2V0QUlTZXR0aW5nc0RlbGVnYXRlKGN0eCkuZmluZEZpcnN0KClcblxuICAgIGlmICghc2V0dGluZ3MpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiAnUFJFQ09ORElUSU9OX0ZBSUxFRCcsXG4gICAgICAgIG1lc3NhZ2U6ICdBSSBzZXR0aW5ncyBub3QgY29uZmlndXJlZC4nLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYWlDbGllbnQgPSBhd2FpdCBnZXRBSUNsaWVudChzZXR0aW5ncylcbiAgICAgIGF3YWl0IGFpQ2xpZW50LmNoYXQoXG4gICAgICAgIFtcbiAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIHRlc3QgYXNzaXN0YW50LicgfSxcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1NheSBcIkNvbm5lY3Rpb24gc3VjY2Vzc2Z1bFwiIGluIGV4YWN0bHkgdGhvc2Ugd29yZHMuJyB9LFxuICAgICAgICBdLFxuICAgICAgICBbXVxuICAgICAgKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJyxcbiAgICAgIH1cbiAgICB9XG4gIH0pLFxuXG4gIC8vIExpc3QgYXZhaWxhYmxlIG1vZGVscyBmb3IgYSBwcm92aWRlclxuICBsaXN0TW9kZWxzOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvdmlkZXI6IHouZW51bShbJ09QRU5BSScsICdBTlRIUk9QSUMnLCAnR0VNSU5JJ10pLFxuICAgICAgfSlcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBnZXRBSVNldHRpbmdzRGVsZWdhdGUoY3R4KS5maW5kRmlyc3QoKVxuXG4gICAgICBpZiAoIXNldHRpbmdzKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdQUkVDT05ESVRJT05fRkFJTEVEJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQUkgc2V0dGluZ3Mgbm90IGNvbmZpZ3VyZWQuJyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChpbnB1dC5wcm92aWRlcikge1xuICAgICAgICBjYXNlICdPUEVOQUknOiB7XG4gICAgICAgICAgaWYgKCFzZXR0aW5ncy5vcGVuYWlLZXlFbmNyeXB0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICBjb2RlOiAnUFJFQ09ORElUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdPcGVuQUkgQVBJIGtleSBub3QgY29uZmlndXJlZC4nLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYXBpS2V5ID0gZGVjcnlwdChzZXR0aW5ncy5vcGVuYWlLZXlFbmNyeXB0ZWQpXG4gICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgbGlzdE9wZW5BSU1vZGVscyhhcGlLZXkpXG4gICAgICAgICAgcmV0dXJuIHsgcHJvdmlkZXI6IGlucHV0LnByb3ZpZGVyLCBtb2RlbHMgfVxuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0FOVEhST1BJQyc6IHtcbiAgICAgICAgICBpZiAoIXNldHRpbmdzLmFudGhyb3BpY0tleUVuY3J5cHRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgIGNvZGU6ICdQUkVDT05ESVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0FudGhyb3BpYyBBUEkga2V5IG5vdCBjb25maWd1cmVkLicsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0KHNldHRpbmdzLmFudGhyb3BpY0tleUVuY3J5cHRlZClcbiAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCBsaXN0QW50aHJvcGljTW9kZWxzKGFwaUtleSlcbiAgICAgICAgICByZXR1cm4geyBwcm92aWRlcjogaW5wdXQucHJvdmlkZXIsIG1vZGVscyB9XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnR0VNSU5JJzoge1xuICAgICAgICAgIGlmICghc2V0dGluZ3MuZ2VtaW5pS2V5RW5jcnlwdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgICAgY29kZTogJ1BSRUNPTkRJVElPTl9GQUlMRUQnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnR2VtaW5pIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQuJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGFwaUtleSA9IGRlY3J5cHQoc2V0dGluZ3MuZ2VtaW5pS2V5RW5jcnlwdGVkKVxuICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IGxpc3RHZW1pbmlNb2RlbHMoYXBpS2V5KVxuICAgICAgICAgIHJldHVybiB7IHByb3ZpZGVyOiBpbnB1dC5wcm92aWRlciwgbW9kZWxzIH1cbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ0JBRF9SRVFVRVNUJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIEFJIHByb3ZpZGVyLicsXG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBXaGlzcGVyIHRyYW5zY3JpcHRpb24gZW5kcG9pbnRcbiAgdHJhbnNjcmliZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW9CYXNlNjQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEnKSxcbiAgICAgICAgbWltZVR5cGU6IHouc3RyaW5nKCkuZGVmYXVsdCgnYXVkaW8vd2VibScpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgYWlTZXR0aW5nc0RlbGVnYXRlID0gZ2V0QUlTZXR0aW5nc0RlbGVnYXRlKGN0eClcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgYWlTZXR0aW5nc0RlbGVnYXRlLmZpbmRGaXJzdCgpXG5cbiAgICAgIGlmICghc2V0dGluZ3M/Lm9wZW5haUtleUVuY3J5cHRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnUFJFQ09ORElUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgbWVzc2FnZTogJ09wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkLiBXaGlzcGVyIHJlcXVpcmVzIGFuIE9wZW5BSSBBUEkga2V5LiBHbyB0byBTZXR0aW5ncyA+IEJsdWUgQUkgdG8gYWRkIHlvdXIgQVBJIGtleS4nLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBhcGlLZXkgPSBkZWNyeXB0KHNldHRpbmdzLm9wZW5haUtleUVuY3J5cHRlZClcblxuICAgICAgLy8gUG9seWZpbGwgRmlsZSBmb3IgTm9kZS5qcyA8IDIwIChyZXF1aXJlZCBieSBPcGVuQUkgU0RLKVxuICAgICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzLkZpbGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgRmlsZSB9ID0gYXdhaXQgaW1wb3J0KCdub2RlOmJ1ZmZlcicpXG4gICAgICAgIGdsb2JhbFRoaXMuRmlsZSA9IEZpbGUgYXMgdW5rbm93biBhcyB0eXBlb2YgZ2xvYmFsVGhpcy5GaWxlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZGVmYXVsdDogT3BlbkFJIH0gPSBhd2FpdCBpbXBvcnQoJ29wZW5haScpXG4gICAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydCgnZnMnKVxuICAgICAgY29uc3Qgb3MgPSBhd2FpdCBpbXBvcnQoJ29zJylcbiAgICAgIGNvbnN0IHBhdGggPSBhd2FpdCBpbXBvcnQoJ3BhdGgnKVxuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleSB9KVxuXG4gICAgICAvLyBDb252ZXJ0IGJhc2U2NCB0byBidWZmZXJcbiAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gQnVmZmVyLmZyb20oaW5wdXQuYXVkaW9CYXNlNjQsICdiYXNlNjQnKVxuXG4gICAgICAvLyBEZXRlcm1pbmUgZmlsZSBleHRlbnNpb24gZnJvbSBtaW1lIHR5cGVcbiAgICAgIGNvbnN0IGV4dGVuc2lvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ2F1ZGlvL3dlYm0nOiAnd2VibScsXG4gICAgICAgICdhdWRpby9tcDMnOiAnbXAzJyxcbiAgICAgICAgJ2F1ZGlvL21wZWcnOiAnbXAzJyxcbiAgICAgICAgJ2F1ZGlvL3dhdic6ICd3YXYnLFxuICAgICAgICAnYXVkaW8vb2dnJzogJ29nZycsXG4gICAgICAgICdhdWRpby9tNGEnOiAnbTRhJyxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGV4dGVuc2lvbk1hcFtpbnB1dC5taW1lVHlwZV0gfHwgJ3dlYm0nXG5cbiAgICAgIC8vIFdyaXRlIHRvIGEgdGVtcG9yYXJ5IGZpbGUgKG1vc3QgcmVsaWFibGUgZm9yIE9wZW5BSSBTREspXG4gICAgICBjb25zdCB0ZW1wRGlyID0gb3MudG1wZGlyKClcbiAgICAgIGNvbnN0IHRlbXBGaWxlID0gcGF0aC5qb2luKHRlbXBEaXIsIGB3aGlzcGVyLSR7RGF0ZS5ub3coKX0uJHtleHRlbnNpb259YClcbiAgICAgIGZzLndyaXRlRmlsZVN5bmModGVtcEZpbGUsIGF1ZGlvQnVmZmVyKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0cmFuc2NyaXB0aW9uID0gYXdhaXQgY2xpZW50LmF1ZGlvLnRyYW5zY3JpcHRpb25zLmNyZWF0ZSh7XG4gICAgICAgICAgZmlsZTogZnMuY3JlYXRlUmVhZFN0cmVhbSh0ZW1wRmlsZSksXG4gICAgICAgICAgbW9kZWw6ICd3aGlzcGVyLTEnLFxuICAgICAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIENsZWFuIHVwIHRlbXAgZmlsZVxuICAgICAgICBmcy51bmxpbmtTeW5jKHRlbXBGaWxlKVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbV2hpc3Blcl0gVHJhbnNjcmlwdGlvbiBjb21wbGV0ZWQ6Jywge1xuICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24/LnVzZXI/LmlkLFxuICAgICAgICAgIHRleHRMZW5ndGg6IHRyYW5zY3JpcHRpb24udGV4dC5sZW5ndGgsXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIHsgdGV4dDogdHJhbnNjcmlwdGlvbi50ZXh0IH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIENsZWFuIHVwIHRlbXAgZmlsZSBvbiBlcnJvclxuICAgICAgICB0cnkgeyBmcy51bmxpbmtTeW5jKHRlbXBGaWxlKSB9IGNhdGNoIHt9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tXaGlzcGVyXSBUcmFuc2NyaXB0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHRyYW5zY3JpYmUgYXVkaW8nLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxufSlcbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiaHJBZG1pblByb2NlZHVyZSIsImFkbWluUHJvY2VkdXJlIiwiVFJQQ0Vycm9yIiwiZW5jcnlwdCIsImRlY3J5cHQiLCJjcmVhdGVBdWRpdExvZyIsImdldEFJU2V0dGluZ3NEZWxlZ2F0ZSIsImN0eCIsImRlbGVnYXRlIiwicHJpc21hIiwiYUlTZXR0aW5ncyIsImFpU2V0dGluZ3MiLCJjb2RlIiwibWVzc2FnZSIsImdldEFJQ2hhdERlbGVnYXRlIiwiYUlDaGF0IiwiYWlDaGF0IiwiZ2V0QUlDaGF0TWVzc2FnZURlbGVnYXRlIiwiYUlDaGF0TWVzc2FnZSIsImFpQ2hhdE1lc3NhZ2UiLCJlbmNyeXB0S2V5T3JUaHJvdyIsImtleSIsInRyaW0iLCJlcnJvciIsImNhdXNlIiwiU1lTVEVNX1BST01QVCIsIlRPT0xfREVGSU5JVElPTlMiLCJ0eXBlIiwiZnVuY3Rpb24iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwicHJvcGVydGllcyIsInNlYXJjaCIsInN0YXR1cyIsImVudW0iLCJsaW1pdCIsImNhbmRpZGF0ZU5hbWUiLCJjYW5kaWRhdGVFbWFpbCIsInJvbGVUaXRsZSIsInN0YXJ0RGF0ZSIsImNvbXBlbnNhdGlvbkFtb3VudCIsImN1cnJlbmN5IiwidGVtcGxhdGVJZCIsImxlZ2FsRW50aXR5SWQiLCJzaWduYXR1cmVCbG9ja0lkIiwibG9jYXRpb24iLCJyZXF1aXJlZCIsImNvbnRyYWN0SWQiLCJjb25maXJtZWQiLCJpZCIsImVtcGxveWVlSWQiLCJ3b3JrZmxvd0lkIiwieWVhciIsInJlYXNvbiIsInRhc2tJZCIsIm5vdGVzIiwiaXNJbW1lZGlhdGUiLCJlbmREYXRlIiwiaW5jbHVkZURpc2FibGVkIiwiYXBwSWQiLCJpbmNsdWRlUmVhZCIsImFjdGlvbiIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJzdGFydERhdGVGcm9tIiwic3RhcnREYXRlVG8iLCJkcnlSdW4iLCJhcHByb3ZhbFRva2VuIiwidmlld2VkRGF5c0FnbyIsImluY2x1ZGVPZmZib2FyZGluZyIsInNhbml0aXplQXJnc0ZvckxvZ2dpbmciLCJhcmdzIiwic2Vuc2l0aXZlRmllbGRzIiwic2FuaXRpemVkIiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwic29tZSIsImYiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiVE9PTF9QRVJNSVNTSU9OUyIsIlNVUEVSX0FETUlOIiwiSFJfQURNSU4iLCJJVF9BRE1JTiIsIk1BTkFHRVIiLCJFTVBMT1lFRSIsImhhc1Rvb2xQZXJtaXNzaW9uIiwicm9sZSIsInRvb2xOYW1lIiwicGVybWlzc2lvbnMiLCJnZXRSZXF1aXJlZFJvbGVzRm9yVG9vbCIsInJvbGVzIiwicHVzaCIsIlJBVEVfTElNSVRfV0lORE9XX01TIiwiUkFURV9MSU1JVF9NQVhfQ0FMTFMiLCJyYXRlTGltaXRTdG9yZSIsIk1hcCIsImNoZWNrUmF0ZUxpbWl0IiwidXNlcklkIiwibm93IiwiRGF0ZSIsImVudHJ5IiwiZ2V0IiwicmVzZXRBdCIsImNvdW50Iiwic2V0IiwiYWxsb3dlZCIsInJlbWFpbmluZyIsIk1hdGgiLCJtYXgiLCJBUFBST1ZBTF9UVExfTVMiLCJjcmVhdGVBcHByb3ZhbFBsYW4iLCJkcnlSdW5EYXRhIiwib3JnSWQiLCJwbGFuSWQiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwiZXhwaXJlc0F0IiwiYXNzaXN0YW50QXBwcm92YWwiLCJjcmVhdGUiLCJkYXRhIiwidXNlciIsInByZXZpZXciLCJ2YWxpZGF0ZUFuZENvbnN1bWVBcHByb3ZhbCIsImV4cGVjdGVkVG9vbE5hbWUiLCJhcHByb3ZhbCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInZhbGlkIiwidXBkYXRlIiwiYXBwcm92ZWRBdCIsImFwcHJvdmVkQnkiLCJleGVjdXRlVG9vbCIsInN0YXJ0VGltZSIsInNhbml0aXplZEFyZ3MiLCJjb25zb2xlIiwibG9nIiwiam9pbiIsInJhdGVMaW1pdCIsInRvSVNPU3RyaW5nIiwicmF0ZUxpbWl0UmVtYWluaW5nIiwicmVzdWx0IiwiZmluZENvbnRyYWN0cyIsImNyZWF0ZUNvbnRyYWN0RHJhZnQiLCJzZW5kQ29udHJhY3QiLCJnZXRFbXBsb3llZSIsInN0YXJ0T25ib2FyZGluZyIsImdldE9uYm9hcmRpbmdTdGF0dXMiLCJjb3VudEhpcmVzQnlZZWFyIiwidXBkYXRlQ29udHJhY3REcmFmdCIsInJlc2VuZENvbnRyYWN0IiwiY2FuY2VsQ29udHJhY3QiLCJjb21wbGV0ZU9uYm9hcmRpbmdUYXNrIiwicnVuT25ib2FyZGluZ1Rhc2siLCJza2lwT25ib2FyZGluZ1Rhc2siLCJzdGFydE9mZmJvYXJkaW5nIiwiZ2V0T2ZmYm9hcmRpbmdTdGF0dXMiLCJsaXN0SW50ZWdyYXRpb25zIiwidGVzdEludGVncmF0aW9uQ29ubmVjdGlvbiIsImxpc3ROb3RpZmljYXRpb25zIiwic2VhcmNoQXVkaXRMb2ciLCJnZXREYWlseUJyaWVmIiwiYnVsa1N0YXJ0T25ib2FyZGluZyIsImJ1bGtSZXNlbmRDb250cmFjdHMiLCJidWxrRGVwcm92aXNpb25BY2Nlc3MiLCJsYXRlbmN5TXMiLCJFcnJvciIsIk9SIiwiY29udGFpbnMiLCJtb2RlIiwib2ZmZXJzIiwib2ZmZXIiLCJmaW5kTWFueSIsInNlbGVjdCIsImNyZWF0ZWRBdCIsInZhcmlhYmxlcyIsInRlbXBsYXRlIiwib3JkZXJCeSIsInRha2UiLCJtaW4iLCJjb250cmFjdHMiLCJtYXAiLCJvIiwiam9iX3RpdGxlIiwic3RhcnRfZGF0ZSIsInRlbXBsYXRlTmFtZSIsInRvdGFsIiwibGVuZ3RoIiwicmVxdWlyZWRGaWVsZHMiLCJtaXNzaW5nRmllbGRzIiwiZmlsdGVyIiwib2ZmZXJUZW1wbGF0ZSIsImZpbmRGaXJzdCIsImlzQWN0aXZlIiwiZW1wbG95ZWUiLCJwZXJzb25hbEVtYWlsIiwiZnVsbE5hbWUiLCJqb2JUaXRsZSIsInVuZGVmaW5lZCIsInNhbGFyeUFtb3VudCIsInNhbGFyeUN1cnJlbmN5Iiwic2FsYXJ5IiwiU3RyaW5nIiwiY2FuZGlkYXRlX25hbWUiLCJzaWduYXR1cmVfYmxvY2tfaWQiLCJvZmZlckV2ZW50Iiwib2ZmZXJJZCIsImFjdG9ySWQiLCJtZXRhZGF0YSIsInRvb2wiLCJhc3Npc3RhbnRJbml0aWF0ZWQiLCJpbmNsdWRlIiwic3VtbWFyeSIsImNyZWF0ZURvY3VTaWduQ29ubmVjdG9yIiwiZ2V0T3JnYW5pemF0aW9uIiwid3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZCIsInNlbmRPZmZlckVtYWlsIiwib3JnYW5pemF0aW9uIiwiZG9jdXNpZ24iLCJkb2N1bWVudEh0bWwiLCJyZW5kZXJlZEh0bWwiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsInNlbmRFbnZlbG9wZSIsInNpZ25lckVtYWlsIiwic2lnbmVyTmFtZSIsInN1YmplY3QiLCJjYWxsYmFja1VybCIsImVzaWduRW52ZWxvcGVJZCIsImVudmVsb3BlSWQiLCJlc2lnblByb3ZpZGVyIiwiZXNpZ25TdGF0dXMiLCJlc2lnblNlbnRBdCIsInNlbnRCeSIsIm9mZmVyTGluayIsImNvbXBhbnlOYW1lIiwibG9nb1VybCIsImlzSFIiLCJtYW5hZ2VyIiwib25ib2FyZGluZ1dvcmtmbG93cyIsIndvcmtFbWFpbCIsInBob25lIiwicHJvZmlsZUltYWdlVXJsIiwiZGVwYXJ0bWVudCIsImVtcGxveW1lbnRUeXBlIiwiYWRkcmVzc1N0cmVldCIsImFkZHJlc3NDaXR5IiwiYWRkcmVzc1N0YXRlIiwiYWRkcmVzc1Bvc3RhbCIsImFkZHJlc3NDb3VudHJ5IiwiZ2VuZGVyIiwibWFyaXRhbFN0YXR1cyIsImRhdGVPZkJpcnRoIiwibmF0aW9uYWxpdHkiLCJjb250cmFjdFR5cGUiLCJ0YXhJZCIsImJhbmtOYW1lIiwiYWNjb3VudE5hbWUiLCJhY2NvdW50TnVtYmVyIiwiYWNjb3VudFNvcnRDb2RlIiwiZW1lcmdlbmN5Q29udGFjdE5hbWUiLCJlbWVyZ2VuY3lDb250YWN0UmVsYXRpb24iLCJlbWVyZ2VuY3lDb250YWN0UGhvbmUiLCJlbWVyZ2VuY3lDb250YWN0RW1haWwiLCJsaW5rIiwiYnVpbGREZWVwTGluayIsImVtcGxveWVlcyIsIm11bHRpcGxlIiwiZXhpc3RpbmdXb3JrZmxvdyIsIm9uYm9hcmRpbmdXb3JrZmxvdyIsImluIiwic3BsaXQiLCJlbXBsb3llZU5hbWUiLCJzZW5kT25ib2FyZGluZ0VtYWlsIiwidGVtcGxhdGVzIiwib25ib2FyZGluZ1Rhc2tUZW1wbGF0ZSIsIm9yZ2FuaXphdGlvbklkIiwic29ydE9yZGVyIiwidGFza3MiLCJ0IiwiaWR4IiwiYXV0b21hdGlvblR5cGUiLCJhdXRvbWF0aW9uQ29uZmlnIiwiYXBwVHlwZSIsImVmZmVjdGl2ZVN0YXJ0RGF0ZSIsIndvcmtmbG93Iiwic3RhcnRlZEF0IiwiYWNjZXNzVG9rZW5FeHBpcmVzQXQiLCJ0YXNrIiwib25ib2FyZGluZ0xpbmsiLCJhY2Nlc3NUb2tlbiIsImVtcGxveWVlRW1haWwiLCJtYW5hZ2VyTmFtZSIsInRhc2tDb3VudCIsImNvbXBsZXRlZFRhc2tzIiwidG90YWxUYXNrcyIsInBlcmNlbnRDb21wbGV0ZSIsInJvdW5kIiwicGVuZGluZ1Rhc2tzIiwic3RhdHVzTWVzc2FnZSIsIndvcmtmbG93U3RhdHVzIiwic3RhcnRPZlllYXIiLCJlbmRPZlllYXIiLCJoaXJlU3RhdHVzZXMiLCJndGUiLCJsdCIsIkJBU0VfVVJMIiwicGF0aHMiLCJjb250cmFjdCIsIm9uYm9hcmRpbmciLCJvZmZib2FyZGluZyIsImludGVncmF0aW9uIiwibm9uRWRpdGFibGVTdGF0dXNlcyIsInVwZGF0ZURhdGEiLCJ1cGRhdGVzIiwidXJsIiwiYWxsb3dlZFN0YXR1c2VzIiwiY3VycmVudFN0YXR1cyIsInZvaWRFbnZlbG9wZSIsInByZXZpb3VzU3RhdHVzIiwib25ib2FyZGluZ1Rhc2siLCJjb21wbGV0ZWRBdCIsImNvbXBsZXRlZEJ5IiwicmVtYWluaW5nVGFza3MiLCJ0YXNrTmFtZSIsIndvcmtmbG93VXJsIiwiYXR0ZW1wdHMiLCJpbmNyZW1lbnQiLCJsYXN0QXR0ZW1wdEF0IiwicHJvdmlzaW9uRW1wbG95ZWVJbkFwcCIsInN1Y2Nlc3MiLCJwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZCIsIm9mZmJvYXJkaW5nV29ya2Zsb3ciLCJlbXBsb3llZVVybCIsIm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlIiwiZGVmYXVsdFRhc2tzIiwiZWZmZWN0aXZlRW5kRGF0ZSIsInNjaGVkdWxlZEZvciIsImluaXRpYXRlZEJ5IiwiYXV0b21hdGVkVGFza3MiLCJjYXRjaCIsImVyciIsImFyY2hpdmVkQXQiLCJpc0VuYWJsZWQiLCJhcHBzIiwiYXBwIiwiY29ubmVjdGlvbnMiLCJkb21haW4iLCJsYXN0VGVzdFN0YXR1cyIsImxhc3RUZXN0ZWRBdCIsImxhc3RUZXN0RXJyb3IiLCJfY291bnQiLCJhY2NvdW50cyIsImludGVncmF0aW9ucyIsImNvbm5lY3Rpb25TdGF0dXMiLCJhY3RpdmVBY2NvdW50cyIsImNvbm5lY3Rpb24iLCJnZXRDb25uZWN0b3IiLCJjb25uZWN0b3IiLCJ0ZXN0Q29ubmVjdGlvbiIsImFwcENvbm5lY3Rpb24iLCJhcHBOYW1lIiwicmVhZEF0Iiwibm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbiIsImZvcm1hdHRlZE5vdGlmaWNhdGlvbnMiLCJuIiwiYWN0b3JOYW1lIiwiYWN0b3JFbWFpbCIsImlzUmVhZCIsImx0ZSIsImxvZ3MiLCJhdWRpdExvZyIsImFjdG9yIiwiZW1haWwiLCJmb3JtYXR0ZWRMb2dzIiwiX2FyZ3MiLCJ0b2RheSIsInNldEhvdXJzIiwid2Vla0Zyb21Ob3ciLCJnZXRUaW1lIiwidGhyZWVEYXlzQWdvIiwicGVuZGluZ0NvbnRyYWN0cyIsInVwY29taW5nU3RhcnRzIiwic3R1Y2tPbmJvYXJkaW5nIiwic3R1Y2tPZmZib2FyZGluZyIsImMiLCJkYXlzT2xkIiwiZmxvb3IiLCJlIiwic3R1Y2tXb3JrZmxvd3MiLCJ3IiwiZmFpbGVkVGFza3MiLCJmb3JFYWNoIiwibm9uZSIsImFmZmVjdGVkQ291bnQiLCJpdGVtcyIsInBsYW4iLCJyZXN1bHRzIiwiZW1wIiwic3VjY2Vzc2Z1bCIsInIiLCJmYWlsZWQiLCJ0b3RhbEF0dGVtcHRlZCIsImN1dG9mZkRhdGUiLCJkYXlzU2luY2VTZW50Iiwic3RhdHVzZXMiLCJlbXBsb3llZXNXaXRoQWN0aXZlQWNjb3VudHMiLCJhcHBBY2NvdW50cyIsImFjdGl2ZUFwcHMiLCJhIiwiZGVwcm92aXNpb25FbXBsb3llZUZyb21BbGxBcHBzIiwiYXBwc0RlcHJvdmlzaW9uZWQiLCJ0b3RhbEFwcHNEZXByb3Zpc2lvbmVkIiwicmVkdWNlIiwic3VtIiwiT1BFTkFJX01PREVMX0VYQ0xVREVfVE9LRU5TIiwiaXNPcGVuQUlDaGF0TW9kZWwiLCJzdGFydHNXaXRoIiwidG9rZW4iLCJub3JtYWxpemVNb2RlbExhYmVsIiwibGlzdE9wZW5BSU1vZGVscyIsImFwaUtleSIsImRlZmF1bHQiLCJPcGVuQUkiLCJjbGllbnQiLCJtb2RlbHMiLCJtb2RlbCIsImxpc3QiLCJzb3J0IiwiYiIsImNyZWF0ZWQiLCJsYWJlbCIsImxpc3RBbnRocm9waWNNb2RlbHMiLCJBbnRocm9waWMiLCJhVGltZSIsImNyZWF0ZWRfYXQiLCJiVGltZSIsImRpc3BsYXlfbmFtZSIsImxpc3RHZW1pbmlNb2RlbHMiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm9rIiwidGV4dCIsInBheWxvYWQiLCJqc29uIiwic3VwcG9ydGVkR2VuZXJhdGlvbk1ldGhvZHMiLCJyYXdOYW1lIiwicmVwbGFjZSIsImRpc3BsYXlOYW1lIiwiT1BFTkFJX01BWF9DT01QTEVUSU9OX1RPS0VOX01PREVMUyIsIk9QRU5BSV9GSVhFRF9URU1QRVJBVFVSRV9NT0RFTFMiLCJ1c2VzTWF4Q29tcGxldGlvblRva2VucyIsIm1vZGVsSWQiLCJwYXR0ZXJuIiwidGVzdCIsInVzZXNGaXhlZFRlbXBlcmF0dXJlIiwiY3JlYXRlT3BlbkFJQ2xpZW50IiwiY2hhdCIsIm1lc3NhZ2VzIiwidG9vbHMiLCJ0b2tlblBhcmFtcyIsIm1heF9jb21wbGV0aW9uX3Rva2VucyIsIm1heF90b2tlbnMiLCJzYW1wbGluZ1BhcmFtcyIsInRlbXBlcmF0dXJlIiwiY29tcGxldGlvbnMiLCJtIiwiY29udGVudCIsInRvb2xfY2hvaWNlIiwiY2hvaWNlIiwiY2hvaWNlcyIsInRvb2xDYWxscyIsInRvb2xfY2FsbHMiLCJ0YyIsImFyZ3VtZW50cyIsIkpTT04iLCJwYXJzZSIsImZpbmlzaFJlYXNvbiIsImZpbmlzaF9yZWFzb24iLCJjcmVhdGVBbnRocm9waWNDbGllbnQiLCJjb252ZXJ0VG9vbHMiLCJpbnB1dF9zY2hlbWEiLCJzeXN0ZW1NZXNzYWdlIiwiZmluZCIsImNoYXRNZXNzYWdlcyIsInN5c3RlbSIsInRleHRDb250ZW50IiwidG9vbFVzZXMiLCJ0dSIsImlucHV0Iiwic3RvcF9yZWFzb24iLCJjcmVhdGVHZW1pbmlDbGllbnQiLCJHb29nbGVHZW5lcmF0aXZlQUkiLCJnZW5BSSIsImZ1bmN0aW9uRGVjbGFyYXRpb25zIiwiZ2VtaW5pTW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJzeXN0ZW1JbnN0cnVjdGlvbiIsInN0YXJ0Q2hhdCIsImhpc3RvcnkiLCJwYXJ0cyIsImxhc3RNZXNzYWdlIiwic2VuZE1lc3NhZ2UiLCJmdW5jdGlvbkNhbGxzIiwiZmMiLCJnZXRBSUNsaWVudCIsInNldHRpbmdzIiwicHJvdmlkZXIiLCJvcGVuYWlLZXlFbmNyeXB0ZWQiLCJvcGVuYWlNb2RlbCIsImFudGhyb3BpY0tleUVuY3J5cHRlZCIsImFudGhyb3BpY01vZGVsIiwiZ2VtaW5pS2V5RW5jcnlwdGVkIiwiYXNzaXN0YW50Um91dGVyIiwibGlzdENoYXRzIiwicXVlcnkiLCJhaUNoYXRzIiwiY2hhdHMiLCJ1cGRhdGVkQXQiLCJ0aXRsZSIsImdldENoYXQiLCJvYmplY3QiLCJzdHJpbmciLCJpc0Vycm9yIiwiY3JlYXRlQ2hhdCIsIm9wdGlvbmFsIiwibXV0YXRpb24iLCJhZGRNZXNzYWdlIiwiY2hhdElkIiwiYm9vbGVhbiIsImFpTWVzc2FnZXMiLCJ1cGRhdGVkQ2hhdCIsImdldFNldHRpbmdzIiwicmVxdWlyZUNvbmZpcm1hdGlvbiIsImhhc09wZW5haUtleSIsImhhc0FudGhyb3BpY0tleSIsImhhc0dlbWluaUtleSIsInVwZGF0ZVNldHRpbmdzIiwib3BlbmFpS2V5IiwiYW50aHJvcGljS2V5IiwiZ2VtaW5pS2V5IiwiYXJyYXkiLCJhaUNsaWVudCIsIml0ZXJhdGlvbnMiLCJtYXhJdGVyYXRpb25zIiwidG9vbFJlc3VsdHMiLCJ0b29sQ2FsbCIsInN0cmluZ2lmeSIsInRvb2xSZXNwb25zZUNvbnRlbnQiLCJ0ciIsInRvb2xzVXNlZCIsImxpc3RNb2RlbHMiLCJ0cmFuc2NyaWJlIiwiYXVkaW9CYXNlNjQiLCJkZXNjcmliZSIsIm1pbWVUeXBlIiwiYWlTZXR0aW5nc0RlbGVnYXRlIiwiZ2xvYmFsVGhpcyIsIkZpbGUiLCJmcyIsIm9zIiwicGF0aCIsImF1ZGlvQnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImV4dGVuc2lvbk1hcCIsImV4dGVuc2lvbiIsInRlbXBEaXIiLCJ0bXBkaXIiLCJ0ZW1wRmlsZSIsIndyaXRlRmlsZVN5bmMiLCJ0cmFuc2NyaXB0aW9uIiwiYXVkaW8iLCJ0cmFuc2NyaXB0aW9ucyIsImZpbGUiLCJjcmVhdGVSZWFkU3RyZWFtIiwibGFuZ3VhZ2UiLCJ1bmxpbmtTeW5jIiwic2Vzc2lvbiIsInRleHRMZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/assistant.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/audit.ts":
/*!*************************************!*\
  !*** ./src/server/routers/audit.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auditRouter: () => (/* binding */ auditRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n\n\nconst auditRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        action: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        resourceType: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        resourceId: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        actorId: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        startDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_1__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().default(50)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { action, resourceType, resourceId, actorId, startDate, endDate, page = 1, limit = 50 } = input || {};\n        const where = {};\n        if (action) where.action = action;\n        if (resourceType) where.resourceType = resourceType;\n        if (resourceId) where.resourceId = resourceId;\n        if (actorId) where.actorId = actorId;\n        if (startDate || endDate) {\n            where.createdAt = {};\n            if (startDate) where.createdAt.gte = new Date(startDate);\n            if (endDate) where.createdAt.lte = new Date(endDate);\n        }\n        const [logs, total] = await Promise.all([\n            ctx.prisma.auditLog.findMany({\n                where,\n                include: {\n                    actor: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.auditLog.count({\n                where\n            })\n        ]);\n        return {\n            logs,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getByResource: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        resourceType: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        resourceId: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).query(async ({ ctx, input })=>{\n        return ctx.prisma.auditLog.findMany({\n            where: {\n                resourceType: input.resourceType,\n                resourceId: input.resourceId\n            },\n            include: {\n                actor: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: 100\n        });\n    }),\n    getActions: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const logs = await ctx.prisma.auditLog.findMany({\n            select: {\n                action: true\n            }\n        });\n        // Get unique actions\n        const uniqueActions = Array.from(new Set(logs.map((l)=>l.action)));\n        return uniqueActions.sort();\n    }),\n    getResourceTypes: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const logs = await ctx.prisma.auditLog.findMany({\n            select: {\n                resourceType: true\n            }\n        });\n        // Get unique resource types\n        const uniqueTypes = Array.from(new Set(logs.map((l)=>l.resourceType)));\n        return uniqueTypes.sort();\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNuQixNQUFNTSxPQUFPLE1BQU1OLElBQUlVLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxRQUFRLENBQUM7WUFDOUNHLFFBQVE7Z0JBQUU1QixRQUFRO1lBQUs7UUFDekI7UUFDQSxxQkFBcUI7UUFDckIsTUFBTXlDLGdCQUFnQkMsTUFBTUMsSUFBSSxDQUFDLElBQUlDLElBQUl6QixLQUFLMEIsR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFOUMsTUFBTTtRQUMvRCxPQUFPeUMsY0FBY00sSUFBSTtJQUMzQjtJQUVGQyxrQkFBa0JyRCxxREFBY0EsQ0FDN0JpQixLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7UUFDbkIsTUFBTU0sT0FBTyxNQUFNTixJQUFJVSxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDO1lBQzlDRyxRQUFRO2dCQUFFekIsY0FBYztZQUFLO1FBQy9CO1FBQ0EsNEJBQTRCO1FBQzVCLE1BQU04QyxjQUFjUCxNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSXpCLEtBQUswQixHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUUzQyxZQUFZO1FBQ25FLE9BQU84QyxZQUFZRixJQUFJO0lBQ3pCO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL2F1ZGl0LnRzPzI5MzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgYWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuXG5leHBvcnQgY29uc3QgYXVkaXRSb3V0ZXIgPSByb3V0ZXIoe1xuICBsaXN0OiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBhY3Rpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHJlc291cmNlVHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcmVzb3VyY2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYWN0b3JJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbmREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwYWdlOiB6Lm51bWJlcigpLmRlZmF1bHQoMSksXG4gICAgICBsaW1pdDogei5udW1iZXIoKS5kZWZhdWx0KDUwKSxcbiAgICB9KS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICByZXNvdXJjZVR5cGUsXG4gICAgICAgIHJlc291cmNlSWQsXG4gICAgICAgIGFjdG9ySWQsXG4gICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZSxcbiAgICAgICAgcGFnZSA9IDEsXG4gICAgICAgIGxpbWl0ID0gNTAsXG4gICAgICB9ID0gaW5wdXQgfHwge31cblxuICAgICAgY29uc3Qgd2hlcmU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgICAgIFxuICAgICAgaWYgKGFjdGlvbikgd2hlcmUuYWN0aW9uID0gYWN0aW9uXG4gICAgICBpZiAocmVzb3VyY2VUeXBlKSB3aGVyZS5yZXNvdXJjZVR5cGUgPSByZXNvdXJjZVR5cGVcbiAgICAgIGlmIChyZXNvdXJjZUlkKSB3aGVyZS5yZXNvdXJjZUlkID0gcmVzb3VyY2VJZFxuICAgICAgaWYgKGFjdG9ySWQpIHdoZXJlLmFjdG9ySWQgPSBhY3RvcklkXG4gICAgICBcbiAgICAgIGlmIChzdGFydERhdGUgfHwgZW5kRGF0ZSkge1xuICAgICAgICB3aGVyZS5jcmVhdGVkQXQgPSB7fVxuICAgICAgICBpZiAoc3RhcnREYXRlKSAod2hlcmUuY3JlYXRlZEF0IGFzIFJlY29yZDxzdHJpbmcsIERhdGU+KS5ndGUgPSBuZXcgRGF0ZShzdGFydERhdGUpXG4gICAgICAgIGlmIChlbmREYXRlKSAod2hlcmUuY3JlYXRlZEF0IGFzIFJlY29yZDxzdHJpbmcsIERhdGU+KS5sdGUgPSBuZXcgRGF0ZShlbmREYXRlKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBbbG9ncywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBjdHgucHJpc21hLmF1ZGl0TG9nLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICBhY3RvcjogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGVtYWlsOiB0cnVlIH0gfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBza2lwOiAocGFnZSAtIDEpICogbGltaXQsXG4gICAgICAgICAgdGFrZTogbGltaXQsXG4gICAgICAgIH0pLFxuICAgICAgICBjdHgucHJpc21hLmF1ZGl0TG9nLmNvdW50KHsgd2hlcmUgfSksXG4gICAgICBdKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBsb2dzLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICAgIH1cbiAgICB9KSxcblxuICBnZXRCeVJlc291cmNlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICByZXNvdXJjZVR5cGU6IHouc3RyaW5nKCksXG4gICAgICByZXNvdXJjZUlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIHJldHVybiBjdHgucHJpc21hLmF1ZGl0TG9nLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICByZXNvdXJjZVR5cGU6IGlucHV0LnJlc291cmNlVHlwZSxcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5yZXNvdXJjZUlkLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgYWN0b3I6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogMTAwLFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXRBY3Rpb25zOiBhZG1pblByb2NlZHVyZVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgbG9ncyA9IGF3YWl0IGN0eC5wcmlzbWEuYXVkaXRMb2cuZmluZE1hbnkoe1xuICAgICAgICBzZWxlY3Q6IHsgYWN0aW9uOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgLy8gR2V0IHVuaXF1ZSBhY3Rpb25zXG4gICAgICBjb25zdCB1bmlxdWVBY3Rpb25zID0gQXJyYXkuZnJvbShuZXcgU2V0KGxvZ3MubWFwKGwgPT4gbC5hY3Rpb24pKSlcbiAgICAgIHJldHVybiB1bmlxdWVBY3Rpb25zLnNvcnQoKVxuICAgIH0pLFxuXG4gIGdldFJlc291cmNlVHlwZXM6IGFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBsb2dzID0gYXdhaXQgY3R4LnByaXNtYS5hdWRpdExvZy5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDogeyByZXNvdXJjZVR5cGU6IHRydWUgfSxcbiAgICAgIH0pXG4gICAgICAvLyBHZXQgdW5pcXVlIHJlc291cmNlIHR5cGVzXG4gICAgICBjb25zdCB1bmlxdWVUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChsb2dzLm1hcChsID0+IGwucmVzb3VyY2VUeXBlKSkpXG4gICAgICByZXR1cm4gdW5pcXVlVHlwZXMuc29ydCgpXG4gICAgfSksXG59KVxuXG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsImFkbWluUHJvY2VkdXJlIiwiYXVkaXRSb3V0ZXIiLCJsaXN0IiwiaW5wdXQiLCJvYmplY3QiLCJhY3Rpb24iLCJzdHJpbmciLCJvcHRpb25hbCIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3RvcklkIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInBhZ2UiLCJudW1iZXIiLCJkZWZhdWx0IiwibGltaXQiLCJxdWVyeSIsImN0eCIsIndoZXJlIiwiY3JlYXRlZEF0IiwiZ3RlIiwiRGF0ZSIsImx0ZSIsImxvZ3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJwcmlzbWEiLCJhdWRpdExvZyIsImZpbmRNYW55IiwiaW5jbHVkZSIsImFjdG9yIiwic2VsZWN0IiwiaWQiLCJuYW1lIiwiZW1haWwiLCJvcmRlckJ5Iiwic2tpcCIsInRha2UiLCJjb3VudCIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJnZXRCeVJlc291cmNlIiwiZ2V0QWN0aW9ucyIsInVuaXF1ZUFjdGlvbnMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJtYXAiLCJsIiwic29ydCIsImdldFJlc291cmNlVHlwZXMiLCJ1bmlxdWVUeXBlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/audit.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/dashboard.ts":
/*!*****************************************!*\
  !*** ./src/server/routers/dashboard.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dashboardRouter: () => (/* binding */ dashboardRouter)\n/* harmony export */ });\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n\nconst dashboardRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    getStats: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const [totalEmployees, activeEmployees, pendingOnboarding, pendingOffboarding, offersByStatus, recentHires, upcomingStarts] = await Promise.all([\n            // Total employees (excluding candidates)\n            ctx.prisma.employee.count({\n                where: {\n                    status: {\n                        not: \"CANDIDATE\"\n                    }\n                }\n            }),\n            // Active employees\n            ctx.prisma.employee.count({\n                where: {\n                    status: \"ACTIVE\"\n                }\n            }),\n            // Pending onboarding\n            ctx.prisma.onboardingWorkflow.count({\n                where: {\n                    status: {\n                        in: [\n                            \"PENDING\",\n                            \"IN_PROGRESS\"\n                        ]\n                    }\n                }\n            }),\n            // Pending offboarding\n            ctx.prisma.offboardingWorkflow.count({\n                where: {\n                    status: {\n                        in: [\n                            \"PENDING\",\n                            \"IN_PROGRESS\"\n                        ]\n                    }\n                }\n            }),\n            // Offers by status\n            ctx.prisma.offer.groupBy({\n                by: [\n                    \"status\"\n                ],\n                _count: true\n            }),\n            // Recent hires (last 30 days)\n            ctx.prisma.employee.findMany({\n                where: {\n                    status: \"ACTIVE\",\n                    startDate: {\n                        gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n                    }\n                },\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    department: true,\n                    startDate: true\n                },\n                orderBy: {\n                    startDate: \"desc\"\n                },\n                take: 5\n            }),\n            // Upcoming starts (next 30 days)\n            ctx.prisma.employee.findMany({\n                where: {\n                    status: {\n                        in: [\n                            \"OFFER_SIGNED\",\n                            \"HIRED_PENDING_START\"\n                        ]\n                    },\n                    startDate: {\n                        gte: new Date(),\n                        lte: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)\n                    }\n                },\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    department: true,\n                    startDate: true\n                },\n                orderBy: {\n                    startDate: \"asc\"\n                },\n                take: 5\n            })\n        ]);\n        // Transform offers by status into object\n        const offersMap = offersByStatus.reduce((acc, item)=>{\n            acc[item.status] = item._count;\n            return acc;\n        }, {});\n        return {\n            employees: {\n                total: totalEmployees,\n                active: activeEmployees\n            },\n            workflows: {\n                pendingOnboarding,\n                pendingOffboarding\n            },\n            offers: {\n                draft: offersMap.DRAFT || 0,\n                sent: offersMap.SENT || 0,\n                viewed: offersMap.VIEWED || 0,\n                signed: offersMap.SIGNED || 0,\n                declined: offersMap.DECLINED || 0\n            },\n            recentHires,\n            upcomingStarts\n        };\n    }),\n    getRecentActivity: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.auditLog.findMany({\n            include: {\n                actor: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            take: 10\n        });\n    }),\n    getOnboardingProgress: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const workflows = await ctx.prisma.onboardingWorkflow.findMany({\n            where: {\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"IN_PROGRESS\"\n                    ]\n                }\n            },\n            include: {\n                employee: {\n                    select: {\n                        id: true,\n                        fullName: true,\n                        startDate: true\n                    }\n                },\n                tasks: {\n                    select: {\n                        status: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"asc\"\n            },\n            take: 10\n        });\n        return workflows.map((workflow)=>{\n            const totalTasks = workflow.tasks.length;\n            const completedTasks = workflow.tasks.filter((t)=>t.status === \"SUCCESS\" || t.status === \"SKIPPED\").length;\n            return {\n                id: workflow.id,\n                employee: workflow.employee,\n                progress: totalTasks > 0 ? Math.round(completedTasks / totalTasks * 100) : 0,\n                totalTasks,\n                completedTasks,\n                status: workflow.status\n            };\n        });\n    }),\n    getManagerDashboard: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const user = ctx.user;\n        if (!user.employeeId) {\n            return {\n                directReports: [],\n                onboardingInProgress: []\n            };\n        }\n        const [directReports, onboardingInProgress] = await Promise.all([\n            ctx.prisma.employee.findMany({\n                where: {\n                    managerId: user.employeeId\n                },\n                select: {\n                    id: true,\n                    fullName: true,\n                    jobTitle: true,\n                    status: true,\n                    startDate: true\n                },\n                orderBy: {\n                    fullName: \"asc\"\n                }\n            }),\n            ctx.prisma.onboardingWorkflow.findMany({\n                where: {\n                    status: {\n                        in: [\n                            \"PENDING\",\n                            \"IN_PROGRESS\"\n                        ]\n                    },\n                    employee: {\n                        managerId: user.employeeId\n                    }\n                },\n                include: {\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true,\n                            startDate: true\n                        }\n                    },\n                    tasks: {\n                        select: {\n                            status: true\n                        }\n                    }\n                }\n            })\n        ]);\n        return {\n            directReports,\n            onboardingInProgress: onboardingInProgress.map((workflow)=>({\n                    id: workflow.id,\n                    employee: workflow.employee,\n                    progress: workflow.tasks.length > 0 ? Math.round(workflow.tasks.filter((t)=>t.status === \"SUCCESS\" || t.status === \"SKIPPED\").length / workflow.tasks.length * 100) : 0\n                }))\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvZGFzaGJvYXJkLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlFO0FBRWxFLE1BQU1HLGtCQUFrQkgsaURBQU1BLENBQUM7SUFDcENJLFVBQVVGLHVEQUFnQkEsQ0FDdkJHLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNuQixNQUFNLENBQ0pDLGdCQUNBQyxpQkFDQUMsbUJBQ0FDLG9CQUNBQyxnQkFDQUMsYUFDQUMsZUFDRCxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUNwQix5Q0FBeUM7WUFDekNULElBQUlVLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxLQUFLLENBQUM7Z0JBQ3hCQyxPQUFPO29CQUFFQyxRQUFRO3dCQUFFQyxLQUFLO29CQUFZO2dCQUFFO1lBQ3hDO1lBRUEsbUJBQW1CO1lBQ25CZixJQUFJVSxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDO2dCQUN4QkMsT0FBTztvQkFBRUMsUUFBUTtnQkFBUztZQUM1QjtZQUVBLHFCQUFxQjtZQUNyQmQsSUFBSVUsTUFBTSxDQUFDTSxrQkFBa0IsQ0FBQ0osS0FBSyxDQUFDO2dCQUNsQ0MsT0FBTztvQkFBRUMsUUFBUTt3QkFBRUcsSUFBSTs0QkFBQzs0QkFBVzt5QkFBYztvQkFBQztnQkFBRTtZQUN0RDtZQUVBLHNCQUFzQjtZQUN0QmpCLElBQUlVLE1BQU0sQ0FBQ1EsbUJBQW1CLENBQUNOLEtBQUssQ0FBQztnQkFDbkNDLE9BQU87b0JBQUVDLFFBQVE7d0JBQUVHLElBQUk7NEJBQUM7NEJBQVc7eUJBQWM7b0JBQUM7Z0JBQUU7WUFDdEQ7WUFFQSxtQkFBbUI7WUFDbkJqQixJQUFJVSxNQUFNLENBQUNTLEtBQUssQ0FBQ0MsT0FBTyxDQUFDO2dCQUN2QkMsSUFBSTtvQkFBQztpQkFBUztnQkFDZEMsUUFBUTtZQUNWO1lBRUEsOEJBQThCO1lBQzlCdEIsSUFBSVUsTUFBTSxDQUFDQyxRQUFRLENBQUNZLFFBQVEsQ0FBQztnQkFD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QUFLO29CQUFFO29CQUNsRXVDLE9BQU87d0JBQUVuQyxRQUFROzRCQUFFZCxRQUFRO3dCQUFLO29CQUFFO2dCQUNwQztZQUNGO1NBQ0Q7UUFFRCxPQUFPO1lBQ0wrRDtZQUNBQyxzQkFBc0JBLHFCQUFxQmQsR0FBRyxDQUFDQyxDQUFBQSxXQUFhO29CQUMxRHBDLElBQUlvQyxTQUFTcEMsRUFBRTtvQkFDZmxCLFVBQVVzRCxTQUFTdEQsUUFBUTtvQkFDM0I0RCxVQUFVTixTQUFTRixLQUFLLENBQUNJLE1BQU0sR0FBRyxJQUM5QkssS0FBS0MsS0FBSyxDQUNSLFNBQVVWLEtBQUssQ0FBQ00sTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFeEQsTUFBTSxLQUFLLGFBQWF3RCxFQUFFeEQsTUFBTSxLQUFLLFdBQVdxRCxNQUFNLEdBQ2xGRixTQUFTRixLQUFLLENBQUNJLE1BQU0sR0FDckIsT0FFSjtnQkFDTjtRQUNGO0lBQ0Y7QUFDSixHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvZGFzaGJvYXJkLnRzP2VlMjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcm91dGVyLCBwcm90ZWN0ZWRQcm9jZWR1cmUsIGhyQWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuXG5leHBvcnQgY29uc3QgZGFzaGJvYXJkUm91dGVyID0gcm91dGVyKHtcbiAgZ2V0U3RhdHM6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IFtcbiAgICAgICAgdG90YWxFbXBsb3llZXMsXG4gICAgICAgIGFjdGl2ZUVtcGxveWVlcyxcbiAgICAgICAgcGVuZGluZ09uYm9hcmRpbmcsXG4gICAgICAgIHBlbmRpbmdPZmZib2FyZGluZyxcbiAgICAgICAgb2ZmZXJzQnlTdGF0dXMsXG4gICAgICAgIHJlY2VudEhpcmVzLFxuICAgICAgICB1cGNvbWluZ1N0YXJ0cyxcbiAgICAgIF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIC8vIFRvdGFsIGVtcGxveWVlcyAoZXhjbHVkaW5nIGNhbmRpZGF0ZXMpXG4gICAgICAgIGN0eC5wcmlzbWEuZW1wbG95ZWUuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHN0YXR1czogeyBub3Q6ICdDQU5ESURBVEUnIH0gfSxcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBBY3RpdmUgZW1wbG95ZWVzXG4gICAgICAgIGN0eC5wcmlzbWEuZW1wbG95ZWUuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHN0YXR1czogJ0FDVElWRScgfSxcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBQZW5kaW5nIG9uYm9hcmRpbmdcbiAgICAgICAgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSB9LFxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFBlbmRpbmcgb2ZmYm9hcmRpbmdcbiAgICAgICAgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmNvdW50KHtcbiAgICAgICAgICB3aGVyZTogeyBzdGF0dXM6IHsgaW46IFsnUEVORElORycsICdJTl9QUk9HUkVTUyddIH0gfSxcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBPZmZlcnMgYnkgc3RhdHVzXG4gICAgICAgIGN0eC5wcmlzbWEub2ZmZXIuZ3JvdXBCeSh7XG4gICAgICAgICAgYnk6IFsnc3RhdHVzJ10sXG4gICAgICAgICAgX2NvdW50OiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFJlY2VudCBoaXJlcyAobGFzdCAzMCBkYXlzKVxuICAgICAgICBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZToge1xuICAgICAgICAgICAgICBndGU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIGpvYlRpdGxlOiB0cnVlLCBkZXBhcnRtZW50OiB0cnVlLCBzdGFydERhdGU6IHRydWUgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHN0YXJ0RGF0ZTogJ2Rlc2MnIH0sXG4gICAgICAgICAgdGFrZTogNSxcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBVcGNvbWluZyBzdGFydHMgKG5leHQgMzAgZGF5cylcbiAgICAgICAgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHN0YXR1czogeyBpbjogWydPRkZFUl9TSUdORUQnLCAnSElSRURfUEVORElOR19TVEFSVCddIH0sXG4gICAgICAgICAgICBzdGFydERhdGU6IHtcbiAgICAgICAgICAgICAgZ3RlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBsdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIGpvYlRpdGxlOiB0cnVlLCBkZXBhcnRtZW50OiB0cnVlLCBzdGFydERhdGU6IHRydWUgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHN0YXJ0RGF0ZTogJ2FzYycgfSxcbiAgICAgICAgICB0YWtlOiA1LFxuICAgICAgICB9KSxcbiAgICAgIF0pXG5cbiAgICAgIC8vIFRyYW5zZm9ybSBvZmZlcnMgYnkgc3RhdHVzIGludG8gb2JqZWN0XG4gICAgICBjb25zdCBvZmZlcnNNYXAgPSBvZmZlcnNCeVN0YXR1cy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xuICAgICAgICBhY2NbaXRlbS5zdGF0dXNdID0gaXRlbS5fY291bnRcbiAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW1wbG95ZWVzOiB7XG4gICAgICAgICAgdG90YWw6IHRvdGFsRW1wbG95ZWVzLFxuICAgICAgICAgIGFjdGl2ZTogYWN0aXZlRW1wbG95ZWVzLFxuICAgICAgICB9LFxuICAgICAgICB3b3JrZmxvd3M6IHtcbiAgICAgICAgICBwZW5kaW5nT25ib2FyZGluZyxcbiAgICAgICAgICBwZW5kaW5nT2ZmYm9hcmRpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIG9mZmVyczoge1xuICAgICAgICAgIGRyYWZ0OiBvZmZlcnNNYXAuRFJBRlQgfHwgMCxcbiAgICAgICAgICBzZW50OiBvZmZlcnNNYXAuU0VOVCB8fCAwLFxuICAgICAgICAgIHZpZXdlZDogb2ZmZXJzTWFwLlZJRVdFRCB8fCAwLFxuICAgICAgICAgIHNpZ25lZDogb2ZmZXJzTWFwLlNJR05FRCB8fCAwLFxuICAgICAgICAgIGRlY2xpbmVkOiBvZmZlcnNNYXAuREVDTElORUQgfHwgMCxcbiAgICAgICAgfSxcbiAgICAgICAgcmVjZW50SGlyZXMsXG4gICAgICAgIHVwY29taW5nU3RhcnRzLFxuICAgICAgfVxuICAgIH0pLFxuXG4gIGdldFJlY2VudEFjdGl2aXR5OiBockFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5hdWRpdExvZy5maW5kTWFueSh7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBhY3RvcjogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwLFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXRPbmJvYXJkaW5nUHJvZ3Jlc3M6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93cyA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5fUFJPR1JFU1MnXSB9IH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBzdGFydERhdGU6IHRydWUgfSB9LFxuICAgICAgICAgIHRhc2tzOiB7IHNlbGVjdDogeyBzdGF0dXM6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2FzYycgfSxcbiAgICAgICAgdGFrZTogMTAsXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gd29ya2Zsb3dzLm1hcCh3b3JrZmxvdyA9PiB7XG4gICAgICAgIGNvbnN0IHRvdGFsVGFza3MgPSB3b3JrZmxvdy50YXNrcy5sZW5ndGhcbiAgICAgICAgY29uc3QgY29tcGxldGVkVGFza3MgPSB3b3JrZmxvdy50YXNrcy5maWx0ZXIoXG4gICAgICAgICAgdCA9PiB0LnN0YXR1cyA9PT0gJ1NVQ0NFU1MnIHx8IHQuc3RhdHVzID09PSAnU0tJUFBFRCdcbiAgICAgICAgKS5sZW5ndGhcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB3b3JrZmxvdy5pZCxcbiAgICAgICAgICBlbXBsb3llZTogd29ya2Zsb3cuZW1wbG95ZWUsXG4gICAgICAgICAgcHJvZ3Jlc3M6IHRvdGFsVGFza3MgPiAwID8gTWF0aC5yb3VuZCgoY29tcGxldGVkVGFza3MgLyB0b3RhbFRhc2tzKSAqIDEwMCkgOiAwLFxuICAgICAgICAgIHRvdGFsVGFza3MsXG4gICAgICAgICAgY29tcGxldGVkVGFza3MsXG4gICAgICAgICAgc3RhdHVzOiB3b3JrZmxvdy5zdGF0dXMsXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSksXG5cbiAgZ2V0TWFuYWdlckRhc2hib2FyZDogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3R4LnVzZXIgYXMgeyBlbXBsb3llZUlkPzogc3RyaW5nIH1cbiAgICAgIFxuICAgICAgaWYgKCF1c2VyLmVtcGxveWVlSWQpIHtcbiAgICAgICAgcmV0dXJuIHsgZGlyZWN0UmVwb3J0czogW10sIG9uYm9hcmRpbmdJblByb2dyZXNzOiBbXSB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFtkaXJlY3RSZXBvcnRzLCBvbmJvYXJkaW5nSW5Qcm9ncmVzc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IG1hbmFnZXJJZDogdXNlci5lbXBsb3llZUlkIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGZ1bGxOYW1lOiB0cnVlLFxuICAgICAgICAgICAgam9iVGl0bGU6IHRydWUsXG4gICAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgICBzdGFydERhdGU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IGZ1bGxOYW1lOiAnYXNjJyB9LFxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgICAgICAgICAgZW1wbG95ZWU6IHsgbWFuYWdlcklkOiB1c2VyLmVtcGxveWVlSWQgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIGVtcGxveWVlOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIHN0YXJ0RGF0ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICB0YXNrczogeyBzZWxlY3Q6IHsgc3RhdHVzOiB0cnVlIH0gfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgIF0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpcmVjdFJlcG9ydHMsXG4gICAgICAgIG9uYm9hcmRpbmdJblByb2dyZXNzOiBvbmJvYXJkaW5nSW5Qcm9ncmVzcy5tYXAod29ya2Zsb3cgPT4gKHtcbiAgICAgICAgICBpZDogd29ya2Zsb3cuaWQsXG4gICAgICAgICAgZW1wbG95ZWU6IHdvcmtmbG93LmVtcGxveWVlLFxuICAgICAgICAgIHByb2dyZXNzOiB3b3JrZmxvdy50YXNrcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IE1hdGgucm91bmQoXG4gICAgICAgICAgICAgICAgKHdvcmtmbG93LnRhc2tzLmZpbHRlcih0ID0+IHQuc3RhdHVzID09PSAnU1VDQ0VTUycgfHwgdC5zdGF0dXMgPT09ICdTS0lQUEVEJykubGVuZ3RoIC9cbiAgICAgICAgICAgICAgICAgIHdvcmtmbG93LnRhc2tzLmxlbmd0aCkgKlxuICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogMCxcbiAgICAgICAgfSkpLFxuICAgICAgfVxuICAgIH0pLFxufSlcblxuIl0sIm5hbWVzIjpbInJvdXRlciIsInByb3RlY3RlZFByb2NlZHVyZSIsImhyQWRtaW5Qcm9jZWR1cmUiLCJkYXNoYm9hcmRSb3V0ZXIiLCJnZXRTdGF0cyIsInF1ZXJ5IiwiY3R4IiwidG90YWxFbXBsb3llZXMiLCJhY3RpdmVFbXBsb3llZXMiLCJwZW5kaW5nT25ib2FyZGluZyIsInBlbmRpbmdPZmZib2FyZGluZyIsIm9mZmVyc0J5U3RhdHVzIiwicmVjZW50SGlyZXMiLCJ1cGNvbWluZ1N0YXJ0cyIsIlByb21pc2UiLCJhbGwiLCJwcmlzbWEiLCJlbXBsb3llZSIsImNvdW50Iiwid2hlcmUiLCJzdGF0dXMiLCJub3QiLCJvbmJvYXJkaW5nV29ya2Zsb3ciLCJpbiIsIm9mZmJvYXJkaW5nV29ya2Zsb3ciLCJvZmZlciIsImdyb3VwQnkiLCJieSIsIl9jb3VudCIsImZpbmRNYW55Iiwic3RhcnREYXRlIiwiZ3RlIiwiRGF0ZSIsIm5vdyIsInNlbGVjdCIsImlkIiwiZnVsbE5hbWUiLCJqb2JUaXRsZSIsImRlcGFydG1lbnQiLCJvcmRlckJ5IiwidGFrZSIsImx0ZSIsIm9mZmVyc01hcCIsInJlZHVjZSIsImFjYyIsIml0ZW0iLCJlbXBsb3llZXMiLCJ0b3RhbCIsImFjdGl2ZSIsIndvcmtmbG93cyIsIm9mZmVycyIsImRyYWZ0IiwiRFJBRlQiLCJzZW50IiwiU0VOVCIsInZpZXdlZCIsIlZJRVdFRCIsInNpZ25lZCIsIlNJR05FRCIsImRlY2xpbmVkIiwiREVDTElORUQiLCJnZXRSZWNlbnRBY3Rpdml0eSIsImF1ZGl0TG9nIiwiaW5jbHVkZSIsImFjdG9yIiwibmFtZSIsImVtYWlsIiwiY3JlYXRlZEF0IiwiZ2V0T25ib2FyZGluZ1Byb2dyZXNzIiwidGFza3MiLCJtYXAiLCJ3b3JrZmxvdyIsInRvdGFsVGFza3MiLCJsZW5ndGgiLCJjb21wbGV0ZWRUYXNrcyIsImZpbHRlciIsInQiLCJwcm9ncmVzcyIsIk1hdGgiLCJyb3VuZCIsImdldE1hbmFnZXJEYXNoYm9hcmQiLCJ1c2VyIiwiZW1wbG95ZWVJZCIsImRpcmVjdFJlcG9ydHMiLCJvbmJvYXJkaW5nSW5Qcm9ncmVzcyIsIm1hbmFnZXJJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/dashboard.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/employee.ts":
/*!****************************************!*\
  !*** ./src/server/routers/employee.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   employeeRouter: () => (/* binding */ employeeRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n\n\n\n\nconst employeeCreateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    fullName: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(2),\n    personalEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().email(),\n    jobTitle: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    department: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    managerId: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    employmentType: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"FULL_TIME\",\n        \"PART_TIME\",\n        \"CONTRACTOR\"\n    ]).optional(),\n    startDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    salaryAmount: zod__WEBPACK_IMPORTED_MODULE_2__.number().optional(),\n    salaryCurrency: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    contractType: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"PERMANENT\",\n        \"FIXED_TERM\",\n        \"CONTRACTOR\",\n        \"INTERN\"\n    ]).optional()\n});\nconst employeeUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_2__.string(),\n    fullName: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(2).optional(),\n    personalEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().email().optional(),\n    workEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().email().nullable().optional(),\n    jobTitle: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    department: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    managerId: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    employmentType: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"FULL_TIME\",\n        \"PART_TIME\",\n        \"CONTRACTOR\"\n    ]).optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"CANDIDATE\",\n        \"OFFER_SENT\",\n        \"OFFER_SIGNED\",\n        \"HIRED_PENDING_START\",\n        \"ACTIVE\",\n        \"OFFBOARDING\",\n        \"EXITED\"\n    ]).optional(),\n    startDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    salaryAmount: zod__WEBPACK_IMPORTED_MODULE_2__.number().nullable().optional(),\n    salaryCurrency: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    contractType: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"PERMANENT\",\n        \"FIXED_TERM\",\n        \"CONTRACTOR\",\n        \"INTERN\"\n    ]).nullable().optional(),\n    addressStreet: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressCity: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressState: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressPostal: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressCountry: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    phone: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactName: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactRelation: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactPhone: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    meta: zod__WEBPACK_IMPORTED_MODULE_2__.record(zod__WEBPACK_IMPORTED_MODULE_2__.unknown()).optional(),\n    profileImageUrl: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional()\n});\nconst selfUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    addressStreet: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressCity: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressState: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressPostal: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    addressCountry: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    phone: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactName: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactRelation: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional(),\n    emergencyContactPhone: zod__WEBPACK_IMPORTED_MODULE_2__.string().nullable().optional()\n});\nconst employeeRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        status: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        department: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        managerId: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        search: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_2__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_2__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { status, department, managerId, search, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (status && status.trim()) where.status = status;\n        if (department && department.trim()) where.department = department;\n        if (managerId && managerId.trim()) where.managerId = managerId;\n        if (search && search.trim()) {\n            where.OR = [\n                {\n                    fullName: {\n                        contains: search.trim(),\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    personalEmail: {\n                        contains: search.trim(),\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    workEmail: {\n                        contains: search.trim(),\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    jobTitle: {\n                        contains: search.trim(),\n                        mode: \"insensitive\"\n                    }\n                }\n            ];\n        }\n        const [employees, total] = await Promise.all([\n            ctx.prisma.employee.findMany({\n                where,\n                include: {\n                    manager: {\n                        select: {\n                            id: true,\n                            fullName: true\n                        }\n                    },\n                    _count: {\n                        select: {\n                            directReports: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.employee.count({\n                where\n            })\n        ]);\n        return {\n            employees,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getById: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.string()).query(async ({ ctx, input: id })=>{\n        const employee = await ctx.prisma.employee.findUnique({\n            where: {\n                id\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true\n                    }\n                },\n                manager: {\n                    select: {\n                        id: true,\n                        fullName: true,\n                        workEmail: true\n                    }\n                },\n                directReports: {\n                    select: {\n                        id: true,\n                        fullName: true,\n                        jobTitle: true,\n                        status: true\n                    }\n                },\n                offers: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 5\n                },\n                appAccounts: {\n                    include: {\n                        app: true\n                    }\n                },\n                onboardingWorkflows: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 1,\n                    include: {\n                        tasks: true\n                    }\n                },\n                offboardingWorkflows: {\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    take: 1,\n                    include: {\n                        tasks: true\n                    }\n                }\n            }\n        });\n        if (!employee) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Employee not found\"\n            });\n        }\n        // Check access - HR can see all, managers can see their reports, employees can see themselves\n        const user = ctx.user;\n        const canAccess = user.role === \"SUPER_ADMIN\" || user.role === \"HR_ADMIN\" || user.role === \"IT_ADMIN\" || user.role === \"MANAGER\" && employee.managerId === user.employeeId || user.employeeId === employee.id;\n        if (!canAccess) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"FORBIDDEN\"\n            });\n        }\n        // Hide sensitive fields for non-HR users\n        if (user.role !== \"SUPER_ADMIN\" && user.role !== \"HR_ADMIN\") {\n            return {\n                ...employee,\n                salaryAmount: null,\n                salaryCurrency: null,\n                contractType: null\n            };\n        }\n        return employee;\n    }),\n    getMyProfile: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const user = ctx.user;\n        if (!user.employeeId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No employee profile linked to your account\"\n            });\n        }\n        return ctx.prisma.employee.findUnique({\n            where: {\n                id: user.employeeId\n            },\n            include: {\n                manager: {\n                    select: {\n                        id: true,\n                        fullName: true,\n                        workEmail: true\n                    }\n                },\n                appAccounts: {\n                    include: {\n                        app: true\n                    }\n                }\n            }\n        });\n    }),\n    getDirectReports: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.managerProcedure.query(async ({ ctx })=>{\n        const user = ctx.user;\n        if (!user.employeeId) {\n            return [];\n        }\n        return ctx.prisma.employee.findMany({\n            where: {\n                managerId: user.employeeId\n            },\n            include: {\n                onboardingWorkflows: {\n                    where: {\n                        status: {\n                            in: [\n                                \"PENDING\",\n                                \"IN_PROGRESS\"\n                            ]\n                        }\n                    },\n                    take: 1,\n                    include: {\n                        tasks: {\n                            where: {\n                                status: {\n                                    not: \"SUCCESS\"\n                                }\n                            }\n                        }\n                    }\n                }\n            },\n            orderBy: {\n                fullName: \"asc\"\n            }\n        });\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(employeeCreateSchema).mutation(async ({ ctx, input })=>{\n        const employee = await ctx.prisma.employee.create({\n            data: {\n                fullName: input.fullName,\n                personalEmail: input.personalEmail,\n                status: \"CANDIDATE\",\n                jobTitle: input.jobTitle,\n                department: input.department,\n                managerId: input.managerId,\n                location: input.location,\n                employmentType: input.employmentType,\n                startDate: input.startDate ? new Date(input.startDate) : undefined,\n                salaryAmount: input.salaryAmount,\n                salaryCurrency: input.salaryCurrency,\n                contractType: input.contractType\n            }\n        });\n        // Log event (non-blocking)\n        try {\n            const userId = ctx.user?.id;\n            if (userId) {\n                await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.logEmployeeEvent)({\n                    actorId: userId,\n                    action: \"EMPLOYEE_CREATED\",\n                    employeeId: employee.id,\n                    metadata: {\n                        fullName: employee.fullName\n                    }\n                });\n            }\n        } catch (error) {\n            console.error(\"Failed to log employee creation event:\", error);\n        // Don't fail the mutation if audit logging fails\n        }\n        return employee;\n    }),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(employeeUpdateSchema).mutation(async ({ ctx, input })=>{\n        const { id, meta, ...data } = input;\n        const existingEmployee = await ctx.prisma.employee.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existingEmployee) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const updateData = {};\n        const existingMeta = existingEmployee.meta && typeof existingEmployee.meta === \"object\" && !Array.isArray(existingEmployee.meta) ? existingEmployee.meta : {};\n        const nextMeta = {\n            ...existingMeta\n        };\n        let metaUpdated = false;\n        // Process date fields\n        if (data.startDate !== undefined) {\n            updateData.startDate = data.startDate ? new Date(data.startDate) : null;\n        }\n        if (data.endDate !== undefined) {\n            updateData.endDate = data.endDate ? new Date(data.endDate) : null;\n        }\n        // Copy other fields\n        Object.entries(data).forEach(([key, value])=>{\n            if (key !== \"startDate\" && key !== \"endDate\" && value !== undefined) {\n                updateData[key] = value;\n            }\n        });\n        if (meta && typeof meta === \"object\") {\n            Object.assign(nextMeta, meta);\n            metaUpdated = true;\n        }\n        if (metaUpdated) {\n            updateData.meta = nextMeta;\n        }\n        const employee = await ctx.prisma.employee.update({\n            where: {\n                id\n            },\n            data: updateData\n        });\n        // Log status change if applicable\n        if (data.status && data.status !== existingEmployee.status) {\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.logEmployeeEvent)({\n                actorId: ctx.user.id,\n                action: \"EMPLOYEE_STATUS_CHANGED\",\n                employeeId: id,\n                metadata: {\n                    previousStatus: existingEmployee.status,\n                    newStatus: data.status\n                }\n            });\n        } else {\n            const updatedFields = Object.keys(data);\n            if (metaUpdated) updatedFields.push(\"meta\");\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.logEmployeeEvent)({\n                actorId: ctx.user.id,\n                action: \"EMPLOYEE_UPDATED\",\n                employeeId: id,\n                metadata: {\n                    updatedFields\n                }\n            });\n        }\n        return employee;\n    }),\n    updateSelf: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(selfUpdateSchema).mutation(async ({ ctx, input })=>{\n        const user = ctx.user;\n        if (!user.employeeId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No employee profile linked\"\n            });\n        }\n        const employee = await ctx.prisma.employee.update({\n            where: {\n                id: user.employeeId\n            },\n            data: input\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.logEmployeeEvent)({\n            actorId: user.id,\n            action: \"EMPLOYEE_UPDATED\",\n            employeeId: employee.id,\n            metadata: {\n                selfUpdate: true,\n                updatedFields: Object.keys(input)\n            }\n        });\n        return employee;\n    }),\n    getDepartments: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const employees = await ctx.prisma.employee.findMany({\n            where: {\n                department: {\n                    not: null\n                }\n            },\n            select: {\n                department: true\n            }\n        });\n        // Get unique departments\n        const uniqueDepartments = Array.from(new Set(employees.map((e)=>e.department).filter(Boolean)));\n        return uniqueDepartments.sort();\n    }),\n    getManagers: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.employee.findMany({\n            where: {\n                status: \"ACTIVE\",\n                directReports: {\n                    some: {}\n                }\n            },\n            select: {\n                id: true,\n                fullName: true,\n                jobTitle: true,\n                department: true\n            },\n            orderBy: {\n                fullName: \"asc\"\n            }\n        });\n    }),\n    getAllActive: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.employee.findMany({\n            where: {\n                status: \"ACTIVE\"\n            },\n            select: {\n                id: true,\n                fullName: true,\n                jobTitle: true,\n                department: true,\n                workEmail: true\n            },\n            orderBy: {\n                fullName: \"asc\"\n            }\n        });\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVoRSxVQUFVO1lBQU07UUFDN0I7SUFDRjtBQUNKLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9zZXJ2ZXIvcm91dGVycy9lbXBsb3llZS50cz81NjY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIHByb3RlY3RlZFByb2NlZHVyZSwgaHJBZG1pblByb2NlZHVyZSwgbWFuYWdlclByb2NlZHVyZSB9IGZyb20gJ0AvbGliL3RycGMnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQgeyBsb2dFbXBsb3llZUV2ZW50IH0gZnJvbSAnQC9saWIvYXVkaXQnXG5cbmNvbnN0IGVtcGxveWVlQ3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBmdWxsTmFtZTogei5zdHJpbmcoKS5taW4oMiksXG4gIHBlcnNvbmFsRW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgam9iVGl0bGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZGVwYXJ0bWVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBtYW5hZ2VySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbG9jYXRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZW1wbG95bWVudFR5cGU6IHouZW51bShbJ0ZVTExfVElNRScsICdQQVJUX1RJTUUnLCAnQ09OVFJBQ1RPUiddKS5vcHRpb25hbCgpLFxuICBzdGFydERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc2FsYXJ5QW1vdW50OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIHNhbGFyeUN1cnJlbmN5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNvbnRyYWN0VHlwZTogei5lbnVtKFsnUEVSTUFORU5UJywgJ0ZJWEVEX1RFUk0nLCAnQ09OVFJBQ1RPUicsICdJTlRFUk4nXSkub3B0aW9uYWwoKSxcbn0pXG5cbmNvbnN0IGVtcGxveWVlVXBkYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgZnVsbE5hbWU6IHouc3RyaW5nKCkubWluKDIpLm9wdGlvbmFsKCksXG4gIHBlcnNvbmFsRW1haWw6IHouc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLFxuICB3b3JrRW1haWw6IHouc3RyaW5nKCkuZW1haWwoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGpvYlRpdGxlOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZGVwYXJ0bWVudDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIG1hbmFnZXJJZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1wbG95bWVudFR5cGU6IHouZW51bShbJ0ZVTExfVElNRScsICdQQVJUX1RJTUUnLCAnQ09OVFJBQ1RPUiddKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHouZW51bShbJ0NBTkRJREFURScsICdPRkZFUl9TRU5UJywgJ09GRkVSX1NJR05FRCcsICdISVJFRF9QRU5ESU5HX1NUQVJUJywgJ0FDVElWRScsICdPRkZCT0FSRElORycsICdFWElURUQnXSkub3B0aW9uYWwoKSxcbiAgc3RhcnREYXRlOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW5kRGF0ZTogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHNhbGFyeUFtb3VudDogei5udW1iZXIoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIHNhbGFyeUN1cnJlbmN5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNvbnRyYWN0VHlwZTogei5lbnVtKFsnUEVSTUFORU5UJywgJ0ZJWEVEX1RFUk0nLCAnQ09OVFJBQ1RPUicsICdJTlRFUk4nXSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzU3RyZWV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgYWRkcmVzc0NpdHk6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzU3RhdGU6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzUG9zdGFsOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgYWRkcmVzc0NvdW50cnk6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBwaG9uZTogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGVtZXJnZW5jeUNvbnRhY3ROYW1lOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1lcmdlbmN5Q29udGFjdFJlbGF0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1lcmdlbmN5Q29udGFjdFBob25lOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1lcmdlbmN5Q29udGFjdEVtYWlsOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgbWV0YTogei5yZWNvcmQoei51bmtub3duKCkpLm9wdGlvbmFsKCksXG4gIHByb2ZpbGVJbWFnZVVybDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KVxuXG5jb25zdCBzZWxmVXBkYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBhZGRyZXNzU3RyZWV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgYWRkcmVzc0NpdHk6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzU3RhdGU6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzUG9zdGFsOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgYWRkcmVzc0NvdW50cnk6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBwaG9uZTogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gIGVtZXJnZW5jeUNvbnRhY3ROYW1lOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1lcmdlbmN5Q29udGFjdFJlbGF0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgZW1lcmdlbmN5Q29udGFjdFBob25lOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBlbXBsb3llZVJvdXRlciA9IHJvdXRlcih7XG4gIGxpc3Q6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBkZXBhcnRtZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBtYW5hZ2VySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHNlYXJjaDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcGFnZTogei5udW1iZXIoKS5kZWZhdWx0KDEpLFxuICAgICAgbGltaXQ6IHoubnVtYmVyKCkuZGVmYXVsdCgyMCksXG4gICAgfSkub3B0aW9uYWwoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IHN0YXR1cywgZGVwYXJ0bWVudCwgbWFuYWdlcklkLCBzZWFyY2gsIHBhZ2UgPSAxLCBsaW1pdCA9IDIwIH0gPSBpbnB1dCB8fCB7fVxuICAgICAgXG4gICAgICBjb25zdCB3aGVyZTogYW55ID0ge31cbiAgICAgIFxuICAgICAgaWYgKHN0YXR1cyAmJiBzdGF0dXMudHJpbSgpKSB3aGVyZS5zdGF0dXMgPSBzdGF0dXNcbiAgICAgIGlmIChkZXBhcnRtZW50ICYmIGRlcGFydG1lbnQudHJpbSgpKSB3aGVyZS5kZXBhcnRtZW50ID0gZGVwYXJ0bWVudFxuICAgICAgaWYgKG1hbmFnZXJJZCAmJiBtYW5hZ2VySWQudHJpbSgpKSB3aGVyZS5tYW5hZ2VySWQgPSBtYW5hZ2VySWRcbiAgICAgIGlmIChzZWFyY2ggJiYgc2VhcmNoLnRyaW0oKSkge1xuICAgICAgICB3aGVyZS5PUiA9IFtcbiAgICAgICAgICB7IGZ1bGxOYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gudHJpbSgpLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICB7IHBlcnNvbmFsRW1haWw6IHsgY29udGFpbnM6IHNlYXJjaC50cmltKCksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgIHsgd29ya0VtYWlsOiB7IGNvbnRhaW5zOiBzZWFyY2gudHJpbSgpLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICB7IGpvYlRpdGxlOiB7IGNvbnRhaW5zOiBzZWFyY2gudHJpbSgpLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBbZW1wbG95ZWVzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIG1hbmFnZXI6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICBfY291bnQ6IHsgc2VsZWN0OiB7IGRpcmVjdFJlcG9ydHM6IHRydWUgfSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdCxcbiAgICAgICAgICB0YWtlOiBsaW1pdCxcbiAgICAgICAgfSksXG4gICAgICAgIGN0eC5wcmlzbWEuZW1wbG95ZWUuY291bnQoeyB3aGVyZSB9KSxcbiAgICAgIF0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVtcGxveWVlcyxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICB9XG4gICAgfSksXG5cbiAgZ2V0QnlJZDogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGlkIH0pID0+IHtcbiAgICAgIGNvbnN0IGVtcGxveWVlID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzZXI6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSB9LFxuICAgICAgICAgIG1hbmFnZXI6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSwgd29ya0VtYWlsOiB0cnVlIH0gfSxcbiAgICAgICAgICBkaXJlY3RSZXBvcnRzOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIGpvYlRpdGxlOiB0cnVlLCBzdGF0dXM6IHRydWUgfSB9LFxuICAgICAgICAgIG9mZmVyczogeyBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sIHRha2U6IDUgfSxcbiAgICAgICAgICBhcHBBY2NvdW50czogeyBpbmNsdWRlOiB7IGFwcDogdHJ1ZSB9IH0sXG4gICAgICAgICAgb25ib2FyZGluZ1dvcmtmbG93czogeyBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sIHRha2U6IDEsIGluY2x1ZGU6IHsgdGFza3M6IHRydWUgfSB9LFxuICAgICAgICAgIG9mZmJvYXJkaW5nV29ya2Zsb3dzOiB7IG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSwgdGFrZTogMSwgaW5jbHVkZTogeyB0YXNrczogdHJ1ZSB9IH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWVtcGxveWVlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ0VtcGxveWVlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgYWNjZXNzIC0gSFIgY2FuIHNlZSBhbGwsIG1hbmFnZXJzIGNhbiBzZWUgdGhlaXIgcmVwb3J0cywgZW1wbG95ZWVzIGNhbiBzZWUgdGhlbXNlbHZlc1xuICAgICAgY29uc3QgdXNlciA9IGN0eC51c2VyIGFzIHsgcm9sZTogc3RyaW5nOyBlbXBsb3llZUlkPzogc3RyaW5nIH1cbiAgICAgIGNvbnN0IGNhbkFjY2VzcyA9IFxuICAgICAgICB1c2VyLnJvbGUgPT09ICdTVVBFUl9BRE1JTicgfHxcbiAgICAgICAgdXNlci5yb2xlID09PSAnSFJfQURNSU4nIHx8XG4gICAgICAgIHVzZXIucm9sZSA9PT0gJ0lUX0FETUlOJyB8fFxuICAgICAgICAodXNlci5yb2xlID09PSAnTUFOQUdFUicgJiYgZW1wbG95ZWUubWFuYWdlcklkID09PSB1c2VyLmVtcGxveWVlSWQpIHx8XG4gICAgICAgIHVzZXIuZW1wbG95ZWVJZCA9PT0gZW1wbG95ZWUuaWRcblxuICAgICAgaWYgKCFjYW5BY2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdGT1JCSURERU4nIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEhpZGUgc2Vuc2l0aXZlIGZpZWxkcyBmb3Igbm9uLUhSIHVzZXJzXG4gICAgICBpZiAodXNlci5yb2xlICE9PSAnU1VQRVJfQURNSU4nICYmIHVzZXIucm9sZSAhPT0gJ0hSX0FETUlOJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmVtcGxveWVlLFxuICAgICAgICAgIHNhbGFyeUFtb3VudDogbnVsbCxcbiAgICAgICAgICBzYWxhcnlDdXJyZW5jeTogbnVsbCxcbiAgICAgICAgICBjb250cmFjdFR5cGU6IG51bGwsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVtcGxveWVlXG4gICAgfSksXG5cbiAgZ2V0TXlQcm9maWxlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjdHgudXNlciBhcyB7IGVtcGxveWVlSWQ/OiBzdHJpbmcgfVxuICAgICAgXG4gICAgICBpZiAoIXVzZXIuZW1wbG95ZWVJZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdObyBlbXBsb3llZSBwcm9maWxlIGxpbmtlZCB0byB5b3VyIGFjY291bnQnIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlci5lbXBsb3llZUlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBtYW5hZ2VyOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIHdvcmtFbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgICAgYXBwQWNjb3VudHM6IHsgaW5jbHVkZTogeyBhcHA6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXREaXJlY3RSZXBvcnRzOiBtYW5hZ2VyUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3R4LnVzZXIgYXMgeyBlbXBsb3llZUlkPzogc3RyaW5nIH1cbiAgICAgIFxuICAgICAgaWYgKCF1c2VyLmVtcGxveWVlSWQpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgbWFuYWdlcklkOiB1c2VyLmVtcGxveWVlSWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG9uYm9hcmRpbmdXb3JrZmxvd3M6IHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSB9LFxuICAgICAgICAgICAgdGFrZTogMSxcbiAgICAgICAgICAgIGluY2x1ZGU6IHsgdGFza3M6IHsgd2hlcmU6IHsgc3RhdHVzOiB7IG5vdDogJ1NVQ0NFU1MnIH0gfSB9IH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBmdWxsTmFtZTogJ2FzYycgfSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgY3JlYXRlOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KGVtcGxveWVlQ3JlYXRlU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGVtcGxveWVlID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZnVsbE5hbWU6IGlucHV0LmZ1bGxOYW1lLFxuICAgICAgICAgIHBlcnNvbmFsRW1haWw6IGlucHV0LnBlcnNvbmFsRW1haWwsXG4gICAgICAgICAgc3RhdHVzOiAnQ0FORElEQVRFJyxcbiAgICAgICAgICBqb2JUaXRsZTogaW5wdXQuam9iVGl0bGUsXG4gICAgICAgICAgZGVwYXJ0bWVudDogaW5wdXQuZGVwYXJ0bWVudCxcbiAgICAgICAgICBtYW5hZ2VySWQ6IGlucHV0Lm1hbmFnZXJJZCxcbiAgICAgICAgICBsb2NhdGlvbjogaW5wdXQubG9jYXRpb24sXG4gICAgICAgICAgZW1wbG95bWVudFR5cGU6IGlucHV0LmVtcGxveW1lbnRUeXBlLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogaW5wdXQuc3RhcnREYXRlID8gbmV3IERhdGUoaW5wdXQuc3RhcnREYXRlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBzYWxhcnlBbW91bnQ6IGlucHV0LnNhbGFyeUFtb3VudCxcbiAgICAgICAgICBzYWxhcnlDdXJyZW5jeTogaW5wdXQuc2FsYXJ5Q3VycmVuY3ksXG4gICAgICAgICAgY29udHJhY3RUeXBlOiBpbnB1dC5jb250cmFjdFR5cGUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBMb2cgZXZlbnQgKG5vbi1ibG9ja2luZylcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IChjdHgudXNlciBhcyB7IGlkPzogc3RyaW5nIH0pPy5pZFxuICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgYXdhaXQgbG9nRW1wbG95ZWVFdmVudCh7XG4gICAgICAgICAgICBhY3RvcklkOiB1c2VySWQsXG4gICAgICAgICAgICBhY3Rpb246ICdFTVBMT1lFRV9DUkVBVEVEJyxcbiAgICAgICAgICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHsgZnVsbE5hbWU6IGVtcGxveWVlLmZ1bGxOYW1lIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvZyBlbXBsb3llZSBjcmVhdGlvbiBldmVudDonLCBlcnJvcilcbiAgICAgICAgLy8gRG9uJ3QgZmFpbCB0aGUgbXV0YXRpb24gaWYgYXVkaXQgbG9nZ2luZyBmYWlsc1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW1wbG95ZWVcbiAgICB9KSxcblxuICB1cGRhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoZW1wbG95ZWVVcGRhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBpZCwgbWV0YSwgLi4uZGF0YSB9ID0gaW5wdXRcblxuICAgICAgY29uc3QgZXhpc3RpbmdFbXBsb3llZSA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0gfSlcbiAgICAgIGlmICghZXhpc3RpbmdFbXBsb3llZSkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlRGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICAgICAgY29uc3QgZXhpc3RpbmdNZXRhID1cbiAgICAgICAgZXhpc3RpbmdFbXBsb3llZS5tZXRhICYmIHR5cGVvZiBleGlzdGluZ0VtcGxveWVlLm1ldGEgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGV4aXN0aW5nRW1wbG95ZWUubWV0YSlcbiAgICAgICAgICA/IChleGlzdGluZ0VtcGxveWVlLm1ldGEgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pXG4gICAgICAgICAgOiB7fVxuICAgICAgY29uc3QgbmV4dE1ldGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0geyAuLi5leGlzdGluZ01ldGEgfVxuICAgICAgbGV0IG1ldGFVcGRhdGVkID0gZmFsc2VcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyBkYXRlIGZpZWxkc1xuICAgICAgaWYgKGRhdGEuc3RhcnREYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zdGFydERhdGUgPSBkYXRhLnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKGRhdGEuc3RhcnREYXRlKSA6IG51bGxcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmVuZERhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVEYXRhLmVuZERhdGUgPSBkYXRhLmVuZERhdGUgPyBuZXcgRGF0ZShkYXRhLmVuZERhdGUpIDogbnVsbFxuICAgICAgfVxuXG4gICAgICAvLyBDb3B5IG90aGVyIGZpZWxkc1xuICAgICAgT2JqZWN0LmVudHJpZXMoZGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmIChrZXkgIT09ICdzdGFydERhdGUnICYmIGtleSAhPT0gJ2VuZERhdGUnICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhW2tleV0gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihuZXh0TWV0YSwgbWV0YSlcbiAgICAgICAgbWV0YVVwZGF0ZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChtZXRhVXBkYXRlZCkge1xuICAgICAgICB1cGRhdGVEYXRhLm1ldGEgPSBuZXh0TWV0YVxuICAgICAgfVxuXG4gICAgICBjb25zdCBlbXBsb3llZSA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIExvZyBzdGF0dXMgY2hhbmdlIGlmIGFwcGxpY2FibGVcbiAgICAgIGlmIChkYXRhLnN0YXR1cyAmJiBkYXRhLnN0YXR1cyAhPT0gZXhpc3RpbmdFbXBsb3llZS5zdGF0dXMpIHtcbiAgICAgICAgYXdhaXQgbG9nRW1wbG95ZWVFdmVudCh7XG4gICAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgICBhY3Rpb246ICdFTVBMT1lFRV9TVEFUVVNfQ0hBTkdFRCcsXG4gICAgICAgICAgZW1wbG95ZWVJZDogaWQsXG4gICAgICAgICAgbWV0YWRhdGE6IHsgXG4gICAgICAgICAgICBwcmV2aW91c1N0YXR1czogZXhpc3RpbmdFbXBsb3llZS5zdGF0dXMsIFxuICAgICAgICAgICAgbmV3U3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdXBkYXRlZEZpZWxkcyA9IE9iamVjdC5rZXlzKGRhdGEpXG4gICAgICAgIGlmIChtZXRhVXBkYXRlZCkgdXBkYXRlZEZpZWxkcy5wdXNoKCdtZXRhJylcbiAgICAgICAgYXdhaXQgbG9nRW1wbG95ZWVFdmVudCh7XG4gICAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgICBhY3Rpb246ICdFTVBMT1lFRV9VUERBVEVEJyxcbiAgICAgICAgICBlbXBsb3llZUlkOiBpZCxcbiAgICAgICAgICBtZXRhZGF0YTogeyB1cGRhdGVkRmllbGRzIH0sXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbXBsb3llZVxuICAgIH0pLFxuXG4gIHVwZGF0ZVNlbGY6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChzZWxmVXBkYXRlU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjdHgudXNlciBhcyB7IGlkOiBzdHJpbmc7IGVtcGxveWVlSWQ/OiBzdHJpbmcgfVxuICAgICAgXG4gICAgICBpZiAoIXVzZXIuZW1wbG95ZWVJZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdObyBlbXBsb3llZSBwcm9maWxlIGxpbmtlZCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmVtcGxveWVlSWQgfSxcbiAgICAgICAgZGF0YTogaW5wdXQsXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBsb2dFbXBsb3llZUV2ZW50KHtcbiAgICAgICAgYWN0b3JJZDogdXNlci5pZCxcbiAgICAgICAgYWN0aW9uOiAnRU1QTE9ZRUVfVVBEQVRFRCcsXG4gICAgICAgIGVtcGxveWVlSWQ6IGVtcGxveWVlLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyBzZWxmVXBkYXRlOiB0cnVlLCB1cGRhdGVkRmllbGRzOiBPYmplY3Qua2V5cyhpbnB1dCkgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBlbXBsb3llZVxuICAgIH0pLFxuXG4gIGdldERlcGFydG1lbnRzOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IGVtcGxveWVlcyA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBkZXBhcnRtZW50OiB7IG5vdDogbnVsbCB9IH0sXG4gICAgICAgIHNlbGVjdDogeyBkZXBhcnRtZW50OiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBHZXQgdW5pcXVlIGRlcGFydG1lbnRzXG4gICAgICBjb25zdCB1bmlxdWVEZXBhcnRtZW50cyA9IEFycmF5LmZyb20obmV3IFNldChlbXBsb3llZXMubWFwKGUgPT4gZS5kZXBhcnRtZW50KS5maWx0ZXIoQm9vbGVhbikpKSBhcyBzdHJpbmdbXVxuICAgICAgcmV0dXJuIHVuaXF1ZURlcGFydG1lbnRzLnNvcnQoKVxuICAgIH0pLFxuXG4gIGdldE1hbmFnZXJzOiBockFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5lbXBsb3llZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICAgICAgZGlyZWN0UmVwb3J0czogeyBzb21lOiB7fSB9LFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBqb2JUaXRsZTogdHJ1ZSwgZGVwYXJ0bWVudDogdHJ1ZSB9LFxuICAgICAgICBvcmRlckJ5OiB7IGZ1bGxOYW1lOiAnYXNjJyB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXRBbGxBY3RpdmU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIHJldHVybiBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBqb2JUaXRsZTogdHJ1ZSwgZGVwYXJ0bWVudDogdHJ1ZSwgd29ya0VtYWlsOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgZnVsbE5hbWU6ICdhc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxufSlcbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwiaHJBZG1pblByb2NlZHVyZSIsIm1hbmFnZXJQcm9jZWR1cmUiLCJUUlBDRXJyb3IiLCJsb2dFbXBsb3llZUV2ZW50IiwiZW1wbG95ZWVDcmVhdGVTY2hlbWEiLCJvYmplY3QiLCJmdWxsTmFtZSIsInN0cmluZyIsIm1pbiIsInBlcnNvbmFsRW1haWwiLCJlbWFpbCIsImpvYlRpdGxlIiwib3B0aW9uYWwiLCJkZXBhcnRtZW50IiwibWFuYWdlcklkIiwibG9jYXRpb24iLCJlbXBsb3ltZW50VHlwZSIsImVudW0iLCJzdGFydERhdGUiLCJzYWxhcnlBbW91bnQiLCJudW1iZXIiLCJzYWxhcnlDdXJyZW5jeSIsImNvbnRyYWN0VHlwZSIsImVtcGxveWVlVXBkYXRlU2NoZW1hIiwiaWQiLCJ3b3JrRW1haWwiLCJudWxsYWJsZSIsInN0YXR1cyIsImVuZERhdGUiLCJhZGRyZXNzU3RyZWV0IiwiYWRkcmVzc0NpdHkiLCJhZGRyZXNzU3RhdGUiLCJhZGRyZXNzUG9zdGFsIiwiYWRkcmVzc0NvdW50cnkiLCJwaG9uZSIsImVtZXJnZW5jeUNvbnRhY3ROYW1lIiwiZW1lcmdlbmN5Q29udGFjdFJlbGF0aW9uIiwiZW1lcmdlbmN5Q29udGFjdFBob25lIiwiZW1lcmdlbmN5Q29udGFjdEVtYWlsIiwibWV0YSIsInJlY29yZCIsInVua25vd24iLCJwcm9maWxlSW1hZ2VVcmwiLCJzZWxmVXBkYXRlU2NoZW1hIiwiZW1wbG95ZWVSb3V0ZXIiLCJsaXN0IiwiaW5wdXQiLCJzZWFyY2giLCJwYWdlIiwiZGVmYXVsdCIsImxpbWl0IiwicXVlcnkiLCJjdHgiLCJ3aGVyZSIsInRyaW0iLCJPUiIsImNvbnRhaW5zIiwibW9kZSIsImVtcGxveWVlcyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsInByaXNtYSIsImVtcGxveWVlIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwibWFuYWdlciIsInNlbGVjdCIsIl9jb3VudCIsImRpcmVjdFJlcG9ydHMiLCJvcmRlckJ5IiwiY3JlYXRlZEF0Iiwic2tpcCIsInRha2UiLCJjb3VudCIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJnZXRCeUlkIiwiZmluZFVuaXF1ZSIsInVzZXIiLCJuYW1lIiwiaW1hZ2UiLCJvZmZlcnMiLCJhcHBBY2NvdW50cyIsImFwcCIsIm9uYm9hcmRpbmdXb3JrZmxvd3MiLCJ0YXNrcyIsIm9mZmJvYXJkaW5nV29ya2Zsb3dzIiwiY29kZSIsIm1lc3NhZ2UiLCJjYW5BY2Nlc3MiLCJyb2xlIiwiZW1wbG95ZWVJZCIsImdldE15UHJvZmlsZSIsImdldERpcmVjdFJlcG9ydHMiLCJpbiIsIm5vdCIsImNyZWF0ZSIsIm11dGF0aW9uIiwiZGF0YSIsIkRhdGUiLCJ1bmRlZmluZWQiLCJ1c2VySWQiLCJhY3RvcklkIiwiYWN0aW9uIiwibWV0YWRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJ1cGRhdGUiLCJleGlzdGluZ0VtcGxveWVlIiwidXBkYXRlRGF0YSIsImV4aXN0aW5nTWV0YSIsIkFycmF5IiwiaXNBcnJheSIsIm5leHRNZXRhIiwibWV0YVVwZGF0ZWQiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwiYXNzaWduIiwicHJldmlvdXNTdGF0dXMiLCJuZXdTdGF0dXMiLCJ1cGRhdGVkRmllbGRzIiwia2V5cyIsInB1c2giLCJ1cGRhdGVTZWxmIiwic2VsZlVwZGF0ZSIsImdldERlcGFydG1lbnRzIiwidW5pcXVlRGVwYXJ0bWVudHMiLCJmcm9tIiwiU2V0IiwibWFwIiwiZSIsImZpbHRlciIsIkJvb2xlYW4iLCJzb3J0IiwiZ2V0TWFuYWdlcnMiLCJzb21lIiwiZ2V0QWxsQWN0aXZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/employee.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/integration.ts":
/*!*******************************************!*\
  !*** ./src/server/routers/integration.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   integrationRouter: () => (/* binding */ integrationRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/encryption */ \"(rsc)/./src/lib/encryption.ts\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n/* harmony import */ var _lib_integrations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\");\n/* harmony import */ var _lib_integrations_webhook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/integrations/webhook */ \"(rsc)/./src/lib/integrations/webhook.ts\");\n\n\n\n\n\n\n\nfunction safeParseConfig(configEncrypted) {\n    try {\n        return JSON.parse((0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.decrypt)(configEncrypted));\n    } catch  {\n        try {\n            return JSON.parse(configEncrypted);\n        } catch  {\n            return {};\n        }\n    }\n}\nfunction encryptConfigOrThrow(config) {\n    try {\n        return (0,_lib_encryption__WEBPACK_IMPORTED_MODULE_1__.encrypt)(JSON.stringify(config));\n    } catch (e) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"Unable to save connection settings because ENCRYPTION_KEY is not configured on the server.\",\n            cause: e\n        });\n    }\n}\nfunction normalizeConfigInput(input) {\n    const out = {};\n    for (const [key, value] of Object.entries(input)){\n        if (value === undefined || value === null) continue;\n        if (typeof value === \"string\") {\n            const trimmed = value.trim();\n            if (!trimmed) continue;\n            out[key] = trimmed;\n            continue;\n        }\n        out[key] = value;\n    }\n    return out;\n}\nfunction jiraAuthHeader(adminEmail, apiToken) {\n    return `Basic ${Buffer.from(`${adminEmail}:${apiToken}`).toString(\"base64\")}`;\n}\nasync function resolveJiraConnection(ctx, appId) {\n    const app = appId ? await ctx.prisma.app.findUnique({\n        where: {\n            id: appId\n        }\n    }) : await ctx.prisma.app.findFirst({\n        where: {\n            type: \"JIRA\"\n        }\n    });\n    if (!app) {\n        return {\n            error: \"Jira app is not configured.\"\n        };\n    }\n    const connection = await ctx.prisma.appConnection.findFirst({\n        where: {\n            appId: app.id,\n            isActive: true\n        }\n    });\n    if (!connection) {\n        return {\n            error: \"No active Jira connection configured.\"\n        };\n    }\n    const config = safeParseConfig(connection.configEncrypted);\n    const baseUrl = typeof config.baseUrl === \"string\" ? config.baseUrl.replace(/\\/+$/, \"\") : \"\";\n    const adminEmail = typeof config.adminEmail === \"string\" ? config.adminEmail : \"\";\n    const apiToken = typeof config.apiToken === \"string\" ? config.apiToken : \"\";\n    if (!baseUrl || !adminEmail || !apiToken) {\n        return {\n            error: \"Jira connection is missing required configuration.\"\n        };\n    }\n    return {\n        baseUrl,\n        authHeader: jiraAuthHeader(adminEmail, apiToken),\n        appId: app.id\n    };\n}\nasync function jiraRequestJson(url, authHeader, okStatuses = [\n    200\n]) {\n    const res = await fetch(url, {\n        method: \"GET\",\n        headers: {\n            Authorization: authHeader,\n            Accept: \"application/json\"\n        }\n    });\n    if (!okStatuses.includes(res.status)) {\n        const text = await res.text().catch(()=>\"\");\n        throw new Error(text || res.statusText);\n    }\n    return await res.json();\n}\nfunction formatJiraError(error, fallback) {\n    const message = error instanceof Error ? error.message : fallback;\n    if (typeof message === \"string\" && /<html|<!doctype/i.test(message)) {\n        return fallback;\n    }\n    return message;\n}\nfunction validateConnectionConfig(appType, config) {\n    switch(appType){\n        case \"GOOGLE_WORKSPACE\":\n            {\n                if (!config.domain || typeof config.domain !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Google Workspace domain is required\"\n                    });\n                }\n                if (!config.adminEmail || typeof config.adminEmail !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Google Workspace admin email is required\"\n                    });\n                }\n                if (!config.serviceAccountKey || typeof config.serviceAccountKey !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Google service account key JSON is required\"\n                    });\n                }\n                return;\n            }\n        case \"SLACK\":\n            {\n                if (!config.botToken || typeof config.botToken !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Slack bot token is required\"\n                    });\n                }\n                return;\n            }\n        case \"BITBUCKET\":\n            {\n                if (!config.workspace || typeof config.workspace !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Bitbucket workspace is required\"\n                    });\n                }\n                const hasApiToken = typeof config.apiToken === \"string\" && config.apiToken.length > 0;\n                const hasAppPassword = typeof config.appPassword === \"string\" && config.appPassword.length > 0;\n                if (!hasApiToken && !hasAppPassword) {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Bitbucket API token is required\"\n                    });\n                }\n                // Bitbucket API tokens require Basic Auth with email:token\n                if (!config.username || typeof config.username !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Atlassian account email is required for Bitbucket API tokens\"\n                    });\n                }\n                return;\n            }\n        case \"JIRA\":\n            {\n                if (!config.baseUrl || typeof config.baseUrl !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Jira base URL is required\"\n                    });\n                }\n                if (!config.adminEmail || typeof config.adminEmail !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Jira admin email is required\"\n                    });\n                }\n                if (!config.apiToken || typeof config.apiToken !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Jira API token is required\"\n                    });\n                }\n                return;\n            }\n        case \"HUBSPOT\":\n            {\n                if (!config.scimToken || typeof config.scimToken !== \"string\") {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"HubSpot private app token is required\"\n                    });\n                }\n                return;\n            }\n        case \"PASSBOLT\":\n            {\n                const mode = typeof config.mode === \"string\" ? config.mode : \"\";\n                const normalizedMode = mode === \"API\" || mode === \"CLI\" ? mode : \"\";\n                const baseUrl = typeof config.baseUrl === \"string\" ? config.baseUrl : \"\";\n                const apiToken = typeof config.apiToken === \"string\" ? config.apiToken : \"\";\n                const cliPath = typeof config.cliPath === \"string\" ? config.cliPath : \"\";\n                const defaultRole = typeof config.defaultRole === \"string\" ? config.defaultRole : \"\";\n                const hasWebhook = (0,_lib_integrations_webhook__WEBPACK_IMPORTED_MODULE_4__.hasWebhookConfig)(config);\n                if (!normalizedMode && !baseUrl && !cliPath && !hasWebhook) {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Passbolt configuration is required (API, CLI, or webhook).\"\n                    });\n                }\n                if (normalizedMode === \"API\" || !normalizedMode && baseUrl) {\n                    if (!baseUrl) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Passbolt base URL is required\"\n                        });\n                    }\n                    if (!apiToken) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Passbolt API token is required\"\n                        });\n                    }\n                }\n                if (normalizedMode === \"CLI\" || !normalizedMode && cliPath) {\n                    if (!cliPath) {\n                        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Passbolt CLI path is required\"\n                        });\n                    }\n                }\n                if (defaultRole && ![\n                    \"admin\",\n                    \"user\"\n                ].includes(defaultRole)) {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"Passbolt default role must be user or admin\"\n                    });\n                }\n                return;\n            }\n        default:\n            return;\n    }\n}\nconst appConnectionSchema = zod__WEBPACK_IMPORTED_MODULE_6__.object({\n    appId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n    config: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()),\n    domain: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()\n});\nconst provisioningRuleSchema = zod__WEBPACK_IMPORTED_MODULE_6__.object({\n    appId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n    description: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n    condition: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()),\n    provisionData: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()),\n    priority: zod__WEBPACK_IMPORTED_MODULE_6__.number().default(0),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_6__.boolean().default(true)\n});\nconst integrationRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    // Apps\n    listApps: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.app.findMany({\n            where: {\n                archivedAt: null\n            },\n            include: {\n                connections: {\n                    where: {\n                        isActive: true\n                    }\n                },\n                _count: {\n                    select: {\n                        provisioningRules: true,\n                        accounts: {\n                            where: {\n                                status: \"ACTIVE\"\n                            }\n                        }\n                    }\n                }\n            },\n            orderBy: {\n                name: \"asc\"\n            }\n        });\n    }),\n    listArchivedApps: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.app.findMany({\n            where: {\n                archivedAt: {\n                    not: null\n                }\n            },\n            include: {\n                connections: {\n                    where: {\n                        isActive: true\n                    }\n                },\n                _count: {\n                    select: {\n                        provisioningRules: true,\n                        accounts: {\n                            where: {\n                                status: \"ACTIVE\"\n                            }\n                        }\n                    }\n                }\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            }\n        });\n    }),\n    createCustomApp: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_6__.string().min(1).max(80),\n        description: zod__WEBPACK_IMPORTED_MODULE_6__.string().max(280).optional(),\n        iconUrl: zod__WEBPACK_IMPORTED_MODULE_6__.string().url().max(500).optional()\n    })).mutation(async ({ ctx, input })=>{\n        const name = input.name.trim();\n        if (!name) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Name is required\"\n            });\n        }\n        try {\n            const app = await ctx.prisma.app.create({\n                data: {\n                    type: \"CUSTOM\",\n                    name,\n                    description: input.description?.trim() ? input.description.trim() : null,\n                    iconUrl: input.iconUrl?.trim() ? input.iconUrl.trim() : null,\n                    // Must be connected before it can be enabled.\n                    isEnabled: false,\n                    archivedAt: null\n                }\n            });\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n                actorId: ctx.user.id,\n                action: \"APP_CREATED\",\n                resourceType: \"app\",\n                resourceId: app.id,\n                metadata: {\n                    type: app.type,\n                    name: app.name\n                }\n            });\n            return app;\n        } catch (e) {\n            // Unique constraint conflict (type+name)\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"CONFLICT\",\n                message: \"An application with this name already exists\",\n                cause: e\n            });\n        }\n    }),\n    archiveApp: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: input.appId\n            },\n            select: {\n                id: true,\n                type: true,\n                name: true\n            }\n        });\n        if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        if (app.type !== \"CUSTOM\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Only custom applications can be archived\"\n            });\n        }\n        const updated = await ctx.prisma.app.update({\n            where: {\n                id: input.appId\n            },\n            data: {\n                archivedAt: new Date(),\n                isEnabled: false\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"APP_ARCHIVED\",\n            resourceType: \"app\",\n            resourceId: updated.id,\n            metadata: {\n                archived: true,\n                type: updated.type,\n                name: updated.name\n            }\n        });\n        return updated;\n    }),\n    restoreApp: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: input.appId\n            },\n            select: {\n                id: true\n            }\n        });\n        if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        const updated = await ctx.prisma.app.update({\n            where: {\n                id: input.appId\n            },\n            data: {\n                archivedAt: null\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"APP_RESTORED\",\n            resourceType: \"app\",\n            resourceId: updated.id,\n            metadata: {\n                restored: true,\n                type: updated.type,\n                name: updated.name\n            }\n        });\n        return updated;\n    }),\n    getApp: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).query(async ({ ctx, input: id })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id\n            },\n            include: {\n                connections: true,\n                provisioningRules: {\n                    orderBy: {\n                        priority: \"desc\"\n                    }\n                },\n                _count: {\n                    select: {\n                        provisioningRules: true,\n                        accounts: {\n                            where: {\n                                status: \"ACTIVE\"\n                            }\n                        }\n                    }\n                },\n                accounts: {\n                    take: 20,\n                    orderBy: {\n                        updatedAt: \"desc\"\n                    },\n                    include: {\n                        employee: {\n                            select: {\n                                id: true,\n                                fullName: true,\n                                status: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        if (!app) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        return app;\n    }),\n    getConnectionSummary: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).query(async ({ ctx, input: appId })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: appId\n            },\n            select: {\n                id: true,\n                type: true,\n                archivedAt: true\n            }\n        });\n        if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        if (app.archivedAt) {\n            return {\n                hasConnection: false,\n                connectionId: null,\n                domain: null,\n                config: {},\n                secrets: {}\n            };\n        }\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId,\n                isActive: true\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            }\n        });\n        if (!connection) {\n            return {\n                hasConnection: false,\n                connectionId: null,\n                domain: null,\n                config: {},\n                secrets: {}\n            };\n        }\n        const raw = safeParseConfig(connection.configEncrypted);\n        const baseSummary = {\n            hasConnection: true,\n            connectionId: connection.id,\n            domain: connection.domain ?? null,\n            lastTestStatus: connection.lastTestStatus,\n            lastTestedAt: connection.lastTestedAt,\n            lastTestError: connection.lastTestError\n        };\n        if (app.type === \"GOOGLE_WORKSPACE\") {\n            return {\n                ...baseSummary,\n                domain: connection.domain ?? (typeof raw.domain === \"string\" ? raw.domain : null),\n                config: {\n                    domain: typeof raw.domain === \"string\" ? raw.domain : undefined,\n                    adminEmail: typeof raw.adminEmail === \"string\" ? raw.adminEmail : undefined\n                },\n                secrets: {\n                    serviceAccountKeySet: typeof raw.serviceAccountKey === \"string\" && raw.serviceAccountKey.length > 0\n                }\n            };\n        }\n        // Never return secret values; only flags + safe fields.\n        if (app.type === \"SLACK\") {\n            return {\n                ...baseSummary,\n                config: {\n                    teamId: typeof raw.teamId === \"string\" ? raw.teamId : undefined,\n                    defaultChannels: Array.isArray(raw.defaultChannels) ? raw.defaultChannels : []\n                },\n                secrets: {\n                    botTokenSet: typeof raw.botToken === \"string\" && raw.botToken.length > 0,\n                    adminTokenSet: typeof raw.adminToken === \"string\" && raw.adminToken.length > 0,\n                    signingSecretSet: typeof raw.signingSecret === \"string\" && raw.signingSecret.length > 0\n                }\n            };\n        }\n        if (app.type === \"BITBUCKET\") {\n            return {\n                ...baseSummary,\n                config: {\n                    workspace: typeof raw.workspace === \"string\" ? raw.workspace : undefined,\n                    username: typeof raw.username === \"string\" ? raw.username : undefined\n                },\n                secrets: {\n                    appPasswordSet: typeof raw.appPassword === \"string\" && raw.appPassword.length > 0,\n                    apiTokenSet: typeof raw.apiToken === \"string\" && raw.apiToken.length > 0\n                }\n            };\n        }\n        if (app.type === \"JIRA\") {\n            return {\n                ...baseSummary,\n                config: {\n                    baseUrl: typeof raw.baseUrl === \"string\" ? raw.baseUrl : undefined,\n                    adminEmail: typeof raw.adminEmail === \"string\" ? raw.adminEmail : undefined,\n                    products: Array.isArray(raw.products) ? raw.products : [],\n                    defaultGroups: Array.isArray(raw.defaultGroups) ? raw.defaultGroups : []\n                },\n                secrets: {\n                    apiTokenSet: typeof raw.apiToken === \"string\" && raw.apiToken.length > 0\n                }\n            };\n        }\n        if (app.type === \"HUBSPOT\") {\n            return {\n                ...baseSummary,\n                config: {},\n                secrets: {\n                    scimTokenSet: typeof raw.scimToken === \"string\" && raw.scimToken.length > 0\n                }\n            };\n        }\n        if (app.type === \"PASSBOLT\") {\n            return {\n                ...baseSummary,\n                domain: connection.domain ?? (typeof raw.baseUrl === \"string\" ? raw.baseUrl : null),\n                config: {\n                    mode: typeof raw.mode === \"string\" ? raw.mode : undefined,\n                    baseUrl: typeof raw.baseUrl === \"string\" ? raw.baseUrl : undefined,\n                    cliPath: typeof raw.cliPath === \"string\" ? raw.cliPath : undefined,\n                    cliUser: typeof raw.cliUser === \"string\" ? raw.cliUser : undefined,\n                    defaultRole: typeof raw.defaultRole === \"string\" ? raw.defaultRole : undefined\n                },\n                secrets: {\n                    apiTokenSet: typeof raw.apiToken === \"string\" && raw.apiToken.length > 0\n                }\n            };\n        }\n        // Default: only indicate there's a connection.\n        return {\n            ...baseSummary,\n            config: {},\n            secrets: {}\n        };\n    }),\n    upsertConnectionConfig: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        domain: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        config: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown())\n    })).mutation(async ({ ctx, input })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: input.appId\n            },\n            select: {\n                id: true,\n                type: true,\n                archivedAt: true\n            }\n        });\n        if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\",\n            message: \"App not found\"\n        });\n        if (app.archivedAt) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"BAD_REQUEST\",\n            message: \"Restore this application before connecting it\"\n        });\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId: input.appId,\n                isActive: true\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            }\n        });\n        const inputCfg = normalizeConfigInput(input.config);\n        const merged = connection ? {\n            ...safeParseConfig(connection.configEncrypted),\n            ...inputCfg\n        } : inputCfg;\n        // Allow callers to explicitly clear arrays.\n        for (const [key, value] of Object.entries(input.config)){\n            if (Array.isArray(value)) merged[key] = value;\n        }\n        validateConnectionConfig(app.type, merged);\n        const configEncrypted = encryptConfigOrThrow(merged);\n        if (!connection) {\n            const created = await ctx.prisma.appConnection.create({\n                data: {\n                    appId: input.appId,\n                    configEncrypted,\n                    domain: input.domain,\n                    isActive: true\n                }\n            });\n            // Auto-enable on first connection for a smoother UX.\n            const activeConnections = await ctx.prisma.appConnection.count({\n                where: {\n                    appId: input.appId,\n                    isActive: true\n                }\n            });\n            if (activeConnections === 1) {\n                await ctx.prisma.app.update({\n                    where: {\n                        id: input.appId\n                    },\n                    data: {\n                        isEnabled: true\n                    }\n                });\n            }\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n                actorId: ctx.user.id,\n                action: \"APP_CONNECTED\",\n                resourceType: \"app_connection\",\n                resourceId: created.id,\n                metadata: {\n                    appType: app.type,\n                    domain: input.domain\n                }\n            });\n            return created;\n        }\n        return ctx.prisma.appConnection.update({\n            where: {\n                id: connection.id\n            },\n            data: {\n                configEncrypted,\n                domain: input.domain ?? connection.domain\n            }\n        });\n    }),\n    // Initialize default apps\n    initializeApps: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.mutation(async ({ ctx })=>{\n        const defaultApps = [\n            {\n                type: \"GOOGLE_WORKSPACE\",\n                name: \"Google Workspace\",\n                description: \"Provision Google Workspace accounts, groups, and organizational units\"\n            },\n            {\n                type: \"SLACK\",\n                name: \"Slack\",\n                description: \"Provision Slack workspace access and channel memberships\"\n            },\n            {\n                type: \"BITBUCKET\",\n                name: \"Bitbucket\",\n                description: \"Provision Bitbucket repository access and permissions\"\n            },\n            {\n                type: \"JIRA\",\n                name: \"Jira\",\n                description: \"Provision Jira project access and issue management\"\n            },\n            {\n                type: \"PASSBOLT\",\n                name: \"Passbolt\",\n                description: \"Provision Passbolt password management and secure sharing\"\n            },\n            {\n                type: \"HUBSPOT\",\n                name: \"HubSpot\",\n                description: \"Provision HubSpot CRM access and marketing automation\"\n            },\n            {\n                type: \"STANDUPNINJA\",\n                name: \"StandupNinja\",\n                description: \"Provision StandupNinja team standup and status management\"\n            }\n        ];\n        for (const app of defaultApps){\n            await ctx.prisma.app.upsert({\n                where: {\n                    type_name: {\n                        type: app.type,\n                        name: app.name\n                    }\n                },\n                create: app,\n                update: {\n                    description: app.description\n                }\n            });\n        }\n        return {\n            success: true\n        };\n    }),\n    toggleApp: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        isEnabled: zod__WEBPACK_IMPORTED_MODULE_6__.boolean()\n    })).mutation(async ({ ctx, input })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: input.appId\n            },\n            select: {\n                id: true,\n                archivedAt: true,\n                type: true\n            }\n        });\n        if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        if (app.archivedAt && input.isEnabled) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Restore this application before enabling it\"\n            });\n        }\n        if (input.isEnabled) {\n            const hasConnection = await ctx.prisma.appConnection.findFirst({\n                where: {\n                    appId: input.appId,\n                    isActive: true\n                },\n                select: {\n                    id: true\n                }\n            });\n            if (!hasConnection) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Connect this application before enabling it\"\n                });\n            }\n            const fullApp = await ctx.prisma.app.findUnique({\n                where: {\n                    id: input.appId\n                }\n            });\n            if (fullApp) {\n                const connector = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.getConnector)(fullApp);\n                if (!connector) {\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                        code: \"BAD_REQUEST\",\n                        message: \"This application is connected but not configured. Configure it in Settings first.\"\n                    });\n                }\n            }\n        }\n        return ctx.prisma.app.update({\n            where: {\n                id: input.appId\n            },\n            data: {\n                isEnabled: input.isEnabled\n            }\n        });\n    }),\n    // Connections\n    createConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(appConnectionSchema).mutation(async ({ ctx, input })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: input.appId\n            }\n        });\n        if (!app) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"App not found\"\n            });\n        }\n        if (app.archivedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Restore this application before connecting it\"\n            });\n        }\n        // Encrypt config\n        const configEncrypted = encryptConfigOrThrow(input.config);\n        const connection = await ctx.prisma.appConnection.create({\n            data: {\n                appId: input.appId,\n                configEncrypted,\n                domain: input.domain,\n                isActive: true\n            }\n        });\n        // Auto-enable on first connection for a smoother UX.\n        const activeConnections = await ctx.prisma.appConnection.count({\n            where: {\n                appId: input.appId,\n                isActive: true\n            }\n        });\n        if (activeConnections === 1) {\n            await ctx.prisma.app.update({\n                where: {\n                    id: input.appId\n                },\n                data: {\n                    isEnabled: true\n                }\n            });\n        }\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"APP_CONNECTED\",\n            resourceType: \"app_connection\",\n            resourceId: connection.id,\n            metadata: {\n                appType: app.type,\n                domain: input.domain\n            }\n        });\n        return connection;\n    }),\n    updateConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        connectionId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        config: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()),\n        domain: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const configEncrypted = encryptConfigOrThrow(input.config);\n        return ctx.prisma.appConnection.update({\n            where: {\n                id: input.connectionId\n            },\n            data: {\n                configEncrypted,\n                domain: input.domain\n            }\n        });\n    }),\n    deleteConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).mutation(async ({ ctx, input: connectionId })=>{\n        const connection = await ctx.prisma.appConnection.findUnique({\n            where: {\n                id: connectionId\n            },\n            include: {\n                app: true\n            }\n        });\n        if (!connection) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.appConnection.delete({\n            where: {\n                id: connectionId\n            }\n        });\n        const remaining = await ctx.prisma.appConnection.count({\n            where: {\n                appId: connection.appId,\n                isActive: true\n            }\n        });\n        if (remaining === 0) {\n            await ctx.prisma.app.update({\n                where: {\n                    id: connection.appId\n                },\n                data: {\n                    isEnabled: false\n                }\n            });\n        }\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"APP_DISCONNECTED\",\n            resourceType: \"app_connection\",\n            resourceId: connectionId,\n            metadata: {\n                appType: connection.app.type\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    testConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).mutation(async ({ ctx, input: appId })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: appId\n            }\n        });\n        if (!app) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (app.archivedAt) {\n            return {\n                success: false,\n                error: \"This application is archived. Restore it to test the connection.\"\n            };\n        }\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId: app.id,\n                isActive: true\n            },\n            orderBy: {\n                updatedAt: \"desc\"\n            }\n        });\n        if (!connection) {\n            return {\n                success: false,\n                error: \"No active connection configured\"\n            };\n        }\n        const connector = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.getConnector)(app);\n        if (!connector) {\n            const result = {\n                success: false,\n                error: \"No active connection configured\"\n            };\n            await ctx.prisma.appConnection.update({\n                where: {\n                    id: connection.id\n                },\n                data: {\n                    lastTestStatus: \"FAILED\",\n                    lastTestError: result.error,\n                    lastTestedAt: new Date()\n                }\n            });\n            return result;\n        }\n        let result;\n        try {\n            result = await connector.testConnection();\n        } catch (error) {\n            result = {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect\"\n            };\n        }\n        await ctx.prisma.appConnection.update({\n            where: {\n                id: connection.id\n            },\n            data: {\n                lastTestStatus: result.success ? \"SUCCESS\" : \"FAILED\",\n                lastTestError: result.success ? null : result.error || \"Connection failed\",\n                lastTestedAt: new Date()\n            }\n        });\n        return result;\n    }),\n    listBitbucketOptions: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).query(async ({ ctx, input: appId })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: appId\n            }\n        });\n        if (!app) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (app.type !== \"BITBUCKET\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"App is not Bitbucket\"\n            });\n        }\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId,\n                isActive: true\n            }\n        });\n        if (!connection) {\n            return {\n                groups: [],\n                repositories: [],\n                error: \"No active Bitbucket connection configured.\"\n            };\n        }\n        const config = safeParseConfig(connection.configEncrypted);\n        const workspace = typeof config.workspace === \"string\" ? config.workspace : \"\";\n        const apiToken = typeof config.apiToken === \"string\" ? config.apiToken : undefined;\n        const username = typeof config.username === \"string\" ? config.username : undefined;\n        const appPassword = typeof config.appPassword === \"string\" ? config.appPassword : undefined;\n        if (!workspace) {\n            return {\n                groups: [],\n                repositories: [],\n                error: \"Bitbucket workspace is not configured.\"\n            };\n        }\n        if (!apiToken && !(username && appPassword)) {\n            return {\n                groups: [],\n                repositories: [],\n                error: \"Bitbucket credentials are not configured.\"\n            };\n        }\n        const connector = new _lib_integrations__WEBPACK_IMPORTED_MODULE_3__.BitbucketConnector({\n            workspace,\n            username,\n            appPassword,\n            apiToken\n        });\n        try {\n            const [groups, repositories] = await Promise.all([\n                connector.listGroups(),\n                connector.listRepositories()\n            ]);\n            return {\n                groups,\n                repositories\n            };\n        } catch (error) {\n            return {\n                groups: [],\n                repositories: [],\n                error: error instanceof Error ? error.message : \"Failed to load Bitbucket data\"\n            };\n        }\n    }),\n    listJiraGroups: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()).query(async ({ ctx, input: appId })=>{\n        const connection = await resolveJiraConnection(ctx, appId);\n        if (\"error\" in connection) {\n            return {\n                groups: [],\n                error: connection.error\n            };\n        }\n        const groups = [];\n        let startAt = 0;\n        const maxResults = 50;\n        let total = Number.POSITIVE_INFINITY;\n        try {\n            while(startAt < total){\n                const url = `${connection.baseUrl}/rest/api/3/groups/picker?startAt=${startAt}&maxResults=${maxResults}&query=`;\n                const data = await jiraRequestJson(url, connection.authHeader);\n                const page = (data.groups || []).map((group)=>group.name ? {\n                        name: group.name\n                    } : null).filter(Boolean);\n                groups.push(...page);\n                total = typeof data.total === \"number\" ? data.total : groups.length;\n                if (page.length < maxResults) break;\n                startAt += maxResults;\n                if (startAt > 5000) break;\n            }\n            return {\n                groups\n            };\n        } catch (error) {\n            return {\n                groups: [],\n                error: formatJiraError(error, \"Failed to load Jira groups. Ensure the admin user has Browse users and groups permission and the API token includes read:group:jira scope.\")\n            };\n        }\n    }),\n    listJiraProducts: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()).query(async ({ ctx, input: appId })=>{\n        const connection = await resolveJiraConnection(ctx, appId);\n        if (\"error\" in connection) {\n            return {\n                products: [],\n                error: connection.error\n            };\n        }\n        try {\n            const url = `${connection.baseUrl}/rest/api/3/applicationrole`;\n            const data = await jiraRequestJson(url, connection.authHeader);\n            const products = (data || []).map((role)=>{\n                if (!role.key) return null;\n                return {\n                    key: role.key,\n                    name: role.name || role.key,\n                    userCount: typeof role.userCount === \"number\" ? role.userCount : role.numberOfSeats\n                };\n            }).filter(Boolean);\n            return {\n                products\n            };\n        } catch (error) {\n            return {\n                products: [],\n                error: error instanceof Error ? error.message : \"Failed to load Jira products\"\n            };\n        }\n    }),\n    listJiraBoards: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()).query(async ({ ctx, input: appId })=>{\n        const connection = await resolveJiraConnection(ctx, appId);\n        if (\"error\" in connection) {\n            return {\n                boards: [],\n                error: connection.error\n            };\n        }\n        const boards = [];\n        let startAt = 0;\n        const maxResults = 50;\n        let isLast = false;\n        try {\n            while(!isLast){\n                const url = `${connection.baseUrl}/rest/agile/1.0/board?startAt=${startAt}&maxResults=${maxResults}`;\n                const data = await jiraRequestJson(url, connection.authHeader);\n                const page = (data.values || []).map((board)=>{\n                    const location = board.location || {};\n                    return {\n                        id: Number(board.id),\n                        name: board.name,\n                        type: board.type,\n                        projectId: location.projectId ? String(location.projectId) : undefined,\n                        projectKey: location.projectKey,\n                        projectName: location.projectName\n                    };\n                });\n                boards.push(...page);\n                isLast = Boolean(data.isLast) || page.length < maxResults;\n                startAt += maxResults;\n                if (startAt > 5000) break;\n            }\n            return {\n                boards\n            };\n        } catch (error) {\n            return {\n                boards: [],\n                error: error instanceof Error ? error.message : \"Failed to load Jira boards\"\n            };\n        }\n    }),\n    listJiraProjectRoles: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).query(async ({ ctx, input })=>{\n        const connection = await resolveJiraConnection(ctx, input.appId);\n        if (\"error\" in connection) {\n            return {\n                roles: [],\n                error: connection.error\n            };\n        }\n        try {\n            const url = `${connection.baseUrl}/rest/api/3/project/${input.projectId}/role`;\n            const data = await jiraRequestJson(url, connection.authHeader);\n            const roles = Object.entries(data || {}).map(([name, roleUrl])=>{\n                const id = roleUrl.split(\"/\").pop() || \"\";\n                return id ? {\n                    id,\n                    name\n                } : null;\n            }).filter(Boolean);\n            return {\n                roles\n            };\n        } catch (error) {\n            return {\n                roles: [],\n                error: error instanceof Error ? error.message : \"Failed to load Jira project roles\"\n            };\n        }\n    }),\n    listGoogleWorkspaceGroups: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).query(async ({ ctx, input: appId })=>{\n        const app = await ctx.prisma.app.findUnique({\n            where: {\n                id: appId\n            }\n        });\n        if (!app) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (app.type !== \"GOOGLE_WORKSPACE\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"App is not Google Workspace\"\n            });\n        }\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId,\n                isActive: true\n            }\n        });\n        if (!connection) {\n            return {\n                groups: [],\n                error: \"No active Google Workspace connection configured.\"\n            };\n        }\n        const config = safeParseConfig(connection.configEncrypted);\n        const domain = typeof config.domain === \"string\" ? config.domain : \"\";\n        const adminEmail = typeof config.adminEmail === \"string\" ? config.adminEmail : \"\";\n        const serviceAccountKey = typeof config.serviceAccountKey === \"string\" ? config.serviceAccountKey : \"\";\n        if (!domain || !adminEmail || !serviceAccountKey) {\n            return {\n                groups: [],\n                error: \"Google Workspace connection is missing required configuration.\"\n            };\n        }\n        const connector = new _lib_integrations__WEBPACK_IMPORTED_MODULE_3__.GoogleWorkspaceConnector({\n            domain,\n            adminEmail,\n            serviceAccountKey\n        });\n        try {\n            const groups = await connector.listGroups();\n            return {\n                groups\n            };\n        } catch (error) {\n            return {\n                groups: [],\n                error: error instanceof Error ? error.message : \"Failed to load Google Workspace groups\"\n            };\n        }\n    }),\n    listGoogleWorkspaceUsers: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()).query(async ({ ctx, input: appId })=>{\n        const app = appId ? await ctx.prisma.app.findUnique({\n            where: {\n                id: appId\n            }\n        }) : await ctx.prisma.app.findFirst({\n            where: {\n                type: \"GOOGLE_WORKSPACE\"\n            }\n        });\n        if (!app) {\n            return {\n                users: [],\n                error: \"Google Workspace app is not configured.\"\n            };\n        }\n        if (app.type !== \"GOOGLE_WORKSPACE\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"App is not Google Workspace\"\n            });\n        }\n        const connection = await ctx.prisma.appConnection.findFirst({\n            where: {\n                appId: app.id,\n                isActive: true\n            }\n        });\n        if (!connection) {\n            return {\n                users: [],\n                error: \"No active Google Workspace connection configured.\"\n            };\n        }\n        const config = safeParseConfig(connection.configEncrypted);\n        const domain = typeof config.domain === \"string\" ? config.domain : \"\";\n        const adminEmail = typeof config.adminEmail === \"string\" ? config.adminEmail : \"\";\n        const serviceAccountKey = typeof config.serviceAccountKey === \"string\" ? config.serviceAccountKey : \"\";\n        if (!domain || !adminEmail || !serviceAccountKey) {\n            return {\n                users: [],\n                error: \"Google Workspace connection is missing required configuration.\"\n            };\n        }\n        const connector = new _lib_integrations__WEBPACK_IMPORTED_MODULE_3__.GoogleWorkspaceConnector({\n            domain,\n            adminEmail,\n            serviceAccountKey\n        });\n        try {\n            const users = await connector.listUsers();\n            return {\n                users\n            };\n        } catch (error) {\n            return {\n                users: [],\n                error: error instanceof Error ? error.message : \"Failed to load Google Workspace users\"\n            };\n        }\n    }),\n    // Provisioning Rules\n    listRules: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string().optional()).query(async ({ ctx, input: appId })=>{\n        const where = appId ? {\n            appId\n        } : {};\n        return ctx.prisma.appProvisioningRule.findMany({\n            where,\n            include: {\n                app: {\n                    select: {\n                        id: true,\n                        name: true,\n                        type: true\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    appId: \"asc\"\n                },\n                {\n                    priority: \"desc\"\n                }\n            ]\n        });\n    }),\n    createRule: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(provisioningRuleSchema).mutation(async ({ ctx, input })=>{\n        const rule = await ctx.prisma.appProvisioningRule.create({\n            data: {\n                appId: input.appId,\n                name: input.name,\n                description: input.description,\n                condition: input.condition,\n                provisionData: input.provisionData,\n                priority: input.priority,\n                isActive: input.isActive\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"PROVISIONING_RULE_CREATED\",\n            resourceType: \"provisioning_rule\",\n            resourceId: rule.id,\n            metadata: {\n                name: rule.name,\n                appId: rule.appId\n            }\n        });\n        return rule;\n    }),\n    updateRule: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        description: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        condition: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()).optional(),\n        provisionData: zod__WEBPACK_IMPORTED_MODULE_6__.record(zod__WEBPACK_IMPORTED_MODULE_6__.unknown()).optional(),\n        priority: zod__WEBPACK_IMPORTED_MODULE_6__.number().optional(),\n        isActive: zod__WEBPACK_IMPORTED_MODULE_6__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const { id, ...data } = input;\n        const { condition, provisionData, ...rest } = data;\n        const rule = await ctx.prisma.appProvisioningRule.update({\n            where: {\n                id\n            },\n            data: {\n                ...rest,\n                ...condition ? {\n                    condition: condition\n                } : {},\n                ...provisionData ? {\n                    provisionData: provisionData\n                } : {}\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"PROVISIONING_RULE_UPDATED\",\n            resourceType: \"provisioning_rule\",\n            resourceId: id,\n            metadata: {\n                updatedFields: Object.keys(data)\n            }\n        });\n        return rule;\n    }),\n    deleteRule: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.itAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).mutation(async ({ ctx, input: id })=>{\n        await ctx.prisma.appProvisioningRule.delete({\n            where: {\n                id\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"PROVISIONING_RULE_DELETED\",\n            resourceType: \"provisioning_rule\",\n            resourceId: id\n        });\n        return {\n            success: true\n        };\n    }),\n    // App Accounts\n    listAccounts: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        appId: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        status: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_6__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_6__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { appId, status, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (appId) where.appId = appId;\n        if (status) where.status = status;\n        const [accounts, total] = await Promise.all([\n            ctx.prisma.appAccount.findMany({\n                where,\n                include: {\n                    app: {\n                        select: {\n                            id: true,\n                            name: true,\n                            type: true\n                        }\n                    },\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true,\n                            status: true,\n                            workEmail: true\n                        }\n                    }\n                },\n                orderBy: {\n                    updatedAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.appAccount.count({\n                where\n            })\n        ]);\n        return {\n            accounts,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getEmployeeAccounts: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.string()).query(async ({ ctx, input: employeeId })=>{\n        return ctx.prisma.appAccount.findMany({\n            where: {\n                employeeId\n            },\n            include: {\n                app: {\n                    select: {\n                        id: true,\n                        name: true,\n                        type: true\n                    }\n                }\n            },\n            orderBy: {\n                app: {\n                    name: \"asc\"\n                }\n            }\n        });\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL2ludGVncmF0aW9uLnRzP2JhOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgaXRBZG1pblByb2NlZHVyZSwgYWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuaW1wb3J0IHsgZGVjcnlwdCwgZW5jcnlwdCB9IGZyb20gJ0AvbGliL2VuY3J5cHRpb24nXG5pbXBvcnQgeyBjcmVhdGVBdWRpdExvZyB9IGZyb20gJ0AvbGliL2F1ZGl0J1xuaW1wb3J0IHsgZ2V0Q29ubmVjdG9yLCBCaXRidWNrZXRDb25uZWN0b3IsIEdvb2dsZVdvcmtzcGFjZUNvbm5lY3RvciB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucydcbmltcG9ydCB7IGhhc1dlYmhvb2tDb25maWcgfSBmcm9tICdAL2xpYi9pbnRlZ3JhdGlvbnMvd2ViaG9vaydcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5mdW5jdGlvbiBzYWZlUGFyc2VDb25maWcoY29uZmlnRW5jcnlwdGVkOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjcnlwdChjb25maWdFbmNyeXB0ZWQpKSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICB9IGNhdGNoIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29uZmlnRW5jcnlwdGVkKSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHt9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVuY3J5cHRDb25maWdPclRocm93KGNvbmZpZzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBzdHJpbmcge1xuICB0cnkge1xuICAgIHJldHVybiBlbmNyeXB0KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxuICAgICAgbWVzc2FnZTpcbiAgICAgICAgJ1VuYWJsZSB0byBzYXZlIGNvbm5lY3Rpb24gc2V0dGluZ3MgYmVjYXVzZSBFTkNSWVBUSU9OX0tFWSBpcyBub3QgY29uZmlndXJlZCBvbiB0aGUgc2VydmVyLicsXG4gICAgICBjYXVzZTogZSxcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUNvbmZpZ0lucHV0KGlucHV0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGlucHV0KSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSBjb250aW51ZVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpXG4gICAgICBpZiAoIXRyaW1tZWQpIGNvbnRpbnVlXG4gICAgICBvdXRba2V5XSA9IHRyaW1tZWRcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIG91dFtrZXldID0gdmFsdWVcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIGppcmFBdXRoSGVhZGVyKGFkbWluRW1haWw6IHN0cmluZywgYXBpVG9rZW46IHN0cmluZykge1xuICByZXR1cm4gYEJhc2ljICR7QnVmZmVyLmZyb20oYCR7YWRtaW5FbWFpbH06JHthcGlUb2tlbn1gKS50b1N0cmluZygnYmFzZTY0Jyl9YFxufVxuXG5hc3luYyBmdW5jdGlvbiByZXNvbHZlSmlyYUNvbm5lY3Rpb24oY3R4OiB7IHByaXNtYTogYW55IH0sIGFwcElkPzogc3RyaW5nKSB7XG4gIGNvbnN0IGFwcCA9IGFwcElkXG4gICAgPyBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGFwcElkIH0gfSlcbiAgICA6IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6ICdKSVJBJyB9IH0pXG5cbiAgaWYgKCFhcHApIHtcbiAgICByZXR1cm4geyBlcnJvcjogJ0ppcmEgYXBwIGlzIG5vdCBjb25maWd1cmVkLicgfVxuICB9XG5cbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IGFwcElkOiBhcHAuaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6ICdObyBhY3RpdmUgSmlyYSBjb25uZWN0aW9uIGNvbmZpZ3VyZWQuJyB9XG4gIH1cblxuICBjb25zdCBjb25maWcgPSBzYWZlUGFyc2VDb25maWcoY29ubmVjdGlvbi5jb25maWdFbmNyeXB0ZWQpXG4gIGNvbnN0IGJhc2VVcmwgPSB0eXBlb2YgY29uZmlnLmJhc2VVcmwgPT09ICdzdHJpbmcnID8gY29uZmlnLmJhc2VVcmwucmVwbGFjZSgvXFwvKyQvLCAnJykgOiAnJ1xuICBjb25zdCBhZG1pbkVtYWlsID0gdHlwZW9mIGNvbmZpZy5hZG1pbkVtYWlsID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hZG1pbkVtYWlsIDogJydcbiAgY29uc3QgYXBpVG9rZW4gPSB0eXBlb2YgY29uZmlnLmFwaVRva2VuID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hcGlUb2tlbiA6ICcnXG5cbiAgaWYgKCFiYXNlVXJsIHx8ICFhZG1pbkVtYWlsIHx8ICFhcGlUb2tlbikge1xuICAgIHJldHVybiB7IGVycm9yOiAnSmlyYSBjb25uZWN0aW9uIGlzIG1pc3NpbmcgcmVxdWlyZWQgY29uZmlndXJhdGlvbi4nIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYmFzZVVybCxcbiAgICBhdXRoSGVhZGVyOiBqaXJhQXV0aEhlYWRlcihhZG1pbkVtYWlsLCBhcGlUb2tlbiksXG4gICAgYXBwSWQ6IGFwcC5pZCxcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBqaXJhUmVxdWVzdEpzb248VD4odXJsOiBzdHJpbmcsIGF1dGhIZWFkZXI6IHN0cmluZywgb2tTdGF0dXNlczogbnVtYmVyW10gPSBbMjAwXSkge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYXV0aEhlYWRlciwgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgfSlcbiAgaWYgKCFva1N0YXR1c2VzLmluY2x1ZGVzKHJlcy5zdGF0dXMpKSB7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCkuY2F0Y2goKCkgPT4gJycpXG4gICAgdGhyb3cgbmV3IEVycm9yKHRleHQgfHwgcmVzLnN0YXR1c1RleHQpXG4gIH1cbiAgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBUXG59XG5cbmZ1bmN0aW9uIGZvcm1hdEppcmFFcnJvcihlcnJvcjogdW5rbm93biwgZmFsbGJhY2s6IHN0cmluZykge1xuICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBmYWxsYmFja1xuICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIC88aHRtbHw8IWRvY3R5cGUvaS50ZXN0KG1lc3NhZ2UpKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrXG4gIH1cbiAgcmV0dXJuIG1lc3NhZ2Vcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVDb25uZWN0aW9uQ29uZmlnKGFwcFR5cGU6IHN0cmluZywgY29uZmlnOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICBzd2l0Y2ggKGFwcFR5cGUpIHtcbiAgICBjYXNlICdHT09HTEVfV09SS1NQQUNFJzoge1xuICAgICAgaWYgKCFjb25maWcuZG9tYWluIHx8IHR5cGVvZiBjb25maWcuZG9tYWluICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ0dvb2dsZSBXb3Jrc3BhY2UgZG9tYWluIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKCFjb25maWcuYWRtaW5FbWFpbCB8fCB0eXBlb2YgY29uZmlnLmFkbWluRW1haWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnR29vZ2xlIFdvcmtzcGFjZSBhZG1pbiBlbWFpbCBpcyByZXF1aXJlZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmICghY29uZmlnLnNlcnZpY2VBY2NvdW50S2V5IHx8IHR5cGVvZiBjb25maWcuc2VydmljZUFjY291bnRLZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnR29vZ2xlIHNlcnZpY2UgYWNjb3VudCBrZXkgSlNPTiBpcyByZXF1aXJlZCcgfSlcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjYXNlICdTTEFDSyc6IHtcbiAgICAgIGlmICghY29uZmlnLmJvdFRva2VuIHx8IHR5cGVvZiBjb25maWcuYm90VG9rZW4gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnU2xhY2sgYm90IHRva2VuIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNhc2UgJ0JJVEJVQ0tFVCc6IHtcbiAgICAgIGlmICghY29uZmlnLndvcmtzcGFjZSB8fCB0eXBlb2YgY29uZmlnLndvcmtzcGFjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdCaXRidWNrZXQgd29ya3NwYWNlIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgY29uc3QgaGFzQXBpVG9rZW4gPSB0eXBlb2YgY29uZmlnLmFwaVRva2VuID09PSAnc3RyaW5nJyAmJiBjb25maWcuYXBpVG9rZW4ubGVuZ3RoID4gMFxuICAgICAgY29uc3QgaGFzQXBwUGFzc3dvcmQgPSB0eXBlb2YgY29uZmlnLmFwcFBhc3N3b3JkID09PSAnc3RyaW5nJyAmJiBjb25maWcuYXBwUGFzc3dvcmQubGVuZ3RoID4gMFxuICAgICAgaWYgKCFoYXNBcGlUb2tlbiAmJiAhaGFzQXBwUGFzc3dvcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdCaXRidWNrZXQgQVBJIHRva2VuIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgLy8gQml0YnVja2V0IEFQSSB0b2tlbnMgcmVxdWlyZSBCYXNpYyBBdXRoIHdpdGggZW1haWw6dG9rZW5cbiAgICAgIGlmICghY29uZmlnLnVzZXJuYW1lIHx8IHR5cGVvZiBjb25maWcudXNlcm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQXRsYXNzaWFuIGFjY291bnQgZW1haWwgaXMgcmVxdWlyZWQgZm9yIEJpdGJ1Y2tldCBBUEkgdG9rZW5zJyB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNhc2UgJ0pJUkEnOiB7XG4gICAgICBpZiAoIWNvbmZpZy5iYXNlVXJsIHx8IHR5cGVvZiBjb25maWcuYmFzZVVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdKaXJhIGJhc2UgVVJMIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKCFjb25maWcuYWRtaW5FbWFpbCB8fCB0eXBlb2YgY29uZmlnLmFkbWluRW1haWwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnSmlyYSBhZG1pbiBlbWFpbCBpcyByZXF1aXJlZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmICghY29uZmlnLmFwaVRva2VuIHx8IHR5cGVvZiBjb25maWcuYXBpVG9rZW4gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnSmlyYSBBUEkgdG9rZW4gaXMgcmVxdWlyZWQnIH0pXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY2FzZSAnSFVCU1BPVCc6IHtcbiAgICAgIGlmICghY29uZmlnLnNjaW1Ub2tlbiB8fCB0eXBlb2YgY29uZmlnLnNjaW1Ub2tlbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdIdWJTcG90IHByaXZhdGUgYXBwIHRva2VuIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNhc2UgJ1BBU1NCT0xUJzoge1xuICAgICAgY29uc3QgbW9kZSA9IHR5cGVvZiBjb25maWcubW9kZSA9PT0gJ3N0cmluZycgPyBjb25maWcubW9kZSA6ICcnXG4gICAgICBjb25zdCBub3JtYWxpemVkTW9kZSA9IG1vZGUgPT09ICdBUEknIHx8IG1vZGUgPT09ICdDTEknID8gbW9kZSA6ICcnXG4gICAgICBjb25zdCBiYXNlVXJsID0gdHlwZW9mIGNvbmZpZy5iYXNlVXJsID09PSAnc3RyaW5nJyA/IGNvbmZpZy5iYXNlVXJsIDogJydcbiAgICAgIGNvbnN0IGFwaVRva2VuID0gdHlwZW9mIGNvbmZpZy5hcGlUb2tlbiA9PT0gJ3N0cmluZycgPyBjb25maWcuYXBpVG9rZW4gOiAnJ1xuICAgICAgY29uc3QgY2xpUGF0aCA9IHR5cGVvZiBjb25maWcuY2xpUGF0aCA9PT0gJ3N0cmluZycgPyBjb25maWcuY2xpUGF0aCA6ICcnXG4gICAgICBjb25zdCBkZWZhdWx0Um9sZSA9IHR5cGVvZiBjb25maWcuZGVmYXVsdFJvbGUgPT09ICdzdHJpbmcnID8gY29uZmlnLmRlZmF1bHRSb2xlIDogJydcbiAgICAgIGNvbnN0IGhhc1dlYmhvb2sgPSBoYXNXZWJob29rQ29uZmlnKGNvbmZpZylcblxuICAgICAgaWYgKCFub3JtYWxpemVkTW9kZSAmJiAhYmFzZVVybCAmJiAhY2xpUGF0aCAmJiAhaGFzV2ViaG9vaykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQYXNzYm9sdCBjb25maWd1cmF0aW9uIGlzIHJlcXVpcmVkIChBUEksIENMSSwgb3Igd2ViaG9vaykuJyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKG5vcm1hbGl6ZWRNb2RlID09PSAnQVBJJyB8fCAoIW5vcm1hbGl6ZWRNb2RlICYmIGJhc2VVcmwpKSB7XG4gICAgICAgIGlmICghYmFzZVVybCkge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnUGFzc2JvbHQgYmFzZSBVUkwgaXMgcmVxdWlyZWQnIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhcGlUb2tlbikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnUGFzc2JvbHQgQVBJIHRva2VuIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChub3JtYWxpemVkTW9kZSA9PT0gJ0NMSScgfHwgKCFub3JtYWxpemVkTW9kZSAmJiBjbGlQYXRoKSkge1xuICAgICAgICBpZiAoIWNsaVBhdGgpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ1Bhc3Nib2x0IENMSSBwYXRoIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWZhdWx0Um9sZSAmJiAhWydhZG1pbicsICd1c2VyJ10uaW5jbHVkZXMoZGVmYXVsdFJvbGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnUGFzc2JvbHQgZGVmYXVsdCByb2xlIG11c3QgYmUgdXNlciBvciBhZG1pbicgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm5cbiAgfVxufVxuXG5jb25zdCBhcHBDb25uZWN0aW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBhcHBJZDogei5zdHJpbmcoKSxcbiAgY29uZmlnOiB6LnJlY29yZCh6LnVua25vd24oKSksXG4gIGRvbWFpbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSlcblxuY29uc3QgcHJvdmlzaW9uaW5nUnVsZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgYXBwSWQ6IHouc3RyaW5nKCksXG4gIG5hbWU6IHouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNvbmRpdGlvbjogei5yZWNvcmQoei51bmtub3duKCkpLFxuICBwcm92aXNpb25EYXRhOiB6LnJlY29yZCh6LnVua25vd24oKSksXG4gIHByaW9yaXR5OiB6Lm51bWJlcigpLmRlZmF1bHQoMCksXG4gIGlzQWN0aXZlOiB6LmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxufSlcblxuZXhwb3J0IGNvbnN0IGludGVncmF0aW9uUm91dGVyID0gcm91dGVyKHtcbiAgLy8gQXBwc1xuICBsaXN0QXBwczogYWRtaW5Qcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIHJldHVybiBjdHgucHJpc21hLmFwcC5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGFyY2hpdmVkQXQ6IG51bGwgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNvbm5lY3Rpb25zOiB7IHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0gfSxcbiAgICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICAgIHNlbGVjdDogeyBcbiAgICAgICAgICAgICAgcHJvdmlzaW9uaW5nUnVsZXM6IHRydWUsXG4gICAgICAgICAgICAgIGFjY291bnRzOiB7IHdoZXJlOiB7IHN0YXR1czogJ0FDVElWRScgfSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IG5hbWU6ICdhc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGxpc3RBcmNoaXZlZEFwcHM6IGFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5hcHAuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBhcmNoaXZlZEF0OiB7IG5vdDogbnVsbCB9IH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBjb25uZWN0aW9uczogeyB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgcHJvdmlzaW9uaW5nUnVsZXM6IHRydWUsXG4gICAgICAgICAgICAgIGFjY291bnRzOiB7IHdoZXJlOiB7IHN0YXR1czogJ0FDVElWRScgfSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGNyZWF0ZUN1c3RvbUFwcDogaXRBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDgwKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDI4MCkub3B0aW9uYWwoKSxcbiAgICAgICAgaWNvblVybDogei5zdHJpbmcoKS51cmwoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGlucHV0Lm5hbWUudHJpbSgpXG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdOYW1lIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhcHAgPSBhd2FpdCBjdHgucHJpc21hLmFwcC5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdDVVNUT00nLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dC5kZXNjcmlwdGlvbj8udHJpbSgpID8gaW5wdXQuZGVzY3JpcHRpb24udHJpbSgpIDogbnVsbCxcbiAgICAgICAgICAgIGljb25Vcmw6IGlucHV0Lmljb25Vcmw/LnRyaW0oKSA/IGlucHV0Lmljb25VcmwudHJpbSgpIDogbnVsbCxcbiAgICAgICAgICAgIC8vIE11c3QgYmUgY29ubmVjdGVkIGJlZm9yZSBpdCBjYW4gYmUgZW5hYmxlZC5cbiAgICAgICAgICAgIGlzRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBhcmNoaXZlZEF0OiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgICAgYWN0aW9uOiAnQVBQX0NSRUFURUQnLFxuICAgICAgICAgIHJlc291cmNlVHlwZTogJ2FwcCcsXG4gICAgICAgICAgcmVzb3VyY2VJZDogYXBwLmlkLFxuICAgICAgICAgIG1ldGFkYXRhOiB7IHR5cGU6IGFwcC50eXBlLCBuYW1lOiBhcHAubmFtZSB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiBhcHBcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gVW5pcXVlIGNvbnN0cmFpbnQgY29uZmxpY3QgKHR5cGUrbmFtZSlcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0NPTkZMSUNUJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQW4gYXBwbGljYXRpb24gd2l0aCB0aGlzIG5hbWUgYWxyZWFkeSBleGlzdHMnLFxuICAgICAgICAgIGNhdXNlOiBlLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pLFxuXG4gIGFyY2hpdmVBcHA6IGl0QWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBhcHBJZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBhcHAgPSBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmFwcElkIH0sXG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgdHlwZTogdHJ1ZSwgbmFtZTogdHJ1ZSB9LFxuICAgICAgfSlcbiAgICAgIGlmICghYXBwKSB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIGlmIChhcHAudHlwZSAhPT0gJ0NVU1RPTScpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdPbmx5IGN1c3RvbSBhcHBsaWNhdGlvbnMgY2FuIGJlIGFyY2hpdmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY3R4LnByaXNtYS5hcHAudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmFwcElkIH0sXG4gICAgICAgIGRhdGE6IHsgYXJjaGl2ZWRBdDogbmV3IERhdGUoKSwgaXNFbmFibGVkOiBmYWxzZSB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICBhY3RvcklkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICBhY3Rpb246ICdBUFBfQVJDSElWRUQnLFxuICAgICAgICByZXNvdXJjZVR5cGU6ICdhcHAnLFxuICAgICAgICByZXNvdXJjZUlkOiB1cGRhdGVkLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyBhcmNoaXZlZDogdHJ1ZSwgdHlwZTogdXBkYXRlZC50eXBlLCBuYW1lOiB1cGRhdGVkLm5hbWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB1cGRhdGVkXG4gICAgfSksXG5cbiAgcmVzdG9yZUFwcDogaXRBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGFwcElkOiB6LnN0cmluZygpIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuYXBwSWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgaWYgKCFhcHApIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuXG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY3R4LnByaXNtYS5hcHAudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmFwcElkIH0sXG4gICAgICAgIGRhdGE6IHsgYXJjaGl2ZWRBdDogbnVsbCB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICBhY3RvcklkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICBhY3Rpb246ICdBUFBfUkVTVE9SRUQnLFxuICAgICAgICByZXNvdXJjZVR5cGU6ICdhcHAnLFxuICAgICAgICByZXNvdXJjZUlkOiB1cGRhdGVkLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyByZXN0b3JlZDogdHJ1ZSwgdHlwZTogdXBkYXRlZC50eXBlLCBuYW1lOiB1cGRhdGVkLm5hbWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB1cGRhdGVkXG4gICAgfSksXG5cbiAgZ2V0QXBwOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0OiBpZCB9KSA9PiB7XG4gICAgICBjb25zdCBhcHAgPSBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGNvbm5lY3Rpb25zOiB0cnVlLFxuICAgICAgICAgIHByb3Zpc2lvbmluZ1J1bGVzOiB7IG9yZGVyQnk6IHsgcHJpb3JpdHk6ICdkZXNjJyB9IH0sXG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgcHJvdmlzaW9uaW5nUnVsZXM6IHRydWUsXG4gICAgICAgICAgICAgIGFjY291bnRzOiB7IHdoZXJlOiB7IHN0YXR1czogJ0FDVElWRScgfSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICB0YWtlOiAyMCxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgdXBkYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgZW1wbG95ZWU6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSwgc3RhdHVzOiB0cnVlIH0gfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghYXBwKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXBwXG4gICAgfSksXG5cbiAgZ2V0Q29ubmVjdGlvblN1bW1hcnk6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGFwcElkIH0pID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogYXBwSWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCB0eXBlOiB0cnVlLCBhcmNoaXZlZEF0OiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgaWYgKCFhcHApIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgaWYgKGFwcC5hcmNoaXZlZEF0KSB7XG4gICAgICAgIHJldHVybiB7IGhhc0Nvbm5lY3Rpb246IGZhbHNlLCBjb25uZWN0aW9uSWQ6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwgZG9tYWluOiBudWxsIGFzIHN0cmluZyB8IG51bGwsIGNvbmZpZzoge30sIHNlY3JldHM6IHt9IH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBhcHBJZCwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgb3JkZXJCeTogeyB1cGRhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7IGhhc0Nvbm5lY3Rpb246IGZhbHNlLCBjb25uZWN0aW9uSWQ6IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwgZG9tYWluOiBudWxsIGFzIHN0cmluZyB8IG51bGwsIGNvbmZpZzoge30sIHNlY3JldHM6IHt9IH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmF3ID0gc2FmZVBhcnNlQ29uZmlnKGNvbm5lY3Rpb24uY29uZmlnRW5jcnlwdGVkKVxuICAgICAgY29uc3QgYmFzZVN1bW1hcnkgPSB7XG4gICAgICAgIGhhc0Nvbm5lY3Rpb246IHRydWUsXG4gICAgICAgIGNvbm5lY3Rpb25JZDogY29ubmVjdGlvbi5pZCxcbiAgICAgICAgZG9tYWluOiBjb25uZWN0aW9uLmRvbWFpbiA/PyBudWxsLFxuICAgICAgICBsYXN0VGVzdFN0YXR1czogY29ubmVjdGlvbi5sYXN0VGVzdFN0YXR1cyxcbiAgICAgICAgbGFzdFRlc3RlZEF0OiBjb25uZWN0aW9uLmxhc3RUZXN0ZWRBdCxcbiAgICAgICAgbGFzdFRlc3RFcnJvcjogY29ubmVjdGlvbi5sYXN0VGVzdEVycm9yLFxuICAgICAgfVxuXG4gICAgICBpZiAoYXBwLnR5cGUgPT09ICdHT09HTEVfV09SS1NQQUNFJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmJhc2VTdW1tYXJ5LFxuICAgICAgICAgIGRvbWFpbjogY29ubmVjdGlvbi5kb21haW4gPz8gKHR5cGVvZiByYXcuZG9tYWluID09PSAnc3RyaW5nJyA/IHJhdy5kb21haW4gOiBudWxsKSxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIGRvbWFpbjogdHlwZW9mIHJhdy5kb21haW4gPT09ICdzdHJpbmcnID8gcmF3LmRvbWFpbiA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFkbWluRW1haWw6IHR5cGVvZiByYXcuYWRtaW5FbWFpbCA9PT0gJ3N0cmluZycgPyByYXcuYWRtaW5FbWFpbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlY3JldHM6IHtcbiAgICAgICAgICAgIHNlcnZpY2VBY2NvdW50S2V5U2V0OiB0eXBlb2YgcmF3LnNlcnZpY2VBY2NvdW50S2V5ID09PSAnc3RyaW5nJyAmJiByYXcuc2VydmljZUFjY291bnRLZXkubGVuZ3RoID4gMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE5ldmVyIHJldHVybiBzZWNyZXQgdmFsdWVzOyBvbmx5IGZsYWdzICsgc2FmZSBmaWVsZHMuXG4gICAgICBpZiAoYXBwLnR5cGUgPT09ICdTTEFDSycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5iYXNlU3VtbWFyeSxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIHRlYW1JZDogdHlwZW9mIHJhdy50ZWFtSWQgPT09ICdzdHJpbmcnID8gcmF3LnRlYW1JZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRlZmF1bHRDaGFubmVsczogQXJyYXkuaXNBcnJheShyYXcuZGVmYXVsdENoYW5uZWxzKSA/IHJhdy5kZWZhdWx0Q2hhbm5lbHMgOiBbXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlY3JldHM6IHtcbiAgICAgICAgICAgIGJvdFRva2VuU2V0OiB0eXBlb2YgcmF3LmJvdFRva2VuID09PSAnc3RyaW5nJyAmJiByYXcuYm90VG9rZW4ubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIGFkbWluVG9rZW5TZXQ6IHR5cGVvZiByYXcuYWRtaW5Ub2tlbiA9PT0gJ3N0cmluZycgJiYgcmF3LmFkbWluVG9rZW4ubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIHNpZ25pbmdTZWNyZXRTZXQ6IHR5cGVvZiByYXcuc2lnbmluZ1NlY3JldCA9PT0gJ3N0cmluZycgJiYgcmF3LnNpZ25pbmdTZWNyZXQubGVuZ3RoID4gMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhcHAudHlwZSA9PT0gJ0JJVEJVQ0tFVCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5iYXNlU3VtbWFyeSxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIHdvcmtzcGFjZTogdHlwZW9mIHJhdy53b3Jrc3BhY2UgPT09ICdzdHJpbmcnID8gcmF3LndvcmtzcGFjZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0eXBlb2YgcmF3LnVzZXJuYW1lID09PSAnc3RyaW5nJyA/IHJhdy51c2VybmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlY3JldHM6IHtcbiAgICAgICAgICAgIGFwcFBhc3N3b3JkU2V0OiB0eXBlb2YgcmF3LmFwcFBhc3N3b3JkID09PSAnc3RyaW5nJyAmJiByYXcuYXBwUGFzc3dvcmQubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIGFwaVRva2VuU2V0OiB0eXBlb2YgcmF3LmFwaVRva2VuID09PSAnc3RyaW5nJyAmJiByYXcuYXBpVG9rZW4ubGVuZ3RoID4gMCxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChhcHAudHlwZSA9PT0gJ0pJUkEnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYmFzZVN1bW1hcnksXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICBiYXNlVXJsOiB0eXBlb2YgcmF3LmJhc2VVcmwgPT09ICdzdHJpbmcnID8gcmF3LmJhc2VVcmwgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBhZG1pbkVtYWlsOiB0eXBlb2YgcmF3LmFkbWluRW1haWwgPT09ICdzdHJpbmcnID8gcmF3LmFkbWluRW1haWwgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwcm9kdWN0czogQXJyYXkuaXNBcnJheShyYXcucHJvZHVjdHMpID8gcmF3LnByb2R1Y3RzIDogW10sXG4gICAgICAgICAgICBkZWZhdWx0R3JvdXBzOiBBcnJheS5pc0FycmF5KHJhdy5kZWZhdWx0R3JvdXBzKSA/IHJhdy5kZWZhdWx0R3JvdXBzIDogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWNyZXRzOiB7XG4gICAgICAgICAgICBhcGlUb2tlblNldDogdHlwZW9mIHJhdy5hcGlUb2tlbiA9PT0gJ3N0cmluZycgJiYgcmF3LmFwaVRva2VuLmxlbmd0aCA+IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYXBwLnR5cGUgPT09ICdIVUJTUE9UJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmJhc2VTdW1tYXJ5LFxuICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgc2VjcmV0czoge1xuICAgICAgICAgICAgc2NpbVRva2VuU2V0OiB0eXBlb2YgcmF3LnNjaW1Ub2tlbiA9PT0gJ3N0cmluZycgJiYgcmF3LnNjaW1Ub2tlbi5sZW5ndGggPiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGFwcC50eXBlID09PSAnUEFTU0JPTFQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uYmFzZVN1bW1hcnksXG4gICAgICAgICAgZG9tYWluOiBjb25uZWN0aW9uLmRvbWFpbiA/PyAodHlwZW9mIHJhdy5iYXNlVXJsID09PSAnc3RyaW5nJyA/IHJhdy5iYXNlVXJsIDogbnVsbCksXG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICBtb2RlOiB0eXBlb2YgcmF3Lm1vZGUgPT09ICdzdHJpbmcnID8gcmF3Lm1vZGUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBiYXNlVXJsOiB0eXBlb2YgcmF3LmJhc2VVcmwgPT09ICdzdHJpbmcnID8gcmF3LmJhc2VVcmwgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGlQYXRoOiB0eXBlb2YgcmF3LmNsaVBhdGggPT09ICdzdHJpbmcnID8gcmF3LmNsaVBhdGggOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGlVc2VyOiB0eXBlb2YgcmF3LmNsaVVzZXIgPT09ICdzdHJpbmcnID8gcmF3LmNsaVVzZXIgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkZWZhdWx0Um9sZTogdHlwZW9mIHJhdy5kZWZhdWx0Um9sZSA9PT0gJ3N0cmluZycgPyByYXcuZGVmYXVsdFJvbGUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWNyZXRzOiB7XG4gICAgICAgICAgICBhcGlUb2tlblNldDogdHlwZW9mIHJhdy5hcGlUb2tlbiA9PT0gJ3N0cmluZycgJiYgcmF3LmFwaVRva2VuLmxlbmd0aCA+IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0OiBvbmx5IGluZGljYXRlIHRoZXJlJ3MgYSBjb25uZWN0aW9uLlxuICAgICAgcmV0dXJuIHsgLi4uYmFzZVN1bW1hcnksIGNvbmZpZzoge30sIHNlY3JldHM6IHt9IH1cbiAgICB9KSxcblxuICB1cHNlcnRDb25uZWN0aW9uQ29uZmlnOiBpdEFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBhcHBJZDogei5zdHJpbmcoKSxcbiAgICAgICAgZG9tYWluOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGNvbmZpZzogei5yZWNvcmQoei51bmtub3duKCkpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5hcHBJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIHR5cGU6IHRydWUsIGFyY2hpdmVkQXQ6IHRydWUgfSxcbiAgICAgIH0pXG4gICAgICBpZiAoIWFwcCkgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnQXBwIG5vdCBmb3VuZCcgfSlcbiAgICAgIGlmIChhcHAuYXJjaGl2ZWRBdCkgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdSZXN0b3JlIHRoaXMgYXBwbGljYXRpb24gYmVmb3JlIGNvbm5lY3RpbmcgaXQnIH0pXG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgYXBwSWQ6IGlucHV0LmFwcElkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBpbnB1dENmZyA9IG5vcm1hbGl6ZUNvbmZpZ0lucHV0KGlucHV0LmNvbmZpZylcbiAgICAgIGNvbnN0IG1lcmdlZCA9IGNvbm5lY3Rpb24gPyB7IC4uLnNhZmVQYXJzZUNvbmZpZyhjb25uZWN0aW9uLmNvbmZpZ0VuY3J5cHRlZCksIC4uLmlucHV0Q2ZnIH0gOiBpbnB1dENmZ1xuXG4gICAgICAvLyBBbGxvdyBjYWxsZXJzIHRvIGV4cGxpY2l0bHkgY2xlYXIgYXJyYXlzLlxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaW5wdXQuY29uZmlnKSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIG1lcmdlZFtrZXldID0gdmFsdWVcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGVDb25uZWN0aW9uQ29uZmlnKGFwcC50eXBlLCBtZXJnZWQpXG5cbiAgICAgIGNvbnN0IGNvbmZpZ0VuY3J5cHRlZCA9IGVuY3J5cHRDb25maWdPclRocm93KG1lcmdlZClcblxuICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBhcHBJZDogaW5wdXQuYXBwSWQsXG4gICAgICAgICAgICBjb25maWdFbmNyeXB0ZWQsXG4gICAgICAgICAgICBkb21haW46IGlucHV0LmRvbWFpbixcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gQXV0by1lbmFibGUgb24gZmlyc3QgY29ubmVjdGlvbiBmb3IgYSBzbW9vdGhlciBVWC5cbiAgICAgICAgY29uc3QgYWN0aXZlQ29ubmVjdGlvbnMgPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IGFwcElkOiBpbnB1dC5hcHBJZCwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKGFjdGl2ZUNvbm5lY3Rpb25zID09PSAxKSB7XG4gICAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5hcHAudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5hcHBJZCB9LFxuICAgICAgICAgICAgZGF0YTogeyBpc0VuYWJsZWQ6IHRydWUgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgICAgYWN0aW9uOiAnQVBQX0NPTk5FQ1RFRCcsXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiAnYXBwX2Nvbm5lY3Rpb24nLFxuICAgICAgICAgIHJlc291cmNlSWQ6IGNyZWF0ZWQuaWQsXG4gICAgICAgICAgbWV0YWRhdGE6IHsgYXBwVHlwZTogYXBwLnR5cGUsIGRvbWFpbjogaW5wdXQuZG9tYWluIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogY29ubmVjdGlvbi5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY29uZmlnRW5jcnlwdGVkLFxuICAgICAgICAgIGRvbWFpbjogaW5wdXQuZG9tYWluID8/IGNvbm5lY3Rpb24uZG9tYWluLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICAvLyBJbml0aWFsaXplIGRlZmF1bHQgYXBwc1xuICBpbml0aWFsaXplQXBwczogYWRtaW5Qcm9jZWR1cmVcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRBcHBzID0gW1xuICAgICAgICB7IHR5cGU6ICdHT09HTEVfV09SS1NQQUNFJyBhcyBjb25zdCwgbmFtZTogJ0dvb2dsZSBXb3Jrc3BhY2UnLCBkZXNjcmlwdGlvbjogJ1Byb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlIGFjY291bnRzLCBncm91cHMsIGFuZCBvcmdhbml6YXRpb25hbCB1bml0cycgfSxcbiAgICAgICAgeyB0eXBlOiAnU0xBQ0snIGFzIGNvbnN0LCBuYW1lOiAnU2xhY2snLCBkZXNjcmlwdGlvbjogJ1Byb3Zpc2lvbiBTbGFjayB3b3Jrc3BhY2UgYWNjZXNzIGFuZCBjaGFubmVsIG1lbWJlcnNoaXBzJyB9LFxuICAgICAgICB7IHR5cGU6ICdCSVRCVUNLRVQnIGFzIGNvbnN0LCBuYW1lOiAnQml0YnVja2V0JywgZGVzY3JpcHRpb246ICdQcm92aXNpb24gQml0YnVja2V0IHJlcG9zaXRvcnkgYWNjZXNzIGFuZCBwZXJtaXNzaW9ucycgfSxcbiAgICAgICAgeyB0eXBlOiAnSklSQScgYXMgY29uc3QsIG5hbWU6ICdKaXJhJywgZGVzY3JpcHRpb246ICdQcm92aXNpb24gSmlyYSBwcm9qZWN0IGFjY2VzcyBhbmQgaXNzdWUgbWFuYWdlbWVudCcgfSxcbiAgICAgICAgeyB0eXBlOiAnUEFTU0JPTFQnIGFzIGNvbnN0LCBuYW1lOiAnUGFzc2JvbHQnLCBkZXNjcmlwdGlvbjogJ1Byb3Zpc2lvbiBQYXNzYm9sdCBwYXNzd29yZCBtYW5hZ2VtZW50IGFuZCBzZWN1cmUgc2hhcmluZycgfSxcbiAgICAgICAgeyB0eXBlOiAnSFVCU1BPVCcgYXMgY29uc3QsIG5hbWU6ICdIdWJTcG90JywgZGVzY3JpcHRpb246ICdQcm92aXNpb24gSHViU3BvdCBDUk0gYWNjZXNzIGFuZCBtYXJrZXRpbmcgYXV0b21hdGlvbicgfSxcbiAgICAgICAgeyB0eXBlOiAnU1RBTkRVUE5JTkpBJyBhcyBjb25zdCwgbmFtZTogJ1N0YW5kdXBOaW5qYScsIGRlc2NyaXB0aW9uOiAnUHJvdmlzaW9uIFN0YW5kdXBOaW5qYSB0ZWFtIHN0YW5kdXAgYW5kIHN0YXR1cyBtYW5hZ2VtZW50JyB9LFxuICAgICAgXVxuXG4gICAgICBmb3IgKGNvbnN0IGFwcCBvZiBkZWZhdWx0QXBwcykge1xuICAgICAgICBhd2FpdCBjdHgucHJpc21hLmFwcC51cHNlcnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHR5cGVfbmFtZTogeyB0eXBlOiBhcHAudHlwZSwgbmFtZTogYXBwLm5hbWUgfSB9LFxuICAgICAgICAgIGNyZWF0ZTogYXBwLFxuICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IGFwcC5kZXNjcmlwdGlvbixcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9KSxcblxuICB0b2dnbGVBcHA6IGl0QWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgYXBwSWQ6IHouc3RyaW5nKCksXG4gICAgICBpc0VuYWJsZWQ6IHouYm9vbGVhbigpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuYXBwSWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBhcmNoaXZlZEF0OiB0cnVlLCB0eXBlOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgaWYgKCFhcHApIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgaWYgKGFwcC5hcmNoaXZlZEF0ICYmIGlucHV0LmlzRW5hYmxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ1Jlc3RvcmUgdGhpcyBhcHBsaWNhdGlvbiBiZWZvcmUgZW5hYmxpbmcgaXQnIH0pXG4gICAgICB9XG4gICAgICBpZiAoaW5wdXQuaXNFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IGhhc0Nvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyBhcHBJZDogaW5wdXQuYXBwSWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghaGFzQ29ubmVjdGlvbikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQ29ubmVjdCB0aGlzIGFwcGxpY2F0aW9uIGJlZm9yZSBlbmFibGluZyBpdCcgfSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmdWxsQXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5hcHBJZCB9IH0pXG4gICAgICAgIGlmIChmdWxsQXBwKSB7XG4gICAgICAgICAgY29uc3QgY29ubmVjdG9yID0gYXdhaXQgZ2V0Q29ubmVjdG9yKGZ1bGxBcHApXG4gICAgICAgICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhpcyBhcHBsaWNhdGlvbiBpcyBjb25uZWN0ZWQgYnV0IG5vdCBjb25maWd1cmVkLiBDb25maWd1cmUgaXQgaW4gU2V0dGluZ3MgZmlyc3QuJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5hcHAudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmFwcElkIH0sXG4gICAgICAgIGRhdGE6IHsgaXNFbmFibGVkOiBpbnB1dC5pc0VuYWJsZWQgfSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgLy8gQ29ubmVjdGlvbnNcbiAgY3JlYXRlQ29ubmVjdGlvbjogaXRBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChhcHBDb25uZWN0aW9uU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuYXBwSWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghYXBwKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ0FwcCBub3QgZm91bmQnIH0pXG4gICAgICB9XG4gICAgICBpZiAoYXBwLmFyY2hpdmVkQXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdSZXN0b3JlIHRoaXMgYXBwbGljYXRpb24gYmVmb3JlIGNvbm5lY3RpbmcgaXQnIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIEVuY3J5cHQgY29uZmlnXG4gICAgICBjb25zdCBjb25maWdFbmNyeXB0ZWQgPSBlbmNyeXB0Q29uZmlnT3JUaHJvdyhpbnB1dC5jb25maWcpXG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFwcElkOiBpbnB1dC5hcHBJZCxcbiAgICAgICAgICBjb25maWdFbmNyeXB0ZWQsXG4gICAgICAgICAgZG9tYWluOiBpbnB1dC5kb21haW4sXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBBdXRvLWVuYWJsZSBvbiBmaXJzdCBjb25uZWN0aW9uIGZvciBhIHNtb290aGVyIFVYLlxuICAgICAgY29uc3QgYWN0aXZlQ29ubmVjdGlvbnMgPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uY291bnQoe1xuICAgICAgICB3aGVyZTogeyBhcHBJZDogaW5wdXQuYXBwSWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgaWYgKGFjdGl2ZUNvbm5lY3Rpb25zID09PSAxKSB7XG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuYXBwLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmFwcElkIH0sXG4gICAgICAgICAgZGF0YTogeyBpc0VuYWJsZWQ6IHRydWUgfSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICBhY3RvcklkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICBhY3Rpb246ICdBUFBfQ09OTkVDVEVEJyxcbiAgICAgICAgcmVzb3VyY2VUeXBlOiAnYXBwX2Nvbm5lY3Rpb24nLFxuICAgICAgICByZXNvdXJjZUlkOiBjb25uZWN0aW9uLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyBhcHBUeXBlOiBhcHAudHlwZSwgZG9tYWluOiBpbnB1dC5kb21haW4gfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBjb25uZWN0aW9uXG4gICAgfSksXG5cbiAgdXBkYXRlQ29ubmVjdGlvbjogaXRBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBjb25uZWN0aW9uSWQ6IHouc3RyaW5nKCksXG4gICAgICBjb25maWc6IHoucmVjb3JkKHoudW5rbm93bigpKSxcbiAgICAgIGRvbWFpbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZ0VuY3J5cHRlZCA9IGVuY3J5cHRDb25maWdPclRocm93KGlucHV0LmNvbmZpZylcblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuY29ubmVjdGlvbklkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb25maWdFbmNyeXB0ZWQsXG4gICAgICAgICAgZG9tYWluOiBpbnB1dC5kb21haW4sXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGRlbGV0ZUNvbm5lY3Rpb246IGl0QWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogY29ubmVjdGlvbklkIH0pID0+IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBjb25uZWN0aW9uSWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyBhcHA6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghY29ubmVjdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5hcHBDb25uZWN0aW9uLmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBjb25uZWN0aW9uSWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7IGFwcElkOiBjb25uZWN0aW9uLmFwcElkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgfSlcbiAgICAgIGlmIChyZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5hcHAudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogY29ubmVjdGlvbi5hcHBJZCB9LFxuICAgICAgICAgIGRhdGE6IHsgaXNFbmFibGVkOiBmYWxzZSB9LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgIGFjdGlvbjogJ0FQUF9ESVNDT05ORUNURUQnLFxuICAgICAgICByZXNvdXJjZVR5cGU6ICdhcHBfY29ubmVjdGlvbicsXG4gICAgICAgIHJlc291cmNlSWQ6IGNvbm5lY3Rpb25JZCxcbiAgICAgICAgbWV0YWRhdGE6IHsgYXBwVHlwZTogY29ubmVjdGlvbi5hcHAudHlwZSB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgdGVzdENvbm5lY3Rpb246IGl0QWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogYXBwSWQgfSkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBhcHBJZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFhcHApIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG4gICAgICBpZiAoYXBwLmFyY2hpdmVkQXQpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVGhpcyBhcHBsaWNhdGlvbiBpcyBhcmNoaXZlZC4gUmVzdG9yZSBpdCB0byB0ZXN0IHRoZSBjb25uZWN0aW9uLicgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgY3R4LnByaXNtYS5hcHBDb25uZWN0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGFwcElkOiBhcHAuaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgdXBkYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgIH0pXG4gICAgICBpZiAoIWNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gYWN0aXZlIGNvbm5lY3Rpb24gY29uZmlndXJlZCcgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25uZWN0b3IgPSBhd2FpdCBnZXRDb25uZWN0b3IoYXBwKVxuICAgICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBhY3RpdmUgY29ubmVjdGlvbiBjb25maWd1cmVkJyB9XG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuYXBwQ29ubmVjdGlvbi51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBjb25uZWN0aW9uLmlkIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgbGFzdFRlc3RTdGF0dXM6ICdGQUlMRUQnLFxuICAgICAgICAgICAgbGFzdFRlc3RFcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgICAgICAgbGFzdFRlc3RlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdDogeyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9XG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBjb25uZWN0b3IudGVzdENvbm5lY3Rpb24oKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gY29ubmVjdCcsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5hcHBDb25uZWN0aW9uLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBjb25uZWN0aW9uLmlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBsYXN0VGVzdFN0YXR1czogcmVzdWx0LnN1Y2Nlc3MgPyAnU1VDQ0VTUycgOiAnRkFJTEVEJyxcbiAgICAgICAgICBsYXN0VGVzdEVycm9yOiByZXN1bHQuc3VjY2VzcyA/IG51bGwgOiByZXN1bHQuZXJyb3IgfHwgJ0Nvbm5lY3Rpb24gZmFpbGVkJyxcbiAgICAgICAgICBsYXN0VGVzdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSksXG5cbiAgbGlzdEJpdGJ1Y2tldE9wdGlvbnM6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGFwcElkIH0pID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogYXBwSWQgfSB9KVxuICAgICAgaWYgKCFhcHApIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG4gICAgICBpZiAoYXBwLnR5cGUgIT09ICdCSVRCVUNLRVQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQXBwIGlzIG5vdCBCaXRidWNrZXQnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgYXBwSWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7IGdyb3VwczogW10sIHJlcG9zaXRvcmllczogW10sIGVycm9yOiAnTm8gYWN0aXZlIEJpdGJ1Y2tldCBjb25uZWN0aW9uIGNvbmZpZ3VyZWQuJyB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbmZpZyA9IHNhZmVQYXJzZUNvbmZpZyhjb25uZWN0aW9uLmNvbmZpZ0VuY3J5cHRlZClcbiAgICAgIGNvbnN0IHdvcmtzcGFjZSA9IHR5cGVvZiBjb25maWcud29ya3NwYWNlID09PSAnc3RyaW5nJyA/IGNvbmZpZy53b3Jrc3BhY2UgOiAnJ1xuICAgICAgY29uc3QgYXBpVG9rZW4gPSB0eXBlb2YgY29uZmlnLmFwaVRva2VuID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hcGlUb2tlbiA6IHVuZGVmaW5lZFxuICAgICAgY29uc3QgdXNlcm5hbWUgPSB0eXBlb2YgY29uZmlnLnVzZXJuYW1lID09PSAnc3RyaW5nJyA/IGNvbmZpZy51c2VybmFtZSA6IHVuZGVmaW5lZFxuICAgICAgY29uc3QgYXBwUGFzc3dvcmQgPSB0eXBlb2YgY29uZmlnLmFwcFBhc3N3b3JkID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hcHBQYXNzd29yZCA6IHVuZGVmaW5lZFxuXG4gICAgICBpZiAoIXdvcmtzcGFjZSkge1xuICAgICAgICByZXR1cm4geyBncm91cHM6IFtdLCByZXBvc2l0b3JpZXM6IFtdLCBlcnJvcjogJ0JpdGJ1Y2tldCB3b3Jrc3BhY2UgaXMgbm90IGNvbmZpZ3VyZWQuJyB9XG4gICAgICB9XG4gICAgICBpZiAoIWFwaVRva2VuICYmICEodXNlcm5hbWUgJiYgYXBwUGFzc3dvcmQpKSB7XG4gICAgICAgIHJldHVybiB7IGdyb3VwczogW10sIHJlcG9zaXRvcmllczogW10sIGVycm9yOiAnQml0YnVja2V0IGNyZWRlbnRpYWxzIGFyZSBub3QgY29uZmlndXJlZC4nIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29ubmVjdG9yID0gbmV3IEJpdGJ1Y2tldENvbm5lY3Rvcih7IHdvcmtzcGFjZSwgdXNlcm5hbWUsIGFwcFBhc3N3b3JkLCBhcGlUb2tlbiB9KVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2dyb3VwcywgcmVwb3NpdG9yaWVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBjb25uZWN0b3IubGlzdEdyb3VwcygpLFxuICAgICAgICAgIGNvbm5lY3Rvci5saXN0UmVwb3NpdG9yaWVzKCksXG4gICAgICAgIF0pXG4gICAgICAgIHJldHVybiB7IGdyb3VwcywgcmVwb3NpdG9yaWVzIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZ3JvdXBzOiBbXSxcbiAgICAgICAgICByZXBvc2l0b3JpZXM6IFtdLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBCaXRidWNrZXQgZGF0YScsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICBsaXN0SmlyYUdyb3VwczogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0OiBhcHBJZCB9KSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcmVzb2x2ZUppcmFDb25uZWN0aW9uKGN0eCwgYXBwSWQpXG4gICAgICBpZiAoJ2Vycm9yJyBpbiBjb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7IGdyb3VwczogW10sIGVycm9yOiBjb25uZWN0aW9uLmVycm9yIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZ3JvdXBzOiBBcnJheTx7IG5hbWU6IHN0cmluZyB9PiA9IFtdXG4gICAgICBsZXQgc3RhcnRBdCA9IDBcbiAgICAgIGNvbnN0IG1heFJlc3VsdHMgPSA1MFxuICAgICAgbGV0IHRvdGFsID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHdoaWxlIChzdGFydEF0IDwgdG90YWwpIHtcbiAgICAgICAgICBjb25zdCB1cmwgPSBgJHtjb25uZWN0aW9uLmJhc2VVcmx9L3Jlc3QvYXBpLzMvZ3JvdXBzL3BpY2tlcj9zdGFydEF0PSR7c3RhcnRBdH0mbWF4UmVzdWx0cz0ke21heFJlc3VsdHN9JnF1ZXJ5PWBcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgamlyYVJlcXVlc3RKc29uPHsgZ3JvdXBzPzogQXJyYXk8eyBuYW1lPzogc3RyaW5nIH0+OyB0b3RhbD86IG51bWJlciB9PihcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uYXV0aEhlYWRlclxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBwYWdlID0gKGRhdGEuZ3JvdXBzIHx8IFtdKVxuICAgICAgICAgICAgLm1hcCgoZ3JvdXApID0+IChncm91cC5uYW1lID8geyBuYW1lOiBncm91cC5uYW1lIH0gOiBudWxsKSlcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbikgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmcgfT5cbiAgICAgICAgICBncm91cHMucHVzaCguLi5wYWdlKVxuICAgICAgICAgIHRvdGFsID0gdHlwZW9mIGRhdGEudG90YWwgPT09ICdudW1iZXInID8gZGF0YS50b3RhbCA6IGdyb3Vwcy5sZW5ndGhcbiAgICAgICAgICBpZiAocGFnZS5sZW5ndGggPCBtYXhSZXN1bHRzKSBicmVha1xuICAgICAgICAgIHN0YXJ0QXQgKz0gbWF4UmVzdWx0c1xuICAgICAgICAgIGlmIChzdGFydEF0ID4gNTAwMCkgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBncm91cHMgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBncm91cHM6IFtdLFxuICAgICAgICAgIGVycm9yOiBmb3JtYXRKaXJhRXJyb3IoXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICdGYWlsZWQgdG8gbG9hZCBKaXJhIGdyb3Vwcy4gRW5zdXJlIHRoZSBhZG1pbiB1c2VyIGhhcyBCcm93c2UgdXNlcnMgYW5kIGdyb3VwcyBwZXJtaXNzaW9uIGFuZCB0aGUgQVBJIHRva2VuIGluY2x1ZGVzIHJlYWQ6Z3JvdXA6amlyYSBzY29wZS4nXG4gICAgICAgICAgKSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gIGxpc3RKaXJhUHJvZHVjdHM6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkub3B0aW9uYWwoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogYXBwSWQgfSkgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHJlc29sdmVKaXJhQ29ubmVjdGlvbihjdHgsIGFwcElkKVxuICAgICAgaWYgKCdlcnJvcicgaW4gY29ubmVjdGlvbikge1xuICAgICAgICByZXR1cm4geyBwcm9kdWN0czogW10sIGVycm9yOiBjb25uZWN0aW9uLmVycm9yIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7Y29ubmVjdGlvbi5iYXNlVXJsfS9yZXN0L2FwaS8zL2FwcGxpY2F0aW9ucm9sZWBcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGppcmFSZXF1ZXN0SnNvbjxcbiAgICAgICAgICBBcnJheTx7IGtleT86IHN0cmluZzsgbmFtZT86IHN0cmluZzsgdXNlckNvdW50PzogbnVtYmVyOyBudW1iZXJPZlNlYXRzPzogbnVtYmVyIH0+XG4gICAgICAgID4odXJsLCBjb25uZWN0aW9uLmF1dGhIZWFkZXIpXG4gICAgICAgIGNvbnN0IHByb2R1Y3RzID0gKGRhdGEgfHwgW10pXG4gICAgICAgICAgLm1hcCgocm9sZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFyb2xlLmtleSkgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGtleTogcm9sZS5rZXksXG4gICAgICAgICAgICAgIG5hbWU6IHJvbGUubmFtZSB8fCByb2xlLmtleSxcbiAgICAgICAgICAgICAgdXNlckNvdW50OiB0eXBlb2Ygcm9sZS51c2VyQ291bnQgPT09ICdudW1iZXInID8gcm9sZS51c2VyQ291bnQgOiByb2xlLm51bWJlck9mU2VhdHMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIEFycmF5PHsga2V5OiBzdHJpbmc7IG5hbWU6IHN0cmluZzsgdXNlckNvdW50PzogbnVtYmVyIH0+XG4gICAgICAgIHJldHVybiB7IHByb2R1Y3RzIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJvZHVjdHM6IFtdLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBKaXJhIHByb2R1Y3RzJyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuXG4gIGxpc3RKaXJhQm9hcmRzOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGFwcElkIH0pID0+IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCByZXNvbHZlSmlyYUNvbm5lY3Rpb24oY3R4LCBhcHBJZClcbiAgICAgIGlmICgnZXJyb3InIGluIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgYm9hcmRzOiBbXSwgZXJyb3I6IGNvbm5lY3Rpb24uZXJyb3IgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBib2FyZHM6IEFycmF5PHtcbiAgICAgICAgaWQ6IG51bWJlclxuICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgdHlwZT86IHN0cmluZ1xuICAgICAgICBwcm9qZWN0SWQ/OiBzdHJpbmdcbiAgICAgICAgcHJvamVjdEtleT86IHN0cmluZ1xuICAgICAgICBwcm9qZWN0TmFtZT86IHN0cmluZ1xuICAgICAgfT4gPSBbXVxuICAgICAgbGV0IHN0YXJ0QXQgPSAwXG4gICAgICBjb25zdCBtYXhSZXN1bHRzID0gNTBcbiAgICAgIGxldCBpc0xhc3QgPSBmYWxzZVxuXG4gICAgICB0cnkge1xuICAgICAgICB3aGlsZSAoIWlzTGFzdCkge1xuICAgICAgICAgIGNvbnN0IHVybCA9IGAke2Nvbm5lY3Rpb24uYmFzZVVybH0vcmVzdC9hZ2lsZS8xLjAvYm9hcmQ/c3RhcnRBdD0ke3N0YXJ0QXR9Jm1heFJlc3VsdHM9JHttYXhSZXN1bHRzfWBcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgamlyYVJlcXVlc3RKc29uPHsgdmFsdWVzPzogYW55W107IGlzTGFzdD86IGJvb2xlYW4gfT4odXJsLCBjb25uZWN0aW9uLmF1dGhIZWFkZXIpXG4gICAgICAgICAgY29uc3QgcGFnZSA9IChkYXRhLnZhbHVlcyB8fCBbXSkubWFwKChib2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb24gPSBib2FyZC5sb2NhdGlvbiB8fCB7fVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IE51bWJlcihib2FyZC5pZCksXG4gICAgICAgICAgICAgIG5hbWU6IGJvYXJkLm5hbWUgYXMgc3RyaW5nLFxuICAgICAgICAgICAgICB0eXBlOiBib2FyZC50eXBlIGFzIHN0cmluZyxcbiAgICAgICAgICAgICAgcHJvamVjdElkOiBsb2NhdGlvbi5wcm9qZWN0SWQgPyBTdHJpbmcobG9jYXRpb24ucHJvamVjdElkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgcHJvamVjdEtleTogbG9jYXRpb24ucHJvamVjdEtleSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHByb2plY3ROYW1lOiBsb2NhdGlvbi5wcm9qZWN0TmFtZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBib2FyZHMucHVzaCguLi5wYWdlKVxuICAgICAgICAgIGlzTGFzdCA9IEJvb2xlYW4oZGF0YS5pc0xhc3QpIHx8IHBhZ2UubGVuZ3RoIDwgbWF4UmVzdWx0c1xuICAgICAgICAgIHN0YXJ0QXQgKz0gbWF4UmVzdWx0c1xuICAgICAgICAgIGlmIChzdGFydEF0ID4gNTAwMCkgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBib2FyZHMgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib2FyZHM6IFtdLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBKaXJhIGJvYXJkcycsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICBsaXN0SmlyYVByb2plY3RSb2xlczogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBhcHBJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLCBwcm9qZWN0SWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHJlc29sdmVKaXJhQ29ubmVjdGlvbihjdHgsIGlucHV0LmFwcElkKVxuICAgICAgaWYgKCdlcnJvcicgaW4gY29ubmVjdGlvbikge1xuICAgICAgICByZXR1cm4geyByb2xlczogW10sIGVycm9yOiBjb25uZWN0aW9uLmVycm9yIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXJsID0gYCR7Y29ubmVjdGlvbi5iYXNlVXJsfS9yZXN0L2FwaS8zL3Byb2plY3QvJHtpbnB1dC5wcm9qZWN0SWR9L3JvbGVgXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBqaXJhUmVxdWVzdEpzb248UmVjb3JkPHN0cmluZywgc3RyaW5nPj4odXJsLCBjb25uZWN0aW9uLmF1dGhIZWFkZXIpXG4gICAgICAgIGNvbnN0IHJvbGVzID0gT2JqZWN0LmVudHJpZXMoZGF0YSB8fCB7fSlcbiAgICAgICAgICAubWFwKChbbmFtZSwgcm9sZVVybF0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcm9sZVVybC5zcGxpdCgnLycpLnBvcCgpIHx8ICcnXG4gICAgICAgICAgICByZXR1cm4gaWQgPyB7IGlkLCBuYW1lIH0gOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+XG4gICAgICAgIHJldHVybiB7IHJvbGVzIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcm9sZXM6IFtdLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBKaXJhIHByb2plY3Qgcm9sZXMnLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG5cbiAgbGlzdEdvb2dsZVdvcmtzcGFjZUdyb3VwczogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogYXBwSWQgfSkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBhcHBJZCB9IH0pXG4gICAgICBpZiAoIWFwcCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cbiAgICAgIGlmIChhcHAudHlwZSAhPT0gJ0dPT0dMRV9XT1JLU1BBQ0UnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQXBwIGlzIG5vdCBHb29nbGUgV29ya3NwYWNlJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgY3R4LnByaXNtYS5hcHBDb25uZWN0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGFwcElkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgfSlcbiAgICAgIGlmICghY29ubmVjdGlvbikge1xuICAgICAgICByZXR1cm4geyBncm91cHM6IFtdLCBlcnJvcjogJ05vIGFjdGl2ZSBHb29nbGUgV29ya3NwYWNlIGNvbm5lY3Rpb24gY29uZmlndXJlZC4nIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uZmlnID0gc2FmZVBhcnNlQ29uZmlnKGNvbm5lY3Rpb24uY29uZmlnRW5jcnlwdGVkKVxuICAgICAgY29uc3QgZG9tYWluID0gdHlwZW9mIGNvbmZpZy5kb21haW4gPT09ICdzdHJpbmcnID8gY29uZmlnLmRvbWFpbiA6ICcnXG4gICAgICBjb25zdCBhZG1pbkVtYWlsID0gdHlwZW9mIGNvbmZpZy5hZG1pbkVtYWlsID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hZG1pbkVtYWlsIDogJydcbiAgICAgIGNvbnN0IHNlcnZpY2VBY2NvdW50S2V5ID0gdHlwZW9mIGNvbmZpZy5zZXJ2aWNlQWNjb3VudEtleSA9PT0gJ3N0cmluZycgPyBjb25maWcuc2VydmljZUFjY291bnRLZXkgOiAnJ1xuXG4gICAgICBpZiAoIWRvbWFpbiB8fCAhYWRtaW5FbWFpbCB8fCAhc2VydmljZUFjY291bnRLZXkpIHtcbiAgICAgICAgcmV0dXJuIHsgZ3JvdXBzOiBbXSwgZXJyb3I6ICdHb29nbGUgV29ya3NwYWNlIGNvbm5lY3Rpb24gaXMgbWlzc2luZyByZXF1aXJlZCBjb25maWd1cmF0aW9uLicgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25uZWN0b3IgPSBuZXcgR29vZ2xlV29ya3NwYWNlQ29ubmVjdG9yKHsgZG9tYWluLCBhZG1pbkVtYWlsLCBzZXJ2aWNlQWNjb3VudEtleSB9KVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgY29ubmVjdG9yLmxpc3RHcm91cHMoKVxuICAgICAgICByZXR1cm4geyBncm91cHMgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBncm91cHM6IFtdLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBHb29nbGUgV29ya3NwYWNlIGdyb3VwcycsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICBsaXN0R29vZ2xlV29ya3NwYWNlVXNlcnM6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkub3B0aW9uYWwoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogYXBwSWQgfSkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gYXBwSWRcbiAgICAgICAgPyBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGFwcElkIH0gfSlcbiAgICAgICAgOiBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiAnR09PR0xFX1dPUktTUEFDRScgfSB9KVxuICAgICAgaWYgKCFhcHApIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlcnM6IFtdLCBlcnJvcjogJ0dvb2dsZSBXb3Jrc3BhY2UgYXBwIGlzIG5vdCBjb25maWd1cmVkLicgfVxuICAgICAgfVxuICAgICAgaWYgKGFwcC50eXBlICE9PSAnR09PR0xFX1dPUktTUEFDRScpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdBcHAgaXMgbm90IEdvb2dsZSBXb3Jrc3BhY2UnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBjdHgucHJpc21hLmFwcENvbm5lY3Rpb24uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgYXBwSWQ6IGFwcC5pZCwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIH0pXG4gICAgICBpZiAoIWNvbm5lY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlcnM6IFtdLCBlcnJvcjogJ05vIGFjdGl2ZSBHb29nbGUgV29ya3NwYWNlIGNvbm5lY3Rpb24gY29uZmlndXJlZC4nIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uZmlnID0gc2FmZVBhcnNlQ29uZmlnKGNvbm5lY3Rpb24uY29uZmlnRW5jcnlwdGVkKVxuICAgICAgY29uc3QgZG9tYWluID0gdHlwZW9mIGNvbmZpZy5kb21haW4gPT09ICdzdHJpbmcnID8gY29uZmlnLmRvbWFpbiA6ICcnXG4gICAgICBjb25zdCBhZG1pbkVtYWlsID0gdHlwZW9mIGNvbmZpZy5hZG1pbkVtYWlsID09PSAnc3RyaW5nJyA/IGNvbmZpZy5hZG1pbkVtYWlsIDogJydcbiAgICAgIGNvbnN0IHNlcnZpY2VBY2NvdW50S2V5ID0gdHlwZW9mIGNvbmZpZy5zZXJ2aWNlQWNjb3VudEtleSA9PT0gJ3N0cmluZycgPyBjb25maWcuc2VydmljZUFjY291bnRLZXkgOiAnJ1xuXG4gICAgICBpZiAoIWRvbWFpbiB8fCAhYWRtaW5FbWFpbCB8fCAhc2VydmljZUFjY291bnRLZXkpIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlcnM6IFtdLCBlcnJvcjogJ0dvb2dsZSBXb3Jrc3BhY2UgY29ubmVjdGlvbiBpcyBtaXNzaW5nIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24uJyB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbm5lY3RvciA9IG5ldyBHb29nbGVXb3Jrc3BhY2VDb25uZWN0b3IoeyBkb21haW4sIGFkbWluRW1haWwsIHNlcnZpY2VBY2NvdW50S2V5IH0pXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VycyA9IGF3YWl0IGNvbm5lY3Rvci5saXN0VXNlcnMoKVxuICAgICAgICByZXR1cm4geyB1c2VycyB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVzZXJzOiBbXSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgR29vZ2xlIFdvcmtzcGFjZSB1c2VycycsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBQcm92aXNpb25pbmcgUnVsZXNcbiAgbGlzdFJ1bGVzOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGFwcElkIH0pID0+IHtcbiAgICAgIGNvbnN0IHdoZXJlID0gYXBwSWQgPyB7IGFwcElkIH0gOiB7fVxuICAgICAgXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5hcHBQcm92aXNpb25pbmdSdWxlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmUsXG4gICAgICAgIGluY2x1ZGU6IHsgYXBwOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHlwZTogdHJ1ZSB9IH0gfSxcbiAgICAgICAgb3JkZXJCeTogW3sgYXBwSWQ6ICdhc2MnIH0sIHsgcHJpb3JpdHk6ICdkZXNjJyB9XSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgY3JlYXRlUnVsZTogaXRBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChwcm92aXNpb25pbmdSdWxlU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHJ1bGUgPSBhd2FpdCBjdHgucHJpc21hLmFwcFByb3Zpc2lvbmluZ1J1bGUuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFwcElkOiBpbnB1dC5hcHBJZCxcbiAgICAgICAgICBuYW1lOiBpbnB1dC5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dC5kZXNjcmlwdGlvbixcbiAgICAgICAgICBjb25kaXRpb246IGlucHV0LmNvbmRpdGlvbiBhcyBQcmlzbWEuSW5wdXRKc29uVmFsdWUsXG4gICAgICAgICAgcHJvdmlzaW9uRGF0YTogaW5wdXQucHJvdmlzaW9uRGF0YSBhcyBQcmlzbWEuSW5wdXRKc29uVmFsdWUsXG4gICAgICAgICAgcHJpb3JpdHk6IGlucHV0LnByaW9yaXR5LFxuICAgICAgICAgIGlzQWN0aXZlOiBpbnB1dC5pc0FjdGl2ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnUFJPVklTSU9OSU5HX1JVTEVfQ1JFQVRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ3Byb3Zpc2lvbmluZ19ydWxlJyxcbiAgICAgICAgcmVzb3VyY2VJZDogcnVsZS5pZCxcbiAgICAgICAgbWV0YWRhdGE6IHsgbmFtZTogcnVsZS5uYW1lLCBhcHBJZDogcnVsZS5hcHBJZCB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHJ1bGVcbiAgICB9KSxcblxuICB1cGRhdGVSdWxlOiBpdEFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGNvbmRpdGlvbjogei5yZWNvcmQoei51bmtub3duKCkpLm9wdGlvbmFsKCksXG4gICAgICBwcm92aXNpb25EYXRhOiB6LnJlY29yZCh6LnVua25vd24oKSkub3B0aW9uYWwoKSxcbiAgICAgIHByaW9yaXR5OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IGlkLCAuLi5kYXRhIH0gPSBpbnB1dFxuICAgICAgY29uc3QgeyBjb25kaXRpb24sIHByb3Zpc2lvbkRhdGEsIC4uLnJlc3QgfSA9IGRhdGFcblxuICAgICAgY29uc3QgcnVsZSA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwUHJvdmlzaW9uaW5nUnVsZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgICAuLi4oY29uZGl0aW9uID8geyBjb25kaXRpb246IGNvbmRpdGlvbiBhcyBQcmlzbWEuSW5wdXRKc29uVmFsdWUgfSA6IHt9KSxcbiAgICAgICAgICAuLi4ocHJvdmlzaW9uRGF0YSA/IHsgcHJvdmlzaW9uRGF0YTogcHJvdmlzaW9uRGF0YSBhcyBQcmlzbWEuSW5wdXRKc29uVmFsdWUgfSA6IHt9KSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnUFJPVklTSU9OSU5HX1JVTEVfVVBEQVRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ3Byb3Zpc2lvbmluZ19ydWxlJyxcbiAgICAgICAgcmVzb3VyY2VJZDogaWQsXG4gICAgICAgIG1ldGFkYXRhOiB7IHVwZGF0ZWRGaWVsZHM6IE9iamVjdC5rZXlzKGRhdGEpIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcnVsZVxuICAgIH0pLFxuXG4gIGRlbGV0ZVJ1bGU6IGl0QWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgYXdhaXQgY3R4LnByaXNtYS5hcHBQcm92aXNpb25pbmdSdWxlLmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgIGFjdGlvbjogJ1BST1ZJU0lPTklOR19SVUxFX0RFTEVURUQnLFxuICAgICAgICByZXNvdXJjZVR5cGU6ICdwcm92aXNpb25pbmdfcnVsZScsXG4gICAgICAgIHJlc291cmNlSWQ6IGlkLFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgLy8gQXBwIEFjY291bnRzXG4gIGxpc3RBY2NvdW50czogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgYXBwSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcGFnZTogei5udW1iZXIoKS5kZWZhdWx0KDEpLFxuICAgICAgbGltaXQ6IHoubnVtYmVyKCkuZGVmYXVsdCgyMCksXG4gICAgfSkub3B0aW9uYWwoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IGFwcElkLCBzdGF0dXMsIHBhZ2UgPSAxLCBsaW1pdCA9IDIwIH0gPSBpbnB1dCB8fCB7fVxuICAgICAgXG4gICAgICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICAgICAgaWYgKGFwcElkKSB3aGVyZS5hcHBJZCA9IGFwcElkXG4gICAgICBpZiAoc3RhdHVzKSB3aGVyZS5zdGF0dXMgPSBzdGF0dXNcblxuICAgICAgY29uc3QgW2FjY291bnRzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGN0eC5wcmlzbWEuYXBwQWNjb3VudC5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmUsXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgYXBwOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHlwZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBzdGF0dXM6IHRydWUsIHdvcmtFbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgc2tpcDogKHBhZ2UgLSAxKSAqIGxpbWl0LFxuICAgICAgICAgIHRha2U6IGxpbWl0LFxuICAgICAgICB9KSxcbiAgICAgICAgY3R4LnByaXNtYS5hcHBBY2NvdW50LmNvdW50KHsgd2hlcmUgfSksXG4gICAgICBdKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY2NvdW50cyxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICB9XG4gICAgfSksXG5cbiAgZ2V0RW1wbG95ZWVBY2NvdW50czogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogZW1wbG95ZWVJZCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5hcHBBY2NvdW50LmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgZW1wbG95ZWVJZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgYXBwOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHlwZTogdHJ1ZSB9IH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgYXBwOiB7IG5hbWU6ICdhc2MnIH0gfSxcbiAgICAgIH0pXG4gICAgfSksXG59KVxuIl0sIm5hbWVzIjpbInoiLCJyb3V0ZXIiLCJpdEFkbWluUHJvY2VkdXJlIiwiYWRtaW5Qcm9jZWR1cmUiLCJUUlBDRXJyb3IiLCJkZWNyeXB0IiwiZW5jcnlwdCIsImNyZWF0ZUF1ZGl0TG9nIiwiZ2V0Q29ubmVjdG9yIiwiQml0YnVja2V0Q29ubmVjdG9yIiwiR29vZ2xlV29ya3NwYWNlQ29ubmVjdG9yIiwiaGFzV2ViaG9va0NvbmZpZyIsInNhZmVQYXJzZUNvbmZpZyIsImNvbmZpZ0VuY3J5cHRlZCIsIkpTT04iLCJwYXJzZSIsImVuY3J5cHRDb25maWdPclRocm93IiwiY29uZmlnIiwic3RyaW5naWZ5IiwiZSIsImNvZGUiLCJtZXNzYWdlIiwiY2F1c2UiLCJub3JtYWxpemVDb25maWdJbnB1dCIsImlucHV0Iiwib3V0Iiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwidW5kZWZpbmVkIiwidHJpbW1lZCIsInRyaW0iLCJqaXJhQXV0aEhlYWRlciIsImFkbWluRW1haWwiLCJhcGlUb2tlbiIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsInJlc29sdmVKaXJhQ29ubmVjdGlvbiIsImN0eCIsImFwcElkIiwiYXBwIiwicHJpc21hIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJmaW5kRmlyc3QiLCJ0eXBlIiwiZXJyb3IiLCJjb25uZWN0aW9uIiwiYXBwQ29ubmVjdGlvbiIsImlzQWN0aXZlIiwiYmFzZVVybCIsInJlcGxhY2UiLCJhdXRoSGVhZGVyIiwiamlyYVJlcXVlc3RKc29uIiwidXJsIiwib2tTdGF0dXNlcyIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJBY2NlcHQiLCJpbmNsdWRlcyIsInN0YXR1cyIsInRleHQiLCJjYXRjaCIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJmb3JtYXRKaXJhRXJyb3IiLCJmYWxsYmFjayIsInRlc3QiLCJ2YWxpZGF0ZUNvbm5lY3Rpb25Db25maWciLCJhcHBUeXBlIiwiZG9tYWluIiwic2VydmljZUFjY291bnRLZXkiLCJib3RUb2tlbiIsIndvcmtzcGFjZSIsImhhc0FwaVRva2VuIiwibGVuZ3RoIiwiaGFzQXBwUGFzc3dvcmQiLCJhcHBQYXNzd29yZCIsInVzZXJuYW1lIiwic2NpbVRva2VuIiwibW9kZSIsIm5vcm1hbGl6ZWRNb2RlIiwiY2xpUGF0aCIsImRlZmF1bHRSb2xlIiwiaGFzV2ViaG9vayIsImFwcENvbm5lY3Rpb25TY2hlbWEiLCJvYmplY3QiLCJzdHJpbmciLCJyZWNvcmQiLCJ1bmtub3duIiwib3B0aW9uYWwiLCJwcm92aXNpb25pbmdSdWxlU2NoZW1hIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY29uZGl0aW9uIiwicHJvdmlzaW9uRGF0YSIsInByaW9yaXR5IiwibnVtYmVyIiwiZGVmYXVsdCIsImJvb2xlYW4iLCJpbnRlZ3JhdGlvblJvdXRlciIsImxpc3RBcHBzIiwicXVlcnkiLCJmaW5kTWFueSIsImFyY2hpdmVkQXQiLCJpbmNsdWRlIiwiY29ubmVjdGlvbnMiLCJfY291bnQiLCJzZWxlY3QiLCJwcm92aXNpb25pbmdSdWxlcyIsImFjY291bnRzIiwib3JkZXJCeSIsImxpc3RBcmNoaXZlZEFwcHMiLCJub3QiLCJ1cGRhdGVkQXQiLCJjcmVhdGVDdXN0b21BcHAiLCJtaW4iLCJtYXgiLCJpY29uVXJsIiwibXV0YXRpb24iLCJjcmVhdGUiLCJkYXRhIiwiaXNFbmFibGVkIiwiYWN0b3JJZCIsInVzZXIiLCJhY3Rpb24iLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwibWV0YWRhdGEiLCJhcmNoaXZlQXBwIiwidXBkYXRlZCIsInVwZGF0ZSIsIkRhdGUiLCJhcmNoaXZlZCIsInJlc3RvcmVBcHAiLCJyZXN0b3JlZCIsImdldEFwcCIsInRha2UiLCJlbXBsb3llZSIsImZ1bGxOYW1lIiwiZ2V0Q29ubmVjdGlvblN1bW1hcnkiLCJoYXNDb25uZWN0aW9uIiwiY29ubmVjdGlvbklkIiwic2VjcmV0cyIsInJhdyIsImJhc2VTdW1tYXJ5IiwibGFzdFRlc3RTdGF0dXMiLCJsYXN0VGVzdGVkQXQiLCJsYXN0VGVzdEVycm9yIiwic2VydmljZUFjY291bnRLZXlTZXQiLCJ0ZWFtSWQiLCJkZWZhdWx0Q2hhbm5lbHMiLCJBcnJheSIsImlzQXJyYXkiLCJib3RUb2tlblNldCIsImFkbWluVG9rZW5TZXQiLCJhZG1pblRva2VuIiwic2lnbmluZ1NlY3JldFNldCIsInNpZ25pbmdTZWNyZXQiLCJhcHBQYXNzd29yZFNldCIsImFwaVRva2VuU2V0IiwicHJvZHVjdHMiLCJkZWZhdWx0R3JvdXBzIiwic2NpbVRva2VuU2V0IiwiY2xpVXNlciIsInVwc2VydENvbm5lY3Rpb25Db25maWciLCJpbnB1dENmZyIsIm1lcmdlZCIsImNyZWF0ZWQiLCJhY3RpdmVDb25uZWN0aW9ucyIsImNvdW50IiwiaW5pdGlhbGl6ZUFwcHMiLCJkZWZhdWx0QXBwcyIsInVwc2VydCIsInR5cGVfbmFtZSIsInN1Y2Nlc3MiLCJ0b2dnbGVBcHAiLCJmdWxsQXBwIiwiY29ubmVjdG9yIiwiY3JlYXRlQ29ubmVjdGlvbiIsInVwZGF0ZUNvbm5lY3Rpb24iLCJkZWxldGVDb25uZWN0aW9uIiwiZGVsZXRlIiwicmVtYWluaW5nIiwidGVzdENvbm5lY3Rpb24iLCJyZXN1bHQiLCJsaXN0Qml0YnVja2V0T3B0aW9ucyIsImdyb3VwcyIsInJlcG9zaXRvcmllcyIsIlByb21pc2UiLCJhbGwiLCJsaXN0R3JvdXBzIiwibGlzdFJlcG9zaXRvcmllcyIsImxpc3RKaXJhR3JvdXBzIiwic3RhcnRBdCIsIm1heFJlc3VsdHMiLCJ0b3RhbCIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwicGFnZSIsIm1hcCIsImdyb3VwIiwiZmlsdGVyIiwiQm9vbGVhbiIsInB1c2giLCJsaXN0SmlyYVByb2R1Y3RzIiwicm9sZSIsInVzZXJDb3VudCIsIm51bWJlck9mU2VhdHMiLCJsaXN0SmlyYUJvYXJkcyIsImJvYXJkcyIsImlzTGFzdCIsInZhbHVlcyIsImJvYXJkIiwibG9jYXRpb24iLCJwcm9qZWN0SWQiLCJTdHJpbmciLCJwcm9qZWN0S2V5IiwicHJvamVjdE5hbWUiLCJsaXN0SmlyYVByb2plY3RSb2xlcyIsInJvbGVzIiwicm9sZVVybCIsInNwbGl0IiwicG9wIiwibGlzdEdvb2dsZVdvcmtzcGFjZUdyb3VwcyIsImxpc3RHb29nbGVXb3Jrc3BhY2VVc2VycyIsInVzZXJzIiwibGlzdFVzZXJzIiwibGlzdFJ1bGVzIiwiYXBwUHJvdmlzaW9uaW5nUnVsZSIsImNyZWF0ZVJ1bGUiLCJydWxlIiwidXBkYXRlUnVsZSIsInJlc3QiLCJ1cGRhdGVkRmllbGRzIiwia2V5cyIsImRlbGV0ZVJ1bGUiLCJsaXN0QWNjb3VudHMiLCJsaW1pdCIsImFwcEFjY291bnQiLCJ3b3JrRW1haWwiLCJza2lwIiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsImdldEVtcGxveWVlQWNjb3VudHMiLCJlbXBsb3llZUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/integration.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/legal-entity.ts":
/*!********************************************!*\
  !*** ./src/server/routers/legal-entity.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   legalEntityRouter: () => (/* binding */ legalEntityRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_legal_entities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/legal-entities */ \"(rsc)/./src/lib/legal-entities.ts\");\n\n\n\n\n\nfunction hasLegalEntityClient(ctx) {\n    return Boolean(ctx.prisma?.legalEntity);\n}\nasync function listLegalEntitiesRaw(ctx, organizationId) {\n    try {\n        return await ctx.prisma.$queryRawUnsafe('select \"id\", \"organizationId\", \"name\", \"isActive\", \"createdAt\", \"updatedAt\" from \"LegalEntity\" where \"organizationId\" = $1 and \"isActive\" = true order by \"name\" asc', organizationId);\n    } catch (error) {\n        console.error(\"Legal entity raw list failed:\", error);\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"PRECONDITION_FAILED\",\n            message: \"Legal entities require database setup. Run db:push, db:generate, and restart the server.\"\n        });\n    }\n}\nasync function ensureDefaultLegalEntitiesRaw(ctx, organizationId) {\n    for (const name of _lib_legal_entities__WEBPACK_IMPORTED_MODULE_2__.LEGAL_ENTITIES){\n        await ctx.prisma.$executeRawUnsafe('insert into \"LegalEntity\" (\"organizationId\", \"name\", \"isActive\", \"createdAt\", \"updatedAt\") values ($1, $2, true, now(), now()) on conflict (\"organizationId\", \"name\") do nothing', organizationId, name);\n    }\n}\nconst legalEntityRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.getOrganization)();\n        if (hasLegalEntityClient(ctx)) {\n            const entities = await ctx.prisma.legalEntity.findMany({\n                where: {\n                    organizationId: organization.id,\n                    isActive: true\n                },\n                orderBy: {\n                    name: \"asc\"\n                }\n            });\n            if (entities.length > 0) return entities;\n            const defaults = _lib_legal_entities__WEBPACK_IMPORTED_MODULE_2__.LEGAL_ENTITIES.map((name)=>({\n                    organizationId: organization.id,\n                    name\n                }));\n            await ctx.prisma.legalEntity.createMany({\n                data: defaults,\n                skipDuplicates: true\n            });\n            return ctx.prisma.legalEntity.findMany({\n                where: {\n                    organizationId: organization.id,\n                    isActive: true\n                },\n                orderBy: {\n                    name: \"asc\"\n                }\n            });\n        }\n        const entities = await listLegalEntitiesRaw(ctx, organization.id);\n        if (entities.length > 0) return entities;\n        await ensureDefaultLegalEntitiesRaw(ctx, organization.id);\n        return listLegalEntitiesRaw(ctx, organization.id);\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(2).max(120)\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_1__.getOrganization)();\n        const name = input.name.trim();\n        if (hasLegalEntityClient(ctx)) {\n            const existing = await ctx.prisma.legalEntity.findFirst({\n                where: {\n                    organizationId: organization.id,\n                    name: {\n                        equals: name,\n                        mode: \"insensitive\"\n                    }\n                }\n            });\n            if (existing) return existing;\n            return ctx.prisma.legalEntity.create({\n                data: {\n                    organizationId: organization.id,\n                    name\n                }\n            });\n        }\n        try {\n            const existing = await ctx.prisma.$queryRawUnsafe('select \"id\", \"organizationId\", \"name\", \"isActive\", \"createdAt\", \"updatedAt\" from \"LegalEntity\" where \"organizationId\" = $1 and lower(\"name\") = lower($2) limit 1', organization.id, name);\n            if (existing[0]) return existing[0];\n            const created = await ctx.prisma.$queryRawUnsafe('insert into \"LegalEntity\" (\"organizationId\", \"name\", \"isActive\", \"createdAt\", \"updatedAt\") values ($1, $2, true, now(), now()) returning \"id\", \"organizationId\", \"name\", \"isActive\", \"createdAt\", \"updatedAt\"', organization.id, name);\n            return created[0];\n        } catch (error) {\n            console.error(\"Legal entity raw create failed:\", error);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                code: \"PRECONDITION_FAILED\",\n                message: \"Legal entities require database setup. Run db:push, db:generate, and restart the server.\"\n            });\n        }\n    }),\n    remove: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_4__.string()\n    })).mutation(async ({ ctx, input })=>{\n        if (hasLegalEntityClient(ctx)) {\n            await ctx.prisma.legalEntity.update({\n                where: {\n                    id: input.id\n                },\n                data: {\n                    isActive: false\n                }\n            });\n        } else {\n            try {\n                await ctx.prisma.$executeRawUnsafe('update \"LegalEntity\" set \"isActive\" = false, \"updatedAt\" = now() where \"id\" = $1', input.id);\n            } catch (error) {\n                console.error(\"Legal entity raw remove failed:\", error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n                    code: \"PRECONDITION_FAILED\",\n                    message: \"Legal entities require database setup. Run db:push, db:generate, and restart the server.\"\n                });\n            }\n        }\n        return {\n            success: true\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUQsS0FBSyxDQUFDLG1DQUFtQ0E7Z0JBQ2pELE1BQU0sSUFBSWIsbURBQVNBLENBQUM7b0JBQ2xCZSxNQUFNO29CQUNOQyxTQUFTO2dCQUNYO1lBQ0Y7UUFDRjtRQUNBLE9BQU87WUFBRW1DLFNBQVM7UUFBSztJQUN6QjtBQUNKLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9zZXJ2ZXIvcm91dGVycy9sZWdhbC1lbnRpdHkudHM/MDVhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuaW1wb3J0IHsgcm91dGVyLCBhZG1pblByb2NlZHVyZSB9IGZyb20gJ0AvbGliL3RycGMnXG5pbXBvcnQgeyBnZXRPcmdhbml6YXRpb24gfSBmcm9tICdAL2xpYi9vcmdhbml6YXRpb24nXG5pbXBvcnQgeyBMRUdBTF9FTlRJVElFUyB9IGZyb20gJ0AvbGliL2xlZ2FsLWVudGl0aWVzJ1xuXG50eXBlIExlZ2FsRW50aXR5Um93ID0ge1xuICBpZDogc3RyaW5nXG4gIG9yZ2FuaXphdGlvbklkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIGNyZWF0ZWRBdDogRGF0ZVxuICB1cGRhdGVkQXQ6IERhdGVcbn1cblxuZnVuY3Rpb24gaGFzTGVnYWxFbnRpdHlDbGllbnQoY3R4OiB7IHByaXNtYTogYW55IH0pOiBib29sZWFuIHtcbiAgcmV0dXJuIEJvb2xlYW4oY3R4LnByaXNtYT8ubGVnYWxFbnRpdHkpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RMZWdhbEVudGl0aWVzUmF3KGN0eDogeyBwcmlzbWE6IGFueSB9LCBvcmdhbml6YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxMZWdhbEVudGl0eVJvd1tdPiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3VW5zYWZlPExlZ2FsRW50aXR5Um93W10+KFxuICAgICAgJ3NlbGVjdCBcImlkXCIsIFwib3JnYW5pemF0aW9uSWRcIiwgXCJuYW1lXCIsIFwiaXNBY3RpdmVcIiwgXCJjcmVhdGVkQXRcIiwgXCJ1cGRhdGVkQXRcIiBmcm9tIFwiTGVnYWxFbnRpdHlcIiB3aGVyZSBcIm9yZ2FuaXphdGlvbklkXCIgPSAkMSBhbmQgXCJpc0FjdGl2ZVwiID0gdHJ1ZSBvcmRlciBieSBcIm5hbWVcIiBhc2MnLFxuICAgICAgb3JnYW5pemF0aW9uSWRcbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignTGVnYWwgZW50aXR5IHJhdyBsaXN0IGZhaWxlZDonLCBlcnJvcilcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgIGNvZGU6ICdQUkVDT05ESVRJT05fRkFJTEVEJyxcbiAgICAgIG1lc3NhZ2U6ICdMZWdhbCBlbnRpdGllcyByZXF1aXJlIGRhdGFiYXNlIHNldHVwLiBSdW4gZGI6cHVzaCwgZGI6Z2VuZXJhdGUsIGFuZCByZXN0YXJ0IHRoZSBzZXJ2ZXIuJyxcbiAgICB9KVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURlZmF1bHRMZWdhbEVudGl0aWVzUmF3KGN0eDogeyBwcmlzbWE6IGFueSB9LCBvcmdhbml6YXRpb25JZDogc3RyaW5nKSB7XG4gIGZvciAoY29uc3QgbmFtZSBvZiBMRUdBTF9FTlRJVElFUykge1xuICAgIGF3YWl0IGN0eC5wcmlzbWEuJGV4ZWN1dGVSYXdVbnNhZmUoXG4gICAgICAnaW5zZXJ0IGludG8gXCJMZWdhbEVudGl0eVwiIChcIm9yZ2FuaXphdGlvbklkXCIsIFwibmFtZVwiLCBcImlzQWN0aXZlXCIsIFwiY3JlYXRlZEF0XCIsIFwidXBkYXRlZEF0XCIpIHZhbHVlcyAoJDEsICQyLCB0cnVlLCBub3coKSwgbm93KCkpIG9uIGNvbmZsaWN0IChcIm9yZ2FuaXphdGlvbklkXCIsIFwibmFtZVwiKSBkbyBub3RoaW5nJyxcbiAgICAgIG9yZ2FuaXphdGlvbklkLFxuICAgICAgbmFtZVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbGVnYWxFbnRpdHlSb3V0ZXIgPSByb3V0ZXIoe1xuICBsaXN0OiBhZG1pblByb2NlZHVyZS5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gICAgaWYgKGhhc0xlZ2FsRW50aXR5Q2xpZW50KGN0eCkpIHtcbiAgICAgIGNvbnN0IGVudGl0aWVzID0gYXdhaXQgY3R4LnByaXNtYS5sZWdhbEVudGl0eS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmIChlbnRpdGllcy5sZW5ndGggPiAwKSByZXR1cm4gZW50aXRpZXNcblxuICAgICAgY29uc3QgZGVmYXVsdHMgPSBMRUdBTF9FTlRJVElFUy5tYXAoKG5hbWUpID0+ICh7XG4gICAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICAgIG5hbWUsXG4gICAgICB9KSlcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEubGVnYWxFbnRpdHkuY3JlYXRlTWFueSh7IGRhdGE6IGRlZmF1bHRzLCBza2lwRHVwbGljYXRlczogdHJ1ZSB9KVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5sZWdhbEVudGl0eS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZW50aXRpZXMgPSBhd2FpdCBsaXN0TGVnYWxFbnRpdGllc1JhdyhjdHgsIG9yZ2FuaXphdGlvbi5pZClcbiAgICBpZiAoZW50aXRpZXMubGVuZ3RoID4gMCkgcmV0dXJuIGVudGl0aWVzXG5cbiAgICBhd2FpdCBlbnN1cmVEZWZhdWx0TGVnYWxFbnRpdGllc1JhdyhjdHgsIG9yZ2FuaXphdGlvbi5pZClcbiAgICByZXR1cm4gbGlzdExlZ2FsRW50aXRpZXNSYXcoY3R4LCBvcmdhbml6YXRpb24uaWQpXG4gIH0pLFxuXG4gIGNyZWF0ZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBuYW1lOiB6LnN0cmluZygpLm1pbigyKS5tYXgoMTIwKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBnZXRPcmdhbml6YXRpb24oKVxuICAgICAgY29uc3QgbmFtZSA9IGlucHV0Lm5hbWUudHJpbSgpXG5cbiAgICAgIGlmIChoYXNMZWdhbEVudGl0eUNsaWVudChjdHgpKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY3R4LnByaXNtYS5sZWdhbEVudGl0eS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsIG5hbWU6IHsgZXF1YWxzOiBuYW1lLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gZXhpc3RpbmdcblxuICAgICAgICByZXR1cm4gY3R4LnByaXNtYS5sZWdhbEVudGl0eS5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXdVbnNhZmU8TGVnYWxFbnRpdHlSb3dbXT4oXG4gICAgICAgICAgJ3NlbGVjdCBcImlkXCIsIFwib3JnYW5pemF0aW9uSWRcIiwgXCJuYW1lXCIsIFwiaXNBY3RpdmVcIiwgXCJjcmVhdGVkQXRcIiwgXCJ1cGRhdGVkQXRcIiBmcm9tIFwiTGVnYWxFbnRpdHlcIiB3aGVyZSBcIm9yZ2FuaXphdGlvbklkXCIgPSAkMSBhbmQgbG93ZXIoXCJuYW1lXCIpID0gbG93ZXIoJDIpIGxpbWl0IDEnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgICBuYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKGV4aXN0aW5nWzBdKSByZXR1cm4gZXhpc3RpbmdbMF1cblxuICAgICAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXdVbnNhZmU8TGVnYWxFbnRpdHlSb3dbXT4oXG4gICAgICAgICAgJ2luc2VydCBpbnRvIFwiTGVnYWxFbnRpdHlcIiAoXCJvcmdhbml6YXRpb25JZFwiLCBcIm5hbWVcIiwgXCJpc0FjdGl2ZVwiLCBcImNyZWF0ZWRBdFwiLCBcInVwZGF0ZWRBdFwiKSB2YWx1ZXMgKCQxLCAkMiwgdHJ1ZSwgbm93KCksIG5vdygpKSByZXR1cm5pbmcgXCJpZFwiLCBcIm9yZ2FuaXphdGlvbklkXCIsIFwibmFtZVwiLCBcImlzQWN0aXZlXCIsIFwiY3JlYXRlZEF0XCIsIFwidXBkYXRlZEF0XCInLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgICBuYW1lXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRbMF1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0xlZ2FsIGVudGl0eSByYXcgY3JlYXRlIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ1BSRUNPTkRJVElPTl9GQUlMRUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdMZWdhbCBlbnRpdGllcyByZXF1aXJlIGRhdGFiYXNlIHNldHVwLiBSdW4gZGI6cHVzaCwgZGI6Z2VuZXJhdGUsIGFuZCByZXN0YXJ0IHRoZSBzZXJ2ZXIuJyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICByZW1vdmU6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKGhhc0xlZ2FsRW50aXR5Q2xpZW50KGN0eCkpIHtcbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5sZWdhbEVudGl0eS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgaXNBY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJGV4ZWN1dGVSYXdVbnNhZmUoXG4gICAgICAgICAgICAndXBkYXRlIFwiTGVnYWxFbnRpdHlcIiBzZXQgXCJpc0FjdGl2ZVwiID0gZmFsc2UsIFwidXBkYXRlZEF0XCIgPSBub3coKSB3aGVyZSBcImlkXCIgPSAkMScsXG4gICAgICAgICAgICBpbnB1dC5pZFxuICAgICAgICAgIClcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdMZWdhbCBlbnRpdHkgcmF3IHJlbW92ZSBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnUFJFQ09ORElUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnTGVnYWwgZW50aXRpZXMgcmVxdWlyZSBkYXRhYmFzZSBzZXR1cC4gUnVuIGRiOnB1c2gsIGRiOmdlbmVyYXRlLCBhbmQgcmVzdGFydCB0aGUgc2VydmVyLicsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG59KVxuIl0sIm5hbWVzIjpbInoiLCJUUlBDRXJyb3IiLCJyb3V0ZXIiLCJhZG1pblByb2NlZHVyZSIsImdldE9yZ2FuaXphdGlvbiIsIkxFR0FMX0VOVElUSUVTIiwiaGFzTGVnYWxFbnRpdHlDbGllbnQiLCJjdHgiLCJCb29sZWFuIiwicHJpc21hIiwibGVnYWxFbnRpdHkiLCJsaXN0TGVnYWxFbnRpdGllc1JhdyIsIm9yZ2FuaXphdGlvbklkIiwiJHF1ZXJ5UmF3VW5zYWZlIiwiZXJyb3IiLCJjb25zb2xlIiwiY29kZSIsIm1lc3NhZ2UiLCJlbnN1cmVEZWZhdWx0TGVnYWxFbnRpdGllc1JhdyIsIm5hbWUiLCIkZXhlY3V0ZVJhd1Vuc2FmZSIsImxlZ2FsRW50aXR5Um91dGVyIiwibGlzdCIsInF1ZXJ5Iiwib3JnYW5pemF0aW9uIiwiZW50aXRpZXMiLCJmaW5kTWFueSIsIndoZXJlIiwiaWQiLCJpc0FjdGl2ZSIsIm9yZGVyQnkiLCJsZW5ndGgiLCJkZWZhdWx0cyIsIm1hcCIsImNyZWF0ZU1hbnkiLCJkYXRhIiwic2tpcER1cGxpY2F0ZXMiLCJjcmVhdGUiLCJpbnB1dCIsIm9iamVjdCIsInN0cmluZyIsIm1pbiIsIm1heCIsIm11dGF0aW9uIiwidHJpbSIsImV4aXN0aW5nIiwiZmluZEZpcnN0IiwiZXF1YWxzIiwibW9kZSIsImNyZWF0ZWQiLCJyZW1vdmUiLCJ1cGRhdGUiLCJzdWNjZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/legal-entity.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/notification-settings.ts":
/*!*****************************************************!*\
  !*** ./src/server/routers/notification-settings.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notificationSettingsRouter: () => (/* binding */ notificationSettingsRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _lib_notification_actions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/notification-actions */ \"(rsc)/./src/lib/notification-actions.ts\");\n/* harmony import */ var _lib_notification_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/notification-settings */ \"(rsc)/./src/lib/notification-settings.ts\");\n\n\n\n\nconst allowedActions = new Set(_lib_notification_actions__WEBPACK_IMPORTED_MODULE_1__.ALL_NOTIFICATION_ACTIONS);\nconst notificationSettingsRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    get: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ()=>(0,_lib_notification_settings__WEBPACK_IMPORTED_MODULE_2__.getNotificationEmailSettings)()),\n    listAdmins: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ()=>(0,_lib_notification_settings__WEBPACK_IMPORTED_MODULE_2__.listAdminUsers)()),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n        enabled: zod__WEBPACK_IMPORTED_MODULE_3__.boolean(),\n        recipientMode: zod__WEBPACK_IMPORTED_MODULE_3__[\"enum\"]([\n            \"ALL_ADMINS\",\n            \"INITIATOR\",\n            \"SELECTED\"\n        ]),\n        actions: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string()).refine((actions)=>actions.every((action)=>allowedActions.has(action)), {\n            message: \"Unknown notification action provided.\"\n        }),\n        recipients: zod__WEBPACK_IMPORTED_MODULE_3__.array(zod__WEBPACK_IMPORTED_MODULE_3__.string())\n    })).mutation(async ({ input })=>(0,_lib_notification_settings__WEBPACK_IMPORTED_MODULE_2__.updateNotificationEmailSettings)(input))\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvbm90aWZpY2F0aW9uLXNldHRpbmdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVCO0FBQzRCO0FBQ2tCO0FBS2pDO0FBRXBDLE1BQU1PLGlCQUFpQixJQUFJQyxJQUFJTCwrRUFBd0JBO0FBRWhELE1BQU1NLDZCQUE2QlIsaURBQU1BLENBQUM7SUFDL0NTLEtBQUtSLHFEQUFjQSxDQUFDUyxLQUFLLENBQUMsVUFBWVAsd0ZBQTRCQTtJQUNsRVEsWUFBWVYscURBQWNBLENBQUNTLEtBQUssQ0FBQyxVQUFZTiwwRUFBY0E7SUFDM0RRLFFBQVFYLHFEQUFjQSxDQUNuQlksS0FBSyxDQUNKZCx1Q0FBUSxDQUFDO1FBQ1BnQixTQUFTaEIsd0NBQVM7UUFDbEJrQixlQUFlbEIsd0NBQU0sQ0FBQztZQUFDO1lBQWM7WUFBYTtTQUFXO1FBQzdEb0IsU0FBU3BCLHNDQUFPLENBQUNBLHVDQUFRLElBQUl1QixNQUFNLENBQUMsQ0FBQ0gsVUFBWUEsUUFBUUksS0FBSyxDQUFDLENBQUNDLFNBQVdsQixlQUFlbUIsR0FBRyxDQUFDRCxVQUFVO1lBQ3RHRSxTQUFTO1FBQ1g7UUFDQUMsWUFBWTVCLHNDQUFPLENBQUNBLHVDQUFRO0lBQzlCLElBRUQ2QixRQUFRLENBQUMsT0FBTyxFQUFFZixLQUFLLEVBQUUsR0FBS1IsMkZBQStCQSxDQUFDUTtBQUNuRSxHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvbm90aWZpY2F0aW9uLXNldHRpbmdzLnRzP2NmYWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgYWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuaW1wb3J0IHsgQUxMX05PVElGSUNBVElPTl9BQ1RJT05TIH0gZnJvbSAnQC9saWIvbm90aWZpY2F0aW9uLWFjdGlvbnMnXG5pbXBvcnQge1xuICBnZXROb3RpZmljYXRpb25FbWFpbFNldHRpbmdzLFxuICBsaXN0QWRtaW5Vc2VycyxcbiAgdXBkYXRlTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyxcbn0gZnJvbSAnQC9saWIvbm90aWZpY2F0aW9uLXNldHRpbmdzJ1xuXG5jb25zdCBhbGxvd2VkQWN0aW9ucyA9IG5ldyBTZXQoQUxMX05PVElGSUNBVElPTl9BQ1RJT05TKVxuXG5leHBvcnQgY29uc3Qgbm90aWZpY2F0aW9uU2V0dGluZ3NSb3V0ZXIgPSByb3V0ZXIoe1xuICBnZXQ6IGFkbWluUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICgpID0+IGdldE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MoKSksXG4gIGxpc3RBZG1pbnM6IGFkbWluUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICgpID0+IGxpc3RBZG1pblVzZXJzKCkpLFxuICB1cGRhdGU6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBlbmFibGVkOiB6LmJvb2xlYW4oKSxcbiAgICAgICAgcmVjaXBpZW50TW9kZTogei5lbnVtKFsnQUxMX0FETUlOUycsICdJTklUSUFUT1InLCAnU0VMRUNURUQnXSksXG4gICAgICAgIGFjdGlvbnM6IHouYXJyYXkoei5zdHJpbmcoKSkucmVmaW5lKChhY3Rpb25zKSA9PiBhY3Rpb25zLmV2ZXJ5KChhY3Rpb24pID0+IGFsbG93ZWRBY3Rpb25zLmhhcyhhY3Rpb24pKSwge1xuICAgICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIG5vdGlmaWNhdGlvbiBhY3Rpb24gcHJvdmlkZWQuJyxcbiAgICAgICAgfSksXG4gICAgICAgIHJlY2lwaWVudHM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQgfSkgPT4gdXBkYXRlTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyhpbnB1dCkpLFxufSlcbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiYWRtaW5Qcm9jZWR1cmUiLCJBTExfTk9USUZJQ0FUSU9OX0FDVElPTlMiLCJnZXROb3RpZmljYXRpb25FbWFpbFNldHRpbmdzIiwibGlzdEFkbWluVXNlcnMiLCJ1cGRhdGVOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzIiwiYWxsb3dlZEFjdGlvbnMiLCJTZXQiLCJub3RpZmljYXRpb25TZXR0aW5nc1JvdXRlciIsImdldCIsInF1ZXJ5IiwibGlzdEFkbWlucyIsInVwZGF0ZSIsImlucHV0Iiwib2JqZWN0IiwiZW5hYmxlZCIsImJvb2xlYW4iLCJyZWNpcGllbnRNb2RlIiwiZW51bSIsImFjdGlvbnMiLCJhcnJheSIsInN0cmluZyIsInJlZmluZSIsImV2ZXJ5IiwiYWN0aW9uIiwiaGFzIiwibWVzc2FnZSIsInJlY2lwaWVudHMiLCJtdXRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/notification-settings.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/notification.ts":
/*!********************************************!*\
  !*** ./src/server/routers/notification.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   notificationRouter: () => (/* binding */ notificationRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n\n\nconst notificationRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        includeArchived: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_1__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { includeArchived = false, page = 1, limit = 20 } = input || {};\n        if (!ctx.prisma?.notification) {\n            const [logs, total] = await Promise.all([\n                ctx.prisma.auditLog.findMany({\n                    include: {\n                        actor: {\n                            select: {\n                                name: true,\n                                email: true\n                            }\n                        }\n                    },\n                    orderBy: {\n                        createdAt: \"desc\"\n                    },\n                    skip: (page - 1) * limit,\n                    take: limit\n                }),\n                ctx.prisma.auditLog.count()\n            ]);\n            return {\n                notifications: logs.map((log)=>({\n                        id: `audit-${log.id}`,\n                        action: log.action,\n                        resourceType: log.resourceType,\n                        resourceId: log.resourceId ?? null,\n                        actorName: log.actor?.name ?? null,\n                        actorEmail: log.actorEmail ?? log.actor?.email ?? null,\n                        readAt: null,\n                        archivedAt: null,\n                        createdAt: log.createdAt\n                    })),\n                total,\n                pages: Math.ceil(total / limit)\n            };\n        }\n        const where = {\n            userId: ctx.user.id\n        };\n        if (!includeArchived) {\n            where.archivedAt = null;\n        }\n        const [notifications, total] = await Promise.all([\n            ctx.prisma.notification.findMany({\n                where,\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.notification.count({\n                where\n            })\n        ]);\n        return {\n            notifications,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    unreadCount: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        if (!ctx.prisma?.notification) {\n            return {\n                count: 0\n            };\n        }\n        const count = await ctx.prisma.notification.count({\n            where: {\n                userId: ctx.user.id,\n                readAt: null,\n                archivedAt: null\n            }\n        });\n        return {\n            count\n        };\n    }),\n    markAllRead: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.mutation(async ({ ctx })=>{\n        if (!ctx.prisma?.notification) {\n            return {\n                success: true\n            };\n        }\n        await ctx.prisma.notification.updateMany({\n            where: {\n                userId: ctx.user.id,\n                readAt: null,\n                archivedAt: null\n            },\n            data: {\n                readAt: new Date()\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    markRead: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ ctx, input })=>{\n        if (!ctx.prisma?.notification) {\n            return {\n                success: true\n            };\n        }\n        await ctx.prisma.notification.updateMany({\n            where: {\n                id: input.id,\n                userId: ctx.user.id\n            },\n            data: {\n                readAt: new Date()\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    archive: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ ctx, input })=>{\n        if (!ctx.prisma?.notification) {\n            return {\n                success: true\n            };\n        }\n        await ctx.prisma.notification.updateMany({\n            where: {\n                id: input.id,\n                userId: ctx.user.id\n            },\n            data: {\n                archivedAt: new Date()\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    restore: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ ctx, input })=>{\n        if (!ctx.prisma?.notification) {\n            return {\n                success: true\n            };\n        }\n        await ctx.prisma.notification.updateMany({\n            where: {\n                id: input.id,\n                userId: ctx.user.id\n            },\n            data: {\n                archivedAt: null\n            }\n        });\n        return {\n            success: true\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvbm90aWZpY2F0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF1QjtBQUM0QjtBQUU1QyxNQUFNRyxxQkFBcUJGLGlEQUFNQSxDQUFDO0lBQ3ZDRyxNQUFNRixxREFBY0EsQ0FDakJHLEtBQUssQ0FDSkwsdUNBQ1MsQ0FBQztRQUNOTyxpQkFBaUJQLHdDQUFTLEdBQUdTLFFBQVE7UUFDckNDLE1BQU1WLHVDQUFRLEdBQUdZLE9BQU8sQ0FBQztRQUN6QkMsT0FBT2IsdUNBQVEsR0FBR1ksT0FBTyxDQUFDO0lBQzVCLEdBQ0NILFFBQVEsSUFFWkssS0FBSyxDQUFDLE9BQU8sRUFBRUMsR0FBRyxFQUFFVixLQUFLLEVBQUU7UUFDMUIsTUFBTSxFQUFFRSxrQkFBa0IsS0FBSyxFQUFFRyxPQUFPLENBQUMsRUFBRUcsUUFBUSxFQUFFLEVBQUUsR0FBR1IsU0FBUyxDQUFDO1FBQ3BFLElBQUksQ0FBQ1UsSUFBSUMsTUFBTSxFQUFFQyxjQUFjO1lBQzdCLE1BQU0sQ0FBQ0MsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztnQkFDdENOLElBQUlDLE1BQU0sQ0FBQ00sUUFBUSxDQUFDQyxRQUFRLENBQUM7b0JBQzNCQyxTQUFTO3dCQUFFQyxPQUFPOzRCQUFFQyxRQUFRO2dDQUFFQyxNQUFNO2dDQUFNQyxPQUFPOzRCQUFLO3dCQUFFO29CQUFFO29CQUMxREMsU0FBUzt3QkFBRUMsV0FBVztvQkFBTztvQkFDN0JDLE1BQU0sQ0FBQ3JCLE9BQU8sS0FBS0c7b0JBQ25CbUIsTUFBTW5CO2dCQUNSO2dCQUNBRSxJQUFJQyxNQUFNLENBQUNNLFFBQVEsQ0FBQ1csS0FBSzthQUMxQjtZQUVELE9BQU87Z0JBQ0xDLGVBQWVoQixLQUFLaUIsR0FBRyxDQUFDLENBQUNDLE1BQVM7d0JBQ2hDQyxJQUFJLENBQUMsTUFBTSxFQUFFRCxJQUFJQyxFQUFFLENBQUMsQ0FBQzt3QkFDckJDLFFBQVFGLElBQUlFLE1BQU07d0JBQ2xCQyxjQUFjSCxJQUFJRyxZQUFZO3dCQUM5QkMsWUFBWUosSUFBSUksVUFBVSxJQUFJO3dCQUM5QkMsV0FBV0wsSUFBSVgsS0FBSyxFQUFFRSxRQUFRO3dCQUM5QmUsWUFBWU4sSUFBSU0sVUFBVSxJQUFJTixJQUFJWCxLQUFLLEVBQUVHLFNBQVM7d0JBQ2xEZSxRQUFRO3dCQUNSQyxZQUFZO3dCQUNaZCxXQUFXTSxJQUFJTixTQUFTO29CQUMxQjtnQkFDQVg7Z0JBQ0EwQixPQUFPQyxLQUFLQyxJQUFJLENBQUM1QixRQUFRTjtZQUMzQjtRQUNGO1FBRUEsTUFBTW1DLFFBQWlDO1lBQ3JDQyxRQUFRbEMsSUFBSW1DLElBQUksQ0FBQ2IsRUFBRTtRQUNyQjtRQUNBLElBQUksQ0FBQzlCLGlCQUFpQjtZQUNwQnlDLE1BQU1KLFVBQVUsR0FBRztRQUNyQjtRQUVBLE1BQU0sQ0FBQ1YsZUFBZWYsTUFBTSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUMvQ04sSUFBSUMsTUFBTSxDQUFDQyxZQUFZLENBQUNNLFFBQVEsQ0FBQztnQkFDL0J5QjtnQkFDQW5CLFNBQVM7b0JBQUVDLFdBQVc7Z0JBQU87Z0JBQzdCQyxNQUFNLENBQUNyQixPQUFPLEtBQUtHO2dCQUNuQm1CLE1BQU1uQjtZQUNSO1lBQ0FFLElBQUlDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDZ0IsS0FBSyxDQUFDO2dCQUFFZTtZQUFNO1NBQ3ZDO1FBRUQsT0FBTztZQUNMZDtZQUNBZjtZQUNBMEIsT0FBT0MsS0FBS0MsSUFBSSxDQUFDNUIsUUFBUU47UUFDM0I7SUFDRjtJQUVGc0MsYUFBYWpELHFEQUFjQSxDQUFDWSxLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7UUFDOUMsSUFBSSxDQUFDQSxJQUFJQyxNQUFNLEVBQUVDLGNBQWM7WUFDN0IsT0FBTztnQkFBRWdCLE9BQU87WUFBRTtRQUNwQjtRQUNBLE1BQU1BLFFBQVEsTUFBTWxCLElBQUlDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDZ0IsS0FBSyxDQUFDO1lBQ2hEZSxPQUFPO2dCQUNMQyxRQUFRbEMsSUFBSW1DLElBQUksQ0FBQ2IsRUFBRTtnQkFDbkJNLFFBQVE7Z0JBQ1JDLFlBQVk7WUFDZDtRQUNGO1FBQ0EsT0FBTztZQUFFWDtRQUFNO0lBQ2pCO0lBRUFtQixhQUFhbEQscURBQWNBLENBQUNtRCxRQUFRLENBQUMsT0FBTyxFQUFFdEMsR0FBRyxFQUFFO1FBQ2pELElBQUksQ0FBQ0EsSUFBSUMsTUFBTSxFQUFFQyxjQUFjO1lBQzdCLE9BQU87Z0JBQUVxQyxTQUFTO1lBQUs7UUFDekI7UUFDQSxNQUFNdkMsSUFBSUMsTUFBTSxDQUFDQyxZQUFZLENBQUNzQyxVQUFVLENBQUM7WUFDdkNQLE9BQU87Z0JBQ0xDLFFBQVFsQyxJQUFJbUMsSUFBSSxDQUFDYixFQUFFO2dCQUNuQk0sUUFBUTtnQkFDUkMsWUFBWTtZQUNkO1lBQ0FZLE1BQU07Z0JBQUViLFFBQVEsSUFBSWM7WUFBTztRQUM3QjtRQUNBLE9BQU87WUFBRUgsU0FBUztRQUFLO0lBQ3pCO0lBRUFJLFVBQVV4RCxxREFBY0EsQ0FDckJHLEtBQUssQ0FBQ0wsdUNBQVEsQ0FBQztRQUFFcUMsSUFBSXJDLHVDQUFRO0lBQUcsSUFDaENxRCxRQUFRLENBQUMsT0FBTyxFQUFFdEMsR0FBRyxFQUFFVixLQUFLLEVBQUU7UUFDN0IsSUFBSSxDQUFDVSxJQUFJQyxNQUFNLEVBQUVDLGNBQWM7WUFDN0IsT0FBTztnQkFBRXFDLFNBQVM7WUFBSztRQUN6QjtRQUNBLE1BQU12QyxJQUFJQyxNQUFNLENBQUNDLFlBQVksQ0FBQ3NDLFVBQVUsQ0FBQztZQUN2Q1AsT0FBTztnQkFBRVgsSUFBSWhDLE1BQU1nQyxFQUFFO2dCQUFFWSxRQUFRbEMsSUFBSW1DLElBQUksQ0FBQ2IsRUFBRTtZQUFDO1lBQzNDbUIsTUFBTTtnQkFBRWIsUUFBUSxJQUFJYztZQUFPO1FBQzdCO1FBQ0EsT0FBTztZQUFFSCxTQUFTO1FBQUs7SUFDekI7SUFFRk0sU0FBUzFELHFEQUFjQSxDQUNwQkcsS0FBSyxDQUFDTCx1Q0FBUSxDQUFDO1FBQUVxQyxJQUFJckMsdUNBQVE7SUFBRyxJQUNoQ3FELFFBQVEsQ0FBQyxPQUFPLEVBQUV0QyxHQUFHLEVBQUVWLEtBQUssRUFBRTtRQUM3QixJQUFJLENBQUNVLElBQUlDLE1BQU0sRUFBRUMsY0FBYztZQUM3QixPQUFPO2dCQUFFcUMsU0FBUztZQUFLO1FBQ3pCO1FBQ0EsTUFBTXZDLElBQUlDLE1BQU0sQ0FBQ0MsWUFBWSxDQUFDc0MsVUFBVSxDQUFDO1lBQ3ZDUCxPQUFPO2dCQUFFWCxJQUFJaEMsTUFBTWdDLEVBQUU7Z0JBQUVZLFFBQVFsQyxJQUFJbUMsSUFBSSxDQUFDYixFQUFFO1lBQUM7WUFDM0NtQixNQUFNO2dCQUFFWixZQUFZLElBQUlhO1lBQU87UUFDakM7UUFDQSxPQUFPO1lBQUVILFNBQVM7UUFBSztJQUN6QjtJQUVGTyxTQUFTM0QscURBQWNBLENBQ3BCRyxLQUFLLENBQUNMLHVDQUFRLENBQUM7UUFBRXFDLElBQUlyQyx1Q0FBUTtJQUFHLElBQ2hDcUQsUUFBUSxDQUFDLE9BQU8sRUFBRXRDLEdBQUcsRUFBRVYsS0FBSyxFQUFFO1FBQzdCLElBQUksQ0FBQ1UsSUFBSUMsTUFBTSxFQUFFQyxjQUFjO1lBQzdCLE9BQU87Z0JBQUVxQyxTQUFTO1lBQUs7UUFDekI7UUFDQSxNQUFNdkMsSUFBSUMsTUFBTSxDQUFDQyxZQUFZLENBQUNzQyxVQUFVLENBQUM7WUFDdkNQLE9BQU87Z0JBQUVYLElBQUloQyxNQUFNZ0MsRUFBRTtnQkFBRVksUUFBUWxDLElBQUltQyxJQUFJLENBQUNiLEVBQUU7WUFBQztZQUMzQ21CLE1BQU07Z0JBQUVaLFlBQVk7WUFBSztRQUMzQjtRQUNBLE9BQU87WUFBRVUsU0FBUztRQUFLO0lBQ3pCO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL25vdGlmaWNhdGlvbi50cz8zMWM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIGFkbWluUHJvY2VkdXJlIH0gZnJvbSAnQC9saWIvdHJwYydcblxuZXhwb3J0IGNvbnN0IG5vdGlmaWNhdGlvblJvdXRlciA9IHJvdXRlcih7XG4gIGxpc3Q6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICBpbmNsdWRlQXJjaGl2ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICAgICAgcGFnZTogei5udW1iZXIoKS5kZWZhdWx0KDEpLFxuICAgICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLmRlZmF1bHQoMjApLFxuICAgICAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IGluY2x1ZGVBcmNoaXZlZCA9IGZhbHNlLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gaW5wdXQgfHwge31cbiAgICAgIGlmICghY3R4LnByaXNtYT8ubm90aWZpY2F0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtsb2dzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgY3R4LnByaXNtYS5hdWRpdExvZy5maW5kTWFueSh7XG4gICAgICAgICAgICBpbmNsdWRlOiB7IGFjdG9yOiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0gfSxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdCxcbiAgICAgICAgICAgIHRha2U6IGxpbWl0LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGN0eC5wcmlzbWEuYXVkaXRMb2cuY291bnQoKSxcbiAgICAgICAgXSlcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IGxvZ3MubWFwKChsb2cpID0+ICh7XG4gICAgICAgICAgICBpZDogYGF1ZGl0LSR7bG9nLmlkfWAsXG4gICAgICAgICAgICBhY3Rpb246IGxvZy5hY3Rpb24sXG4gICAgICAgICAgICByZXNvdXJjZVR5cGU6IGxvZy5yZXNvdXJjZVR5cGUsXG4gICAgICAgICAgICByZXNvdXJjZUlkOiBsb2cucmVzb3VyY2VJZCA/PyBudWxsLFxuICAgICAgICAgICAgYWN0b3JOYW1lOiBsb2cuYWN0b3I/Lm5hbWUgPz8gbnVsbCxcbiAgICAgICAgICAgIGFjdG9yRW1haWw6IGxvZy5hY3RvckVtYWlsID8/IGxvZy5hY3Rvcj8uZW1haWwgPz8gbnVsbCxcbiAgICAgICAgICAgIHJlYWRBdDogbnVsbCxcbiAgICAgICAgICAgIGFyY2hpdmVkQXQ6IG51bGwsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGxvZy5jcmVhdGVkQXQsXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2hlcmU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgfVxuICAgICAgaWYgKCFpbmNsdWRlQXJjaGl2ZWQpIHtcbiAgICAgICAgd2hlcmUuYXJjaGl2ZWRBdCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgY29uc3QgW25vdGlmaWNhdGlvbnMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgY3R4LnByaXNtYS5ub3RpZmljYXRpb24uZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBza2lwOiAocGFnZSAtIDEpICogbGltaXQsXG4gICAgICAgICAgdGFrZTogbGltaXQsXG4gICAgICAgIH0pLFxuICAgICAgICBjdHgucHJpc21hLm5vdGlmaWNhdGlvbi5jb3VudCh7IHdoZXJlIH0pLFxuICAgICAgXSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm90aWZpY2F0aW9ucyxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICB9XG4gICAgfSksXG5cbiAgdW5yZWFkQ291bnQ6IGFkbWluUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgaWYgKCFjdHgucHJpc21hPy5ub3RpZmljYXRpb24pIHtcbiAgICAgIHJldHVybiB7IGNvdW50OiAwIH1cbiAgICB9XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBjdHgucHJpc21hLm5vdGlmaWNhdGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IGN0eC51c2VyLmlkLFxuICAgICAgICByZWFkQXQ6IG51bGwsXG4gICAgICAgIGFyY2hpdmVkQXQ6IG51bGwsXG4gICAgICB9LFxuICAgIH0pXG4gICAgcmV0dXJuIHsgY291bnQgfVxuICB9KSxcblxuICBtYXJrQWxsUmVhZDogYWRtaW5Qcm9jZWR1cmUubXV0YXRpb24oYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBpZiAoIWN0eC5wcmlzbWE/Lm5vdGlmaWNhdGlvbikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfVxuICAgIGF3YWl0IGN0eC5wcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiBjdHgudXNlci5pZCxcbiAgICAgICAgcmVhZEF0OiBudWxsLFxuICAgICAgICBhcmNoaXZlZEF0OiBudWxsLFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHsgcmVhZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgfSlcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfSksXG5cbiAgbWFya1JlYWQ6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKCFjdHgucHJpc21hPy5ub3RpZmljYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgICB9XG4gICAgICBhd2FpdCBjdHgucHJpc21hLm5vdGlmaWNhdGlvbi51cGRhdGVNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmlkLCB1c2VySWQ6IGN0eC51c2VyLmlkIH0sXG4gICAgICAgIGRhdGE6IHsgcmVhZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgYXJjaGl2ZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC5wcmlzbWE/Lm5vdGlmaWNhdGlvbikge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQsIHVzZXJJZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgICAgZGF0YTogeyBhcmNoaXZlZEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgcmVzdG9yZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBpZiAoIWN0eC5wcmlzbWE/Lm5vdGlmaWNhdGlvbikge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEubm90aWZpY2F0aW9uLnVwZGF0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQsIHVzZXJJZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgICAgZGF0YTogeyBhcmNoaXZlZEF0OiBudWxsIH0sXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG59KVxuIl0sIm5hbWVzIjpbInoiLCJyb3V0ZXIiLCJhZG1pblByb2NlZHVyZSIsIm5vdGlmaWNhdGlvblJvdXRlciIsImxpc3QiLCJpbnB1dCIsIm9iamVjdCIsImluY2x1ZGVBcmNoaXZlZCIsImJvb2xlYW4iLCJvcHRpb25hbCIsInBhZ2UiLCJudW1iZXIiLCJkZWZhdWx0IiwibGltaXQiLCJxdWVyeSIsImN0eCIsInByaXNtYSIsIm5vdGlmaWNhdGlvbiIsImxvZ3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJhdWRpdExvZyIsImZpbmRNYW55IiwiaW5jbHVkZSIsImFjdG9yIiwic2VsZWN0IiwibmFtZSIsImVtYWlsIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInNraXAiLCJ0YWtlIiwiY291bnQiLCJub3RpZmljYXRpb25zIiwibWFwIiwibG9nIiwiaWQiLCJhY3Rpb24iLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwiYWN0b3JOYW1lIiwiYWN0b3JFbWFpbCIsInJlYWRBdCIsImFyY2hpdmVkQXQiLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwid2hlcmUiLCJ1c2VySWQiLCJ1c2VyIiwidW5yZWFkQ291bnQiLCJtYXJrQWxsUmVhZCIsIm11dGF0aW9uIiwic3VjY2VzcyIsInVwZGF0ZU1hbnkiLCJkYXRhIiwiRGF0ZSIsIm1hcmtSZWFkIiwic3RyaW5nIiwiYXJjaGl2ZSIsInJlc3RvcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/notification.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/offboarding.ts":
/*!*******************************************!*\
  !*** ./src/server/routers/offboarding.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   offboardingRouter: () => (/* binding */ offboardingRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n/* harmony import */ var _lib_integrations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n\n\n\n\n\n\nconst DEFAULT_OFFBOARDING_TASK_TEMPLATES = [\n    {\n        name: \"Collect company equipment\",\n        type: \"MANUAL\",\n        sortOrder: 1\n    },\n    {\n        name: \"Revoke building/office access\",\n        type: \"MANUAL\",\n        sortOrder: 2\n    },\n    {\n        name: \"Transfer files and documents\",\n        type: \"MANUAL\",\n        sortOrder: 3\n    },\n    {\n        name: \"Exit interview\",\n        type: \"MANUAL\",\n        sortOrder: 4\n    },\n    {\n        name: \"Deprovision Google Workspace account\",\n        type: \"AUTOMATED\",\n        appType: \"GOOGLE_WORKSPACE\",\n        sortOrder: 10\n    },\n    {\n        name: \"Deprovision Slack account\",\n        type: \"AUTOMATED\",\n        appType: \"SLACK\",\n        sortOrder: 11\n    }\n];\nconst DEFAULT_OFFBOARDING_EMPLOYEE_TASKS = [\n    {\n        name: \"Handover Docs\",\n        description: null,\n        sortOrder: 1\n    }\n];\nasync function ensureDefaultOffboardingTemplates(prisma) {\n    const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_3__.getOrganization)();\n    const existingCount = await prisma.offboardingTaskTemplate.count({\n        where: {\n            organizationId: organization.id\n        }\n    });\n    if (existingCount > 0) return organization;\n    // Ensure default apps exist (avoid creating duplicate per-type placeholder records).\n    const defaultAppNames = {\n        GOOGLE_WORKSPACE: {\n            name: \"Google Workspace\",\n            description: \"Provision Google Workspace accounts, groups, and organizational units\"\n        },\n        SLACK: {\n            name: \"Slack\",\n            description: \"Provision Slack workspace access and channel memberships\"\n        }\n    };\n    for (const t of DEFAULT_OFFBOARDING_TASK_TEMPLATES){\n        if (t.type !== \"AUTOMATED\") continue;\n        const meta = defaultAppNames[t.appType];\n        if (!meta) continue;\n        await prisma.app.upsert({\n            where: {\n                type_name: {\n                    type: t.appType,\n                    name: meta.name\n                }\n            },\n            create: {\n                type: t.appType,\n                name: meta.name,\n                description: meta.description\n            },\n            update: {\n                description: meta.description\n            }\n        });\n    }\n    await prisma.offboardingTaskTemplate.createMany({\n        data: DEFAULT_OFFBOARDING_TASK_TEMPLATES.map((t)=>({\n                organizationId: organization.id,\n                name: t.name,\n                description: null,\n                type: t.type,\n                automationType: t.type === \"AUTOMATED\" ? \"deprovision_app\" : null,\n                appType: t.type === \"AUTOMATED\" ? t.appType : null,\n                sortOrder: t.sortOrder,\n                isActive: true\n            }))\n    });\n    return organization;\n}\nasync function ensureDefaultOffboardingEmployeeTasks(prisma) {\n    const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_3__.getOrganization)();\n    const existingCount = await prisma.offboardingEmployeeTask.count({\n        where: {\n            organizationId: organization.id\n        }\n    });\n    if (existingCount > 0) return organization;\n    await prisma.offboardingEmployeeTask.createMany({\n        data: DEFAULT_OFFBOARDING_EMPLOYEE_TASKS.map((task)=>({\n                organizationId: organization.id,\n                name: task.name,\n                description: task.description,\n                sortOrder: task.sortOrder,\n                isActive: true\n            }))\n    });\n    return organization;\n}\nasync function resolveIntegrationApp(prisma, appType) {\n    const app = await prisma.app.findFirst({\n        where: {\n            type: appType\n        }\n    });\n    if (!app) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n            code: \"BAD_REQUEST\",\n            message: `Unknown integration app: ${appType}`\n        });\n    }\n    return app;\n}\nasync function buildOffboardingTasksFromTemplates(prisma, templates) {\n    const tasks = [];\n    let i = 1;\n    for (const template of templates){\n        if (template.type === \"MANUAL\") {\n            tasks.push({\n                name: template.name,\n                type: \"MANUAL\",\n                sortOrder: i++\n            });\n            continue;\n        }\n        const app = template.appId ? await prisma.app.findUnique({\n            where: {\n                id: template.appId\n            }\n        }) : template.appType ? await prisma.app.findFirst({\n            where: {\n                type: template.appType\n            }\n        }) : null;\n        if (!app) continue;\n        tasks.push({\n            name: template.name,\n            type: \"AUTOMATED\",\n            automationType: template.automationType || \"deprovision_app\",\n            appId: app.id,\n            sortOrder: i++\n        });\n    }\n    return tasks;\n}\nconst offboardingRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    getTaskTemplates: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        return ctx.prisma.offboardingTaskTemplate.findMany({\n            where: {\n                organizationId: organization.id\n            },\n            orderBy: {\n                sortOrder: \"asc\"\n            }\n        });\n    }),\n    createTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        kind: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"MANUAL\",\n            \"INTEGRATION\"\n        ]),\n        name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1),\n        description: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        integrationAppId: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        integrationAppType: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        let app = null;\n        if (input.kind === \"INTEGRATION\") {\n            if (input.integrationAppId) {\n                app = await ctx.prisma.app.findUnique({\n                    where: {\n                        id: input.integrationAppId\n                    }\n                });\n            } else if (input.integrationAppType) {\n                app = await resolveIntegrationApp(ctx.prisma, input.integrationAppType);\n            }\n            if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Select an integration app\"\n            });\n        }\n        const max = await ctx.prisma.offboardingTaskTemplate.aggregate({\n            where: {\n                organizationId: organization.id\n            },\n            _max: {\n                sortOrder: true\n            }\n        });\n        const nextSort = (max._max.sortOrder ?? 0) + 1;\n        return ctx.prisma.offboardingTaskTemplate.create({\n            data: {\n                organizationId: organization.id,\n                name: input.name,\n                description: input.description?.trim() ? input.description.trim() : null,\n                type: input.kind === \"MANUAL\" ? \"MANUAL\" : \"AUTOMATED\",\n                appId: input.kind === \"INTEGRATION\" ? app.id : null,\n                appType: input.kind === \"INTEGRATION\" ? app.type : null,\n                automationType: input.kind === \"INTEGRATION\" ? \"deprovision_app\" : null,\n                sortOrder: nextSort,\n                isActive: true\n            }\n        });\n    }),\n    updateTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        kind: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"MANUAL\",\n            \"INTEGRATION\"\n        ]).optional(),\n        integrationAppId: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        integrationAppType: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1).optional(),\n        description: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional(),\n        isActive: zod__WEBPACK_IMPORTED_MODULE_5__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        const template = await ctx.prisma.offboardingTaskTemplate.findUnique({\n            where: {\n                id: input.id\n            }\n        });\n        if (!template || template.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const kindUpdates = {};\n        if (input.kind) {\n            if (input.kind === \"MANUAL\") {\n                kindUpdates.type = \"MANUAL\";\n                kindUpdates.appId = null;\n                kindUpdates.appType = null;\n                kindUpdates.automationType = null;\n            } else {\n                let app = null;\n                if (input.integrationAppId) {\n                    app = await ctx.prisma.app.findUnique({\n                        where: {\n                            id: input.integrationAppId\n                        }\n                    });\n                } else if (input.integrationAppType) {\n                    app = await resolveIntegrationApp(ctx.prisma, input.integrationAppType);\n                }\n                if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Select an integration app\"\n                });\n                kindUpdates.type = \"AUTOMATED\";\n                kindUpdates.appId = app.id;\n                kindUpdates.appType = app.type;\n                kindUpdates.automationType = \"deprovision_app\";\n            }\n        }\n        return ctx.prisma.offboardingTaskTemplate.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                ...kindUpdates,\n                ...input.name ? {\n                    name: input.name\n                } : {},\n                ...input.description !== undefined ? {\n                    description: input.description?.trim() ? input.description.trim() : null\n                } : {},\n                ...input.isActive !== undefined ? {\n                    isActive: input.isActive\n                } : {}\n            }\n        });\n    }),\n    deleteTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.string()).mutation(async ({ ctx, input: id })=>{\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        const template = await ctx.prisma.offboardingTaskTemplate.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!template || template.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.$transaction(async (tx)=>{\n            await tx.offboardingTaskTemplate.delete({\n                where: {\n                    id\n                }\n            });\n            const remaining = await tx.offboardingTaskTemplate.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                },\n                select: {\n                    id: true\n                }\n            });\n            for(let i = 0; i < remaining.length; i++){\n                await tx.offboardingTaskTemplate.update({\n                    where: {\n                        id: remaining[i].id\n                    },\n                    data: {\n                        sortOrder: i + 1\n                    }\n                });\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    moveTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        direction: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"UP\",\n            \"DOWN\"\n        ])\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        return ctx.prisma.$transaction(async (tx)=>{\n            const current = await tx.offboardingTaskTemplate.findUnique({\n                where: {\n                    id: input.id\n                }\n            });\n            if (!current || current.organizationId !== organization.id) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                    code: \"NOT_FOUND\"\n                });\n            }\n            const neighbor = await tx.offboardingTaskTemplate.findFirst({\n                where: {\n                    organizationId: organization.id,\n                    sortOrder: input.direction === \"UP\" ? {\n                        lt: current.sortOrder\n                    } : {\n                        gt: current.sortOrder\n                    }\n                },\n                orderBy: {\n                    sortOrder: input.direction === \"UP\" ? \"desc\" : \"asc\"\n                }\n            });\n            if (!neighbor) return current;\n            await tx.offboardingTaskTemplate.update({\n                where: {\n                    id: current.id\n                },\n                data: {\n                    sortOrder: neighbor.sortOrder\n                }\n            });\n            await tx.offboardingTaskTemplate.update({\n                where: {\n                    id: neighbor.id\n                },\n                data: {\n                    sortOrder: current.sortOrder\n                }\n            });\n            return tx.offboardingTaskTemplate.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            });\n        });\n    }),\n    resetTaskTemplates: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.mutation(async ({ ctx })=>{\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_3__.getOrganization)();\n        await ctx.prisma.offboardingTaskTemplate.deleteMany({\n            where: {\n                organizationId: organization.id\n            }\n        });\n        await ensureDefaultOffboardingTemplates(ctx.prisma);\n        return {\n            success: true\n        };\n    }),\n    getEmployeeTasks: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const organization = await ensureDefaultOffboardingEmployeeTasks(ctx.prisma);\n        return ctx.prisma.offboardingEmployeeTask.findMany({\n            where: {\n                organizationId: organization.id\n            },\n            orderBy: {\n                sortOrder: \"asc\"\n            }\n        });\n    }),\n    createEmployeeTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1),\n        description: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingEmployeeTasks(ctx.prisma);\n        const max = await ctx.prisma.offboardingEmployeeTask.aggregate({\n            where: {\n                organizationId: organization.id\n            },\n            _max: {\n                sortOrder: true\n            }\n        });\n        const nextSort = (max._max.sortOrder ?? 0) + 1;\n        return ctx.prisma.offboardingEmployeeTask.create({\n            data: {\n                organizationId: organization.id,\n                name: input.name.trim(),\n                description: input.description?.trim() ? input.description.trim() : null,\n                sortOrder: nextSort,\n                isActive: true\n            }\n        });\n    }),\n    updateEmployeeTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1).optional(),\n        description: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional(),\n        isActive: zod__WEBPACK_IMPORTED_MODULE_5__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingEmployeeTasks(ctx.prisma);\n        const task = await ctx.prisma.offboardingEmployeeTask.findUnique({\n            where: {\n                id: input.id\n            }\n        });\n        if (!task || task.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        return ctx.prisma.offboardingEmployeeTask.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                ...input.name ? {\n                    name: input.name.trim()\n                } : {},\n                ...input.description !== undefined ? {\n                    description: input.description?.trim() ? input.description.trim() : null\n                } : {},\n                ...input.isActive !== undefined ? {\n                    isActive: input.isActive\n                } : {}\n            }\n        });\n    }),\n    deleteEmployeeTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.string()).mutation(async ({ ctx, input: id })=>{\n        const organization = await ensureDefaultOffboardingEmployeeTasks(ctx.prisma);\n        const task = await ctx.prisma.offboardingEmployeeTask.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!task || task.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.$transaction(async (tx)=>{\n            await tx.offboardingEmployeeTask.delete({\n                where: {\n                    id\n                }\n            });\n            const remaining = await tx.offboardingEmployeeTask.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                },\n                select: {\n                    id: true\n                }\n            });\n            for(let i = 0; i < remaining.length; i++){\n                await tx.offboardingEmployeeTask.update({\n                    where: {\n                        id: remaining[i].id\n                    },\n                    data: {\n                        sortOrder: i + 1\n                    }\n                });\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    moveEmployeeTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        direction: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"UP\",\n            \"DOWN\"\n        ])\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOffboardingEmployeeTasks(ctx.prisma);\n        return ctx.prisma.$transaction(async (tx)=>{\n            const current = await tx.offboardingEmployeeTask.findUnique({\n                where: {\n                    id: input.id\n                }\n            });\n            if (!current || current.organizationId !== organization.id) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                    code: \"NOT_FOUND\"\n                });\n            }\n            const neighbor = await tx.offboardingEmployeeTask.findFirst({\n                where: {\n                    organizationId: organization.id,\n                    sortOrder: input.direction === \"UP\" ? {\n                        lt: current.sortOrder\n                    } : {\n                        gt: current.sortOrder\n                    }\n                },\n                orderBy: {\n                    sortOrder: input.direction === \"UP\" ? \"desc\" : \"asc\"\n                }\n            });\n            if (!neighbor) return current;\n            await tx.offboardingEmployeeTask.update({\n                where: {\n                    id: current.id\n                },\n                data: {\n                    sortOrder: neighbor.sortOrder\n                }\n            });\n            await tx.offboardingEmployeeTask.update({\n                where: {\n                    id: neighbor.id\n                },\n                data: {\n                    sortOrder: current.sortOrder\n                }\n            });\n            return tx.offboardingEmployeeTask.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            });\n        });\n    }),\n    getByEmployee: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.string()).query(async ({ ctx, input: employeeId })=>{\n        return ctx.prisma.offboardingWorkflow.findFirst({\n            where: {\n                employeeId\n            },\n            include: {\n                tasks: {\n                    orderBy: {\n                        sortOrder: \"asc\"\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n    }),\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        status: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_5__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_5__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { status, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (status) where.status = status;\n        const [workflows, total] = await Promise.all([\n            ctx.prisma.offboardingWorkflow.findMany({\n                where,\n                include: {\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true,\n                            jobTitle: true,\n                            department: true,\n                            endDate: true,\n                            status: true\n                        }\n                    },\n                    tasks: {\n                        orderBy: {\n                            sortOrder: \"asc\"\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.offboardingWorkflow.count({\n                where\n            })\n        ]);\n        return {\n            workflows,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getById: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.string()).query(async ({ ctx, input: id })=>{\n        const workflow = await ctx.prisma.offboardingWorkflow.findUnique({\n            where: {\n                id\n            },\n            include: {\n                employee: {\n                    include: {\n                        manager: {\n                            select: {\n                                id: true,\n                                fullName: true\n                            }\n                        },\n                        appAccounts: {\n                            include: {\n                                app: true\n                            }\n                        }\n                    }\n                },\n                tasks: {\n                    orderBy: {\n                        sortOrder: \"asc\"\n                    }\n                }\n            }\n        });\n        if (!workflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        return workflow;\n    }),\n    start: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        employeeId: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        isImmediate: zod__WEBPACK_IMPORTED_MODULE_5__.boolean().default(false),\n        reason: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        notes: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        googleDeleteAccount: zod__WEBPACK_IMPORTED_MODULE_5__.boolean().optional(),\n        googleTransferToEmail: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        googleTransferApps: zod__WEBPACK_IMPORTED_MODULE_5__.array(zod__WEBPACK_IMPORTED_MODULE_5__.string()).optional(),\n        googleAliasToEmail: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const employee = await ctx.prisma.employee.findUnique({\n            where: {\n                id: input.employeeId\n            },\n            include: {\n                appAccounts: {\n                    include: {\n                        app: true\n                    }\n                }\n            }\n        });\n        if (!employee) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Employee not found\"\n            });\n        }\n        if (employee.status === \"EXITED\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Employee has already exited\"\n            });\n        }\n        // Check for existing active workflow\n        const existingWorkflow = await ctx.prisma.offboardingWorkflow.findFirst({\n            where: {\n                employeeId: input.employeeId,\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"IN_PROGRESS\"\n                    ]\n                }\n            }\n        });\n        if (existingWorkflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Employee already has an active offboarding workflow\"\n            });\n        }\n        // Create tasks from org templates\n        const organization = await ensureDefaultOffboardingTemplates(ctx.prisma);\n        const templates = await ctx.prisma.offboardingTaskTemplate.findMany({\n            where: {\n                organizationId: organization.id,\n                isActive: true\n            },\n            orderBy: {\n                sortOrder: \"asc\"\n            }\n        });\n        const tasks = await buildOffboardingTasksFromTemplates(ctx.prisma, templates);\n        const taskAppIds = new Set(tasks.map((t)=>t.appId).filter(Boolean));\n        // Backwards-compatible: also deprovision any ACTIVE app accounts not explicitly included in templates.\n        let nextSort = tasks.length + 1;\n        for (const account of employee.appAccounts){\n            if (account.status !== \"ACTIVE\") continue;\n            if (!account.appId) continue;\n            if (taskAppIds.has(account.appId)) continue;\n            tasks.push({\n                name: `Deprovision ${account.app.name} account`,\n                type: \"AUTOMATED\",\n                automationType: \"deprovision_app\",\n                appId: account.appId,\n                sortOrder: nextSort++\n            });\n        }\n        const scheduledFor = input.isImmediate ? new Date() : input.endDate ? new Date(input.endDate) : undefined;\n        const workflow = await ctx.prisma.offboardingWorkflow.create({\n            data: {\n                employeeId: input.employeeId,\n                status: input.isImmediate ? \"IN_PROGRESS\" : \"PENDING\",\n                scheduledFor,\n                isImmediate: input.isImmediate,\n                startedAt: input.isImmediate ? new Date() : undefined,\n                reason: input.reason,\n                notes: input.notes,\n                googleDeleteAccount: Boolean(input.googleDeleteAccount),\n                googleTransferToEmail: input.googleTransferToEmail?.trim() || null,\n                googleTransferApps: input.googleTransferApps?.length ? input.googleTransferApps : null,\n                googleAliasToEmail: input.googleAliasToEmail?.trim() || null,\n                initiatedBy: ctx.user.id,\n                tasks: {\n                    create: tasks.map((task)=>({\n                            name: task.name,\n                            type: task.type,\n                            status: \"PENDING\",\n                            automationType: task.automationType,\n                            appId: task.appId,\n                            sortOrder: task.sortOrder\n                        }))\n                }\n            },\n            include: {\n                tasks: true\n            }\n        });\n        // Update employee status and end date\n        await ctx.prisma.employee.update({\n            where: {\n                id: input.employeeId\n            },\n            data: {\n                status: \"OFFBOARDING\",\n                endDate: scheduledFor\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"OFFBOARDING_STARTED\",\n            resourceType: \"employee\",\n            resourceId: input.employeeId,\n            metadata: {\n                workflowId: workflow.id,\n                isImmediate: input.isImmediate,\n                reason: input.reason\n            }\n        });\n        // If immediate, run automated tasks\n        if (input.isImmediate) {\n            const automatedTasks = workflow.tasks.filter((t)=>t.type === \"AUTOMATED\");\n            for (const task of automatedTasks){\n                try {\n                    await runOffboardingTask(ctx.prisma, task.id, ctx.user.id, employee);\n                } catch (error) {\n                    console.error(`Failed to run offboarding task ${task.id}:`, error);\n                }\n            }\n        }\n        return workflow;\n    }),\n    runTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.offboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            },\n            include: {\n                workflow: {\n                    include: {\n                        employee: true\n                    }\n                }\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (task.type === \"AUTOMATED\") {\n            return runOffboardingTask(ctx.prisma, task.id, ctx.user.id, task.workflow.employee);\n        } else {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Use completeManualTask for manual tasks\"\n            });\n        }\n    }),\n    completeManualTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        notes: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.offboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.offboardingTask.update({\n            where: {\n                id: task.id\n            },\n            data: {\n                status: \"SUCCESS\",\n                statusMessage: input.notes,\n                completedAt: new Date(),\n                completedBy: ctx.user.id\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"OFFBOARDING_TASK_COMPLETED\",\n            resourceType: \"offboarding_task\",\n            resourceId: task.id,\n            metadata: {\n                taskName: task.name,\n                manual: true\n            }\n        });\n        await checkAndCompleteOffboarding(ctx.prisma, task.workflowId);\n        return {\n            success: true\n        };\n    }),\n    skipTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        reason: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.offboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.offboardingTask.update({\n            where: {\n                id: task.id\n            },\n            data: {\n                status: \"SKIPPED\",\n                statusMessage: input.reason,\n                completedAt: new Date(),\n                completedBy: ctx.user.id\n            }\n        });\n        await checkAndCompleteOffboarding(ctx.prisma, task.workflowId);\n        return {\n            success: true\n        };\n    }),\n    cancel: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.string()).mutation(async ({ ctx, input: workflowId })=>{\n        const workflow = await ctx.prisma.offboardingWorkflow.findUnique({\n            where: {\n                id: workflowId\n            }\n        });\n        if (!workflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (workflow.status === \"COMPLETED\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Cannot cancel completed offboarding\"\n            });\n        }\n        await ctx.prisma.offboardingWorkflow.update({\n            where: {\n                id: workflowId\n            },\n            data: {\n                status: \"CANCELLED\"\n            }\n        });\n        // Revert employee status\n        await ctx.prisma.employee.update({\n            where: {\n                id: workflow.employeeId\n            },\n            data: {\n                status: \"ACTIVE\",\n                endDate: null\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    // Get scheduled offboardings for processing\n    getScheduledForToday: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const today = new Date();\n        today.setHours(23, 59, 59, 999);\n        return ctx.prisma.offboardingWorkflow.findMany({\n            where: {\n                status: \"PENDING\",\n                scheduledFor: {\n                    lte: today\n                }\n            },\n            include: {\n                employee: true,\n                tasks: true\n            }\n        });\n    })\n});\nasync function runOffboardingTask(prisma, taskId, actorId, employee) {\n    const task = await prisma.offboardingTask.findUnique({\n        where: {\n            id: taskId\n        },\n        include: {\n            workflow: true\n        }\n    });\n    if (!task) {\n        throw new Error(\"Task not found\");\n    }\n    await prisma.offboardingTask.update({\n        where: {\n            id: taskId\n        },\n        data: {\n            status: \"IN_PROGRESS\",\n            attempts: task.attempts + 1,\n            lastAttemptAt: new Date()\n        }\n    });\n    try {\n        let result;\n        // Get full employee with necessary relations\n        const fullEmployee = await prisma.employee.findUnique({\n            where: {\n                id: employee.id\n            }\n        });\n        if (!fullEmployee) {\n            throw new Error(\"Employee not found\");\n        }\n        const googleOptions = {\n            deleteAccount: task.workflow.googleDeleteAccount,\n            transferToEmail: task.workflow.googleTransferToEmail ?? undefined,\n            transferApps: Array.isArray(task.workflow.googleTransferApps) ? task.workflow.googleTransferApps : undefined,\n            aliasToEmail: task.workflow.googleAliasToEmail ?? undefined\n        };\n        switch(task.automationType){\n            case \"deprovision_app\":\n                {\n                    if (!task.appId) {\n                        result = {\n                            success: false,\n                            error: \"Missing appId for this task\"\n                        };\n                        break;\n                    }\n                    result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_2__.deprovisionEmployeeInAppById)(fullEmployee, task.appId, actorId, googleOptions);\n                    break;\n                }\n            case \"deprovision_google_workspace\":\n                result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_2__.deprovisionEmployeeInApp)(fullEmployee, \"GOOGLE_WORKSPACE\", actorId, googleOptions);\n                break;\n            case \"deprovision_slack\":\n                result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_2__.deprovisionEmployeeInApp)(fullEmployee, \"SLACK\", actorId);\n                break;\n            default:\n                if (typeof task.automationType === \"string\" && task.automationType.startsWith(\"deprovision_\")) {\n                    const raw = task.automationType.slice(\"deprovision_\".length);\n                    const guessedType = raw.toUpperCase();\n                    const app = await prisma.app.findFirst({\n                        where: {\n                            type: guessedType\n                        }\n                    });\n                    if (app) {\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_2__.deprovisionEmployeeInAppById)(fullEmployee, app.id, actorId);\n                        break;\n                    }\n                }\n                result = {\n                    success: false,\n                    error: `Unknown automation type: ${task.automationType}`\n                };\n        }\n        await prisma.offboardingTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                status: result.success ? \"SUCCESS\" : \"FAILED\",\n                statusMessage: result.error,\n                completedAt: result.success ? new Date() : undefined\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId,\n            action: \"OFFBOARDING_TASK_COMPLETED\",\n            resourceType: \"offboarding_task\",\n            resourceId: taskId,\n            metadata: {\n                taskName: task.name,\n                automationType: task.automationType,\n                success: result.success,\n                error: result.error\n            }\n        });\n        await checkAndCompleteOffboarding(prisma, task.workflowId);\n        return {\n            success: result.success,\n            error: result.error\n        };\n    } catch (error) {\n        await prisma.offboardingTask.update({\n            where: {\n                id: taskId\n            },\n            data: {\n                status: \"FAILED\",\n                statusMessage: error instanceof Error ? error.message : \"Unknown error\"\n            }\n        });\n        throw error;\n    }\n}\nasync function checkAndCompleteOffboarding(prisma, workflowId) {\n    const workflow = await prisma.offboardingWorkflow.findUnique({\n        where: {\n            id: workflowId\n        },\n        include: {\n            tasks: true\n        }\n    });\n    if (!workflow) return;\n    const incompleteTasks = workflow.tasks.filter((t)=>t.status === \"PENDING\" || t.status === \"IN_PROGRESS\");\n    if (incompleteTasks.length === 0) {\n        await prisma.offboardingWorkflow.update({\n            where: {\n                id: workflowId\n            },\n            data: {\n                status: \"COMPLETED\",\n                completedAt: new Date()\n            }\n        });\n        await prisma.employee.update({\n            where: {\n                id: workflow.employeeId\n            },\n            data: {\n                status: \"EXITED\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorType: \"system\",\n            action: \"OFFBOARDING_COMPLETED\",\n            resourceType: \"employee\",\n            resourceId: workflow.employeeId,\n            metadata: {\n                workflowId\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvb2ZmYm9hcmRpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1QjtBQUM4QjtBQUNiO0FBQ0k7QUFDK0U7QUFDdkU7QUFFcEQsTUFBTVEscUNBQXFDO0lBQ3pDO1FBQUVDLE1BQU07UUFBNkJDLE1BQU07UUFBbUJDLFdBQVc7SUFBRTtJQUMzRTtRQUFFRixNQUFNO1FBQWlDQyxNQUFNO1FBQW1CQyxXQUFXO0lBQUU7SUFDL0U7UUFBRUYsTUFBTTtRQUFnQ0MsTUFBTTtRQUFtQkMsV0FBVztJQUFFO0lBQzlFO1FBQUVGLE1BQU07UUFBa0JDLE1BQU07UUFBbUJDLFdBQVc7SUFBRTtJQUNoRTtRQUFFRixNQUFNO1FBQXdDQyxNQUFNO1FBQXNCRSxTQUFTO1FBQTZCRCxXQUFXO0lBQUc7SUFDaEk7UUFBRUYsTUFBTTtRQUE2QkMsTUFBTTtRQUFzQkUsU0FBUztRQUFrQkQsV0FBVztJQUFHO0NBQzNHO0FBRUQsTUFBTUUscUNBQXFDO0lBQ3pDO1FBQUVKLE1BQU07UUFBaUJLLGFBQWE7UUFBdUJILFdBQVc7SUFBRTtDQUMzRTtBQUVELGVBQWVJLGtDQUFrQ0MsTUFBVztJQUMxRCxNQUFNQyxlQUFlLE1BQU1WLGtFQUFlQTtJQUMxQyxNQUFNVyxnQkFBZ0IsTUFBTUYsT0FBT0csdUJBQXVCLENBQUNDLEtBQUssQ0FBQztRQUMvREMsT0FBTztZQUFFQyxnQkFBZ0JMLGFBQWFNLEVBQUU7UUFBQztJQUMzQztJQUVBLElBQUlMLGdCQUFnQixHQUFHLE9BQU9EO0lBRTlCLHFGQUFxRjtJQUNyRixNQUFNTyxrQkFBZ0Y7UUFDcEZDLGtCQUFrQjtZQUNoQmhCLE1BQU07WUFDTkssYUFBYTtRQUNmO1FBQ0FZLE9BQU87WUFDTGpCLE1BQU07WUFDTkssYUFBYTtRQUNmO0lBQ0Y7SUFDQSxLQUFLLE1BQU1hLEtBQUtuQixtQ0FBb0M7UUFDbEQsSUFBSW1CLEVBQUVqQixJQUFJLEtBQUssYUFBYTtRQUM1QixNQUFNa0IsT0FB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RyxNQUFNLENBQzNDckgsQ0FBQUEsSUFBS0EsRUFBRWlGLE1BQU0sS0FBSyxhQUFhakYsRUFBRWlGLE1BQU0sS0FBSztJQUc5QyxJQUFJd0YsZ0JBQWdCN0csTUFBTSxLQUFLLEdBQUc7UUFDaEMsTUFBTXZFLE9BQU93RixtQkFBbUIsQ0FBQ3ZFLE1BQU0sQ0FBQztZQUN0Q1osT0FBTztnQkFBRUUsSUFBSXVJO1lBQVc7WUFDeEIzSCxNQUFNO2dCQUNKeUUsUUFBUTtnQkFDUjRELGFBQWEsSUFBSW5CO1lBQ25CO1FBQ0Y7UUFFQSxNQUFNckksT0FBT3FHLFFBQVEsQ0FBQ3BGLE1BQU0sQ0FBQztZQUMzQlosT0FBTztnQkFBRUUsSUFBSXlHLFNBQVN6QixVQUFVO1lBQUM7WUFDakNwRSxNQUFNO2dCQUFFeUUsUUFBUTtZQUFTO1FBQzNCO1FBRUEsTUFBTXhHLDBEQUFjQSxDQUFDO1lBQ25CaU0sV0FBVztZQUNYM0MsUUFBUTtZQUNSQyxjQUFjO1lBQ2RDLFlBQVk1QixTQUFTekIsVUFBVTtZQUMvQnNELFVBQVU7Z0JBQUVDO1lBQVc7UUFDekI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvb2ZmYm9hcmRpbmcudHM/NTA4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgcm91dGVyLCBockFkbWluUHJvY2VkdXJlIH0gZnJvbSAnQC9saWIvdHJwYydcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcidcbmltcG9ydCB7IGNyZWF0ZUF1ZGl0TG9nIH0gZnJvbSAnQC9saWIvYXVkaXQnXG5pbXBvcnQgeyBkZXByb3Zpc2lvbkVtcGxveWVlSW5BcHAsIGRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQsIGRlcHJvdmlzaW9uRW1wbG95ZWVGcm9tQWxsQXBwcyB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucydcbmltcG9ydCB7IGdldE9yZ2FuaXphdGlvbiB9IGZyb20gJ0AvbGliL29yZ2FuaXphdGlvbidcblxuY29uc3QgREVGQVVMVF9PRkZCT0FSRElOR19UQVNLX1RFTVBMQVRFUyA9IFtcbiAgeyBuYW1lOiAnQ29sbGVjdCBjb21wYW55IGVxdWlwbWVudCcsIHR5cGU6ICdNQU5VQUwnIGFzIGNvbnN0LCBzb3J0T3JkZXI6IDEgfSxcbiAgeyBuYW1lOiAnUmV2b2tlIGJ1aWxkaW5nL29mZmljZSBhY2Nlc3MnLCB0eXBlOiAnTUFOVUFMJyBhcyBjb25zdCwgc29ydE9yZGVyOiAyIH0sXG4gIHsgbmFtZTogJ1RyYW5zZmVyIGZpbGVzIGFuZCBkb2N1bWVudHMnLCB0eXBlOiAnTUFOVUFMJyBhcyBjb25zdCwgc29ydE9yZGVyOiAzIH0sXG4gIHsgbmFtZTogJ0V4aXQgaW50ZXJ2aWV3JywgdHlwZTogJ01BTlVBTCcgYXMgY29uc3QsIHNvcnRPcmRlcjogNCB9LFxuICB7IG5hbWU6ICdEZXByb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlIGFjY291bnQnLCB0eXBlOiAnQVVUT01BVEVEJyBhcyBjb25zdCwgYXBwVHlwZTogJ0dPT0dMRV9XT1JLU1BBQ0UnIGFzIGNvbnN0LCBzb3J0T3JkZXI6IDEwIH0sXG4gIHsgbmFtZTogJ0RlcHJvdmlzaW9uIFNsYWNrIGFjY291bnQnLCB0eXBlOiAnQVVUT01BVEVEJyBhcyBjb25zdCwgYXBwVHlwZTogJ1NMQUNLJyBhcyBjb25zdCwgc29ydE9yZGVyOiAxMSB9LFxuXVxuXG5jb25zdCBERUZBVUxUX09GRkJPQVJESU5HX0VNUExPWUVFX1RBU0tTID0gW1xuICB7IG5hbWU6ICdIYW5kb3ZlciBEb2NzJywgZGVzY3JpcHRpb246IG51bGwgYXMgc3RyaW5nIHwgbnVsbCwgc29ydE9yZGVyOiAxIH0sXG5dXG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURlZmF1bHRPZmZib2FyZGluZ1RlbXBsYXRlcyhwcmlzbWE6IGFueSkge1xuICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBnZXRPcmdhbml6YXRpb24oKVxuICBjb25zdCBleGlzdGluZ0NvdW50ID0gYXdhaXQgcHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmNvdW50KHtcbiAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gIH0pXG5cbiAgaWYgKGV4aXN0aW5nQ291bnQgPiAwKSByZXR1cm4gb3JnYW5pemF0aW9uXG5cbiAgLy8gRW5zdXJlIGRlZmF1bHQgYXBwcyBleGlzdCAoYXZvaWQgY3JlYXRpbmcgZHVwbGljYXRlIHBlci10eXBlIHBsYWNlaG9sZGVyIHJlY29yZHMpLlxuICBjb25zdCBkZWZhdWx0QXBwTmFtZXM6IFJlY29yZDxzdHJpbmcsIHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbCB9PiA9IHtcbiAgICBHT09HTEVfV09SS1NQQUNFOiB7XG4gICAgICBuYW1lOiAnR29vZ2xlIFdvcmtzcGFjZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1Byb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlIGFjY291bnRzLCBncm91cHMsIGFuZCBvcmdhbml6YXRpb25hbCB1bml0cycsXG4gICAgfSxcbiAgICBTTEFDSzoge1xuICAgICAgbmFtZTogJ1NsYWNrJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUHJvdmlzaW9uIFNsYWNrIHdvcmtzcGFjZSBhY2Nlc3MgYW5kIGNoYW5uZWwgbWVtYmVyc2hpcHMnLFxuICAgIH0sXG4gIH1cbiAgZm9yIChjb25zdCB0IG9mIERFRkFVTFRfT0ZGQk9BUkRJTkdfVEFTS19URU1QTEFURVMpIHtcbiAgICBpZiAodC50eXBlICE9PSAnQVVUT01BVEVEJykgY29udGludWVcbiAgICBjb25zdCBtZXRhID0gZGVmYXVsdEFwcE5hbWVzW3QuYXBwVHlwZV1cbiAgICBpZiAoIW1ldGEpIGNvbnRpbnVlXG4gICAgYXdhaXQgcHJpc21hLmFwcC51cHNlcnQoe1xuICAgICAgd2hlcmU6IHsgdHlwZV9uYW1lOiB7IHR5cGU6IHQuYXBwVHlwZSwgbmFtZTogbWV0YS5uYW1lIH0gfSxcbiAgICAgIGNyZWF0ZTogeyB0eXBlOiB0LmFwcFR5cGUsIG5hbWU6IG1ldGEubmFtZSwgZGVzY3JpcHRpb246IG1ldGEuZGVzY3JpcHRpb24gfSxcbiAgICAgIHVwZGF0ZTogeyBkZXNjcmlwdGlvbjogbWV0YS5kZXNjcmlwdGlvbiB9LFxuICAgIH0pXG4gIH1cblxuICBhd2FpdCBwcmlzbWEub2ZmYm9hcmRpbmdUYXNrVGVtcGxhdGUuY3JlYXRlTWFueSh7XG4gICAgZGF0YTogREVGQVVMVF9PRkZCT0FSRElOR19UQVNLX1RFTVBMQVRFUy5tYXAoKHQpID0+ICh7XG4gICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICB0eXBlOiB0LnR5cGUsXG4gICAgICBhdXRvbWF0aW9uVHlwZTogdC50eXBlID09PSAnQVVUT01BVEVEJyA/ICdkZXByb3Zpc2lvbl9hcHAnIDogbnVsbCxcbiAgICAgIGFwcFR5cGU6IHQudHlwZSA9PT0gJ0FVVE9NQVRFRCcgPyB0LmFwcFR5cGUgOiBudWxsLFxuICAgICAgc29ydE9yZGVyOiB0LnNvcnRPcmRlcixcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIH0pKSxcbiAgfSlcblxuICByZXR1cm4gb3JnYW5pemF0aW9uXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURlZmF1bHRPZmZib2FyZGluZ0VtcGxveWVlVGFza3MocHJpc21hOiBhbnkpIHtcbiAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgY29uc3QgZXhpc3RpbmdDb3VudCA9IGF3YWl0IHByaXNtYS5vZmZib2FyZGluZ0VtcGxveWVlVGFzay5jb3VudCh7XG4gICAgd2hlcmU6IHsgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCB9LFxuICB9KVxuXG4gIGlmIChleGlzdGluZ0NvdW50ID4gMCkgcmV0dXJuIG9yZ2FuaXphdGlvblxuXG4gIGF3YWl0IHByaXNtYS5vZmZib2FyZGluZ0VtcGxveWVlVGFzay5jcmVhdGVNYW55KHtcbiAgICBkYXRhOiBERUZBVUxUX09GRkJPQVJESU5HX0VNUExPWUVFX1RBU0tTLm1hcCgodGFzaykgPT4gKHtcbiAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogdGFzay5kZXNjcmlwdGlvbixcbiAgICAgIHNvcnRPcmRlcjogdGFzay5zb3J0T3JkZXIsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICB9KSksXG4gIH0pXG5cbiAgcmV0dXJuIG9yZ2FuaXphdGlvblxufVxuXG5hc3luYyBmdW5jdGlvbiByZXNvbHZlSW50ZWdyYXRpb25BcHAocHJpc21hOiBhbnksIGFwcFR5cGU6IHN0cmluZykge1xuICBjb25zdCBhcHAgPSBhd2FpdCBwcmlzbWEuYXBwLmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6IGFwcFR5cGUgfSB9KVxuICBpZiAoIWFwcCkge1xuICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiBgVW5rbm93biBpbnRlZ3JhdGlvbiBhcHA6ICR7YXBwVHlwZX1gIH0pXG4gIH1cbiAgcmV0dXJuIGFwcFxufVxuXG5hc3luYyBmdW5jdGlvbiBidWlsZE9mZmJvYXJkaW5nVGFza3NGcm9tVGVtcGxhdGVzKHByaXNtYTogYW55LCB0ZW1wbGF0ZXM6IGFueVtdKSB7XG4gIGNvbnN0IHRhc2tzOiBBcnJheTx7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgdHlwZTogJ01BTlVBTCcgfCAnQVVUT01BVEVEJ1xuICAgIHNvcnRPcmRlcjogbnVtYmVyXG4gICAgYXV0b21hdGlvblR5cGU/OiBzdHJpbmdcbiAgICBhcHBJZD86IHN0cmluZ1xuICB9PiA9IFtdXG5cbiAgbGV0IGkgPSAxXG4gIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgdGVtcGxhdGVzKSB7XG4gICAgaWYgKHRlbXBsYXRlLnR5cGUgPT09ICdNQU5VQUwnKSB7XG4gICAgICB0YXNrcy5wdXNoKHsgbmFtZTogdGVtcGxhdGUubmFtZSwgdHlwZTogJ01BTlVBTCcsIHNvcnRPcmRlcjogaSsrIH0pXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGFwcCA9XG4gICAgICB0ZW1wbGF0ZS5hcHBJZFxuICAgICAgICA/IGF3YWl0IHByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZS5hcHBJZCB9IH0pXG4gICAgICAgIDogdGVtcGxhdGUuYXBwVHlwZVxuICAgICAgICAgID8gYXdhaXQgcHJpc21hLmFwcC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiB0ZW1wbGF0ZS5hcHBUeXBlIH0gfSlcbiAgICAgICAgICA6IG51bGxcbiAgICBpZiAoIWFwcCkgY29udGludWVcblxuICAgIHRhc2tzLnB1c2goe1xuICAgICAgbmFtZTogdGVtcGxhdGUubmFtZSxcbiAgICAgIHR5cGU6ICdBVVRPTUFURUQnLFxuICAgICAgYXV0b21hdGlvblR5cGU6IHRlbXBsYXRlLmF1dG9tYXRpb25UeXBlIHx8ICdkZXByb3Zpc2lvbl9hcHAnLFxuICAgICAgYXBwSWQ6IGFwcC5pZCxcbiAgICAgIHNvcnRPcmRlcjogaSsrLFxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gdGFza3Ncbn1cblxuZXhwb3J0IGNvbnN0IG9mZmJvYXJkaW5nUm91dGVyID0gcm91dGVyKHtcbiAgZ2V0VGFza1RlbXBsYXRlczogaHJBZG1pblByb2NlZHVyZVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nVGVtcGxhdGVzKGN0eC5wcmlzbWEpXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGNyZWF0ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBraW5kOiB6LmVudW0oWydNQU5VQUwnLCAnSU5URUdSQVRJT04nXSksXG4gICAgICBuYW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbnRlZ3JhdGlvbkFwcElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbnRlZ3JhdGlvbkFwcFR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gbGVnYWN5XG4gICAgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nVGVtcGxhdGVzKGN0eC5wcmlzbWEpXG5cbiAgICAgIGxldCBhcHA6IGFueSB8IG51bGwgPSBudWxsXG4gICAgICBpZiAoaW5wdXQua2luZCA9PT0gJ0lOVEVHUkFUSU9OJykge1xuICAgICAgICBpZiAoaW5wdXQuaW50ZWdyYXRpb25BcHBJZCkge1xuICAgICAgICAgIGFwcCA9IGF3YWl0IGN0eC5wcmlzbWEuYXBwLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogaW5wdXQuaW50ZWdyYXRpb25BcHBJZCB9IH0pXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuaW50ZWdyYXRpb25BcHBUeXBlKSB7XG4gICAgICAgICAgYXBwID0gYXdhaXQgcmVzb2x2ZUludGVncmF0aW9uQXBwKGN0eC5wcmlzbWEsIGlucHV0LmludGVncmF0aW9uQXBwVHlwZSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFwcCkgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdTZWxlY3QgYW4gaW50ZWdyYXRpb24gYXBwJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBtYXggPSBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmFnZ3JlZ2F0ZSh7XG4gICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgICAgX21heDogeyBzb3J0T3JkZXI6IHRydWUgfSxcbiAgICAgIH0pXG4gICAgICBjb25zdCBuZXh0U29ydCA9IChtYXguX21heC5zb3J0T3JkZXIgPz8gMCkgKyAxXG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uPy50cmltKCkgPyBpbnB1dC5kZXNjcmlwdGlvbi50cmltKCkgOiBudWxsLFxuICAgICAgICAgIHR5cGU6IGlucHV0LmtpbmQgPT09ICdNQU5VQUwnID8gJ01BTlVBTCcgOiAnQVVUT01BVEVEJyxcbiAgICAgICAgICBhcHBJZDogaW5wdXQua2luZCA9PT0gJ0lOVEVHUkFUSU9OJyA/IGFwcCEuaWQgOiBudWxsLFxuICAgICAgICAgIGFwcFR5cGU6IGlucHV0LmtpbmQgPT09ICdJTlRFR1JBVElPTicgPyBhcHAhLnR5cGUgOiBudWxsLFxuICAgICAgICAgIGF1dG9tYXRpb25UeXBlOiBpbnB1dC5raW5kID09PSAnSU5URUdSQVRJT04nID8gJ2RlcHJvdmlzaW9uX2FwcCcgOiBudWxsLFxuICAgICAgICAgIHNvcnRPcmRlcjogbmV4dFNvcnQsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIHVwZGF0ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIGtpbmQ6IHouZW51bShbJ01BTlVBTCcsICdJTlRFR1JBVElPTiddKS5vcHRpb25hbCgpLFxuICAgICAgaW50ZWdyYXRpb25BcHBJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaW50ZWdyYXRpb25BcHBUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIGxlZ2FjeVxuICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkub3B0aW9uYWwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgIGlzQWN0aXZlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGVuc3VyZURlZmF1bHRPZmZib2FyZGluZ1RlbXBsYXRlcyhjdHgucHJpc21hKVxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSB9KVxuICAgICAgaWYgKCF0ZW1wbGF0ZSB8fCB0ZW1wbGF0ZS5vcmdhbml6YXRpb25JZCAhPT0gb3JnYW5pemF0aW9uLmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBraW5kVXBkYXRlczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICAgICAgaWYgKGlucHV0LmtpbmQpIHtcbiAgICAgICAgaWYgKGlucHV0LmtpbmQgPT09ICdNQU5VQUwnKSB7XG4gICAgICAgICAga2luZFVwZGF0ZXMudHlwZSA9ICdNQU5VQUwnXG4gICAgICAgICAga2luZFVwZGF0ZXMuYXBwSWQgPSBudWxsXG4gICAgICAgICAga2luZFVwZGF0ZXMuYXBwVHlwZSA9IG51bGxcbiAgICAgICAgICBraW5kVXBkYXRlcy5hdXRvbWF0aW9uVHlwZSA9IG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgYXBwOiBhbnkgfCBudWxsID0gbnVsbFxuICAgICAgICAgIGlmIChpbnB1dC5pbnRlZ3JhdGlvbkFwcElkKSB7XG4gICAgICAgICAgICBhcHAgPSBhd2FpdCBjdHgucHJpc21hLmFwcC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGlucHV0LmludGVncmF0aW9uQXBwSWQgfSB9KVxuICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuaW50ZWdyYXRpb25BcHBUeXBlKSB7XG4gICAgICAgICAgICBhcHAgPSBhd2FpdCByZXNvbHZlSW50ZWdyYXRpb25BcHAoY3R4LnByaXNtYSwgaW5wdXQuaW50ZWdyYXRpb25BcHBUeXBlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWFwcCkgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdTZWxlY3QgYW4gaW50ZWdyYXRpb24gYXBwJyB9KVxuICAgICAgICAgIGtpbmRVcGRhdGVzLnR5cGUgPSAnQVVUT01BVEVEJ1xuICAgICAgICAgIGtpbmRVcGRhdGVzLmFwcElkID0gYXBwLmlkXG4gICAgICAgICAga2luZFVwZGF0ZXMuYXBwVHlwZSA9IGFwcC50eXBlXG4gICAgICAgICAga2luZFVwZGF0ZXMuYXV0b21hdGlvblR5cGUgPSAnZGVwcm92aXNpb25fYXBwJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4ua2luZFVwZGF0ZXMsXG4gICAgICAgICAgLi4uKGlucHV0Lm5hbWUgPyB7IG5hbWU6IGlucHV0Lm5hbWUgfSA6IHt9KSxcbiAgICAgICAgICAuLi4oaW5wdXQuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB7IGRlc2NyaXB0aW9uOiBpbnB1dC5kZXNjcmlwdGlvbj8udHJpbSgpID8gaW5wdXQuZGVzY3JpcHRpb24udHJpbSgpIDogbnVsbCB9XG4gICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAuLi4oaW5wdXQuaXNBY3RpdmUgIT09IHVuZGVmaW5lZCA/IHsgaXNBY3RpdmU6IGlucHV0LmlzQWN0aXZlIH0gOiB7fSksXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGRlbGV0ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0OiBpZCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T2ZmYm9hcmRpbmdUZW1wbGF0ZXMoY3R4LnByaXNtYSlcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KVxuICAgICAgaWYgKCF0ZW1wbGF0ZSB8fCB0ZW1wbGF0ZS5vcmdhbml6YXRpb25JZCAhPT0gb3JnYW5pemF0aW9uLmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xuICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGF3YWl0IHR4Lm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gICAgICAgIH0pXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtYWluaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXdhaXQgdHgub2ZmYm9hcmRpbmdUYXNrVGVtcGxhdGUudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiByZW1haW5pbmdbaV0uaWQgfSxcbiAgICAgICAgICAgIGRhdGE6IHsgc29ydE9yZGVyOiBpICsgMSB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIG1vdmVUYXNrVGVtcGxhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICBkaXJlY3Rpb246IHouZW51bShbJ1VQJywgJ0RPV04nXSksXG4gICAgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nVGVtcGxhdGVzKGN0eC5wcmlzbWEpXG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdHgub2ZmYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9IH0pXG4gICAgICAgIGlmICghY3VycmVudCB8fCBjdXJyZW50Lm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5laWdoYm9yID0gYXdhaXQgdHgub2ZmYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgICAgIHNvcnRPcmRlcjpcbiAgICAgICAgICAgICAgaW5wdXQuZGlyZWN0aW9uID09PSAnVVAnXG4gICAgICAgICAgICAgICAgPyB7IGx0OiBjdXJyZW50LnNvcnRPcmRlciB9XG4gICAgICAgICAgICAgICAgOiB7IGd0OiBjdXJyZW50LnNvcnRPcmRlciB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6IGlucHV0LmRpcmVjdGlvbiA9PT0gJ1VQJyA/ICdkZXNjJyA6ICdhc2MnIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFuZWlnaGJvcikgcmV0dXJuIGN1cnJlbnRcblxuICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50LmlkIH0sXG4gICAgICAgICAgZGF0YTogeyBzb3J0T3JkZXI6IG5laWdoYm9yLnNvcnRPcmRlciB9LFxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBuZWlnaGJvci5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc29ydE9yZGVyOiBjdXJyZW50LnNvcnRPcmRlciB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB0eC5vZmZib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9LFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KSxcblxuICByZXNldFRhc2tUZW1wbGF0ZXM6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlLmRlbGV0ZU1hbnkoeyB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0gfSlcbiAgICAgIGF3YWl0IGVuc3VyZURlZmF1bHRPZmZib2FyZGluZ1RlbXBsYXRlcyhjdHgucHJpc21hKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgZ2V0RW1wbG95ZWVUYXNrczogaHJBZG1pblByb2NlZHVyZVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nRW1wbG95ZWVUYXNrcyhjdHgucHJpc21hKVxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBjcmVhdGVFbXBsb3llZVRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSksXG4gICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGVuc3VyZURlZmF1bHRPZmZib2FyZGluZ0VtcGxveWVlVGFza3MoY3R4LnByaXNtYSlcbiAgICAgIGNvbnN0IG1heCA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suYWdncmVnYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCB9LFxuICAgICAgICBfbWF4OiB7IHNvcnRPcmRlcjogdHJ1ZSB9LFxuICAgICAgfSlcbiAgICAgIGNvbnN0IG5leHRTb3J0ID0gKG1heC5fbWF4LnNvcnRPcmRlciA/PyAwKSArIDFcblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZS50cmltKCksXG4gICAgICAgICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uPy50cmltKCkgPyBpbnB1dC5kZXNjcmlwdGlvbi50cmltKCkgOiBudWxsLFxuICAgICAgICAgIHNvcnRPcmRlcjogbmV4dFNvcnQsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIHVwZGF0ZUVtcGxveWVlVGFzazogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T2ZmYm9hcmRpbmdFbXBsb3llZVRhc2tzKGN0eC5wcmlzbWEpXG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ0VtcGxveWVlVGFzay5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0gfSlcbiAgICAgIGlmICghdGFzayB8fCB0YXNrLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmJvYXJkaW5nRW1wbG95ZWVUYXNrLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uKGlucHV0Lm5hbWUgPyB7IG5hbWU6IGlucHV0Lm5hbWUudHJpbSgpIH0gOiB7fSksXG4gICAgICAgICAgLi4uKGlucHV0LmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8geyBkZXNjcmlwdGlvbjogaW5wdXQuZGVzY3JpcHRpb24/LnRyaW0oKSA/IGlucHV0LmRlc2NyaXB0aW9uLnRyaW0oKSA6IG51bGwgfVxuICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgLi4uKGlucHV0LmlzQWN0aXZlICE9PSB1bmRlZmluZWQgPyB7IGlzQWN0aXZlOiBpbnB1dC5pc0FjdGl2ZSB9IDoge30pLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBkZWxldGVFbXBsb3llZVRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nRW1wbG95ZWVUYXNrcyhjdHgucHJpc21hKVxuICAgICAgY29uc3QgdGFzayA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0gfSlcbiAgICAgIGlmICghdGFzayB8fCB0YXNrLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XG4gICAgICAgIGF3YWl0IHR4Lm9mZmJvYXJkaW5nRW1wbG95ZWVUYXNrLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSlcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gYXdhaXQgdHgub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUgfSxcbiAgICAgICAgfSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1haW5pbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ0VtcGxveWVlVGFzay51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHJlbWFpbmluZ1tpXS5pZCB9LFxuICAgICAgICAgICAgZGF0YTogeyBzb3J0T3JkZXI6IGkgKyAxIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgbW92ZUVtcGxveWVlVGFzazogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIGRpcmVjdGlvbjogei5lbnVtKFsnVVAnLCAnRE9XTiddKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T2ZmYm9hcmRpbmdFbXBsb3llZVRhc2tzKGN0eC5wcmlzbWEpXG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHg6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdHgub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9IH0pXG4gICAgICAgIGlmICghY3VycmVudCB8fCBjdXJyZW50Lm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5laWdoYm9yID0gYXdhaXQgdHgub2ZmYm9hcmRpbmdFbXBsb3llZVRhc2suZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgICAgIHNvcnRPcmRlcjpcbiAgICAgICAgICAgICAgaW5wdXQuZGlyZWN0aW9uID09PSAnVVAnXG4gICAgICAgICAgICAgICAgPyB7IGx0OiBjdXJyZW50LnNvcnRPcmRlciB9XG4gICAgICAgICAgICAgICAgOiB7IGd0OiBjdXJyZW50LnNvcnRPcmRlciB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6IGlucHV0LmRpcmVjdGlvbiA9PT0gJ1VQJyA/ICdkZXNjJyA6ICdhc2MnIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFuZWlnaGJvcikgcmV0dXJuIGN1cnJlbnRcblxuICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ0VtcGxveWVlVGFzay51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBjdXJyZW50LmlkIH0sXG4gICAgICAgICAgZGF0YTogeyBzb3J0T3JkZXI6IG5laWdoYm9yLnNvcnRPcmRlciB9LFxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCB0eC5vZmZib2FyZGluZ0VtcGxveWVlVGFzay51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBuZWlnaGJvci5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc29ydE9yZGVyOiBjdXJyZW50LnNvcnRPcmRlciB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB0eC5vZmZib2FyZGluZ0VtcGxveWVlVGFzay5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHsgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9LFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXRCeUVtcGxveWVlOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGVtcGxveWVlSWQgfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdXb3JrZmxvdy5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBlbXBsb3llZUlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgdGFza3M6IHsgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0gfSB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGxpc3Q6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwYWdlOiB6Lm51bWJlcigpLmRlZmF1bHQoMSksXG4gICAgICBsaW1pdDogei5udW1iZXIoKS5kZWZhdWx0KDIwKSxcbiAgICB9KS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgc3RhdHVzLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gaW5wdXQgfHwge31cbiAgICAgIFxuICAgICAgY29uc3Qgd2hlcmU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgICAgIGlmIChzdGF0dXMpIHdoZXJlLnN0YXR1cyA9IHN0YXR1c1xuXG4gICAgICBjb25zdCBbd29ya2Zsb3dzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdXb3JrZmxvdy5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmUsXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgZW1wbG95ZWU6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSwgam9iVGl0bGU6IHRydWUsIGRlcGFydG1lbnQ6IHRydWUsIGVuZERhdGU6IHRydWUsIHN0YXR1czogdHJ1ZSB9IH0sXG4gICAgICAgICAgICB0YXNrczogeyBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdCxcbiAgICAgICAgICB0YWtlOiBsaW1pdCxcbiAgICAgICAgfSksXG4gICAgICAgIGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdXb3JrZmxvdy5jb3VudCh7IHdoZXJlIH0pLFxuICAgICAgXSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd29ya2Zsb3dzLFxuICAgICAgICB0b3RhbCxcbiAgICAgICAgcGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICAgIH1cbiAgICB9KSxcblxuICBnZXRCeUlkOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGlkIH0pID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZW1wbG95ZWU6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgbWFuYWdlcjogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlIH0gfSxcbiAgICAgICAgICAgICAgYXBwQWNjb3VudHM6IHsgaW5jbHVkZTogeyBhcHA6IHRydWUgfSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRhc2tzOiB7IG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9IH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXdvcmtmbG93KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gd29ya2Zsb3dcbiAgICB9KSxcblxuICBzdGFydDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBlbXBsb3llZUlkOiB6LnN0cmluZygpLFxuICAgICAgZW5kRGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaXNJbW1lZGlhdGU6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgcmVhc29uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZ29vZ2xlRGVsZXRlQWNjb3VudDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIGdvb2dsZVRyYW5zZmVyVG9FbWFpbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZ29vZ2xlVHJhbnNmZXJBcHBzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICBnb29nbGVBbGlhc1RvRW1haWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBlbXBsb3llZSA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5lbXBsb3llZUlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgYXBwQWNjb3VudHM6IHsgaW5jbHVkZTogeyBhcHA6IHRydWUgfSB9IH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWVtcGxveWVlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ0VtcGxveWVlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGVtcGxveWVlLnN0YXR1cyA9PT0gJ0VYSVRFRCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdFbXBsb3llZSBoYXMgYWxyZWFkeSBleGl0ZWQnIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBhY3RpdmUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IGV4aXN0aW5nV29ya2Zsb3cgPSBhd2FpdCBjdHgucHJpc21hLm9mZmJvYXJkaW5nV29ya2Zsb3cuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbXBsb3llZUlkOiBpbnB1dC5lbXBsb3llZUlkLFxuICAgICAgICAgIHN0YXR1czogeyBpbjogWydQRU5ESU5HJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmIChleGlzdGluZ1dvcmtmbG93KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnRW1wbG95ZWUgYWxyZWFkeSBoYXMgYW4gYWN0aXZlIG9mZmJvYXJkaW5nIHdvcmtmbG93JyB9KVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgdGFza3MgZnJvbSBvcmcgdGVtcGxhdGVzXG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T2ZmYm9hcmRpbmdUZW1wbGF0ZXMoY3R4LnByaXNtYSlcbiAgICAgIGNvbnN0IHRlbXBsYXRlcyA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLCBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgICBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgYnVpbGRPZmZib2FyZGluZ1Rhc2tzRnJvbVRlbXBsYXRlcyhjdHgucHJpc21hLCB0ZW1wbGF0ZXMpXG4gICAgICBjb25zdCB0YXNrQXBwSWRzID0gbmV3IFNldCh0YXNrcy5tYXAoKHQpID0+IHQuYXBwSWQpLmZpbHRlcihCb29sZWFuKSBhcyBzdHJpbmdbXSlcblxuICAgICAgLy8gQmFja3dhcmRzLWNvbXBhdGlibGU6IGFsc28gZGVwcm92aXNpb24gYW55IEFDVElWRSBhcHAgYWNjb3VudHMgbm90IGV4cGxpY2l0bHkgaW5jbHVkZWQgaW4gdGVtcGxhdGVzLlxuICAgICAgbGV0IG5leHRTb3J0ID0gdGFza3MubGVuZ3RoICsgMVxuICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIGVtcGxveWVlLmFwcEFjY291bnRzKSB7XG4gICAgICAgIGlmIChhY2NvdW50LnN0YXR1cyAhPT0gJ0FDVElWRScpIGNvbnRpbnVlXG4gICAgICAgIGlmICghYWNjb3VudC5hcHBJZCkgY29udGludWVcbiAgICAgICAgaWYgKHRhc2tBcHBJZHMuaGFzKGFjY291bnQuYXBwSWQpKSBjb250aW51ZVxuICAgICAgICB0YXNrcy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBgRGVwcm92aXNpb24gJHthY2NvdW50LmFwcC5uYW1lfSBhY2NvdW50YCxcbiAgICAgICAgICB0eXBlOiAnQVVUT01BVEVEJyxcbiAgICAgICAgICBhdXRvbWF0aW9uVHlwZTogJ2RlcHJvdmlzaW9uX2FwcCcsXG4gICAgICAgICAgYXBwSWQ6IGFjY291bnQuYXBwSWQsXG4gICAgICAgICAgc29ydE9yZGVyOiBuZXh0U29ydCsrLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzY2hlZHVsZWRGb3IgPSBpbnB1dC5pc0ltbWVkaWF0ZSBcbiAgICAgICAgPyBuZXcgRGF0ZSgpIFxuICAgICAgICA6IGlucHV0LmVuZERhdGUgXG4gICAgICAgID8gbmV3IERhdGUoaW5wdXQuZW5kRGF0ZSkgXG4gICAgICAgIDogdW5kZWZpbmVkXG5cbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBlbXBsb3llZUlkOiBpbnB1dC5lbXBsb3llZUlkLFxuICAgICAgICAgIHN0YXR1czogaW5wdXQuaXNJbW1lZGlhdGUgPyAnSU5fUFJPR1JFU1MnIDogJ1BFTkRJTkcnLFxuICAgICAgICAgIHNjaGVkdWxlZEZvcixcbiAgICAgICAgICBpc0ltbWVkaWF0ZTogaW5wdXQuaXNJbW1lZGlhdGUsXG4gICAgICAgICAgc3RhcnRlZEF0OiBpbnB1dC5pc0ltbWVkaWF0ZSA/IG5ldyBEYXRlKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgcmVhc29uOiBpbnB1dC5yZWFzb24sXG4gICAgICAgICAgbm90ZXM6IGlucHV0Lm5vdGVzLFxuICAgICAgICAgIGdvb2dsZURlbGV0ZUFjY291bnQ6IEJvb2xlYW4oaW5wdXQuZ29vZ2xlRGVsZXRlQWNjb3VudCksXG4gICAgICAgICAgZ29vZ2xlVHJhbnNmZXJUb0VtYWlsOiBpbnB1dC5nb29nbGVUcmFuc2ZlclRvRW1haWw/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICAgIGdvb2dsZVRyYW5zZmVyQXBwczogaW5wdXQuZ29vZ2xlVHJhbnNmZXJBcHBzPy5sZW5ndGggPyBpbnB1dC5nb29nbGVUcmFuc2ZlckFwcHMgOiBudWxsLFxuICAgICAgICAgIGdvb2dsZUFsaWFzVG9FbWFpbDogaW5wdXQuZ29vZ2xlQWxpYXNUb0VtYWlsPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgICBpbml0aWF0ZWRCeTogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgICB0YXNrczoge1xuICAgICAgICAgICAgY3JlYXRlOiB0YXNrcy5tYXAodGFzayA9PiAoe1xuICAgICAgICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGU6IHRhc2sudHlwZSxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICAgICAgICAgIGF1dG9tYXRpb25UeXBlOiAodGFzayBhcyB7IGF1dG9tYXRpb25UeXBlPzogc3RyaW5nIH0pLmF1dG9tYXRpb25UeXBlLFxuICAgICAgICAgICAgICBhcHBJZDogKHRhc2sgYXMgeyBhcHBJZD86IHN0cmluZyB9KS5hcHBJZCxcbiAgICAgICAgICAgICAgc29ydE9yZGVyOiB0YXNrLnNvcnRPcmRlcixcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7IHRhc2tzOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBVcGRhdGUgZW1wbG95ZWUgc3RhdHVzIGFuZCBlbmQgZGF0ZVxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuZW1wbG95ZWVJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3RhdHVzOiAnT0ZGQk9BUkRJTkcnLFxuICAgICAgICAgIGVuZERhdGU6IHNjaGVkdWxlZEZvcixcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnT0ZGQk9BUkRJTkdfU1RBUlRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ2VtcGxveWVlJyxcbiAgICAgICAgcmVzb3VyY2VJZDogaW5wdXQuZW1wbG95ZWVJZCxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICB3b3JrZmxvd0lkOiB3b3JrZmxvdy5pZCxcbiAgICAgICAgICBpc0ltbWVkaWF0ZTogaW5wdXQuaXNJbW1lZGlhdGUsXG4gICAgICAgICAgcmVhc29uOiBpbnB1dC5yZWFzb24sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBJZiBpbW1lZGlhdGUsIHJ1biBhdXRvbWF0ZWQgdGFza3NcbiAgICAgIGlmIChpbnB1dC5pc0ltbWVkaWF0ZSkge1xuICAgICAgICBjb25zdCBhdXRvbWF0ZWRUYXNrcyA9IHdvcmtmbG93LnRhc2tzLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ0FVVE9NQVRFRCcpXG4gICAgICAgIGZvciAoY29uc3QgdGFzayBvZiBhdXRvbWF0ZWRUYXNrcykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBydW5PZmZib2FyZGluZ1Rhc2soY3R4LnByaXNtYSwgdGFzay5pZCwgKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCwgZW1wbG95ZWUpXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBydW4gb2ZmYm9hcmRpbmcgdGFzayAke3Rhc2suaWR9OmAsIGVycm9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gd29ya2Zsb3dcbiAgICB9KSxcblxuICBydW5UYXNrOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIHRhc2tJZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC50YXNrSWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHdvcmtmbG93OiB7IGluY2x1ZGU6IHsgZW1wbG95ZWU6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCF0YXNrKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGFzay50eXBlID09PSAnQVVUT01BVEVEJykge1xuICAgICAgICByZXR1cm4gcnVuT2ZmYm9hcmRpbmdUYXNrKGN0eC5wcmlzbWEsIHRhc2suaWQsIChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsIHRhc2sud29ya2Zsb3cuZW1wbG95ZWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ1VzZSBjb21wbGV0ZU1hbnVhbFRhc2sgZm9yIG1hbnVhbCB0YXNrcycgfSlcbiAgICAgIH1cbiAgICB9KSxcblxuICBjb21wbGV0ZU1hbnVhbFRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdGFza0lkOiB6LnN0cmluZygpLFxuICAgICAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC50YXNrSWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdGFzaykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2sudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRhc2suaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0YXR1czogJ1NVQ0NFU1MnLFxuICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IGlucHV0Lm5vdGVzLFxuICAgICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGNvbXBsZXRlZEJ5OiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICBhY3RvcklkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICBhY3Rpb246ICdPRkZCT0FSRElOR19UQVNLX0NPTVBMRVRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ29mZmJvYXJkaW5nX3Rhc2snLFxuICAgICAgICByZXNvdXJjZUlkOiB0YXNrLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyB0YXNrTmFtZTogdGFzay5uYW1lLCBtYW51YWw6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNoZWNrQW5kQ29tcGxldGVPZmZib2FyZGluZyhjdHgucHJpc21hLCB0YXNrLndvcmtmbG93SWQpXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIHNraXBUYXNrOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIHRhc2tJZDogei5zdHJpbmcoKSxcbiAgICAgIHJlYXNvbjogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC50YXNrSWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdGFzaykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1Rhc2sudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRhc2suaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0YXR1czogJ1NLSVBQRUQnLFxuICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IGlucHV0LnJlYXNvbixcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBjb21wbGV0ZWRCeTogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNoZWNrQW5kQ29tcGxldGVPZmZib2FyZGluZyhjdHgucHJpc21hLCB0YXNrLndvcmtmbG93SWQpXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIGNhbmNlbDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0OiB3b3JrZmxvd0lkIH0pID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3dJZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCF3b3JrZmxvdykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHdvcmtmbG93LnN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdDYW5ub3QgY2FuY2VsIGNvbXBsZXRlZCBvZmZib2FyZGluZycgfSlcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB3b3JrZmxvd0lkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnQ0FOQ0VMTEVEJyB9LFxuICAgICAgfSlcblxuICAgICAgLy8gUmV2ZXJ0IGVtcGxveWVlIHN0YXR1c1xuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3cuZW1wbG95ZWVJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICAgICAgICBlbmREYXRlOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgLy8gR2V0IHNjaGVkdWxlZCBvZmZib2FyZGluZ3MgZm9yIHByb2Nlc3NpbmdcbiAgZ2V0U2NoZWR1bGVkRm9yVG9kYXk6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICAgICAgdG9kYXkuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICAgICAgICBzY2hlZHVsZWRGb3I6IHsgbHRlOiB0b2RheSB9LFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZW1wbG95ZWU6IHRydWUsXG4gICAgICAgICAgdGFza3M6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxufSlcblxuYXN5bmMgZnVuY3Rpb24gcnVuT2ZmYm9hcmRpbmdUYXNrKFxuICBwcmlzbWE6IHR5cGVvZiBpbXBvcnQoJ0AvbGliL3ByaXNtYScpLmRlZmF1bHQsXG4gIHRhc2tJZDogc3RyaW5nLFxuICBhY3RvcklkOiBzdHJpbmcsXG4gIGVtcGxveWVlOiB7IGlkOiBzdHJpbmc7IGZ1bGxOYW1lOiBzdHJpbmcgfVxuKSB7XG4gIGNvbnN0IHRhc2sgPSBhd2FpdCBwcmlzbWEub2ZmYm9hcmRpbmdUYXNrLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICBpbmNsdWRlOiB7IHdvcmtmbG93OiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCF0YXNrKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUYXNrIG5vdCBmb3VuZCcpXG4gIH1cblxuICBhd2FpdCBwcmlzbWEub2ZmYm9hcmRpbmdUYXNrLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHRhc2tJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHN0YXR1czogJ0lOX1BST0dSRVNTJyxcbiAgICAgIGF0dGVtcHRzOiB0YXNrLmF0dGVtcHRzICsgMSxcbiAgICAgIGxhc3RBdHRlbXB0QXQ6IG5ldyBEYXRlKCksXG4gICAgfSxcbiAgfSlcblxuICB0cnkge1xuICAgIGxldCByZXN1bHQ6IHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfVxuXG4gICAgLy8gR2V0IGZ1bGwgZW1wbG95ZWUgd2l0aCBuZWNlc3NhcnkgcmVsYXRpb25zXG4gICAgY29uc3QgZnVsbEVtcGxveWVlID0gYXdhaXQgcHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGVtcGxveWVlLmlkIH0sXG4gICAgfSlcblxuICAgIGlmICghZnVsbEVtcGxveWVlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcGxveWVlIG5vdCBmb3VuZCcpXG4gICAgfVxuXG4gICAgY29uc3QgZ29vZ2xlT3B0aW9ucyA9IHtcbiAgICAgIGRlbGV0ZUFjY291bnQ6IHRhc2sud29ya2Zsb3cuZ29vZ2xlRGVsZXRlQWNjb3VudCxcbiAgICAgIHRyYW5zZmVyVG9FbWFpbDogdGFzay53b3JrZmxvdy5nb29nbGVUcmFuc2ZlclRvRW1haWwgPz8gdW5kZWZpbmVkLFxuICAgICAgdHJhbnNmZXJBcHBzOiBBcnJheS5pc0FycmF5KHRhc2sud29ya2Zsb3cuZ29vZ2xlVHJhbnNmZXJBcHBzKVxuICAgICAgICA/ICh0YXNrLndvcmtmbG93Lmdvb2dsZVRyYW5zZmVyQXBwcyBhcyBzdHJpbmdbXSlcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBhbGlhc1RvRW1haWw6IHRhc2sud29ya2Zsb3cuZ29vZ2xlQWxpYXNUb0VtYWlsID8/IHVuZGVmaW5lZCxcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRhc2suYXV0b21hdGlvblR5cGUpIHtcbiAgICAgIGNhc2UgJ2RlcHJvdmlzaW9uX2FwcCc6IHtcbiAgICAgICAgaWYgKCF0YXNrLmFwcElkKSB7XG4gICAgICAgICAgcmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdNaXNzaW5nIGFwcElkIGZvciB0aGlzIHRhc2snIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQoZnVsbEVtcGxveWVlLCB0YXNrLmFwcElkLCBhY3RvcklkLCBnb29nbGVPcHRpb25zKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVwcm92aXNpb25fZ29vZ2xlX3dvcmtzcGFjZSc6XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcChmdWxsRW1wbG95ZWUsICdHT09HTEVfV09SS1NQQUNFJywgYWN0b3JJZCwgZ29vZ2xlT3B0aW9ucylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RlcHJvdmlzaW9uX3NsYWNrJzpcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGVwcm92aXNpb25FbXBsb3llZUluQXBwKGZ1bGxFbXBsb3llZSwgJ1NMQUNLJywgYWN0b3JJZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmICh0eXBlb2YgdGFzay5hdXRvbWF0aW9uVHlwZSA9PT0gJ3N0cmluZycgJiYgdGFzay5hdXRvbWF0aW9uVHlwZS5zdGFydHNXaXRoKCdkZXByb3Zpc2lvbl8nKSkge1xuICAgICAgICAgIGNvbnN0IHJhdyA9IHRhc2suYXV0b21hdGlvblR5cGUuc2xpY2UoJ2RlcHJvdmlzaW9uXycubGVuZ3RoKVxuICAgICAgICAgIGNvbnN0IGd1ZXNzZWRUeXBlID0gcmF3LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICBjb25zdCBhcHAgPSBhd2FpdCBwcmlzbWEuYXBwLmZpbmRGaXJzdCh7IHdoZXJlOiB7IHR5cGU6IGd1ZXNzZWRUeXBlIGFzIGFueSB9IH0pXG4gICAgICAgICAgaWYgKGFwcCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGVwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChmdWxsRW1wbG95ZWUsIGFwcC5pZCwgYWN0b3JJZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgVW5rbm93biBhdXRvbWF0aW9uIHR5cGU6ICR7dGFzay5hdXRvbWF0aW9uVHlwZX1gIH1cbiAgICB9XG5cbiAgICBhd2FpdCBwcmlzbWEub2ZmYm9hcmRpbmdUYXNrLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdGFza0lkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN0YXR1czogcmVzdWx0LnN1Y2Nlc3MgPyAnU1VDQ0VTUycgOiAnRkFJTEVEJyxcbiAgICAgICAgc3RhdHVzTWVzc2FnZTogcmVzdWx0LmVycm9yLFxuICAgICAgICBjb21wbGV0ZWRBdDogcmVzdWx0LnN1Y2Nlc3MgPyBuZXcgRGF0ZSgpIDogdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgYWN0b3JJZCxcbiAgICAgIGFjdGlvbjogJ09GRkJPQVJESU5HX1RBU0tfQ09NUExFVEVEJyxcbiAgICAgIHJlc291cmNlVHlwZTogJ29mZmJvYXJkaW5nX3Rhc2snLFxuICAgICAgcmVzb3VyY2VJZDogdGFza0lkLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgdGFza05hbWU6IHRhc2submFtZSxcbiAgICAgICAgYXV0b21hdGlvblR5cGU6IHRhc2suYXV0b21hdGlvblR5cGUsXG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgYXdhaXQgY2hlY2tBbmRDb21wbGV0ZU9mZmJvYXJkaW5nKHByaXNtYSwgdGFzay53b3JrZmxvd0lkKVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsIGVycm9yOiByZXN1bHQuZXJyb3IgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGF3YWl0IHByaXNtYS5vZmZib2FyZGluZ1Rhc2sudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB0YXNrSWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3RhdHVzOiAnRkFJTEVEJyxcbiAgICAgICAgc3RhdHVzTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQW5kQ29tcGxldGVPZmZib2FyZGluZyhwcmlzbWE6IHR5cGVvZiBpbXBvcnQoJ0AvbGliL3ByaXNtYScpLmRlZmF1bHQsIHdvcmtmbG93SWQ6IHN0cmluZykge1xuICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IHByaXNtYS5vZmZib2FyZGluZ1dvcmtmbG93LmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB3b3JrZmxvd0lkIH0sXG4gICAgaW5jbHVkZTogeyB0YXNrczogdHJ1ZSB9LFxuICB9KVxuXG4gIGlmICghd29ya2Zsb3cpIHJldHVyblxuXG4gIGNvbnN0IGluY29tcGxldGVUYXNrcyA9IHdvcmtmbG93LnRhc2tzLmZpbHRlcihcbiAgICB0ID0+IHQuc3RhdHVzID09PSAnUEVORElORycgfHwgdC5zdGF0dXMgPT09ICdJTl9QUk9HUkVTUydcbiAgKVxuXG4gIGlmIChpbmNvbXBsZXRlVGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgYXdhaXQgcHJpc21hLm9mZmJvYXJkaW5nV29ya2Zsb3cudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB3b3JrZmxvd0lkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN0YXR1czogJ0NPTVBMRVRFRCcsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgYXdhaXQgcHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3cuZW1wbG95ZWVJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdFWElURUQnIH0sXG4gICAgfSlcblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdG9yVHlwZTogJ3N5c3RlbScsXG4gICAgICBhY3Rpb246ICdPRkZCT0FSRElOR19DT01QTEVURUQnLFxuICAgICAgcmVzb3VyY2VUeXBlOiAnZW1wbG95ZWUnLFxuICAgICAgcmVzb3VyY2VJZDogd29ya2Zsb3cuZW1wbG95ZWVJZCxcbiAgICAgIG1ldGFkYXRhOiB7IHdvcmtmbG93SWQgfSxcbiAgICB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsImhyQWRtaW5Qcm9jZWR1cmUiLCJUUlBDRXJyb3IiLCJjcmVhdGVBdWRpdExvZyIsImRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcCIsImRlcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQiLCJnZXRPcmdhbml6YXRpb24iLCJERUZBVUxUX09GRkJPQVJESU5HX1RBU0tfVEVNUExBVEVTIiwibmFtZSIsInR5cGUiLCJzb3J0T3JkZXIiLCJhcHBUeXBlIiwiREVGQVVMVF9PRkZCT0FSRElOR19FTVBMT1lFRV9UQVNLUyIsImRlc2NyaXB0aW9uIiwiZW5zdXJlRGVmYXVsdE9mZmJvYXJkaW5nVGVtcGxhdGVzIiwicHJpc21hIiwib3JnYW5pemF0aW9uIiwiZXhpc3RpbmdDb3VudCIsIm9mZmJvYXJkaW5nVGFza1RlbXBsYXRlIiwiY291bnQiLCJ3aGVyZSIsIm9yZ2FuaXphdGlvbklkIiwiaWQiLCJkZWZhdWx0QXBwTmFtZXMiLCJHT09HTEVfV09SS1NQQUNFIiwiU0xBQ0siLCJ0IiwibWV0YSIsImFwcCIsInVwc2VydCIsInR5cGVfbmFtZSIsImNyZWF0ZSIsInVwZGF0ZSIsImNyZWF0ZU1hbnkiLCJkYXRhIiwibWFwIiwiYXV0b21hdGlvblR5cGUiLCJpc0FjdGl2ZSIsImVuc3VyZURlZmF1bHRPZmZib2FyZGluZ0VtcGxveWVlVGFza3MiLCJvZmZib2FyZGluZ0VtcGxveWVlVGFzayIsInRhc2siLCJyZXNvbHZlSW50ZWdyYXRpb25BcHAiLCJmaW5kRmlyc3QiLCJjb2RlIiwibWVzc2FnZSIsImJ1aWxkT2ZmYm9hcmRpbmdUYXNrc0Zyb21UZW1wbGF0ZXMiLCJ0ZW1wbGF0ZXMiLCJ0YXNrcyIsImkiLCJ0ZW1wbGF0ZSIsInB1c2giLCJhcHBJZCIsImZpbmRVbmlxdWUiLCJvZmZib2FyZGluZ1JvdXRlciIsImdldFRhc2tUZW1wbGF0ZXMiLCJxdWVyeSIsImN0eCIsImZpbmRNYW55Iiwib3JkZXJCeSIsImNyZWF0ZVRhc2tUZW1wbGF0ZSIsImlucHV0Iiwib2JqZWN0Iiwia2luZCIsImVudW0iLCJzdHJpbmciLCJtaW4iLCJvcHRpb25hbCIsImludGVncmF0aW9uQXBwSWQiLCJpbnRlZ3JhdGlvbkFwcFR5cGUiLCJtdXRhdGlvbiIsIm1heCIsImFnZ3JlZ2F0ZSIsIl9tYXgiLCJuZXh0U29ydCIsInRyaW0iLCJ1cGRhdGVUYXNrVGVtcGxhdGUiLCJudWxsYWJsZSIsImJvb2xlYW4iLCJraW5kVXBkYXRlcyIsInVuZGVmaW5lZCIsImRlbGV0ZVRhc2tUZW1wbGF0ZSIsIiR0cmFuc2FjdGlvbiIsInR4IiwiZGVsZXRlIiwicmVtYWluaW5nIiwic2VsZWN0IiwibGVuZ3RoIiwic3VjY2VzcyIsIm1vdmVUYXNrVGVtcGxhdGUiLCJkaXJlY3Rpb24iLCJjdXJyZW50IiwibmVpZ2hib3IiLCJsdCIsImd0IiwicmVzZXRUYXNrVGVtcGxhdGVzIiwiZGVsZXRlTWFueSIsImdldEVtcGxveWVlVGFza3MiLCJjcmVhdGVFbXBsb3llZVRhc2siLCJ1cGRhdGVFbXBsb3llZVRhc2siLCJkZWxldGVFbXBsb3llZVRhc2siLCJtb3ZlRW1wbG95ZWVUYXNrIiwiZ2V0QnlFbXBsb3llZSIsImVtcGxveWVlSWQiLCJvZmZib2FyZGluZ1dvcmtmbG93IiwiaW5jbHVkZSIsImNyZWF0ZWRBdCIsImxpc3QiLCJzdGF0dXMiLCJwYWdlIiwibnVtYmVyIiwiZGVmYXVsdCIsImxpbWl0Iiwid29ya2Zsb3dzIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwiZW1wbG95ZWUiLCJmdWxsTmFtZSIsImpvYlRpdGxlIiwiZGVwYXJ0bWVudCIsImVuZERhdGUiLCJza2lwIiwidGFrZSIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJnZXRCeUlkIiwid29ya2Zsb3ciLCJtYW5hZ2VyIiwiYXBwQWNjb3VudHMiLCJzdGFydCIsImlzSW1tZWRpYXRlIiwicmVhc29uIiwibm90ZXMiLCJnb29nbGVEZWxldGVBY2NvdW50IiwiZ29vZ2xlVHJhbnNmZXJUb0VtYWlsIiwiZ29vZ2xlVHJhbnNmZXJBcHBzIiwiYXJyYXkiLCJnb29nbGVBbGlhc1RvRW1haWwiLCJleGlzdGluZ1dvcmtmbG93IiwiaW4iLCJ0YXNrQXBwSWRzIiwiU2V0IiwiZmlsdGVyIiwiQm9vbGVhbiIsImFjY291bnQiLCJoYXMiLCJzY2hlZHVsZWRGb3IiLCJEYXRlIiwic3RhcnRlZEF0IiwiaW5pdGlhdGVkQnkiLCJ1c2VyIiwiYWN0b3JJZCIsImFjdGlvbiIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJtZXRhZGF0YSIsIndvcmtmbG93SWQiLCJhdXRvbWF0ZWRUYXNrcyIsInJ1bk9mZmJvYXJkaW5nVGFzayIsImVycm9yIiwiY29uc29sZSIsInJ1blRhc2siLCJ0YXNrSWQiLCJvZmZib2FyZGluZ1Rhc2siLCJjb21wbGV0ZU1hbnVhbFRhc2siLCJzdGF0dXNNZXNzYWdlIiwiY29tcGxldGVkQXQiLCJjb21wbGV0ZWRCeSIsInRhc2tOYW1lIiwibWFudWFsIiwiY2hlY2tBbmRDb21wbGV0ZU9mZmJvYXJkaW5nIiwic2tpcFRhc2siLCJjYW5jZWwiLCJnZXRTY2hlZHVsZWRGb3JUb2RheSIsInRvZGF5Iiwic2V0SG91cnMiLCJsdGUiLCJFcnJvciIsImF0dGVtcHRzIiwibGFzdEF0dGVtcHRBdCIsInJlc3VsdCIsImZ1bGxFbXBsb3llZSIsImdvb2dsZU9wdGlvbnMiLCJkZWxldGVBY2NvdW50IiwidHJhbnNmZXJUb0VtYWlsIiwidHJhbnNmZXJBcHBzIiwiQXJyYXkiLCJpc0FycmF5IiwiYWxpYXNUb0VtYWlsIiwic3RhcnRzV2l0aCIsInJhdyIsInNsaWNlIiwiZ3Vlc3NlZFR5cGUiLCJ0b1VwcGVyQ2FzZSIsImluY29tcGxldGVUYXNrcyIsImFjdG9yVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/offboarding.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/offer-template.ts":
/*!**********************************************!*\
  !*** ./src/server/routers/offer-template.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   offerTemplateRouter: () => (/* binding */ offerTemplateRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n\n\n\nconst templateCreateSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    bodyHtml: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n    bodyMarkdown: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    employmentType: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        \"FULL_TIME\",\n        \"PART_TIME\",\n        \"CONTRACTOR\",\n        \"INTERN\"\n    ]).optional(),\n    includeNda: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),\n    includePii: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),\n    variableSchema: zod__WEBPACK_IMPORTED_MODULE_1__.record(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        label: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            \"text\",\n            \"number\",\n            \"date\",\n            \"select\"\n        ]),\n        required: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(true),\n        options: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).optional(),\n        defaultValue: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n    })).optional()\n});\nconst templateUpdateSchema = templateCreateSchema.partial().extend({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\nconst offerTemplateRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        includeInactive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n        employmentType: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            \"FULL_TIME\",\n            \"PART_TIME\",\n            \"CONTRACTOR\",\n            \"INTERN\"\n        ]).optional()\n    }).optional()).query(async ({ ctx, input })=>{\n        const where = input?.includeInactive ? {} : {\n            isActive: true\n        };\n        if (input?.employmentType) {\n            where.employmentType = input.employmentType;\n        }\n        return ctx.prisma.offerTemplate.findMany({\n            where,\n            include: {\n                _count: {\n                    select: {\n                        offers: true\n                    }\n                },\n                attachments: true\n            },\n            orderBy: {\n                name: \"asc\"\n            }\n        });\n    }),\n    getById: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).query(async ({ ctx, input: id })=>{\n        const template = await ctx.prisma.offerTemplate.findUnique({\n            where: {\n                id\n            },\n            include: {\n                attachments: true\n            }\n        });\n        if (!template) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        return template;\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(templateCreateSchema).mutation(async ({ ctx, input })=>{\n        return ctx.prisma.offerTemplate.create({\n            data: {\n                name: input.name,\n                description: input.description,\n                bodyHtml: input.bodyHtml,\n                bodyMarkdown: input.bodyMarkdown,\n                employmentType: input.employmentType,\n                includeNda: input.includeNda,\n                includePii: input.includePii,\n                variableSchema: input.variableSchema\n            }\n        });\n    }),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(templateUpdateSchema).mutation(async ({ ctx, input })=>{\n        const { id, ...data } = input;\n        return ctx.prisma.offerTemplate.update({\n            where: {\n                id\n            },\n            data\n        });\n    }),\n    delete: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).mutation(async ({ ctx, input: id })=>{\n        // Check if template is used by any offers\n        const offersCount = await ctx.prisma.offer.count({\n            where: {\n                templateId: id\n            }\n        });\n        if (offersCount > 0) {\n            // Soft delete by marking inactive\n            return ctx.prisma.offerTemplate.update({\n                where: {\n                    id\n                },\n                data: {\n                    isActive: false\n                }\n            });\n        }\n        return ctx.prisma.offerTemplate.delete({\n            where: {\n                id\n            }\n        });\n    }),\n    addAttachment: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        templateId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            \"nda\",\n            \"pii\",\n            \"custom\"\n        ]),\n        contentHtml: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        fileUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        return ctx.prisma.offerTemplateAttachment.create({\n            data: input\n        });\n    }),\n    removeAttachment: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).mutation(async ({ ctx, input: id })=>{\n        return ctx.prisma.offerTemplateAttachment.delete({\n            where: {\n                id\n            }\n        });\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvb2ZmZXItdGVtcGxhdGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1QjtBQUM4QjtBQUNiO0FBRXhDLE1BQU1JLHVCQUF1QkosdUNBQVEsQ0FBQztJQUNwQ00sTUFBTU4sdUNBQVEsR0FBR1EsR0FBRyxDQUFDO0lBQ3JCQyxhQUFhVCx1Q0FBUSxHQUFHVSxRQUFRO0lBQ2hDQyxVQUFVWCx1Q0FBUSxHQUFHUSxHQUFHLENBQUM7SUFDekJJLGNBQWNaLHVDQUFRLEdBQUdVLFFBQVE7SUFDakNHLGdCQUFnQmIsd0NBQU0sQ0FBQztRQUFDO1FBQWE7UUFBYTtRQUFjO0tBQVMsRUFBRVUsUUFBUTtJQUNuRkssWUFBWWYsd0NBQVMsR0FBR2lCLE9BQU8sQ0FBQztJQUNoQ0MsWUFBWWxCLHdDQUFTLEdBQUdpQixPQUFPLENBQUM7SUFDaENFLGdCQUFnQm5CLHVDQUFRLENBQUNBLHVDQUFRLENBQUM7UUFDaENxQixPQUFPckIsdUNBQVE7UUFDZnNCLE1BQU10Qix3Q0FBTSxDQUFDO1lBQUM7WUFBUTtZQUFVO1lBQVE7U0FBUztRQUNqRHVCLFVBQVV2Qix3Q0FBUyxHQUFHaUIsT0FBTyxDQUFDO1FBQzlCTyxTQUFTeEIsc0NBQU8sQ0FBQ0EsdUNBQVEsSUFBSVUsUUFBUTtRQUNyQ2dCLGNBQWMxQix1Q0FBUSxHQUFHVSxRQUFRO0lBQ25DLElBQUlBLFFBQVE7QUFDZDtBQUVBLE1BQU1pQix1QkFBdUJ2QixxQkFBcUJ3QixPQUFPLEdBQUdDLE1BQU0sQ0FBQztJQUNqRUMsSUFBSTlCLHVDQUFRO0lBQ1orQixVQUFVL0Isd0NBQVMsR0FBR1UsUUFBUTtBQUNoQztBQUVPLE1BQU1zQixzQkFBc0IvQixpREFBTUEsQ0FBQztJQUN4Q2dDLE1BQU0vQix1REFBZ0JBLENBQ25CZ0MsS0FBSyxDQUFDbEMsdUNBQVEsQ0FBQztRQUNkbUMsaUJBQWlCbkMsd0NBQVMsR0FBR2lCLE9BQU8sQ0FBQztRQUNyQ0osZ0JBQWdCYix3Q0FBTSxDQUFDO1lBQUM7WUFBYTtZQUFhO1lBQWM7U0FBUyxFQUFFVSxRQUFRO0lBQ3JGLEdBQUdBLFFBQVEsSUFDVjBCLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRUgsS0FBSyxFQUFFO1FBQzFCLE1BQU1JLFFBQWFKLE9BQU9DLGtCQUFrQixDQUFDLElBQUk7WUFBRUosVUFBVTtRQUFLO1FBRWxFLElBQUlHLE9BQU9yQixnQkFBZ0I7WUFDekJ5QixNQUFNekIsY0FBYyxHQUFHcUIsTUFBTXJCLGNBQWM7UUFDN0M7UUFFQSxPQUFPd0IsSUFBSUUsTUFBTSxDQUFDQyxhQUFhLENBQUNDLFFBQVEsQ0FBQztZQUN2Q0g7WUFDQUksU0FBUztnQkFDUEMsUUFBUTtvQkFBRUMsUUFBUTt3QkFBRUMsUUFBUTtvQkFBSztnQkFBRTtnQkFDbkNDLGFBQWE7WUFDZjtZQUNBQyxTQUFTO2dCQUFFekMsTUFBTTtZQUFNO1FBQ3pCO0lBQ0Y7SUFFRjBDLFNBQVM5Qyx1REFBZ0JBLENBQ3RCZ0MsS0FBSyxDQUFDbEMsdUNBQVEsSUFDZG9DLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRUgsT0FBT0osRUFBRSxFQUFFO1FBQzlCLE1BQU1tQixXQUFXLE1BQU1aLElBQUlFLE1BQU0sQ0FBQ0MsYUFBYSxDQUFDVSxVQUFVLENBQUM7WUFDekRaLE9BQU87Z0JBQUVSO1lBQUc7WUFDWlksU0FBUztnQkFBRUksYUFBYTtZQUFLO1FBQy9CO1FBRUEsSUFBSSxDQUFDRyxVQUFVO1lBQ2IsTUFBTSxJQUFJOUMsbURBQVNBLENBQUM7Z0JBQUVnRCxNQUFNO1lBQVk7UUFDMUM7UUFFQSxPQUFPRjtJQUNUO0lBRUZHLFFBQVFsRCx1REFBZ0JBLENBQ3JCZ0MsS0FBSyxDQUFDOUIsc0JBQ05pRCxRQUFRLENBQUMsT0FBTyxFQUFFaEIsR0FBRyxFQUFFSCxLQUFLLEVBQUU7UUFDN0IsT0FBT0csSUFBSUUsTUFBTSxDQUFDQyxhQUFhLENBQUNZLE1BQU0sQ0FBQztZQUNyQ0UsTUFBTTtnQkFDSmhELE1BQU00QixNQUFNNUIsSUFBSTtnQkFDaEJHLGFBQWF5QixNQUFNekIsV0FBVztnQkFDOUJFLFVBQVV1QixNQUFNdkIsUUFBUTtnQkFDeEJDLGNBQWNzQixNQUFNdEIsWUFBWTtnQkFDaENDLGdCQUFnQnFCLE1BQU1yQixjQUFjO2dCQUNwQ0UsWUFBWW1CLE1BQU1uQixVQUFVO2dCQUM1QkcsWUFBWWdCLE1BQU1oQixVQUFVO2dCQUM1QkMsZ0JBQWdCZSxNQUFNZixjQUFjO1lBQ3RDO1FBQ0Y7SUFDRjtJQUVGb0MsUUFBUXJELHVEQUFnQkEsQ0FDckJnQyxLQUFLLENBQUNQLHNCQUNOMEIsUUFBUSxDQUFDLE9BQU8sRUFBRWhCLEdBQUcsRUFBRUgsS0FBSyxFQUFFO1FBQzdCLE1BQU0sRUFBRUosRUFBRSxFQUFFLEdBQUd3QixNQUFNLEdBQUdwQjtRQUV4QixPQUFPRyxJQUFJRSxNQUFNLENBQUNDLGFBQWEsQ0FBQ2UsTUFBTSxDQUFDO1lBQ3JDakIsT0FBTztnQkFBRVI7WUFBRztZQUNad0I7UUFDRjtJQUNGO0lBRUZFLFFBQVF0RCx1REFBZ0JBLENBQ3JCZ0MsS0FBSyxDQUFDbEMsdUNBQVEsSUFDZHFELFFBQVEsQ0FBQyxPQUFPLEVBQUVoQixHQUFHLEVBQUVILE9BQU9KLEVBQUUsRUFBRTtRQUNqQywwQ0FBMEM7UUFDMUMsTUFBTTJCLGNBQWMsTUFBTXBCLElBQUlFLE1BQU0sQ0FBQ21CLEtBQUssQ0FBQ0MsS0FBSyxDQUFDO1lBQy9DckIsT0FBTztnQkFBRXNCLFlBQVk5QjtZQUFHO1FBQzFCO1FBRUEsSUFBSTJCLGNBQWMsR0FBRztZQUNuQixrQ0FBa0M7WUFDbEMsT0FBT3BCLElBQUlFLE1BQU0sQ0FBQ0MsYUFBYSxDQUFDZSxNQUFNLENBQUM7Z0JBQ3JDakIsT0FBTztvQkFBRVI7Z0JBQUc7Z0JBQ1p3QixNQUFNO29CQUFFdkIsVUFBVTtnQkFBTTtZQUMxQjtRQUNGO1FBRUEsT0FBT00sSUFBSUUsTUFBTSxDQUFDQyxhQUFhLENBQUNnQixNQUFNLENBQUM7WUFDckNsQixPQUFPO2dCQUFFUjtZQUFHO1FBQ2Q7SUFDRjtJQUVGK0IsZUFBZTNELHVEQUFnQkEsQ0FDNUJnQyxLQUFLLENBQUNsQyx1Q0FBUSxDQUFDO1FBQ2Q0RCxZQUFZNUQsdUNBQVE7UUFDcEJNLE1BQU1OLHVDQUFRO1FBQ2RzQixNQUFNdEIsd0NBQU0sQ0FBQztZQUFDO1lBQU87WUFBTztTQUFTO1FBQ3JDOEQsYUFBYTlELHVDQUFRLEdBQUdVLFFBQVE7UUFDaENxRCxTQUFTL0QsdUNBQVEsR0FBR1UsUUFBUTtJQUM5QixJQUNDMkMsUUFBUSxDQUFDLE9BQU8sRUFBRWhCLEdBQUcsRUFBRUgsS0FBSyxFQUFFO1FBQzdCLE9BQU9HLElBQUlFLE1BQU0sQ0FBQ3lCLHVCQUF1QixDQUFDWixNQUFNLENBQUM7WUFDL0NFLE1BQU1wQjtRQUNSO0lBQ0Y7SUFFRitCLGtCQUFrQi9ELHVEQUFnQkEsQ0FDL0JnQyxLQUFLLENBQUNsQyx1Q0FBUSxJQUNkcUQsUUFBUSxDQUFDLE9BQU8sRUFBRWhCLEdBQUcsRUFBRUgsT0FBT0osRUFBRSxFQUFFO1FBQ2pDLE9BQU9PLElBQUlFLE1BQU0sQ0FBQ3lCLHVCQUF1QixDQUFDUixNQUFNLENBQUM7WUFDL0NsQixPQUFPO2dCQUFFUjtZQUFHO1FBQ2Q7SUFDRjtBQUNKLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXJhY2VsLXBlb3BsZS8uL3NyYy9zZXJ2ZXIvcm91dGVycy9vZmZlci10ZW1wbGF0ZS50cz9mNTNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIGhyQWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuXG5jb25zdCB0ZW1wbGF0ZUNyZWF0ZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGJvZHlIdG1sOiB6LnN0cmluZygpLm1pbigxKSxcbiAgYm9keU1hcmtkb3duOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGVtcGxveW1lbnRUeXBlOiB6LmVudW0oWydGVUxMX1RJTUUnLCAnUEFSVF9USU1FJywgJ0NPTlRSQUNUT1InLCAnSU5URVJOJ10pLm9wdGlvbmFsKCksXG4gIGluY2x1ZGVOZGE6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gIGluY2x1ZGVQaWk6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gIHZhcmlhYmxlU2NoZW1hOiB6LnJlY29yZCh6Lm9iamVjdCh7XG4gICAgbGFiZWw6IHouc3RyaW5nKCksXG4gICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdudW1iZXInLCAnZGF0ZScsICdzZWxlY3QnXSksXG4gICAgcmVxdWlyZWQ6IHouYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgb3B0aW9uczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgIGRlZmF1bHRWYWx1ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9KSkub3B0aW9uYWwoKSxcbn0pXG5cbmNvbnN0IHRlbXBsYXRlVXBkYXRlU2NoZW1hID0gdGVtcGxhdGVDcmVhdGVTY2hlbWEucGFydGlhbCgpLmV4dGVuZCh7XG4gIGlkOiB6LnN0cmluZygpLFxuICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCBjb25zdCBvZmZlclRlbXBsYXRlUm91dGVyID0gcm91dGVyKHtcbiAgbGlzdDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpbmNsdWRlSW5hY3RpdmU6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICAgICAgZW1wbG95bWVudFR5cGU6IHouZW51bShbJ0ZVTExfVElNRScsICdQQVJUX1RJTUUnLCAnQ09OVFJBQ1RPUicsICdJTlRFUk4nXSkub3B0aW9uYWwoKSxcbiAgICB9KS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHdoZXJlOiBhbnkgPSBpbnB1dD8uaW5jbHVkZUluYWN0aXZlID8ge30gOiB7IGlzQWN0aXZlOiB0cnVlIH1cbiAgICAgIFxuICAgICAgaWYgKGlucHV0Py5lbXBsb3ltZW50VHlwZSkge1xuICAgICAgICB3aGVyZS5lbXBsb3ltZW50VHlwZSA9IGlucHV0LmVtcGxveW1lbnRUeXBlXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmVyVGVtcGxhdGUuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIF9jb3VudDogeyBzZWxlY3Q6IHsgb2ZmZXJzOiB0cnVlIH0gfSxcbiAgICAgICAgICBhdHRhY2htZW50czogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBuYW1lOiAnYXNjJyB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXRCeUlkOiBockFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGlkIH0pID0+IHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlclRlbXBsYXRlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7IGF0dGFjaG1lbnRzOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICB9KSxcblxuICBjcmVhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQodGVtcGxhdGVDcmVhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub2ZmZXJUZW1wbGF0ZS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogaW5wdXQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgYm9keUh0bWw6IGlucHV0LmJvZHlIdG1sLFxuICAgICAgICAgIGJvZHlNYXJrZG93bjogaW5wdXQuYm9keU1hcmtkb3duLFxuICAgICAgICAgIGVtcGxveW1lbnRUeXBlOiBpbnB1dC5lbXBsb3ltZW50VHlwZSxcbiAgICAgICAgICBpbmNsdWRlTmRhOiBpbnB1dC5pbmNsdWRlTmRhLFxuICAgICAgICAgIGluY2x1ZGVQaWk6IGlucHV0LmluY2x1ZGVQaWksXG4gICAgICAgICAgdmFyaWFibGVTY2hlbWE6IGlucHV0LnZhcmlhYmxlU2NoZW1hLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICB1cGRhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQodGVtcGxhdGVVcGRhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBpZCwgLi4uZGF0YSB9ID0gaW5wdXRcblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub2ZmZXJUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhLFxuICAgICAgfSlcbiAgICB9KSxcblxuICBkZWxldGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGVtcGxhdGUgaXMgdXNlZCBieSBhbnkgb2ZmZXJzXG4gICAgICBjb25zdCBvZmZlcnNDb3VudCA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIuY291bnQoe1xuICAgICAgICB3aGVyZTogeyB0ZW1wbGF0ZUlkOiBpZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKG9mZmVyc0NvdW50ID4gMCkge1xuICAgICAgICAvLyBTb2Z0IGRlbGV0ZSBieSBtYXJraW5nIGluYWN0aXZlXG4gICAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmVyVGVtcGxhdGUudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICAgIGRhdGE6IHsgaXNBY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLm9mZmVyVGVtcGxhdGUuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgYWRkQXR0YWNobWVudDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICB0ZW1wbGF0ZUlkOiB6LnN0cmluZygpLFxuICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIHR5cGU6IHouZW51bShbJ25kYScsICdwaWknLCAnY3VzdG9tJ10pLFxuICAgICAgY29udGVudEh0bWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGZpbGVVcmw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5vZmZlclRlbXBsYXRlQXR0YWNobWVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiBpbnB1dCxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgcmVtb3ZlQXR0YWNobWVudDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0OiBpZCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5vZmZlclRlbXBsYXRlQXR0YWNobWVudC5kZWxldGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgfSlcbiAgICB9KSxcbn0pXG5cbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiaHJBZG1pblByb2NlZHVyZSIsIlRSUENFcnJvciIsInRlbXBsYXRlQ3JlYXRlU2NoZW1hIiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsIm1pbiIsImRlc2NyaXB0aW9uIiwib3B0aW9uYWwiLCJib2R5SHRtbCIsImJvZHlNYXJrZG93biIsImVtcGxveW1lbnRUeXBlIiwiZW51bSIsImluY2x1ZGVOZGEiLCJib29sZWFuIiwiZGVmYXVsdCIsImluY2x1ZGVQaWkiLCJ2YXJpYWJsZVNjaGVtYSIsInJlY29yZCIsImxhYmVsIiwidHlwZSIsInJlcXVpcmVkIiwib3B0aW9ucyIsImFycmF5IiwiZGVmYXVsdFZhbHVlIiwidGVtcGxhdGVVcGRhdGVTY2hlbWEiLCJwYXJ0aWFsIiwiZXh0ZW5kIiwiaWQiLCJpc0FjdGl2ZSIsIm9mZmVyVGVtcGxhdGVSb3V0ZXIiLCJsaXN0IiwiaW5wdXQiLCJpbmNsdWRlSW5hY3RpdmUiLCJxdWVyeSIsImN0eCIsIndoZXJlIiwicHJpc21hIiwib2ZmZXJUZW1wbGF0ZSIsImZpbmRNYW55IiwiaW5jbHVkZSIsIl9jb3VudCIsInNlbGVjdCIsIm9mZmVycyIsImF0dGFjaG1lbnRzIiwib3JkZXJCeSIsImdldEJ5SWQiLCJ0ZW1wbGF0ZSIsImZpbmRVbmlxdWUiLCJjb2RlIiwiY3JlYXRlIiwibXV0YXRpb24iLCJkYXRhIiwidXBkYXRlIiwiZGVsZXRlIiwib2ZmZXJzQ291bnQiLCJvZmZlciIsImNvdW50IiwidGVtcGxhdGVJZCIsImFkZEF0dGFjaG1lbnQiLCJjb250ZW50SHRtbCIsImZpbGVVcmwiLCJvZmZlclRlbXBsYXRlQXR0YWNobWVudCIsInJlbW92ZUF0dGFjaG1lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/offer-template.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/offer.ts":
/*!*************************************!*\
  !*** ./src/server/routers/offer.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   offerRouter: () => (/* binding */ offerRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_integrations_docusign__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/integrations/docusign */ \"(rsc)/./src/lib/integrations/docusign.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_pdf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/pdf */ \"(rsc)/./src/lib/pdf.ts\");\n/* harmony import */ var _lib_letterhead__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/letterhead */ \"(rsc)/./src/lib/letterhead.ts\");\n\n\n\n\n\n\n\n\n\n\nconst offerCreateSchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n    employeeId: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n    candidateEmail: zod__WEBPACK_IMPORTED_MODULE_8__.string().email(),\n    candidateName: zod__WEBPACK_IMPORTED_MODULE_8__.string().min(1),\n    templateId: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n    variables: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string())\n});\nconst offerSendSchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n    offerId: zod__WEBPACK_IMPORTED_MODULE_8__.string()\n});\nconst offerUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n    offerId: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n    candidateEmail: zod__WEBPACK_IMPORTED_MODULE_8__.string().email().optional(),\n    candidateName: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n    templateId: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n    variables: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string()).optional()\n});\nconst ALLOWED_RESEND_STATUSES = [\n    \"DRAFT\",\n    \"SENT\",\n    \"VIEWED\"\n];\nfunction ensureSendableStatus(status, allowResend = false) {\n    if (allowResend) {\n        if (!ALLOWED_RESEND_STATUSES.includes(status)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Only draft or previously sent offers can be resent\"\n            });\n        }\n        return;\n    }\n    if (status !== \"DRAFT\") {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n            code: \"BAD_REQUEST\",\n            message: \"Only draft offers can be sent\"\n        });\n    }\n}\nconst offerRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.object({\n        status: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n        candidateEmail: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n        search: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_8__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_8__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { status, candidateEmail, search, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (status) where.status = status;\n        if (candidateEmail) where.candidateEmail = candidateEmail;\n        if (search) {\n            where.OR = [\n                {\n                    candidateName: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    candidateEmail: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                }\n            ];\n        }\n        const [offers, total] = await Promise.all([\n            ctx.prisma.offer.findMany({\n                where,\n                include: {\n                    template: {\n                        select: {\n                            id: true,\n                            name: true\n                        }\n                    },\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true,\n                            status: true\n                        }\n                    },\n                    events: {\n                        orderBy: {\n                            occurredAt: \"desc\"\n                        },\n                        take: 3\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.offer.count({\n                where\n            })\n        ]);\n        return {\n            offers,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getById: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.string()).query(async ({ ctx, input: id })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id\n            },\n            include: {\n                template: true,\n                employee: true,\n                events: {\n                    orderBy: {\n                        occurredAt: \"desc\"\n                    }\n                }\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const renderedHtml = offer.renderedHtml || (offer.template?.bodyHtml ? (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(offer.template.bodyHtml, offer.variables) : \"\");\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        const wrappedHtml = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)(renderedHtml, organization, {\n            baseUrl: process.env.NEXTAUTH_URL\n        });\n        return {\n            ...offer,\n            renderedHtml: wrappedHtml\n        };\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(offerCreateSchema).mutation(async ({ ctx, input })=>{\n        const template = await ctx.prisma.offerTemplate.findUnique({\n            where: {\n                id: input.templateId\n            }\n        });\n        if (!template) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Template not found\"\n            });\n        }\n        // Create or find employee\n        let employeeId = input.employeeId;\n        if (!employeeId) {\n            // Check if employee exists with this email\n            const existingEmployee = await ctx.prisma.employee.findUnique({\n                where: {\n                    personalEmail: input.candidateEmail\n                }\n            });\n            if (existingEmployee) {\n                employeeId = existingEmployee.id;\n            } else {\n                // Create new employee as candidate\n                const newEmployee = await ctx.prisma.employee.create({\n                    data: {\n                        fullName: input.candidateName,\n                        personalEmail: input.candidateEmail,\n                        status: \"CANDIDATE\",\n                        jobTitle: input.variables.role || input.variables.job_title,\n                        department: input.variables.department,\n                        salaryAmount: input.variables.salary ? parseFloat(input.variables.salary) : undefined,\n                        salaryCurrency: input.variables.currency || \"USD\",\n                        startDate: input.variables.start_date ? new Date(input.variables.start_date) : undefined,\n                        location: input.variables.location\n                    }\n                });\n                employeeId = newEmployee.id;\n            }\n        }\n        // Render the offer HTML\n        const renderedHtml = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template.bodyHtml, input.variables);\n        const offer = await ctx.prisma.offer.create({\n            data: {\n                employeeId,\n                candidateEmail: input.candidateEmail,\n                candidateName: input.candidateName,\n                templateId: input.templateId,\n                variables: input.variables,\n                renderedHtml,\n                status: \"DRAFT\"\n            }\n        });\n        // Create event\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId: offer.id,\n                type: \"created\",\n                description: \"Offer created\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            actorId: ctx.user.id,\n            action: \"OFFER_CREATED\",\n            offerId: offer.id,\n            metadata: {\n                candidateName: input.candidateName,\n                templateId: input.templateId\n            }\n        });\n        return offer;\n    }),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(offerUpdateSchema).mutation(async ({ ctx, input })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: input.offerId\n            },\n            include: {\n                template: true\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if ([\n            \"SIGNED\",\n            \"DECLINED\",\n            \"EXPIRED\",\n            \"CANCELLED\"\n        ].includes(offer.status)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Signed or closed offers cannot be edited\"\n            });\n        }\n        let template = offer.template;\n        if (input.templateId && input.templateId !== offer.templateId) {\n            template = await ctx.prisma.offerTemplate.findUnique({\n                where: {\n                    id: input.templateId\n                }\n            });\n            if (!template) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                    code: \"NOT_FOUND\",\n                    message: \"Template not found\"\n                });\n            }\n        }\n        const data = {};\n        if (input.candidateName) data.candidateName = input.candidateName;\n        if (input.candidateEmail) data.candidateEmail = input.candidateEmail;\n        if (input.templateId) data.templateId = input.templateId;\n        if (input.variables) {\n            data.variables = input.variables;\n            data.renderedHtml = template?.bodyHtml && input.variables ? (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template.bodyHtml, input.variables) : offer.renderedHtml;\n        }\n        const updated = await ctx.prisma.offer.update({\n            where: {\n                id: input.offerId\n            },\n            data\n        });\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId: offer.id,\n                type: \"updated\",\n                description: \"Offer updated\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            actorId: ctx.user.id,\n            action: \"OFFER_UPDATED\",\n            offerId: offer.id\n        });\n        return updated;\n    }),\n    preview: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.object({\n        templateId: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n        variables: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string())\n    })).query(async ({ ctx, input })=>{\n        const template = await ctx.prisma.offerTemplate.findUnique({\n            where: {\n                id: input.templateId\n            }\n        });\n        if (!template) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        return {\n            html: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)((0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template.bodyHtml, input.variables), organization, {\n                baseUrl: process.env.NEXTAUTH_URL\n            })\n        };\n    }),\n    send: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(offerSendSchema).mutation(async ({ ctx, input })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: input.offerId\n            },\n            include: {\n                template: true,\n                employee: true\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        ensureSendableStatus(offer.status, false);\n        const docusign = (0,_lib_integrations_docusign__WEBPACK_IMPORTED_MODULE_4__.createDocuSignConnector)();\n        if (docusign) {\n            // Send via DocuSign\n            try {\n                const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n                const documentHtml = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)(offer.renderedHtml || \"\", organization, {\n                    baseUrl: process.env.NEXTAUTH_URL\n                });\n                const result = await docusign.sendEnvelope({\n                    signerEmail: offer.candidateEmail,\n                    signerName: offer.candidateName,\n                    subject: `Offer from ${organization.name} - ${offer.candidateName}`,\n                    documentHtml,\n                    callbackUrl: `${process.env.NEXTAUTH_URL}/api/webhooks/docusign`\n                });\n                await ctx.prisma.offer.update({\n                    where: {\n                        id: offer.id\n                    },\n                    data: {\n                        status: \"SENT\",\n                        esignEnvelopeId: result.envelopeId,\n                        esignProvider: \"docusign\",\n                        esignStatus: result.status,\n                        esignSentAt: new Date(),\n                        sentBy: ctx.user.id\n                    }\n                });\n            } catch (error) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: `Failed to send via DocuSign: ${error instanceof Error ? error.message : \"Unknown error\"}`\n                });\n            }\n        } else {\n            // Fallback: Send link via email\n            const offerLink = `${process.env.NEXTAUTH_URL}/offer/${offer.id}/sign`;\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_3__.sendOfferEmail)({\n                candidateEmail: offer.candidateEmail,\n                candidateName: offer.candidateName,\n                offerLink,\n                companyName: (await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)()).name\n            });\n            await ctx.prisma.offer.update({\n                where: {\n                    id: offer.id\n                },\n                data: {\n                    status: \"SENT\",\n                    esignProvider: \"internal\",\n                    esignStatus: \"sent\",\n                    esignSentAt: new Date(),\n                    sentBy: ctx.user.id\n                }\n            });\n        }\n        // Update employee status\n        await ctx.prisma.employee.update({\n            where: {\n                id: offer.employeeId\n            },\n            data: {\n                status: \"OFFER_SENT\"\n            }\n        });\n        // Create event\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId: offer.id,\n                type: \"sent\",\n                description: \"Offer sent to candidate\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            actorId: ctx.user.id,\n            action: \"OFFER_SENT\",\n            offerId: offer.id,\n            metadata: {\n                candidateEmail: offer.candidateEmail\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    resend: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(offerSendSchema).mutation(async ({ ctx, input })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: input.offerId\n            },\n            include: {\n                template: true,\n                employee: true\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        ensureSendableStatus(offer.status, true);\n        const docusign = (0,_lib_integrations_docusign__WEBPACK_IMPORTED_MODULE_4__.createDocuSignConnector)();\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        if (docusign) {\n            try {\n                const documentHtml = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)(offer.renderedHtml || \"\", organization, {\n                    baseUrl: process.env.NEXTAUTH_URL\n                });\n                const result = await docusign.sendEnvelope({\n                    signerEmail: offer.candidateEmail,\n                    signerName: offer.candidateName,\n                    subject: `Offer from ${organization.name} - ${offer.candidateName}`,\n                    documentHtml,\n                    callbackUrl: `${process.env.NEXTAUTH_URL}/api/webhooks/docusign`\n                });\n                await ctx.prisma.offer.update({\n                    where: {\n                        id: offer.id\n                    },\n                    data: {\n                        status: \"SENT\",\n                        esignEnvelopeId: result.envelopeId,\n                        esignProvider: \"docusign\",\n                        esignStatus: result.status,\n                        esignSentAt: new Date(),\n                        sentBy: ctx.user.id\n                    }\n                });\n            } catch (error) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: `Failed to send via DocuSign: ${error instanceof Error ? error.message : \"Unknown error\"}`\n                });\n            }\n        } else {\n            const offerLink = `${process.env.NEXTAUTH_URL}/offer/${offer.id}/sign`;\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_3__.sendOfferEmail)({\n                candidateEmail: offer.candidateEmail,\n                candidateName: offer.candidateName,\n                offerLink,\n                companyName: organization.name,\n                logoUrl: organization.logoUrl || undefined\n            });\n            await ctx.prisma.offer.update({\n                where: {\n                    id: offer.id\n                },\n                data: {\n                    status: \"SENT\",\n                    esignProvider: \"internal\",\n                    esignStatus: \"sent\",\n                    esignSentAt: new Date(),\n                    sentBy: ctx.user.id\n                }\n            });\n        }\n        if (offer.employeeId) {\n            await ctx.prisma.employee.update({\n                where: {\n                    id: offer.employeeId\n                },\n                data: {\n                    status: \"OFFER_SENT\"\n                }\n            });\n        }\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId: offer.id,\n                type: \"sent\",\n                description: \"Offer resent to candidate\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            actorId: ctx.user.id,\n            action: \"OFFER_SENT\",\n            offerId: offer.id,\n            metadata: {\n                candidateEmail: offer.candidateEmail,\n                resend: true\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    getSigningUrl: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.string()).query(async ({ ctx, input: offerId })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: offerId\n            }\n        });\n        if (!offer || !offer.esignEnvelopeId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const docusign = (0,_lib_integrations_docusign__WEBPACK_IMPORTED_MODULE_4__.createDocuSignConnector)();\n        if (!docusign) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"DocuSign not configured\"\n            });\n        }\n        const returnUrl = `${process.env.NEXTAUTH_URL}/offers/${offerId}?signed=complete`;\n        const signingUrl = await docusign.getSigningUrl(offer.esignEnvelopeId, offer.candidateEmail, offer.candidateName, returnUrl);\n        return {\n            url: signingUrl\n        };\n    }),\n    cancel: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.string()).mutation(async ({ ctx, input: offerId })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: offerId\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (offer.status === \"SIGNED\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Cannot cancel signed offers\"\n            });\n        }\n        // Void in DocuSign if applicable\n        if (offer.esignEnvelopeId) {\n            const docusign = (0,_lib_integrations_docusign__WEBPACK_IMPORTED_MODULE_4__.createDocuSignConnector)();\n            if (docusign) {\n                try {\n                    await docusign.voidEnvelope(offer.esignEnvelopeId, \"Cancelled by HR\");\n                } catch (error) {\n                    console.warn(\"Failed to void DocuSign envelope:\", error);\n                }\n            }\n        }\n        await ctx.prisma.offer.update({\n            where: {\n                id: offerId\n            },\n            data: {\n                status: \"CANCELLED\"\n            }\n        });\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId,\n                type: \"cancelled\",\n                description: \"Offer cancelled\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            actorId: ctx.user.id,\n            action: \"OFFER_CANCELLED\",\n            offerId\n        });\n        return {\n            success: true\n        };\n    }),\n    // Public endpoint for candidates to view their offer\n    getPublicOffer: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.object({\n        offerId: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n        token: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional()\n    })).query(async ({ ctx, input })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: input.offerId\n            },\n            select: {\n                id: true,\n                candidateName: true,\n                status: true,\n                renderedHtml: true,\n                esignSignedAt: true,\n                variables: true,\n                template: {\n                    select: {\n                        name: true,\n                        bodyHtml: true\n                    }\n                }\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        const variables = offer.variables || {};\n        const renderedHtml = offer.renderedHtml || (offer.template?.bodyHtml ? (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(offer.template.bodyHtml, variables) : \"\");\n        const wrappedHtml = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)(renderedHtml, organization, {\n            baseUrl: process.env.NEXTAUTH_URL\n        });\n        // Mark as viewed if not already\n        if (offer.status === \"SENT\") {\n            await ctx.prisma.offer.update({\n                where: {\n                    id: input.offerId\n                },\n                data: {\n                    status: \"VIEWED\",\n                    esignViewedAt: new Date()\n                }\n            });\n            await ctx.prisma.offerEvent.create({\n                data: {\n                    offerId: input.offerId,\n                    type: \"viewed\",\n                    description: \"Offer viewed by candidate\"\n                }\n            });\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n                action: \"OFFER_VIEWED\",\n                offerId: input.offerId\n            });\n        }\n        return {\n            id: offer.id,\n            candidateName: offer.candidateName,\n            status: offer.status,\n            esignSignedAt: offer.esignSignedAt,\n            renderedHtml: wrappedHtml,\n            template: {\n                name: offer.template.name\n            }\n        };\n    }),\n    // Endpoint for manual signing (when DocuSign is not available)\n    manualSign: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_8__.object({\n        offerId: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n        signature: zod__WEBPACK_IMPORTED_MODULE_8__.string(),\n        signatureImage: zod__WEBPACK_IMPORTED_MODULE_8__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const offer = await ctx.prisma.offer.findUnique({\n            where: {\n                id: input.offerId\n            }\n        });\n        if (!offer) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (offer.status !== \"SENT\" && offer.status !== \"VIEWED\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_9__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Offer cannot be signed\"\n            });\n        }\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        const vars = offer.variables || {};\n        const signatureBlockId = vars.signature_block_id;\n        const signatureBlock = signatureBlockId ? await ctx.prisma.signatureBlock.findUnique({\n            where: {\n                id: signatureBlockId\n            }\n        }) : null;\n        const signedAt = new Date();\n        const signatureBoxStyle = \"border:1px solid #e5e7eb; padding:6px; background:white; width:280px; height:96px; overflow:hidden; display:flex; align-items:center; justify-content:center;\";\n        const signatureImgStyle = \"max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; display:block;\";\n        const signatureBlockHtml = `\n        <div style=\"margin-top:32px;\">\n          <div style=\"display:flex; flex-direction:column; gap:8px;\">\n            ${signatureBlock?.signatureImageUrl ? `<div style=\"${signatureBoxStyle}\"><img src=\"${signatureBlock.signatureImageUrl}\" alt=\"Company signature\" style=\"${signatureImgStyle}\" /></div>` : signatureBlock?.signatureText ? `<div style=\"${signatureBoxStyle}\"><p style=\"margin:0; color:#111827; font-size:16px;\">${signatureBlock.signatureText}</p></div>` : \"\"}\n            <div>\n              <p style=\"margin:0; font-weight:700; color:#111827;\">${signatureBlock?.signatoryName || organization.name}</p>\n              <p style=\"margin:0; color:#4b5563;\">${signatureBlock?.signatoryTitle || \"\"}</p>\n            </div>\n          </div>\n        </div>\n      `;\n        const wrappedOfferHtml = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_7__.wrapAgreementHtmlWithLetterhead)(offer.renderedHtml || \"\", organization, {\n            baseUrl: process.env.NEXTAUTH_URL\n        });\n        const signingDetailsHtml = `\n        <hr style=\"margin:24px 0; border:0; border-top:1px solid #e5e7eb;\" />\n        <div style=\"display:flex; gap:32px; flex-wrap:wrap;\">\n          <div>\n            <p style=\"margin:0; font-weight:600; color:#111827;\">Candidate signature</p>\n            <p style=\"margin:4px 0; color:#111827;\">${input.signature}</p>\n            ${input.signatureImage ? `<div style=\"${signatureBoxStyle}\"><img src=\"${input.signatureImage}\" alt=\"Signature\" style=\"${signatureImgStyle}\" /></div>` : \"\"}\n            <p style=\"margin:8px 0 0; color:#4b5563; font-size:12px;\">Signed at: ${signedAt.toISOString()}</p>\n          </div>\n          <div>\n            <p style=\"margin:0; font-weight:600; color:#111827;\">Company</p>\n            <p style=\"margin:4px 0; color:#111827;\">${organization.name}</p>\n            ${signatureBlock ? `<p style=\"margin:0; color:#111827;\">${signatureBlock.signatoryName}</p>` : \"\"}\n            ${signatureBlock ? `<p style=\"margin:0; color:#4b5563;\">${signatureBlock.signatoryTitle}</p>` : \"\"}\n            <p style=\"margin:0; color:#4b5563; font-size:12px;\">Signed at: ${signedAt.toISOString()}</p>\n          </div>\n        </div>\n        ${signatureBlockHtml}\n      `;\n        const signedHtml = `\n        <div style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #1f2937;\">\n          <div style=\"border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background:white;\">\n            <div style=\"background:#f9fafb; padding:16px 20px; border-bottom:1px solid #e5e7eb;\">\n              <h2 style=\"margin:0; font-size:18px; color:#111827;\">Signed Offer</h2>\n              <p style=\"margin:4px 0 0; color:#4b5563;\">${organization.name}</p>\n            </div>\n            <div style=\"padding:20px;\">\n              ${wrappedOfferHtml}\n              ${signingDetailsHtml}\n            </div>\n          </div>\n        </div>\n      `;\n        const signedPdf = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_6__.renderHtmlToPdfBuffer)(signedHtml);\n        const signedDocUrl = `data:application/pdf;base64,${signedPdf.toString(\"base64\")}`;\n        // Update offer\n        await ctx.prisma.offer.update({\n            where: {\n                id: input.offerId\n            },\n            data: {\n                status: \"SIGNED\",\n                esignProvider: offer.esignProvider || \"internal\",\n                esignStatus: \"completed\",\n                esignSignedAt: signedAt,\n                signedDocUrl\n            }\n        });\n        // Update employee\n        await ctx.prisma.employee.update({\n            where: {\n                id: offer.employeeId\n            },\n            data: {\n                status: \"OFFER_SIGNED\"\n            }\n        });\n        await ctx.prisma.offerEvent.create({\n            data: {\n                offerId: input.offerId,\n                type: \"signed\",\n                description: \"Offer signed by candidate\",\n                metadata: {\n                    signature: input.signature,\n                    signatureImage: input.signatureImage,\n                    method: \"internal\"\n                }\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_2__.logOfferEvent)({\n            action: \"OFFER_SIGNED\",\n            offerId: input.offerId,\n            metadata: {\n                method: \"manual\",\n                signature: input.signature,\n                signatureImage: input.signatureImage\n            }\n        });\n        // Email signed copy\n        await (0,_lib_email__WEBPACK_IMPORTED_MODULE_3__.sendSignedOfferEmail)({\n            to: offer.candidateEmail,\n            candidateName: offer.candidateName,\n            companyName: organization.name,\n            signedHtml,\n            signedPdf,\n            signedFileName: `signed-offer-${offer.candidateName.replace(/\\s+/g, \"-\").toLowerCase() || \"candidate\"}.pdf`\n        });\n        return {\n            success: true\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU07Z0JBQ0ovRCxTQUFTVyxNQUFNWCxPQUFPO2dCQUN0QitFLE1BQU07Z0JBQ05DLGFBQWE7Z0JBQ2JJLFVBQVU7b0JBQ1J3QyxXQUFXakgsTUFBTWlILFNBQVM7b0JBQzFCQyxnQkFBZ0JsSCxNQUFNa0gsY0FBYztvQkFDcENvQixRQUFRO2dCQUNWO1lBQ0Y7UUFDRjtRQUVBLE1BQU1ySyx5REFBYUEsQ0FBQztZQUNsQnVHLFFBQVE7WUFDUm5GLFNBQVNXLE1BQU1YLE9BQU87WUFDdEJvRixVQUFVO2dCQUFFNkQsUUFBUTtnQkFBVXJCLFdBQVdqSCxNQUFNaUgsU0FBUztnQkFBRUMsZ0JBQWdCbEgsTUFBTWtILGNBQWM7WUFBQztRQUNqRztRQUVBLG9CQUFvQjtRQUNwQixNQUFNL0ksZ0VBQW9CQSxDQUFDO1lBQ3pCb0ssSUFBSXRILE1BQU1wQyxjQUFjO1lBQ3hCRSxlQUFla0MsTUFBTWxDLGFBQWE7WUFDbENpSCxhQUFheEQsYUFBYWpCLElBQUk7WUFDOUIyRztZQUNBQztZQUNBSyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUV2SCxNQUFNbEMsYUFBYSxDQUFDMEosT0FBTyxDQUFDLFFBQVEsS0FBS0MsV0FBVyxNQUFNLFlBQVksSUFBSSxDQUFDO1FBQzdHO1FBRUEsT0FBTztZQUFFekMsU0FBUztRQUFLO0lBQ3pCO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL29mZmVyLnRzP2Y0OGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgaHJBZG1pblByb2NlZHVyZSwgcHVibGljUHJvY2VkdXJlIH0gZnJvbSAnQC9saWIvdHJwYydcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcidcbmltcG9ydCB7IHJlbmRlclRlbXBsYXRlIH0gZnJvbSAnQC9saWIvdXRpbHMnXG5pbXBvcnQgeyBsb2dPZmZlckV2ZW50IH0gZnJvbSAnQC9saWIvYXVkaXQnXG5pbXBvcnQgeyBzZW5kT2ZmZXJFbWFpbCwgc2VuZFNpZ25lZE9mZmVyRW1haWwgfSBmcm9tICdAL2xpYi9lbWFpbCdcbmltcG9ydCB7IGNyZWF0ZURvY3VTaWduQ29ubmVjdG9yIH0gZnJvbSAnQC9saWIvaW50ZWdyYXRpb25zL2RvY3VzaWduJ1xuaW1wb3J0IHsgZ2V0T3JnYW5pemF0aW9uIH0gZnJvbSAnQC9saWIvb3JnYW5pemF0aW9uJ1xuaW1wb3J0IHsgcmVuZGVySHRtbFRvUGRmQnVmZmVyIH0gZnJvbSAnQC9saWIvcGRmJ1xuaW1wb3J0IHsgd3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZCB9IGZyb20gJ0AvbGliL2xldHRlcmhlYWQnXG5cbmNvbnN0IG9mZmVyQ3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICBlbXBsb3llZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGNhbmRpZGF0ZUVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCksXG4gIGNhbmRpZGF0ZU5hbWU6IHouc3RyaW5nKCkubWluKDEpLFxuICB0ZW1wbGF0ZUlkOiB6LnN0cmluZygpLFxuICB2YXJpYWJsZXM6IHoucmVjb3JkKHouc3RyaW5nKCkpLFxufSlcblxuY29uc3Qgb2ZmZXJTZW5kU2NoZW1hID0gei5vYmplY3Qoe1xuICBvZmZlcklkOiB6LnN0cmluZygpLFxufSlcblxuY29uc3Qgb2ZmZXJVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG9mZmVySWQ6IHouc3RyaW5nKCksXG4gIGNhbmRpZGF0ZUVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCkub3B0aW9uYWwoKSxcbiAgY2FuZGlkYXRlTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB0ZW1wbGF0ZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHZhcmlhYmxlczogei5yZWNvcmQoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbn0pXG5cbmNvbnN0IEFMTE9XRURfUkVTRU5EX1NUQVRVU0VTID0gWydEUkFGVCcsICdTRU5UJywgJ1ZJRVdFRCddXG5cbmZ1bmN0aW9uIGVuc3VyZVNlbmRhYmxlU3RhdHVzKHN0YXR1czogc3RyaW5nLCBhbGxvd1Jlc2VuZCA9IGZhbHNlKSB7XG4gIGlmIChhbGxvd1Jlc2VuZCkge1xuICAgIGlmICghQUxMT1dFRF9SRVNFTkRfU1RBVFVTRVMuaW5jbHVkZXMoc3RhdHVzKSkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdPbmx5IGRyYWZ0IG9yIHByZXZpb3VzbHkgc2VudCBvZmZlcnMgY2FuIGJlIHJlc2VudCcgfSlcbiAgICB9XG4gICAgcmV0dXJuXG4gIH1cbiAgaWYgKHN0YXR1cyAhPT0gJ0RSQUZUJykge1xuICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnT25seSBkcmFmdCBvZmZlcnMgY2FuIGJlIHNlbnQnIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG9mZmVyUm91dGVyID0gcm91dGVyKHtcbiAgbGlzdDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGNhbmRpZGF0ZUVtYWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBzZWFyY2g6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhZ2U6IHoubnVtYmVyKCkuZGVmYXVsdCgxKSxcbiAgICAgIGxpbWl0OiB6Lm51bWJlcigpLmRlZmF1bHQoMjApLFxuICAgIH0pLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIGNhbmRpZGF0ZUVtYWlsLCBzZWFyY2gsIHBhZ2UgPSAxLCBsaW1pdCA9IDIwIH0gPSBpbnB1dCB8fCB7fVxuICAgICAgXG4gICAgICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICAgICAgXG4gICAgICBpZiAoc3RhdHVzKSB3aGVyZS5zdGF0dXMgPSBzdGF0dXNcbiAgICAgIGlmIChjYW5kaWRhdGVFbWFpbCkgd2hlcmUuY2FuZGlkYXRlRW1haWwgPSBjYW5kaWRhdGVFbWFpbFxuICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICB3aGVyZS5PUiA9IFtcbiAgICAgICAgICB7IGNhbmRpZGF0ZU5hbWU6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgeyBjYW5kaWRhdGVFbWFpbDogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBbb2ZmZXJzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGN0eC5wcmlzbWEub2ZmZXIuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICBlbXBsb3llZTogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIGZ1bGxOYW1lOiB0cnVlLCBzdGF0dXM6IHRydWUgfSB9LFxuICAgICAgICAgICAgZXZlbnRzOiB7IG9yZGVyQnk6IHsgb2NjdXJyZWRBdDogJ2Rlc2MnIH0sIHRha2U6IDMgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgICBza2lwOiAocGFnZSAtIDEpICogbGltaXQsXG4gICAgICAgICAgdGFrZTogbGltaXQsXG4gICAgICAgIH0pLFxuICAgICAgICBjdHgucHJpc21hLm9mZmVyLmNvdW50KHsgd2hlcmUgfSksXG4gICAgICBdKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBvZmZlcnMsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpLFxuICAgICAgfVxuICAgIH0pLFxuXG4gIGdldEJ5SWQ6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgdGVtcGxhdGU6IHRydWUsXG4gICAgICAgICAgZW1wbG95ZWU6IHRydWUsXG4gICAgICAgICAgZXZlbnRzOiB7IG9yZGVyQnk6IHsgb2NjdXJyZWRBdDogJ2Rlc2MnIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlbmRlcmVkSHRtbCA9XG4gICAgICAgIG9mZmVyLnJlbmRlcmVkSHRtbCB8fFxuICAgICAgICAob2ZmZXIudGVtcGxhdGU/LmJvZHlIdG1sXG4gICAgICAgICAgPyByZW5kZXJUZW1wbGF0ZShvZmZlci50ZW1wbGF0ZS5ib2R5SHRtbCwgb2ZmZXIudmFyaWFibGVzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pXG4gICAgICAgICAgOiAnJylcblxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgICAgIGNvbnN0IHdyYXBwZWRIdG1sID0gd3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZChyZW5kZXJlZEh0bWwsIG9yZ2FuaXphdGlvbiwge1xuICAgICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwsXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5vZmZlcixcbiAgICAgICAgcmVuZGVyZWRIdG1sOiB3cmFwcGVkSHRtbCxcbiAgICAgIH1cbiAgICB9KSxcblxuICBjcmVhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQob2ZmZXJDcmVhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyVGVtcGxhdGUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC50ZW1wbGF0ZUlkIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1RlbXBsYXRlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIG9yIGZpbmQgZW1wbG95ZWVcbiAgICAgIGxldCBlbXBsb3llZUlkID0gaW5wdXQuZW1wbG95ZWVJZFxuICAgICAgXG4gICAgICBpZiAoIWVtcGxveWVlSWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgZW1wbG95ZWUgZXhpc3RzIHdpdGggdGhpcyBlbWFpbFxuICAgICAgICBjb25zdCBleGlzdGluZ0VtcGxveWVlID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBwZXJzb25hbEVtYWlsOiBpbnB1dC5jYW5kaWRhdGVFbWFpbCB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChleGlzdGluZ0VtcGxveWVlKSB7XG4gICAgICAgICAgZW1wbG95ZWVJZCA9IGV4aXN0aW5nRW1wbG95ZWUuaWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgbmV3IGVtcGxveWVlIGFzIGNhbmRpZGF0ZVxuICAgICAgICAgIGNvbnN0IG5ld0VtcGxveWVlID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5jcmVhdGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBmdWxsTmFtZTogaW5wdXQuY2FuZGlkYXRlTmFtZSxcbiAgICAgICAgICAgICAgcGVyc29uYWxFbWFpbDogaW5wdXQuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgICAgICAgIHN0YXR1czogJ0NBTkRJREFURScsXG4gICAgICAgICAgICAgIGpvYlRpdGxlOiBpbnB1dC52YXJpYWJsZXMucm9sZSB8fCBpbnB1dC52YXJpYWJsZXMuam9iX3RpdGxlLFxuICAgICAgICAgICAgICBkZXBhcnRtZW50OiBpbnB1dC52YXJpYWJsZXMuZGVwYXJ0bWVudCxcbiAgICAgICAgICAgICAgc2FsYXJ5QW1vdW50OiBpbnB1dC52YXJpYWJsZXMuc2FsYXJ5ID8gcGFyc2VGbG9hdChpbnB1dC52YXJpYWJsZXMuc2FsYXJ5KSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgc2FsYXJ5Q3VycmVuY3k6IGlucHV0LnZhcmlhYmxlcy5jdXJyZW5jeSB8fCAnVVNEJyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBpbnB1dC52YXJpYWJsZXMuc3RhcnRfZGF0ZSA/IG5ldyBEYXRlKGlucHV0LnZhcmlhYmxlcy5zdGFydF9kYXRlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgbG9jYXRpb246IGlucHV0LnZhcmlhYmxlcy5sb2NhdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgICBlbXBsb3llZUlkID0gbmV3RW1wbG95ZWUuaWRcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZW5kZXIgdGhlIG9mZmVyIEhUTUxcbiAgICAgIGNvbnN0IHJlbmRlcmVkSHRtbCA9IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLmJvZHlIdG1sLCBpbnB1dC52YXJpYWJsZXMpXG5cbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZW1wbG95ZWVJZCxcbiAgICAgICAgICBjYW5kaWRhdGVFbWFpbDogaW5wdXQuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgICAgY2FuZGlkYXRlTmFtZTogaW5wdXQuY2FuZGlkYXRlTmFtZSxcbiAgICAgICAgICB0ZW1wbGF0ZUlkOiBpbnB1dC50ZW1wbGF0ZUlkLFxuICAgICAgICAgIHZhcmlhYmxlczogaW5wdXQudmFyaWFibGVzLFxuICAgICAgICAgIHJlbmRlcmVkSHRtbCxcbiAgICAgICAgICBzdGF0dXM6ICdEUkFGVCcsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBDcmVhdGUgZXZlbnRcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb2ZmZXJJZDogb2ZmZXIuaWQsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZWQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT2ZmZXIgY3JlYXRlZCcsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBsb2dPZmZlckV2ZW50KHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnT0ZGRVJfQ1JFQVRFRCcsXG4gICAgICAgIG9mZmVySWQ6IG9mZmVyLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyBjYW5kaWRhdGVOYW1lOiBpbnB1dC5jYW5kaWRhdGVOYW1lLCB0ZW1wbGF0ZUlkOiBpbnB1dC50ZW1wbGF0ZUlkIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gb2ZmZXJcbiAgICB9KSxcblxuICB1cGRhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQob2ZmZXJVcGRhdGVTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQub2ZmZXJJZCB9LFxuICAgICAgICBpbmNsdWRlOiB7IHRlbXBsYXRlOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIW9mZmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoWydTSUdORUQnLCAnREVDTElORUQnLCAnRVhQSVJFRCcsICdDQU5DRUxMRUQnXS5pbmNsdWRlcyhvZmZlci5zdGF0dXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnU2lnbmVkIG9yIGNsb3NlZCBvZmZlcnMgY2Fubm90IGJlIGVkaXRlZCcgfSlcbiAgICAgIH1cblxuICAgICAgbGV0IHRlbXBsYXRlOiB0eXBlb2Ygb2ZmZXIudGVtcGxhdGUgfCBudWxsID0gb2ZmZXIudGVtcGxhdGVcblxuICAgICAgaWYgKGlucHV0LnRlbXBsYXRlSWQgJiYgaW5wdXQudGVtcGxhdGVJZCAhPT0gb2ZmZXIudGVtcGxhdGVJZCkge1xuICAgICAgICB0ZW1wbGF0ZSA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGlucHV0LnRlbXBsYXRlSWQgfSB9KVxuICAgICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnVGVtcGxhdGUgbm90IGZvdW5kJyB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGE6IGFueSA9IHt9XG5cbiAgICAgIGlmIChpbnB1dC5jYW5kaWRhdGVOYW1lKSBkYXRhLmNhbmRpZGF0ZU5hbWUgPSBpbnB1dC5jYW5kaWRhdGVOYW1lXG4gICAgICBpZiAoaW5wdXQuY2FuZGlkYXRlRW1haWwpIGRhdGEuY2FuZGlkYXRlRW1haWwgPSBpbnB1dC5jYW5kaWRhdGVFbWFpbFxuICAgICAgaWYgKGlucHV0LnRlbXBsYXRlSWQpIGRhdGEudGVtcGxhdGVJZCA9IGlucHV0LnRlbXBsYXRlSWRcbiAgICAgIGlmIChpbnB1dC52YXJpYWJsZXMpIHtcbiAgICAgICAgZGF0YS52YXJpYWJsZXMgPSBpbnB1dC52YXJpYWJsZXNcbiAgICAgICAgZGF0YS5yZW5kZXJlZEh0bWwgPVxuICAgICAgICAgIHRlbXBsYXRlPy5ib2R5SHRtbCAmJiBpbnB1dC52YXJpYWJsZXNcbiAgICAgICAgICAgID8gcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUuYm9keUh0bWwsIGlucHV0LnZhcmlhYmxlcylcbiAgICAgICAgICAgIDogb2ZmZXIucmVuZGVyZWRIdG1sXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5vZmZlcklkIH0sXG4gICAgICAgIGRhdGEsXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyRXZlbnQuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG9mZmVySWQ6IG9mZmVyLmlkLFxuICAgICAgICAgIHR5cGU6ICd1cGRhdGVkJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ09mZmVyIHVwZGF0ZWQnLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgbG9nT2ZmZXJFdmVudCh7XG4gICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgIGFjdGlvbjogJ09GRkVSX1VQREFURUQnLFxuICAgICAgICBvZmZlcklkOiBvZmZlci5pZCxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB1cGRhdGVkXG4gICAgfSksXG5cbiAgcHJldmlldzogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICB0ZW1wbGF0ZUlkOiB6LnN0cmluZygpLFxuICAgICAgdmFyaWFibGVzOiB6LnJlY29yZCh6LnN0cmluZygpKSxcbiAgICB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJUZW1wbGF0ZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LnRlbXBsYXRlSWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGh0bWw6IHdyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQocmVuZGVyVGVtcGxhdGUodGVtcGxhdGUuYm9keUh0bWwsIGlucHV0LnZhcmlhYmxlcyksIG9yZ2FuaXphdGlvbiwge1xuICAgICAgICAgIGJhc2VVcmw6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgfSksXG5cbiAgc2VuZDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChvZmZlclNlbmRTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQub2ZmZXJJZCB9LFxuICAgICAgICBpbmNsdWRlOiB7IHRlbXBsYXRlOiB0cnVlLCBlbXBsb3llZTogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFvZmZlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgZW5zdXJlU2VuZGFibGVTdGF0dXMob2ZmZXIuc3RhdHVzLCBmYWxzZSlcblxuICAgICAgY29uc3QgZG9jdXNpZ24gPSBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpXG4gICAgICBcbiAgICAgIGlmIChkb2N1c2lnbikge1xuICAgICAgICAvLyBTZW5kIHZpYSBEb2N1U2lnblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gICAgICAgICAgY29uc3QgZG9jdW1lbnRIdG1sID0gd3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZChvZmZlci5yZW5kZXJlZEh0bWwgfHwgJycsIG9yZ2FuaXphdGlvbiwge1xuICAgICAgICAgICAgYmFzZVVybDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkb2N1c2lnbi5zZW5kRW52ZWxvcGUoe1xuICAgICAgICAgICAgc2lnbmVyRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgICAgICAgc2lnbmVyTmFtZTogb2ZmZXIuY2FuZGlkYXRlTmFtZSxcbiAgICAgICAgICAgIHN1YmplY3Q6IGBPZmZlciBmcm9tICR7b3JnYW5pemF0aW9uLm5hbWV9IC0gJHtvZmZlci5jYW5kaWRhdGVOYW1lfWAsXG4gICAgICAgICAgICBkb2N1bWVudEh0bWwsXG4gICAgICAgICAgICBjYWxsYmFja1VybDogYCR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9hcGkvd2ViaG9va3MvZG9jdXNpZ25gLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBpZDogb2ZmZXIuaWQgfSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAnU0VOVCcsXG4gICAgICAgICAgICAgIGVzaWduRW52ZWxvcGVJZDogcmVzdWx0LmVudmVsb3BlSWQsXG4gICAgICAgICAgICAgIGVzaWduUHJvdmlkZXI6ICdkb2N1c2lnbicsXG4gICAgICAgICAgICAgIGVzaWduU3RhdHVzOiByZXN1bHQuc3RhdHVzLFxuICAgICAgICAgICAgICBlc2lnblNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgc2VudEJ5OiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIHNlbmQgdmlhIERvY3VTaWduOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2s6IFNlbmQgbGluayB2aWEgZW1haWxcbiAgICAgICAgY29uc3Qgb2ZmZXJMaW5rID0gYCR7cHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMfS9vZmZlci8ke29mZmVyLmlkfS9zaWduYFxuICAgICAgICBcbiAgICAgICAgYXdhaXQgc2VuZE9mZmVyRW1haWwoe1xuICAgICAgICAgIGNhbmRpZGF0ZUVtYWlsOiBvZmZlci5jYW5kaWRhdGVFbWFpbCxcbiAgICAgICAgICBjYW5kaWRhdGVOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICAgIG9mZmVyTGluayxcbiAgICAgICAgICBjb21wYW55TmFtZTogKGF3YWl0IGdldE9yZ2FuaXphdGlvbigpKS5uYW1lLFxuICAgICAgICB9KVxuXG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogb2ZmZXIuaWQgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzdGF0dXM6ICdTRU5UJyxcbiAgICAgICAgICAgIGVzaWduUHJvdmlkZXI6ICdpbnRlcm5hbCcsXG4gICAgICAgICAgICBlc2lnblN0YXR1czogJ3NlbnQnLFxuICAgICAgICAgICAgZXNpZ25TZW50QXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBzZW50Qnk6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGVtcGxveWVlIHN0YXR1c1xuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogb2ZmZXIuZW1wbG95ZWVJZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkVSX1NFTlQnIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBDcmVhdGUgZXZlbnRcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb2ZmZXJJZDogb2ZmZXIuaWQsXG4gICAgICAgICAgdHlwZTogJ3NlbnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT2ZmZXIgc2VudCB0byBjYW5kaWRhdGUnLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgbG9nT2ZmZXJFdmVudCh7XG4gICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgIGFjdGlvbjogJ09GRkVSX1NFTlQnLFxuICAgICAgICBvZmZlcklkOiBvZmZlci5pZCxcbiAgICAgICAgbWV0YWRhdGE6IHsgY2FuZGlkYXRlRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgICB9KSxcblxuICByZXNlbmQ6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQob2ZmZXJTZW5kU2NoZW1hKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0Lm9mZmVySWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyB0ZW1wbGF0ZTogdHJ1ZSwgZW1wbG95ZWU6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGVuc3VyZVNlbmRhYmxlU3RhdHVzKG9mZmVyLnN0YXR1cywgdHJ1ZSlcblxuICAgICAgY29uc3QgZG9jdXNpZ24gPSBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpXG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBnZXRPcmdhbml6YXRpb24oKVxuICAgICAgXG4gICAgICBpZiAoZG9jdXNpZ24pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkb2N1bWVudEh0bWwgPSB3cmFwQWdyZWVtZW50SHRtbFdpdGhMZXR0ZXJoZWFkKG9mZmVyLnJlbmRlcmVkSHRtbCB8fCAnJywgb3JnYW5pemF0aW9uLCB7XG4gICAgICAgICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRvY3VzaWduLnNlbmRFbnZlbG9wZSh7XG4gICAgICAgICAgICBzaWduZXJFbWFpbDogb2ZmZXIuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgICAgICBzaWduZXJOYW1lOiBvZmZlci5jYW5kaWRhdGVOYW1lLFxuICAgICAgICAgICAgc3ViamVjdDogYE9mZmVyIGZyb20gJHtvcmdhbml6YXRpb24ubmFtZX0gLSAke29mZmVyLmNhbmRpZGF0ZU5hbWV9YCxcbiAgICAgICAgICAgIGRvY3VtZW50SHRtbCxcbiAgICAgICAgICAgIGNhbGxiYWNrVXJsOiBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L2FwaS93ZWJob29rcy9kb2N1c2lnbmAsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXIudXBkYXRlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBvZmZlci5pZCB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzdGF0dXM6ICdTRU5UJyxcbiAgICAgICAgICAgICAgZXNpZ25FbnZlbG9wZUlkOiByZXN1bHQuZW52ZWxvcGVJZCxcbiAgICAgICAgICAgICAgZXNpZ25Qcm92aWRlcjogJ2RvY3VzaWduJyxcbiAgICAgICAgICAgICAgZXNpZ25TdGF0dXM6IHJlc3VsdC5zdGF0dXMsXG4gICAgICAgICAgICAgIGVzaWduU2VudEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBzZW50Qnk6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gc2VuZCB2aWEgRG9jdVNpZ246ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvZmZlckxpbmsgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L29mZmVyLyR7b2ZmZXIuaWR9L3NpZ25gXG4gICAgICAgIFxuICAgICAgICBhd2FpdCBzZW5kT2ZmZXJFbWFpbCh7XG4gICAgICAgICAgY2FuZGlkYXRlRW1haWw6IG9mZmVyLmNhbmRpZGF0ZUVtYWlsLFxuICAgICAgICAgIGNhbmRpZGF0ZU5hbWU6IG9mZmVyLmNhbmRpZGF0ZU5hbWUsXG4gICAgICAgICAgb2ZmZXJMaW5rLFxuICAgICAgICAgIGNvbXBhbnlOYW1lOiBvcmdhbml6YXRpb24ubmFtZSxcbiAgICAgICAgICBsb2dvVXJsOiBvcmdhbml6YXRpb24ubG9nb1VybCB8fCB1bmRlZmluZWQsXG4gICAgICAgIH0pXG5cbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZlci51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBvZmZlci5pZCB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN0YXR1czogJ1NFTlQnLFxuICAgICAgICAgICAgZXNpZ25Qcm92aWRlcjogJ2ludGVybmFsJyxcbiAgICAgICAgICAgIGVzaWduU3RhdHVzOiAnc2VudCcsXG4gICAgICAgICAgICBlc2lnblNlbnRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHNlbnRCeTogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAob2ZmZXIuZW1wbG95ZWVJZCkge1xuICAgICAgICBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IG9mZmVyLmVtcGxveWVlSWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkVSX1NFTlQnIH0sXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb2ZmZXJJZDogb2ZmZXIuaWQsXG4gICAgICAgICAgdHlwZTogJ3NlbnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT2ZmZXIgcmVzZW50IHRvIGNhbmRpZGF0ZScsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBsb2dPZmZlckV2ZW50KHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnT0ZGRVJfU0VOVCcsXG4gICAgICAgIG9mZmVySWQ6IG9mZmVyLmlkLFxuICAgICAgICBtZXRhZGF0YTogeyBjYW5kaWRhdGVFbWFpbDogb2ZmZXIuY2FuZGlkYXRlRW1haWwsIHJlc2VuZDogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgZ2V0U2lnbmluZ1VybDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0OiBvZmZlcklkIH0pID0+IHtcbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG9mZmVySWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIgfHwgIW9mZmVyLmVzaWduRW52ZWxvcGVJZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZG9jdXNpZ24gPSBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpXG4gICAgICBpZiAoIWRvY3VzaWduKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJywgbWVzc2FnZTogJ0RvY3VTaWduIG5vdCBjb25maWd1cmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXR1cm5VcmwgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L29mZmVycy8ke29mZmVySWR9P3NpZ25lZD1jb21wbGV0ZWBcbiAgICAgIFxuICAgICAgY29uc3Qgc2lnbmluZ1VybCA9IGF3YWl0IGRvY3VzaWduLmdldFNpZ25pbmdVcmwoXG4gICAgICAgIG9mZmVyLmVzaWduRW52ZWxvcGVJZCxcbiAgICAgICAgb2ZmZXIuY2FuZGlkYXRlRW1haWwsXG4gICAgICAgIG9mZmVyLmNhbmRpZGF0ZU5hbWUsXG4gICAgICAgIHJldHVyblVybFxuICAgICAgKVxuXG4gICAgICByZXR1cm4geyB1cmw6IHNpZ25pbmdVcmwgfVxuICAgIH0pLFxuXG4gIGNhbmNlbDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0OiBvZmZlcklkIH0pID0+IHtcbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IG9mZmVySWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChvZmZlci5zdGF0dXMgPT09ICdTSUdORUQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQ2Fubm90IGNhbmNlbCBzaWduZWQgb2ZmZXJzJyB9KVxuICAgICAgfVxuXG4gICAgICAvLyBWb2lkIGluIERvY3VTaWduIGlmIGFwcGxpY2FibGVcbiAgICAgIGlmIChvZmZlci5lc2lnbkVudmVsb3BlSWQpIHtcbiAgICAgICAgY29uc3QgZG9jdXNpZ24gPSBjcmVhdGVEb2N1U2lnbkNvbm5lY3RvcigpXG4gICAgICAgIGlmIChkb2N1c2lnbikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkb2N1c2lnbi52b2lkRW52ZWxvcGUob2ZmZXIuZXNpZ25FbnZlbG9wZUlkLCAnQ2FuY2VsbGVkIGJ5IEhSJylcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gdm9pZCBEb2N1U2lnbiBlbnZlbG9wZTonLCBlcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZlci51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogb2ZmZXJJZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ0NBTkNFTExFRCcgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb2ZmZXJJZCxcbiAgICAgICAgICB0eXBlOiAnY2FuY2VsbGVkJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ09mZmVyIGNhbmNlbGxlZCcsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBsb2dPZmZlckV2ZW50KHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnT0ZGRVJfQ0FOQ0VMTEVEJyxcbiAgICAgICAgb2ZmZXJJZCxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIC8vIFB1YmxpYyBlbmRwb2ludCBmb3IgY2FuZGlkYXRlcyB0byB2aWV3IHRoZWlyIG9mZmVyXG4gIGdldFB1YmxpY09mZmVyOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgb2ZmZXJJZDogei5zdHJpbmcoKSxcbiAgICAgIHRva2VuOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIEZvciBhZGRpdGlvbmFsIHNlY3VyaXR5XG4gICAgfSkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBjdHgucHJpc21hLm9mZmVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQub2ZmZXJJZCB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBjYW5kaWRhdGVOYW1lOiB0cnVlLFxuICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICByZW5kZXJlZEh0bWw6IHRydWUsXG4gICAgICAgICAgZXNpZ25TaWduZWRBdDogdHJ1ZSxcbiAgICAgICAgICB2YXJpYWJsZXM6IHRydWUsXG4gICAgICAgICAgdGVtcGxhdGU6IHsgc2VsZWN0OiB7IG5hbWU6IHRydWUsIGJvZHlIdG1sOiB0cnVlIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGdldE9yZ2FuaXphdGlvbigpXG4gICAgICBjb25zdCB2YXJpYWJsZXMgPSAob2ZmZXIudmFyaWFibGVzIHx8IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgICBjb25zdCByZW5kZXJlZEh0bWwgPVxuICAgICAgICBvZmZlci5yZW5kZXJlZEh0bWwgfHxcbiAgICAgICAgKG9mZmVyLnRlbXBsYXRlPy5ib2R5SHRtbCA/IHJlbmRlclRlbXBsYXRlKG9mZmVyLnRlbXBsYXRlLmJvZHlIdG1sLCB2YXJpYWJsZXMpIDogJycpXG4gICAgICBjb25zdCB3cmFwcGVkSHRtbCA9IHdyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQocmVuZGVyZWRIdG1sLCBvcmdhbml6YXRpb24sIHtcbiAgICAgICAgYmFzZVVybDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMLFxuICAgICAgfSlcblxuICAgICAgLy8gTWFyayBhcyB2aWV3ZWQgaWYgbm90IGFscmVhZHlcbiAgICAgIGlmIChvZmZlci5zdGF0dXMgPT09ICdTRU5UJykge1xuICAgICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0Lm9mZmVySWQgfSxcbiAgICAgICAgICBkYXRhOiB7IFxuICAgICAgICAgICAgc3RhdHVzOiAnVklFV0VEJyxcbiAgICAgICAgICAgIGVzaWduVmlld2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBhd2FpdCBjdHgucHJpc21hLm9mZmVyRXZlbnQuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBvZmZlcklkOiBpbnB1dC5vZmZlcklkLFxuICAgICAgICAgICAgdHlwZTogJ3ZpZXdlZCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09mZmVyIHZpZXdlZCBieSBjYW5kaWRhdGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgYXdhaXQgbG9nT2ZmZXJFdmVudCh7XG4gICAgICAgICAgYWN0aW9uOiAnT0ZGRVJfVklFV0VEJyxcbiAgICAgICAgICBvZmZlcklkOiBpbnB1dC5vZmZlcklkLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogb2ZmZXIuaWQsXG4gICAgICAgIGNhbmRpZGF0ZU5hbWU6IG9mZmVyLmNhbmRpZGF0ZU5hbWUsXG4gICAgICAgIHN0YXR1czogb2ZmZXIuc3RhdHVzLFxuICAgICAgICBlc2lnblNpZ25lZEF0OiBvZmZlci5lc2lnblNpZ25lZEF0LFxuICAgICAgICByZW5kZXJlZEh0bWw6IHdyYXBwZWRIdG1sLFxuICAgICAgICB0ZW1wbGF0ZTogeyBuYW1lOiBvZmZlci50ZW1wbGF0ZS5uYW1lIH0sXG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gRW5kcG9pbnQgZm9yIG1hbnVhbCBzaWduaW5nICh3aGVuIERvY3VTaWduIGlzIG5vdCBhdmFpbGFibGUpXG4gIG1hbnVhbFNpZ246IHB1YmxpY1Byb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBvZmZlcklkOiB6LnN0cmluZygpLFxuICAgICAgc2lnbmF0dXJlOiB6LnN0cmluZygpLCAvLyB0eXBlZCBuYW1lIChyZXF1aXJlZClcbiAgICAgIHNpZ25hdHVyZUltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIG9wdGlvbmFsIGJhc2U2NCBpbWFnZVxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgY3R4LnByaXNtYS5vZmZlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0Lm9mZmVySWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghb2ZmZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChvZmZlci5zdGF0dXMgIT09ICdTRU5UJyAmJiBvZmZlci5zdGF0dXMgIT09ICdWSUVXRUQnKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnT2ZmZXIgY2Fubm90IGJlIHNpZ25lZCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgICAgIGNvbnN0IHZhcnMgPSAob2ZmZXIudmFyaWFibGVzIHx8IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgICBjb25zdCBzaWduYXR1cmVCbG9ja0lkID0gdmFycy5zaWduYXR1cmVfYmxvY2tfaWRcbiAgICAgIGNvbnN0IHNpZ25hdHVyZUJsb2NrID0gc2lnbmF0dXJlQmxvY2tJZFxuICAgICAgICA/IGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBzaWduYXR1cmVCbG9ja0lkIH0gfSlcbiAgICAgICAgOiBudWxsXG5cbiAgICAgIGNvbnN0IHNpZ25lZEF0ID0gbmV3IERhdGUoKVxuXG4gICAgICBjb25zdCBzaWduYXR1cmVCb3hTdHlsZSA9XG4gICAgICAgICdib3JkZXI6MXB4IHNvbGlkICNlNWU3ZWI7IHBhZGRpbmc6NnB4OyBiYWNrZ3JvdW5kOndoaXRlOyB3aWR0aDoyODBweDsgaGVpZ2h0Ojk2cHg7IG92ZXJmbG93OmhpZGRlbjsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7J1xuICAgICAgY29uc3Qgc2lnbmF0dXJlSW1nU3R5bGUgPSAnbWF4LXdpZHRoOjEwMCU7IG1heC1oZWlnaHQ6MTAwJTsgd2lkdGg6YXV0bzsgaGVpZ2h0OmF1dG87IG9iamVjdC1maXQ6Y29udGFpbjsgZGlzcGxheTpibG9jazsnXG5cbiAgICAgIGNvbnN0IHNpZ25hdHVyZUJsb2NrSHRtbCA9IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MzJweDtcIj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo4cHg7XCI+XG4gICAgICAgICAgICAke1xuICAgICAgICAgICAgICBzaWduYXR1cmVCbG9jaz8uc2lnbmF0dXJlSW1hZ2VVcmxcbiAgICAgICAgICAgICAgICA/IGA8ZGl2IHN0eWxlPVwiJHtzaWduYXR1cmVCb3hTdHlsZX1cIj48aW1nIHNyYz1cIiR7c2lnbmF0dXJlQmxvY2suc2lnbmF0dXJlSW1hZ2VVcmx9XCIgYWx0PVwiQ29tcGFueSBzaWduYXR1cmVcIiBzdHlsZT1cIiR7c2lnbmF0dXJlSW1nU3R5bGV9XCIgLz48L2Rpdj5gXG4gICAgICAgICAgICAgICAgOiBzaWduYXR1cmVCbG9jaz8uc2lnbmF0dXJlVGV4dFxuICAgICAgICAgICAgICAgICAgPyBgPGRpdiBzdHlsZT1cIiR7c2lnbmF0dXJlQm94U3R5bGV9XCI+PHAgc3R5bGU9XCJtYXJnaW46MDsgY29sb3I6IzExMTgyNzsgZm9udC1zaXplOjE2cHg7XCI+JHtzaWduYXR1cmVCbG9jay5zaWduYXR1cmVUZXh0fTwvcD48L2Rpdj5gXG4gICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjowOyBmb250LXdlaWdodDo3MDA7IGNvbG9yOiMxMTE4Mjc7XCI+JHtzaWduYXR1cmVCbG9jaz8uc2lnbmF0b3J5TmFtZSB8fCBvcmdhbml6YXRpb24ubmFtZX08L3A+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOjA7IGNvbG9yOiM0YjU1NjM7XCI+JHtzaWduYXR1cmVCbG9jaz8uc2lnbmF0b3J5VGl0bGUgfHwgJyd9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYFxuXG4gICAgICBjb25zdCB3cmFwcGVkT2ZmZXJIdG1sID0gd3JhcEFncmVlbWVudEh0bWxXaXRoTGV0dGVyaGVhZChvZmZlci5yZW5kZXJlZEh0bWwgfHwgJycsIG9yZ2FuaXphdGlvbiwge1xuICAgICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwsXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBzaWduaW5nRGV0YWlsc0h0bWwgPSBgXG4gICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjoyNHB4IDA7IGJvcmRlcjowOyBib3JkZXItdG9wOjFweCBzb2xpZCAjZTVlN2ViO1wiIC8+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OmZsZXg7IGdhcDozMnB4OyBmbGV4LXdyYXA6d3JhcDtcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46MDsgZm9udC13ZWlnaHQ6NjAwOyBjb2xvcjojMTExODI3O1wiPkNhbmRpZGF0ZSBzaWduYXR1cmU8L3A+XG4gICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjo0cHggMDsgY29sb3I6IzExMTgyNztcIj4ke2lucHV0LnNpZ25hdHVyZX08L3A+XG4gICAgICAgICAgICAke1xuICAgICAgICAgICAgICBpbnB1dC5zaWduYXR1cmVJbWFnZVxuICAgICAgICAgICAgICAgID8gYDxkaXYgc3R5bGU9XCIke3NpZ25hdHVyZUJveFN0eWxlfVwiPjxpbWcgc3JjPVwiJHtpbnB1dC5zaWduYXR1cmVJbWFnZX1cIiBhbHQ9XCJTaWduYXR1cmVcIiBzdHlsZT1cIiR7c2lnbmF0dXJlSW1nU3R5bGV9XCIgLz48L2Rpdj5gXG4gICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46OHB4IDAgMDsgY29sb3I6IzRiNTU2MzsgZm9udC1zaXplOjEycHg7XCI+U2lnbmVkIGF0OiAke3NpZ25lZEF0LnRvSVNPU3RyaW5nKCl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjowOyBmb250LXdlaWdodDo2MDA7IGNvbG9yOiMxMTE4Mjc7XCI+Q29tcGFueTwvcD5cbiAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOjRweCAwOyBjb2xvcjojMTExODI3O1wiPiR7b3JnYW5pemF0aW9uLm5hbWV9PC9wPlxuICAgICAgICAgICAgJHtzaWduYXR1cmVCbG9jayA/IGA8cCBzdHlsZT1cIm1hcmdpbjowOyBjb2xvcjojMTExODI3O1wiPiR7c2lnbmF0dXJlQmxvY2suc2lnbmF0b3J5TmFtZX08L3A+YCA6ICcnfVxuICAgICAgICAgICAgJHtzaWduYXR1cmVCbG9jayA/IGA8cCBzdHlsZT1cIm1hcmdpbjowOyBjb2xvcjojNGI1NTYzO1wiPiR7c2lnbmF0dXJlQmxvY2suc2lnbmF0b3J5VGl0bGV9PC9wPmAgOiAnJ31cbiAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOjA7IGNvbG9yOiM0YjU1NjM7IGZvbnQtc2l6ZToxMnB4O1wiPlNpZ25lZCBhdDogJHtzaWduZWRBdC50b0lTT1N0cmluZygpfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgICR7c2lnbmF0dXJlQmxvY2tIdG1sfVxuICAgICAgYFxuXG4gICAgICBjb25zdCBzaWduZWRIdG1sID0gYFxuICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmOyBjb2xvcjogIzFmMjkzNztcIj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgI2U1ZTdlYjsgYm9yZGVyLXJhZGl1czogMTJweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYmFja2dyb3VuZDp3aGl0ZTtcIj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiNmOWZhZmI7IHBhZGRpbmc6MTZweCAyMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTVlN2ViO1wiPlxuICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJtYXJnaW46MDsgZm9udC1zaXplOjE4cHg7IGNvbG9yOiMxMTE4Mjc7XCI+U2lnbmVkIE9mZmVyPC9oMj5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46NHB4IDAgMDsgY29sb3I6IzRiNTU2MztcIj4ke29yZ2FuaXphdGlvbi5uYW1lfTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6MjBweDtcIj5cbiAgICAgICAgICAgICAgJHt3cmFwcGVkT2ZmZXJIdG1sfVxuICAgICAgICAgICAgICAke3NpZ25pbmdEZXRhaWxzSHRtbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGBcblxuICAgICAgY29uc3Qgc2lnbmVkUGRmID0gYXdhaXQgcmVuZGVySHRtbFRvUGRmQnVmZmVyKHNpZ25lZEh0bWwpXG4gICAgICBjb25zdCBzaWduZWREb2NVcmwgPSBgZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LCR7c2lnbmVkUGRmLnRvU3RyaW5nKCdiYXNlNjQnKX1gXG5cbiAgICAgIC8vIFVwZGF0ZSBvZmZlclxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vZmZlci51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQub2ZmZXJJZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgc3RhdHVzOiAnU0lHTkVEJyxcbiAgICAgICAgICBlc2lnblByb3ZpZGVyOiBvZmZlci5lc2lnblByb3ZpZGVyIHx8ICdpbnRlcm5hbCcsXG4gICAgICAgICAgZXNpZ25TdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICAgIGVzaWduU2lnbmVkQXQ6IHNpZ25lZEF0LFxuICAgICAgICAgIHNpZ25lZERvY1VybCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFVwZGF0ZSBlbXBsb3llZVxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogb2ZmZXIuZW1wbG95ZWVJZCB9LFxuICAgICAgICBkYXRhOiB7IHN0YXR1czogJ09GRkVSX1NJR05FRCcgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub2ZmZXJFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgb2ZmZXJJZDogaW5wdXQub2ZmZXJJZCxcbiAgICAgICAgICB0eXBlOiAnc2lnbmVkJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ09mZmVyIHNpZ25lZCBieSBjYW5kaWRhdGUnLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBzaWduYXR1cmU6IGlucHV0LnNpZ25hdHVyZSxcbiAgICAgICAgICAgIHNpZ25hdHVyZUltYWdlOiBpbnB1dC5zaWduYXR1cmVJbWFnZSxcbiAgICAgICAgICAgIG1ldGhvZDogJ2ludGVybmFsJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgbG9nT2ZmZXJFdmVudCh7XG4gICAgICAgIGFjdGlvbjogJ09GRkVSX1NJR05FRCcsXG4gICAgICAgIG9mZmVySWQ6IGlucHV0Lm9mZmVySWQsXG4gICAgICAgIG1ldGFkYXRhOiB7IG1ldGhvZDogJ21hbnVhbCcsIHNpZ25hdHVyZTogaW5wdXQuc2lnbmF0dXJlLCBzaWduYXR1cmVJbWFnZTogaW5wdXQuc2lnbmF0dXJlSW1hZ2UgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIEVtYWlsIHNpZ25lZCBjb3B5XG4gICAgICBhd2FpdCBzZW5kU2lnbmVkT2ZmZXJFbWFpbCh7XG4gICAgICAgIHRvOiBvZmZlci5jYW5kaWRhdGVFbWFpbCxcbiAgICAgICAgY2FuZGlkYXRlTmFtZTogb2ZmZXIuY2FuZGlkYXRlTmFtZSxcbiAgICAgICAgY29tcGFueU5hbWU6IG9yZ2FuaXphdGlvbi5uYW1lLFxuICAgICAgICBzaWduZWRIdG1sLFxuICAgICAgICBzaWduZWRQZGYsXG4gICAgICAgIHNpZ25lZEZpbGVOYW1lOiBgc2lnbmVkLW9mZmVyLSR7b2ZmZXIuY2FuZGlkYXRlTmFtZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKSB8fCAnY2FuZGlkYXRlJ30ucGRmYCxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxufSlcbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiaHJBZG1pblByb2NlZHVyZSIsInB1YmxpY1Byb2NlZHVyZSIsIlRSUENFcnJvciIsInJlbmRlclRlbXBsYXRlIiwibG9nT2ZmZXJFdmVudCIsInNlbmRPZmZlckVtYWlsIiwic2VuZFNpZ25lZE9mZmVyRW1haWwiLCJjcmVhdGVEb2N1U2lnbkNvbm5lY3RvciIsImdldE9yZ2FuaXphdGlvbiIsInJlbmRlckh0bWxUb1BkZkJ1ZmZlciIsIndyYXBBZ3JlZW1lbnRIdG1sV2l0aExldHRlcmhlYWQiLCJvZmZlckNyZWF0ZVNjaGVtYSIsIm9iamVjdCIsImVtcGxveWVlSWQiLCJzdHJpbmciLCJvcHRpb25hbCIsImNhbmRpZGF0ZUVtYWlsIiwiZW1haWwiLCJjYW5kaWRhdGVOYW1lIiwibWluIiwidGVtcGxhdGVJZCIsInZhcmlhYmxlcyIsInJlY29yZCIsIm9mZmVyU2VuZFNjaGVtYSIsIm9mZmVySWQiLCJvZmZlclVwZGF0ZVNjaGVtYSIsIkFMTE9XRURfUkVTRU5EX1NUQVRVU0VTIiwiZW5zdXJlU2VuZGFibGVTdGF0dXMiLCJzdGF0dXMiLCJhbGxvd1Jlc2VuZCIsImluY2x1ZGVzIiwiY29kZSIsIm1lc3NhZ2UiLCJvZmZlclJvdXRlciIsImxpc3QiLCJpbnB1dCIsInNlYXJjaCIsInBhZ2UiLCJudW1iZXIiLCJkZWZhdWx0IiwibGltaXQiLCJxdWVyeSIsImN0eCIsIndoZXJlIiwiT1IiLCJjb250YWlucyIsIm1vZGUiLCJvZmZlcnMiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJwcmlzbWEiLCJvZmZlciIsImZpbmRNYW55IiwiaW5jbHVkZSIsInRlbXBsYXRlIiwic2VsZWN0IiwiaWQiLCJuYW1lIiwiZW1wbG95ZWUiLCJmdWxsTmFtZSIsImV2ZW50cyIsIm9yZGVyQnkiLCJvY2N1cnJlZEF0IiwidGFrZSIsImNyZWF0ZWRBdCIsInNraXAiLCJjb3VudCIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJnZXRCeUlkIiwiZmluZFVuaXF1ZSIsInJlbmRlcmVkSHRtbCIsImJvZHlIdG1sIiwib3JnYW5pemF0aW9uIiwid3JhcHBlZEh0bWwiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1VSTCIsImNyZWF0ZSIsIm11dGF0aW9uIiwib2ZmZXJUZW1wbGF0ZSIsImV4aXN0aW5nRW1wbG95ZWUiLCJwZXJzb25hbEVtYWlsIiwibmV3RW1wbG95ZWUiLCJkYXRhIiwiam9iVGl0bGUiLCJyb2xlIiwiam9iX3RpdGxlIiwiZGVwYXJ0bWVudCIsInNhbGFyeUFtb3VudCIsInNhbGFyeSIsInBhcnNlRmxvYXQiLCJ1bmRlZmluZWQiLCJzYWxhcnlDdXJyZW5jeSIsImN1cnJlbmN5Iiwic3RhcnREYXRlIiwic3RhcnRfZGF0ZSIsIkRhdGUiLCJsb2NhdGlvbiIsIm9mZmVyRXZlbnQiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJhY3RvcklkIiwidXNlciIsImFjdGlvbiIsIm1ldGFkYXRhIiwidXBkYXRlIiwidXBkYXRlZCIsInByZXZpZXciLCJodG1sIiwic2VuZCIsImRvY3VzaWduIiwiZG9jdW1lbnRIdG1sIiwicmVzdWx0Iiwic2VuZEVudmVsb3BlIiwic2lnbmVyRW1haWwiLCJzaWduZXJOYW1lIiwic3ViamVjdCIsImNhbGxiYWNrVXJsIiwiZXNpZ25FbnZlbG9wZUlkIiwiZW52ZWxvcGVJZCIsImVzaWduUHJvdmlkZXIiLCJlc2lnblN0YXR1cyIsImVzaWduU2VudEF0Iiwic2VudEJ5IiwiZXJyb3IiLCJFcnJvciIsIm9mZmVyTGluayIsImNvbXBhbnlOYW1lIiwic3VjY2VzcyIsInJlc2VuZCIsImxvZ29VcmwiLCJnZXRTaWduaW5nVXJsIiwicmV0dXJuVXJsIiwic2lnbmluZ1VybCIsInVybCIsImNhbmNlbCIsInZvaWRFbnZlbG9wZSIsImNvbnNvbGUiLCJ3YXJuIiwiZ2V0UHVibGljT2ZmZXIiLCJ0b2tlbiIsImVzaWduU2lnbmVkQXQiLCJlc2lnblZpZXdlZEF0IiwibWFudWFsU2lnbiIsInNpZ25hdHVyZSIsInNpZ25hdHVyZUltYWdlIiwidmFycyIsInNpZ25hdHVyZUJsb2NrSWQiLCJzaWduYXR1cmVfYmxvY2tfaWQiLCJzaWduYXR1cmVCbG9jayIsInNpZ25lZEF0Iiwic2lnbmF0dXJlQm94U3R5bGUiLCJzaWduYXR1cmVJbWdTdHlsZSIsInNpZ25hdHVyZUJsb2NrSHRtbCIsInNpZ25hdHVyZUltYWdlVXJsIiwic2lnbmF0dXJlVGV4dCIsInNpZ25hdG9yeU5hbWUiLCJzaWduYXRvcnlUaXRsZSIsIndyYXBwZWRPZmZlckh0bWwiLCJzaWduaW5nRGV0YWlsc0h0bWwiLCJ0b0lTT1N0cmluZyIsInNpZ25lZEh0bWwiLCJzaWduZWRQZGYiLCJzaWduZWREb2NVcmwiLCJ0b1N0cmluZyIsIm1ldGhvZCIsInRvIiwic2lnbmVkRmlsZU5hbWUiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/offer.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/onboarding.ts":
/*!******************************************!*\
  !*** ./src/server/routers/onboarding.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onboardingRouter: () => (/* binding */ onboardingRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_audit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/audit */ \"(rsc)/./src/lib/audit.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_integrations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/integrations */ \"(rsc)/./src/lib/integrations/index.ts\");\n/* harmony import */ var _lib_integrations_provisioning_rules__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/integrations/provisioning-rules */ \"(rsc)/./src/lib/integrations/provisioning-rules.ts\");\n/* harmony import */ var _lib_organization__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/organization */ \"(rsc)/./src/lib/organization.ts\");\n/* harmony import */ var _lib_google_sheets__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/google-sheets */ \"(rsc)/./src/lib/google-sheets.ts\");\n/* harmony import */ var _lib_onboarding_tasks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/onboarding-tasks */ \"(rsc)/./src/lib/onboarding-tasks.ts\");\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_ONBOARDING_TASKS = [\n    // Automated tasks\n    {\n        name: \"Provision Google Workspace account\",\n        type: \"AUTOMATED\",\n        automationType: \"provision_google\",\n        sortOrder: 1\n    },\n    {\n        name: \"Provision Slack account\",\n        type: \"AUTOMATED\",\n        automationType: \"provision_slack\",\n        sortOrder: 2\n    },\n    // Manual tasks\n    {\n        name: \"Confirm laptop/hardware has been ordered\",\n        type: \"MANUAL\",\n        sortOrder: 3\n    },\n    {\n        name: \"Add to stand-up app\",\n        type: \"MANUAL\",\n        sortOrder: 4\n    },\n    {\n        name: \"Schedule orientation meeting\",\n        type: \"MANUAL\",\n        sortOrder: 5\n    },\n    {\n        name: \"Add to team calendar\",\n        type: \"MANUAL\",\n        sortOrder: 6\n    }\n];\nconst GENERIC_PROVISION_AUTOMATION = \"provision_app\";\nfunction appTypeToAutomationType(appType) {\n    switch(appType){\n        case \"GOOGLE_WORKSPACE\":\n            return \"provision_google\";\n        case \"SLACK\":\n            return \"provision_slack\";\n        default:\n            return GENERIC_PROVISION_AUTOMATION;\n    }\n}\nasync function resolveIntegrationApp(prisma, appType) {\n    const app = await prisma.app.findFirst({\n        where: {\n            type: appType\n        }\n    });\n    if (!app) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n            code: \"BAD_REQUEST\",\n            message: `Unknown integration app: ${appType}`\n        });\n    }\n    return app;\n}\nasync function ensureDefaultOnboardingTemplates(prisma) {\n    const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n    const existingCount = await prisma.onboardingTaskTemplate.count({\n        where: {\n            organizationId: organization.id\n        }\n    });\n    if (existingCount > 0) return organization;\n    await prisma.onboardingTaskTemplate.createMany({\n        data: DEFAULT_ONBOARDING_TASKS.map((task)=>({\n                organizationId: organization.id,\n                name: task.name,\n                description: null,\n                type: task.type,\n                automationType: task.automationType ?? null,\n                appType: task.automationType === \"provision_google\" ? \"GOOGLE_WORKSPACE\" : task.automationType === \"provision_slack\" ? \"SLACK\" : null,\n                sortOrder: task.sortOrder,\n                isActive: true\n            }))\n    });\n    return organization;\n}\nasync function getDefaultOnboardingTasks(prisma, employee) {\n    const organization = await ensureDefaultOnboardingTemplates(prisma);\n    const templates = await prisma.onboardingTaskTemplate.findMany({\n        where: {\n            organizationId: organization.id,\n            isActive: true\n        },\n        orderBy: {\n            sortOrder: \"asc\"\n        }\n    });\n    const tasks = [];\n    let order = 1;\n    const handledAppIds = new Set();\n    for (const t of templates){\n        if (t.type === \"MANUAL\") {\n            tasks.push({\n                name: t.name,\n                type: t.type,\n                automationType: t.automationType ?? undefined,\n                automationConfig: t.appId ? {\n                    appId: t.appId,\n                    appType: t.appType ?? undefined\n                } : t.appType ? {\n                    appType: t.appType\n                } : undefined,\n                sortOrder: order++\n            });\n            continue;\n        }\n        const app = t.appId ? await prisma.app.findUnique({\n            where: {\n                id: t.appId\n            }\n        }) : t.appType ? await prisma.app.findFirst({\n            where: {\n                type: t.appType\n            }\n        }) : null;\n        if (!app) continue;\n        if (employee) {\n            const rules = await prisma.appProvisioningRule.findMany({\n                where: {\n                    appId: app.id,\n                    isActive: true\n                }\n            });\n            if (!(0,_lib_integrations_provisioning_rules__WEBPACK_IMPORTED_MODULE_4__.hasMatchingProvisioningRule)(employee, rules)) {\n                continue;\n            }\n        }\n        tasks.push({\n            name: t.name,\n            type: t.type,\n            automationType: t.automationType ?? undefined,\n            automationConfig: t.appId ? {\n                appId: t.appId,\n                appType: t.appType ?? undefined\n            } : t.appType ? {\n                appType: t.appType\n            } : undefined,\n            sortOrder: order++\n        });\n        handledAppIds.add(app.id);\n    }\n    if (employee) {\n        const extraTasks = await getProvisioningTasksForEmployee(prisma, employee, tasks);\n        for (const task of extraTasks){\n            if (handledAppIds.has(task.appId)) continue;\n            tasks.push({\n                name: task.name,\n                type: \"AUTOMATED\",\n                automationType: task.automationType,\n                automationConfig: task.automationConfig,\n                sortOrder: order++\n            });\n            handledAppIds.add(task.appId);\n        }\n    }\n    return tasks;\n}\nfunction getAppIdFromTask(task, appByType) {\n    const cfg = task.automationConfig ?? {};\n    const appId = typeof cfg.appId === \"string\" ? cfg.appId : null;\n    if (appId) return appId;\n    const appType = typeof cfg.appType === \"string\" ? cfg.appType : null;\n    if (appType) {\n        const app = appByType.get(appType);\n        return app?.id ?? null;\n    }\n    if (task.automationType === \"provision_google\") {\n        const app = appByType.get(\"GOOGLE_WORKSPACE\");\n        return app?.id ?? null;\n    }\n    if (task.automationType === \"provision_slack\") {\n        const app = appByType.get(\"SLACK\");\n        return app?.id ?? null;\n    }\n    return null;\n}\nasync function getProvisioningTasksForEmployee(prisma, employee, existingTasks) {\n    const appsWithRules = await prisma.app.findMany({\n        where: {\n            archivedAt: null,\n            provisioningRules: {\n                some: {\n                    isActive: true\n                }\n            }\n        },\n        include: {\n            provisioningRules: {\n                where: {\n                    isActive: true\n                }\n            }\n        }\n    });\n    if (appsWithRules.length === 0) return [];\n    const appByType = new Map();\n    for (const app of appsWithRules){\n        appByType.set(app.type, {\n            id: app.id\n        });\n    }\n    const existingAppIds = new Set();\n    for (const task of existingTasks){\n        const appId = getAppIdFromTask(task, appByType);\n        if (appId) existingAppIds.add(appId);\n    }\n    const tasks = [];\n    for (const app of appsWithRules){\n        if (existingAppIds.has(app.id)) continue;\n        if (!(0,_lib_integrations_provisioning_rules__WEBPACK_IMPORTED_MODULE_4__.hasMatchingProvisioningRule)(employee, app.provisioningRules)) {\n            continue;\n        }\n        tasks.push({\n            appId: app.id,\n            name: `Provision ${app.name} access`,\n            automationType: appTypeToAutomationType(app.type),\n            automationConfig: {\n                appId: app.id,\n                appType: app.type\n            }\n        });\n    }\n    return tasks;\n}\nasync function syncProvisioningTasksForWorkflow(prisma, workflow) {\n    if (!workflow?.employee) return workflow;\n    if (workflow.status === \"COMPLETED\") return workflow;\n    const extraTasks = await getProvisioningTasksForEmployee(prisma, workflow.employee, workflow.tasks || []);\n    if (extraTasks.length === 0) return workflow;\n    const maxSortOrder = (workflow.tasks || []).reduce((max, task)=>{\n        return Math.max(max, task.sortOrder || 0);\n    }, 0);\n    await prisma.onboardingTask.createMany({\n        data: extraTasks.map((task, index)=>({\n                workflowId: workflow.id,\n                name: task.name,\n                type: \"AUTOMATED\",\n                status: \"PENDING\",\n                automationType: task.automationType,\n                automationConfig: task.automationConfig,\n                sortOrder: maxSortOrder + index + 1\n            }))\n    });\n    return prisma.onboardingWorkflow.findUnique({\n        where: {\n            id: workflow.id\n        },\n        include: {\n            employee: {\n                include: {\n                    manager: {\n                        select: {\n                            id: true,\n                            fullName: true\n                        }\n                    },\n                    appAccounts: {\n                        include: {\n                            app: true\n                        }\n                    }\n                }\n            },\n            tasks: {\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            }\n        }\n    });\n}\nconst onboardingRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    getTaskTemplates: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        const organization = await ensureDefaultOnboardingTemplates(ctx.prisma);\n        return ctx.prisma.onboardingTaskTemplate.findMany({\n            where: {\n                organizationId: organization.id\n            },\n            orderBy: {\n                sortOrder: \"asc\"\n            }\n        });\n    }),\n    createTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        kind: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n            \"MANUAL\",\n            \"INTEGRATION\"\n        ]),\n        name: zod__WEBPACK_IMPORTED_MODULE_9__.string().min(1),\n        description: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        integrationAppId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        integrationAppType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOnboardingTemplates(ctx.prisma);\n        let app = null;\n        if (input.kind === \"INTEGRATION\") {\n            if (input.integrationAppId) {\n                app = await ctx.prisma.app.findUnique({\n                    where: {\n                        id: input.integrationAppId\n                    }\n                });\n            } else if (input.integrationAppType) {\n                app = await resolveIntegrationApp(ctx.prisma, input.integrationAppType);\n            }\n            if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Select an integration app\"\n            });\n        }\n        const max = await ctx.prisma.onboardingTaskTemplate.aggregate({\n            where: {\n                organizationId: organization.id\n            },\n            _max: {\n                sortOrder: true\n            }\n        });\n        const nextSort = (max._max.sortOrder ?? 0) + 1;\n        return ctx.prisma.onboardingTaskTemplate.create({\n            data: {\n                organizationId: organization.id,\n                name: input.name,\n                description: input.description?.trim() ? input.description.trim() : null,\n                type: input.kind === \"MANUAL\" ? \"MANUAL\" : \"AUTOMATED\",\n                appId: input.kind === \"INTEGRATION\" ? app.id : null,\n                appType: input.kind === \"INTEGRATION\" ? app.type : null,\n                automationType: input.kind === \"INTEGRATION\" ? appTypeToAutomationType(app.type) : null,\n                sortOrder: nextSort,\n                isActive: true\n            }\n        });\n    }),\n    updateTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        kind: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n            \"MANUAL\",\n            \"INTEGRATION\"\n        ]).optional(),\n        integrationAppId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        integrationAppType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        name: zod__WEBPACK_IMPORTED_MODULE_9__.string().min(1).optional(),\n        description: zod__WEBPACK_IMPORTED_MODULE_9__.string().nullable().optional(),\n        isActive: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOnboardingTemplates(ctx.prisma);\n        const template = await ctx.prisma.onboardingTaskTemplate.findUnique({\n            where: {\n                id: input.id\n            }\n        });\n        if (!template || template.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const kindUpdates = {};\n        if (input.kind) {\n            if (input.kind === \"MANUAL\") {\n                kindUpdates.type = \"MANUAL\";\n                kindUpdates.appId = null;\n                kindUpdates.appType = null;\n                kindUpdates.automationType = null;\n            } else {\n                let app = null;\n                if (input.integrationAppId) {\n                    app = await ctx.prisma.app.findUnique({\n                        where: {\n                            id: input.integrationAppId\n                        }\n                    });\n                } else if (input.integrationAppType) {\n                    app = await resolveIntegrationApp(ctx.prisma, input.integrationAppType);\n                }\n                if (!app) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Select an integration app\"\n                });\n                kindUpdates.type = \"AUTOMATED\";\n                kindUpdates.appId = app.id;\n                kindUpdates.appType = app.type;\n                kindUpdates.automationType = appTypeToAutomationType(app.type);\n            }\n        }\n        return ctx.prisma.onboardingTaskTemplate.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                ...kindUpdates,\n                ...input.name ? {\n                    name: input.name\n                } : {},\n                ...input.description !== undefined ? {\n                    description: input.description?.trim() ? input.description.trim() : null\n                } : {},\n                ...input.isActive !== undefined ? {\n                    isActive: input.isActive\n                } : {}\n            }\n        });\n    }),\n    deleteTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.string()).mutation(async ({ ctx, input: id })=>{\n        const organization = await ensureDefaultOnboardingTemplates(ctx.prisma);\n        const template = await ctx.prisma.onboardingTaskTemplate.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!template || template.organizationId !== organization.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.$transaction(async (tx)=>{\n            await tx.onboardingTaskTemplate.delete({\n                where: {\n                    id\n                }\n            });\n            const remaining = await tx.onboardingTaskTemplate.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                },\n                select: {\n                    id: true\n                }\n            });\n            for(let i = 0; i < remaining.length; i++){\n                await tx.onboardingTaskTemplate.update({\n                    where: {\n                        id: remaining[i].id\n                    },\n                    data: {\n                        sortOrder: i + 1\n                    }\n                });\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    moveTaskTemplate: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        direction: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n            \"UP\",\n            \"DOWN\"\n        ])\n    })).mutation(async ({ ctx, input })=>{\n        const organization = await ensureDefaultOnboardingTemplates(ctx.prisma);\n        return ctx.prisma.$transaction(async (tx)=>{\n            const current = await tx.onboardingTaskTemplate.findUnique({\n                where: {\n                    id: input.id\n                }\n            });\n            if (!current || current.organizationId !== organization.id) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"NOT_FOUND\"\n                });\n            }\n            const neighbor = await tx.onboardingTaskTemplate.findFirst({\n                where: {\n                    organizationId: organization.id,\n                    sortOrder: input.direction === \"UP\" ? {\n                        lt: current.sortOrder\n                    } : {\n                        gt: current.sortOrder\n                    }\n                },\n                orderBy: {\n                    sortOrder: input.direction === \"UP\" ? \"desc\" : \"asc\"\n                }\n            });\n            if (!neighbor) return current;\n            await tx.onboardingTaskTemplate.update({\n                where: {\n                    id: current.id\n                },\n                data: {\n                    sortOrder: neighbor.sortOrder\n                }\n            });\n            await tx.onboardingTaskTemplate.update({\n                where: {\n                    id: neighbor.id\n                },\n                data: {\n                    sortOrder: current.sortOrder\n                }\n            });\n            return tx.onboardingTaskTemplate.findMany({\n                where: {\n                    organizationId: organization.id\n                },\n                orderBy: {\n                    sortOrder: \"asc\"\n                }\n            });\n        });\n    }),\n    resetTaskTemplates: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.mutation(async ({ ctx })=>{\n        const organization = await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)();\n        await ctx.prisma.onboardingTaskTemplate.deleteMany({\n            where: {\n                organizationId: organization.id\n            }\n        });\n        await ensureDefaultOnboardingTemplates(ctx.prisma);\n        return {\n            success: true\n        };\n    }),\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        status: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_9__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_9__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { status, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (status) where.status = status;\n        const [workflows, total] = await Promise.all([\n            ctx.prisma.onboardingWorkflow.findMany({\n                where,\n                include: {\n                    employee: {\n                        select: {\n                            id: true,\n                            fullName: true,\n                            jobTitle: true,\n                            department: true,\n                            startDate: true,\n                            status: true\n                        }\n                    },\n                    tasks: {\n                        orderBy: {\n                            sortOrder: \"asc\"\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.onboardingWorkflow.count({\n                where\n            })\n        ]);\n        return {\n            workflows,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    getById: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.string()).query(async ({ ctx, input: id })=>{\n        const workflow = await ctx.prisma.onboardingWorkflow.findUnique({\n            where: {\n                id\n            },\n            include: {\n                employee: {\n                    include: {\n                        manager: {\n                            select: {\n                                id: true,\n                                fullName: true\n                            }\n                        },\n                        appAccounts: {\n                            include: {\n                                app: true\n                            }\n                        }\n                    }\n                },\n                tasks: {\n                    orderBy: {\n                        sortOrder: \"asc\"\n                    }\n                }\n            }\n        });\n        if (!workflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        const synced = await syncProvisioningTasksForWorkflow(ctx.prisma, workflow);\n        return synced || workflow;\n    }),\n    getByEmployee: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.string()).query(async ({ ctx, input: employeeId })=>{\n        return ctx.prisma.onboardingWorkflow.findFirst({\n            where: {\n                employeeId\n            },\n            include: {\n                tasks: {\n                    orderBy: {\n                        sortOrder: \"asc\"\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n    }),\n    startNew: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        employeeId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        startDate: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        managerId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        department: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        workEmail: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        emailProvider: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n            \"PERSONAL\",\n            \"GOOGLE_WORKSPACE\",\n            \"CUSTOM\"\n        ]),\n        jiraBoardId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        jiraManager: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional(),\n        customTasks: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n            name: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            type: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n                \"AUTOMATED\",\n                \"MANUAL\"\n            ]),\n            automationType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n            automationConfig: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.unknown()).optional(),\n            sortOrder: zod__WEBPACK_IMPORTED_MODULE_9__.number()\n        })).optional()\n    })).mutation(async ({ ctx, input })=>{\n        const employee = await ctx.prisma.employee.findUnique({\n            where: {\n                id: input.employeeId\n            },\n            include: {\n                manager: true\n            }\n        });\n        if (!employee) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Employee not found\"\n            });\n        }\n        // Update employee with start date, manager, and work email\n        const updateData = {\n            startDate: new Date(input.startDate),\n            status: \"HIRED_PENDING_START\"\n        };\n        if (input.managerId) {\n            updateData.managerId = input.managerId;\n        }\n        if (input.department !== undefined) {\n            updateData.department = input.department || null;\n        }\n        if (input.workEmail) {\n            updateData.workEmail = input.workEmail;\n        }\n        if (input.jiraBoardId !== undefined || input.jiraManager !== undefined) {\n            const meta = employee.meta ?? {};\n            if (input.jiraBoardId) {\n                meta.jiraBoardId = input.jiraBoardId;\n            } else {\n                delete meta.jiraBoardId;\n            }\n            if (input.jiraManager) {\n                meta.jiraManager = true;\n            } else if (input.jiraManager === false) {\n                delete meta.jiraManager;\n            }\n            updateData.meta = meta;\n        }\n        await ctx.prisma.employee.update({\n            where: {\n                id: input.employeeId\n            },\n            data: updateData\n        });\n        // Continue with workflow creation\n        const updatedEmployee = await ctx.prisma.employee.findUnique({\n            where: {\n                id: input.employeeId\n            },\n            include: {\n                manager: true\n            }\n        });\n        // Check for existing active workflow\n        const existingWorkflow = await ctx.prisma.onboardingWorkflow.findFirst({\n            where: {\n                employeeId: input.employeeId,\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"IN_PROGRESS\"\n                    ]\n                }\n            }\n        });\n        if (existingWorkflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Employee already has an active onboarding workflow\"\n            });\n        }\n        // Create workflow with tasks\n        const tasks = input.customTasks || await getDefaultOnboardingTasks(ctx.prisma, updatedEmployee || employee);\n        const workflow = await ctx.prisma.onboardingWorkflow.create({\n            data: {\n                employeeId: input.employeeId,\n                status: \"IN_PROGRESS\",\n                startedAt: new Date(),\n                accessTokenExpiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n                tasks: {\n                    create: tasks.map((task)=>({\n                            name: task.name,\n                            type: task.type,\n                            status: \"PENDING\",\n                            automationType: task.automationType,\n                            automationConfig: task.automationConfig,\n                            sortOrder: task.sortOrder\n                        }))\n                }\n            },\n            include: {\n                tasks: true\n            }\n        });\n        // Send onboarding email to employee\n        const onboardingLink = `${process.env.NEXTAUTH_URL}/welcome/${workflow.accessToken}`;\n        const onboardingRecipient = updatedEmployee?.workEmail || updatedEmployee.personalEmail;\n        await (0,_lib_email__WEBPACK_IMPORTED_MODULE_2__.sendOnboardingEmail)({\n            employeeEmail: onboardingRecipient,\n            employeeName: updatedEmployee.fullName,\n            onboardingLink,\n            startDate: updatedEmployee.startDate || new Date(),\n            managerName: updatedEmployee.manager?.fullName,\n            companyName: (await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)()).name\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"ONBOARDING_STARTED\",\n            resourceType: \"employee\",\n            resourceId: input.employeeId,\n            metadata: {\n                workflowId: workflow.id\n            }\n        });\n        return workflow;\n    }),\n    start: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        employeeId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        customTasks: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n            name: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            type: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n                \"AUTOMATED\",\n                \"MANUAL\"\n            ]),\n            automationType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n            automationConfig: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.unknown()).optional(),\n            sortOrder: zod__WEBPACK_IMPORTED_MODULE_9__.number()\n        })).optional()\n    })).mutation(async ({ ctx, input })=>{\n        const employee = await ctx.prisma.employee.findUnique({\n            where: {\n                id: input.employeeId\n            },\n            include: {\n                manager: true\n            }\n        });\n        if (!employee) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Employee not found\"\n            });\n        }\n        if (![\n            \"OFFER_SIGNED\",\n            \"HIRED_PENDING_START\"\n        ].includes(employee.status)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Employee must be in OFFER_SIGNED or HIRED_PENDING_START status\"\n            });\n        }\n        // Check for existing active workflow\n        const existingWorkflow = await ctx.prisma.onboardingWorkflow.findFirst({\n            where: {\n                employeeId: input.employeeId,\n                status: {\n                    in: [\n                        \"PENDING\",\n                        \"IN_PROGRESS\"\n                    ]\n                }\n            }\n        });\n        if (existingWorkflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Employee already has an active onboarding workflow\"\n            });\n        }\n        // Create workflow with tasks\n        const tasks = input.customTasks || await getDefaultOnboardingTasks(ctx.prisma, employee);\n        const workflow = await ctx.prisma.onboardingWorkflow.create({\n            data: {\n                employeeId: input.employeeId,\n                status: \"IN_PROGRESS\",\n                startedAt: new Date(),\n                accessTokenExpiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n                tasks: {\n                    create: tasks.map((task)=>({\n                            name: task.name,\n                            type: task.type,\n                            status: \"PENDING\",\n                            automationType: task.automationType,\n                            automationConfig: task.automationConfig,\n                            sortOrder: task.sortOrder\n                        }))\n                }\n            },\n            include: {\n                tasks: true\n            }\n        });\n        // Update employee status\n        await ctx.prisma.employee.update({\n            where: {\n                id: input.employeeId\n            },\n            data: {\n                status: \"HIRED_PENDING_START\"\n            }\n        });\n        // Send onboarding email to employee\n        const onboardingLink = `${process.env.NEXTAUTH_URL}/welcome/${workflow.accessToken}`;\n        const onboardingRecipient = employee.workEmail || employee.personalEmail;\n        await (0,_lib_email__WEBPACK_IMPORTED_MODULE_2__.sendOnboardingEmail)({\n            employeeEmail: onboardingRecipient,\n            employeeName: employee.fullName,\n            onboardingLink,\n            startDate: employee.startDate || new Date(),\n            managerName: employee.manager?.fullName,\n            companyName: (await (0,_lib_organization__WEBPACK_IMPORTED_MODULE_5__.getOrganization)()).name\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"ONBOARDING_STARTED\",\n            resourceType: \"employee\",\n            resourceId: input.employeeId,\n            metadata: {\n                workflowId: workflow.id\n            }\n        });\n        return workflow;\n    }),\n    runAutomatedTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_9__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.onboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            },\n            include: {\n                workflow: {\n                    include: {\n                        employee: true\n                    }\n                }\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (task.type !== \"AUTOMATED\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"This is not an automated task\"\n            });\n        }\n        // Mark as in progress\n        await ctx.prisma.onboardingTask.update({\n            where: {\n                id: task.id\n            },\n            data: {\n                status: \"IN_PROGRESS\",\n                attempts: task.attempts + 1,\n                lastAttemptAt: new Date()\n            }\n        });\n        const employee = task.workflow.employee;\n        try {\n            let result;\n            switch(task.automationType){\n                case \"provision_google\":\n                    if (task.automationConfig?.appId) {\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInAppById)(employee, task.automationConfig.appId, ctx.user.id);\n                    } else {\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInApp)(employee, \"GOOGLE_WORKSPACE\", ctx.user.id);\n                    }\n                    break;\n                case \"provision_slack\":\n                    if (task.automationConfig?.appId) {\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInAppById)(employee, task.automationConfig.appId, ctx.user.id);\n                    } else {\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInApp)(employee, \"SLACK\", ctx.user.id);\n                    }\n                    break;\n                case GENERIC_PROVISION_AUTOMATION:\n                    {\n                        const config = task.automationConfig ?? {};\n                        if (typeof config.appId === \"string\" && config.appId) {\n                            result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInAppById)(employee, config.appId, ctx.user.id);\n                            break;\n                        }\n                        const appType = config.appType;\n                        if (!appType) {\n                            result = {\n                                success: false,\n                                error: \"Missing automationConfig.appId/appType for this task\"\n                            };\n                            break;\n                        }\n                        const app = await resolveIntegrationApp(ctx.prisma, appType);\n                        result = await (0,_lib_integrations__WEBPACK_IMPORTED_MODULE_3__.provisionEmployeeInApp)(employee, app.type, ctx.user.id);\n                        break;\n                    }\n                default:\n                    result = {\n                        success: false,\n                        error: `Unknown automation type: ${task.automationType}`\n                    };\n            }\n            await ctx.prisma.onboardingTask.update({\n                where: {\n                    id: task.id\n                },\n                data: {\n                    status: result.success ? \"SUCCESS\" : result.error?.toLowerCase().includes(\"no active connection\") ? \"PENDING\" : \"FAILED\",\n                    statusMessage: result.success ? null : result.error?.toLowerCase().includes(\"no active connection\") ? \"Application not connected. Connect it in Settings ‚Üí Applications, then run again (or skip).\" : result.error,\n                    completedAt: result.success ? new Date() : undefined\n                }\n            });\n            await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n                actorId: ctx.user.id,\n                action: \"ONBOARDING_TASK_COMPLETED\",\n                resourceType: \"onboarding_task\",\n                resourceId: task.id,\n                metadata: {\n                    taskName: task.name,\n                    automationType: task.automationType,\n                    success: result.success,\n                    error: result.error\n                }\n            });\n            // Check if all tasks are complete\n            await checkAndCompleteWorkflow(ctx.prisma, task.workflowId);\n            return {\n                success: result.success,\n                error: result.error\n            };\n        } catch (error) {\n            await ctx.prisma.onboardingTask.update({\n                where: {\n                    id: task.id\n                },\n                data: {\n                    status: \"FAILED\",\n                    statusMessage: error instanceof Error ? error.message : \"Unknown error\"\n                }\n            });\n            throw error;\n        }\n    }),\n    completeManualTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        notes: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.onboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.onboardingTask.update({\n            where: {\n                id: task.id\n            },\n            data: {\n                status: \"SUCCESS\",\n                statusMessage: input.notes,\n                completedAt: new Date(),\n                completedBy: ctx.user.id\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorId: ctx.user.id,\n            action: \"ONBOARDING_TASK_COMPLETED\",\n            resourceType: \"onboarding_task\",\n            resourceId: task.id,\n            metadata: {\n                taskName: task.name,\n                manual: true\n            }\n        });\n        // Check if all tasks are complete\n        await checkAndCompleteWorkflow(ctx.prisma, task.workflowId);\n        return {\n            success: true\n        };\n    }),\n    skipTask: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        taskId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        reason: zod__WEBPACK_IMPORTED_MODULE_9__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const task = await ctx.prisma.onboardingTask.findUnique({\n            where: {\n                id: input.taskId\n            }\n        });\n        if (!task) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        await ctx.prisma.onboardingTask.update({\n            where: {\n                id: task.id\n            },\n            data: {\n                status: \"SKIPPED\",\n                statusMessage: input.reason,\n                completedAt: new Date(),\n                completedBy: ctx.user.id\n            }\n        });\n        // Check if all tasks are complete\n        await checkAndCompleteWorkflow(ctx.prisma, task.workflowId);\n        return {\n            success: true\n        };\n    }),\n    // Public endpoint for employee self-service onboarding\n    getByToken: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.string()).query(async ({ ctx, input: token })=>{\n        const workflow = await ctx.prisma.onboardingWorkflow.findUnique({\n            where: {\n                accessToken: token\n            },\n            include: {\n                employee: {\n                    select: {\n                        id: true,\n                        fullName: true,\n                        personalEmail: true,\n                        startDate: true,\n                        jobTitle: true,\n                        department: true,\n                        location: true,\n                        employmentType: true,\n                        // Personal Details\n                        gender: true,\n                        maritalStatus: true,\n                        dateOfBirth: true,\n                        nationality: true,\n                        taxId: true,\n                        // Address & Contact\n                        addressStreet: true,\n                        addressCity: true,\n                        addressState: true,\n                        addressPostal: true,\n                        addressCountry: true,\n                        phone: true,\n                        // Emergency Contact\n                        emergencyContactName: true,\n                        emergencyContactRelation: true,\n                        emergencyContactPhone: true,\n                        profileImageUrl: true,\n                        // Bank Details\n                        bankName: true,\n                        accountName: true,\n                        accountNumber: true,\n                        accountSortCode: true,\n                        manager: {\n                            select: {\n                                fullName: true\n                            }\n                        },\n                        // Former Employment (for full-time employees)\n                        formerOfferLetterUrl: true,\n                        formerLastPayslipUrl: true,\n                        formerResignationLetterUrl: true,\n                        formerResignationConfirmUrl: true,\n                        formerHrContactName: true,\n                        formerHrContactPhone: true,\n                        formerHrContactEmail: true,\n                        formerCompanyAddress: true,\n                        formerEmploymentSubmittedAt: true,\n                        // Personality & Values\n                        lifeValues: true,\n                        knowAboutMe: true,\n                        mbtiType: true,\n                        mbtiImageUrl: true,\n                        bigFiveUrl: true,\n                        bigFiveImageUrl: true,\n                        personalityCompleted: true,\n                        personalityCompletedAt: true\n                    }\n                },\n                tasks: {\n                    where: {\n                        type: \"MANUAL\"\n                    },\n                    select: {\n                        name: true,\n                        status: true\n                    },\n                    orderBy: {\n                        sortOrder: \"asc\"\n                    }\n                }\n            }\n        });\n        if (!workflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Invalid or expired link\"\n            });\n        }\n        if (workflow.accessTokenExpiresAt && workflow.accessTokenExpiresAt < new Date()) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"UNAUTHORIZED\",\n                message: \"This link has expired\"\n            });\n        }\n        return workflow;\n    }),\n    updateEmployeeInfo: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        token: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n        // Personal Details\n        gender: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        maritalStatus: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        dateOfBirth: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        nationality: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        taxId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Address & Contact\n        addressStreet: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        addressCity: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        addressState: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        addressPostal: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        addressCountry: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        phone: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Emergency Contact\n        emergencyContactName: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        emergencyContactRelation: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        emergencyContactPhone: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Bank Details\n        bankName: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        accountName: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        accountNumber: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        accountSortCode: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        profileImageUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Former Employment (for full-time employees)\n        formerOfferLetterUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerLastPayslipUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerResignationLetterUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerResignationConfirmUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerHrContactName: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerHrContactPhone: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerHrContactEmail: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        formerCompanyAddress: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Personality & Values\n        lifeValues: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n            mostImportant: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            important: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            somewhatImportant: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            notImportant: zod__WEBPACK_IMPORTED_MODULE_9__.string()\n        }).optional(),\n        knowAboutMe: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n            question: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n            answer: zod__WEBPACK_IMPORTED_MODULE_9__.string()\n        })).optional(),\n        // MBTI\n        mbtiType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        mbtiImageUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        // Big Five\n        bigFiveUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        bigFiveImageUrl: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        personalityCompleted: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const { token, profileImageUrl, personalityCompleted, dateOfBirth, formerOfferLetterUrl, formerLastPayslipUrl, formerResignationLetterUrl, formerResignationConfirmUrl, formerHrContactName, formerHrContactPhone, formerHrContactEmail, formerCompanyAddress, mbtiType, mbtiImageUrl, bigFiveUrl, bigFiveImageUrl, ...data } = input;\n        const workflow = await ctx.prisma.onboardingWorkflow.findUnique({\n            where: {\n                accessToken: token\n            }\n        });\n        if (!workflow) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        if (workflow.accessTokenExpiresAt && workflow.accessTokenExpiresAt < new Date()) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"UNAUTHORIZED\",\n                message: \"This link has expired\"\n            });\n        }\n        const updateData = {\n            ...data\n        };\n        // Handle profile image URL\n        if (profileImageUrl !== undefined) {\n            const trimmed = profileImageUrl.trim();\n            updateData.profileImageUrl = trimmed ? trimmed : null;\n        }\n        // Handle date of birth conversion\n        if (dateOfBirth !== undefined) {\n            updateData.dateOfBirth = dateOfBirth ? new Date(dateOfBirth) : null;\n        }\n        // Handle former employment fields\n        if (formerOfferLetterUrl !== undefined) updateData.formerOfferLetterUrl = formerOfferLetterUrl || null;\n        if (formerLastPayslipUrl !== undefined) updateData.formerLastPayslipUrl = formerLastPayslipUrl || null;\n        if (formerResignationLetterUrl !== undefined) updateData.formerResignationLetterUrl = formerResignationLetterUrl || null;\n        if (formerResignationConfirmUrl !== undefined) updateData.formerResignationConfirmUrl = formerResignationConfirmUrl || null;\n        if (formerHrContactName !== undefined) updateData.formerHrContactName = formerHrContactName || null;\n        if (formerHrContactPhone !== undefined) updateData.formerHrContactPhone = formerHrContactPhone || null;\n        if (formerHrContactEmail !== undefined) updateData.formerHrContactEmail = formerHrContactEmail || null;\n        if (formerCompanyAddress !== undefined) updateData.formerCompanyAddress = formerCompanyAddress || null;\n        // Track when former employment data is first submitted\n        const hasFormerEmploymentData = formerOfferLetterUrl || formerLastPayslipUrl || formerResignationLetterUrl || formerResignationConfirmUrl || formerHrContactName || formerHrContactPhone || formerHrContactEmail || formerCompanyAddress;\n        if (hasFormerEmploymentData) {\n            updateData.formerEmploymentSubmittedAt = new Date();\n        }\n        // Handle MBTI and Big Five fields\n        if (mbtiType !== undefined) updateData.mbtiType = mbtiType || null;\n        if (mbtiImageUrl !== undefined) updateData.mbtiImageUrl = mbtiImageUrl || null;\n        if (bigFiveUrl !== undefined) updateData.bigFiveUrl = bigFiveUrl || null;\n        if (bigFiveImageUrl !== undefined) updateData.bigFiveImageUrl = bigFiveImageUrl || null;\n        // Handle personality completion\n        if (personalityCompleted) {\n            updateData.personalityCompleted = true;\n            updateData.personalityCompletedAt = new Date();\n        }\n        await ctx.prisma.employee.update({\n            where: {\n                id: workflow.employeeId\n            },\n            data: updateData\n        });\n        return {\n            success: true\n        };\n    }),\n    // ============================================================\n    // Google Sheets-backed onboarding dashboard\n    // ============================================================\n    // Fetch onboarding roster from Google Sheet\n    getSheetRoster: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        try {\n            // Get sheet ID from settings\n            const settings = await ctx.prisma.onboardingSettings.findFirst();\n            const sheetId = settings?.sheetId || undefined;\n            const sheetsService = (0,_lib_google_sheets__WEBPACK_IMPORTED_MODULE_6__.getGoogleSheetsService)(sheetId ? {\n                spreadsheetId: sheetId\n            } : undefined);\n            const roster = await sheetsService.fetchOnboardingRoster();\n            return {\n                roster,\n                fetchedAt: new Date().toISOString()\n            };\n        } catch (error) {\n            console.error(\"Failed to fetch onboarding roster from Google Sheet:\", error);\n            return {\n                roster: [],\n                error: error instanceof Error ? error.message : \"Failed to fetch roster from Google Sheet\",\n                fetchedAt: new Date().toISOString()\n            };\n        }\n    }),\n    // Get static task catalog\n    getTaskCatalog: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(()=>{\n        return {\n            tasks: _lib_onboarding_tasks__WEBPACK_IMPORTED_MODULE_7__.ONBOARDING_TASKS,\n            sections: _lib_onboarding_tasks__WEBPACK_IMPORTED_MODULE_7__.TASK_SECTIONS\n        };\n    }),\n    // Get employee onboarding data from Google Sheet by employee ID\n    getEmployeeSheetData: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        visId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        email: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        fullName: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n    })).query(async ({ ctx, input })=>{\n        if (!input.visId && !input.email && !input.fullName) {\n            return {\n                data: null,\n                error: \"Either visId, email, or fullName is required\"\n            };\n        }\n        try {\n            // Get sheet ID from settings\n            const settings = await ctx.prisma.onboardingSettings.findFirst();\n            const sheetId = settings?.sheetId || undefined;\n            console.log(\"[getEmployeeSheetData] Using sheet ID:\", sheetId || \"DEFAULT (env)\");\n            console.log(\"[getEmployeeSheetData] Searching for:\", {\n                fullName: input.fullName,\n                email: input.email,\n                visId: input.visId\n            });\n            const sheetsService = (0,_lib_google_sheets__WEBPACK_IMPORTED_MODULE_6__.getGoogleSheetsService)(sheetId ? {\n                spreadsheetId: sheetId\n            } : undefined);\n            const roster = await sheetsService.fetchOnboardingRoster();\n            // Debug: log what's in the sheet\n            console.log(\"[getEmployeeSheetData] Sheet returned\", roster.length, \"rows\");\n            if (roster.length > 0) {\n                console.log(\"[getEmployeeSheetData] Rows:\", roster.map((r)=>({\n                        userId: r.userId,\n                        name: r.name,\n                        completionPercent: r.completionPercent\n                    })));\n            }\n            // Find the employee by visId, fullName, or email\n            const employee = roster.find((row)=>{\n                const sheetName = row.name.toLowerCase().trim();\n                const inputName = input.fullName?.toLowerCase().trim() || \"\";\n                // Match by visId (userId column in sheet)\n                if (input.visId && row.userId === input.visId) return true;\n                // Match by full name - exact match\n                if (inputName && sheetName === inputName) return true;\n                // Match by full name - sheet name is contained in input (e.g., sheet has \"Goody\", db has \"Goody Adeleke\")\n                if (inputName && inputName.includes(sheetName) && sheetName.length > 2) return true;\n                // Match by full name - input is contained in sheet name (e.g., db has \"Goody\", sheet has \"Goody Adeleke\")\n                if (inputName && sheetName.includes(inputName) && inputName.length > 2) return true;\n                // Match by first name (first word of full name)\n                if (inputName) {\n                    const inputFirstName = inputName.split(\" \")[0];\n                    const sheetFirstName = sheetName.split(\" \")[0];\n                    if (inputFirstName === sheetFirstName && inputFirstName.length > 2) return true;\n                }\n                // Fallback: match email prefix in name column\n                if (input.email && sheetName.includes(input.email.toLowerCase().split(\"@\")[0])) return true;\n                return false;\n            });\n            if (employee) {\n                console.log(\"[getEmployeeSheetData] Found match:\", employee.name, \"completion:\", employee.completionPercent);\n            } else {\n                console.log(\"[getEmployeeSheetData] No match found for:\", input.fullName);\n            }\n            return {\n                data: employee || null\n            };\n        } catch (error) {\n            console.error(\"Failed to fetch employee sheet data:\", error);\n            return {\n                data: null,\n                error: error instanceof Error ? error.message : \"Failed to fetch from Google Sheet\"\n            };\n        }\n    }),\n    // ============================================================\n    // Onboarding Settings\n    // ============================================================\n    // Get onboarding settings\n    getSettings: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        let settings = await ctx.prisma.onboardingSettings.findFirst();\n        // Create default settings if none exist\n        if (!settings) {\n            settings = await ctx.prisma.onboardingSettings.create({\n                data: {\n                    sheetId: null,\n                    sheetRosterRange: \"Status!A2:J\",\n                    sheetRefreshMs: 30000\n                }\n            });\n        }\n        return settings;\n    }),\n    // Update onboarding settings\n    updateSettings: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        sheetId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional().nullable(),\n        sheetRosterRange: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n        sheetRefreshMs: zod__WEBPACK_IMPORTED_MODULE_9__.number().min(5000).max(300000).optional()\n    })).mutation(async ({ ctx, input })=>{\n        let settings = await ctx.prisma.onboardingSettings.findFirst();\n        if (!settings) {\n            settings = await ctx.prisma.onboardingSettings.create({\n                data: {\n                    sheetId: input.sheetId ?? null,\n                    sheetRosterRange: input.sheetRosterRange ?? \"Status!A2:J\",\n                    sheetRefreshMs: input.sheetRefreshMs ?? 30000\n                }\n            });\n        } else {\n            settings = await ctx.prisma.onboardingSettings.update({\n                where: {\n                    id: settings.id\n                },\n                data: {\n                    ...input.sheetId !== undefined && {\n                        sheetId: input.sheetId\n                    },\n                    ...input.sheetRosterRange && {\n                        sheetRosterRange: input.sheetRosterRange\n                    },\n                    ...input.sheetRefreshMs && {\n                        sheetRefreshMs: input.sheetRefreshMs\n                    }\n                }\n            });\n        }\n        return settings;\n    }),\n    // Test Google Sheet connection\n    testSheetConnection: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_9__.object({\n        sheetId: zod__WEBPACK_IMPORTED_MODULE_9__.string()\n    })).mutation(async ({ input })=>{\n        try {\n            const sheetsService = (0,_lib_google_sheets__WEBPACK_IMPORTED_MODULE_6__.getGoogleSheetsService)({\n                spreadsheetId: input.sheetId\n            });\n            const roster = await sheetsService.fetchOnboardingRoster();\n            return {\n                success: true,\n                rowCount: roster.length\n            };\n        } catch (error) {\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Failed to connect to Google Sheet\"\n            };\n        }\n    })\n});\nasync function checkAndCompleteWorkflow(prisma, workflowId) {\n    const workflow = await prisma.onboardingWorkflow.findUnique({\n        where: {\n            id: workflowId\n        },\n        include: {\n            tasks: true\n        }\n    });\n    if (!workflow) return;\n    const incompleteTasks = workflow.tasks.filter((t)=>t.status === \"PENDING\" || t.status === \"IN_PROGRESS\" || t.status === \"FAILED\");\n    if (incompleteTasks.length === 0) {\n        await prisma.onboardingWorkflow.update({\n            where: {\n                id: workflowId\n            },\n            data: {\n                status: \"COMPLETED\",\n                completedAt: new Date()\n            }\n        });\n        // Update employee status to ACTIVE\n        await prisma.employee.update({\n            where: {\n                id: workflow.employeeId\n            },\n            data: {\n                status: \"ACTIVE\"\n            }\n        });\n        await (0,_lib_audit__WEBPACK_IMPORTED_MODULE_1__.createAuditLog)({\n            actorType: \"system\",\n            action: \"ONBOARDING_COMPLETED\",\n            resourceType: \"employee\",\n            resourceId: workflow.employeeId,\n            metadata: {\n                workflowId\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEQsT0FBT2dFLGtCQUFrQixDQUFDOEIsTUFBTSxDQUFDO1lBQ3JDM0YsT0FBTztnQkFBRVMsSUFBSW1EO1lBQVc7WUFDeEJqRCxNQUFNO2dCQUNKMEMsUUFBUTtnQkFDUjBILGFBQWEsSUFBSXBDO1lBQ25CO1FBQ0Y7UUFFQSxtQ0FBbUM7UUFDbkMsTUFBTTlJLE9BQU9vQixRQUFRLENBQUMwRSxNQUFNLENBQUM7WUFDM0IzRixPQUFPO2dCQUFFUyxJQUFJMkMsU0FBUzJFLFVBQVU7WUFBQztZQUNqQ3BILE1BQU07Z0JBQUUwQyxRQUFRO1lBQVM7UUFDM0I7UUFFQSxNQUFNMUUsMERBQWNBLENBQUM7WUFDbkJrUyxXQUFXO1lBQ1g3RyxRQUFRO1lBQ1JDLGNBQWM7WUFDZEMsWUFBWTlHLFNBQVMyRSxVQUFVO1lBQy9Cb0MsVUFBVTtnQkFBRXZHO1lBQVc7UUFDekI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvb25ib2FyZGluZy50cz9hNTliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyByb3V0ZXIsIGhyQWRtaW5Qcm9jZWR1cmUsIHByb3RlY3RlZFByb2NlZHVyZSwgcHVibGljUHJvY2VkdXJlIH0gZnJvbSAnQC9saWIvdHJwYydcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gJ0B0cnBjL3NlcnZlcidcbmltcG9ydCB7IGNyZWF0ZUF1ZGl0TG9nIH0gZnJvbSAnQC9saWIvYXVkaXQnXG5pbXBvcnQgeyBzZW5kT25ib2FyZGluZ0VtYWlsIH0gZnJvbSAnQC9saWIvZW1haWwnXG5pbXBvcnQgeyBwcm92aXNpb25FbXBsb3llZUluQXBwLCBwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZCB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucydcbmltcG9ydCB7IGhhc01hdGNoaW5nUHJvdmlzaW9uaW5nUnVsZSB9IGZyb20gJ0AvbGliL2ludGVncmF0aW9ucy9wcm92aXNpb25pbmctcnVsZXMnXG5pbXBvcnQgeyBnZXRPcmdhbml6YXRpb24gfSBmcm9tICdAL2xpYi9vcmdhbml6YXRpb24nXG5pbXBvcnQgeyBnZXRHb29nbGVTaGVldHNTZXJ2aWNlLCB0eXBlIE9uYm9hcmRpbmdSb3N0ZXJSb3cgfSBmcm9tICdAL2xpYi9nb29nbGUtc2hlZXRzJ1xuaW1wb3J0IHsgT05CT0FSRElOR19UQVNLUywgVEFTS19TRUNUSU9OUyB9IGZyb20gJ0AvbGliL29uYm9hcmRpbmctdGFza3MnXG5cbmNvbnN0IERFRkFVTFRfT05CT0FSRElOR19UQVNLUyA9IFtcbiAgLy8gQXV0b21hdGVkIHRhc2tzXG4gIHsgbmFtZTogJ1Byb3Zpc2lvbiBHb29nbGUgV29ya3NwYWNlIGFjY291bnQnLCB0eXBlOiAnQVVUT01BVEVEJyBhcyBjb25zdCwgYXV0b21hdGlvblR5cGU6ICdwcm92aXNpb25fZ29vZ2xlJywgc29ydE9yZGVyOiAxIH0sXG4gIHsgbmFtZTogJ1Byb3Zpc2lvbiBTbGFjayBhY2NvdW50JywgdHlwZTogJ0FVVE9NQVRFRCcgYXMgY29uc3QsIGF1dG9tYXRpb25UeXBlOiAncHJvdmlzaW9uX3NsYWNrJywgc29ydE9yZGVyOiAyIH0sXG4gIC8vIE1hbnVhbCB0YXNrc1xuICB7IG5hbWU6ICdDb25maXJtIGxhcHRvcC9oYXJkd2FyZSBoYXMgYmVlbiBvcmRlcmVkJywgdHlwZTogJ01BTlVBTCcgYXMgY29uc3QsIHNvcnRPcmRlcjogMyB9LFxuICB7IG5hbWU6ICdBZGQgdG8gc3RhbmQtdXAgYXBwJywgdHlwZTogJ01BTlVBTCcgYXMgY29uc3QsIHNvcnRPcmRlcjogNCB9LFxuICB7IG5hbWU6ICdTY2hlZHVsZSBvcmllbnRhdGlvbiBtZWV0aW5nJywgdHlwZTogJ01BTlVBTCcgYXMgY29uc3QsIHNvcnRPcmRlcjogNSB9LFxuICB7IG5hbWU6ICdBZGQgdG8gdGVhbSBjYWxlbmRhcicsIHR5cGU6ICdNQU5VQUwnIGFzIGNvbnN0LCBzb3J0T3JkZXI6IDYgfSxcbl1cblxuY29uc3QgR0VORVJJQ19QUk9WSVNJT05fQVVUT01BVElPTiA9ICdwcm92aXNpb25fYXBwJ1xuXG5mdW5jdGlvbiBhcHBUeXBlVG9BdXRvbWF0aW9uVHlwZShhcHBUeXBlOiBzdHJpbmcpIHtcbiAgc3dpdGNoIChhcHBUeXBlKSB7XG4gICAgY2FzZSAnR09PR0xFX1dPUktTUEFDRSc6XG4gICAgICByZXR1cm4gJ3Byb3Zpc2lvbl9nb29nbGUnXG4gICAgY2FzZSAnU0xBQ0snOlxuICAgICAgcmV0dXJuICdwcm92aXNpb25fc2xhY2snXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBHRU5FUklDX1BST1ZJU0lPTl9BVVRPTUFUSU9OXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVncmF0aW9uQXBwKHByaXNtYTogYW55LCBhcHBUeXBlOiBzdHJpbmcpIHtcbiAgY29uc3QgYXBwID0gYXdhaXQgcHJpc21hLmFwcC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiBhcHBUeXBlIH0gfSlcbiAgaWYgKCFhcHApIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogYFVua25vd24gaW50ZWdyYXRpb24gYXBwOiAke2FwcFR5cGV9YCB9KVxuICB9XG4gIHJldHVybiBhcHBcbn1cblxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRGVmYXVsdE9uYm9hcmRpbmdUZW1wbGF0ZXMocHJpc21hOiBhbnkpIHtcbiAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgY29uc3QgZXhpc3RpbmdDb3VudCA9IGF3YWl0IHByaXNtYS5vbmJvYXJkaW5nVGFza1RlbXBsYXRlLmNvdW50KHtcbiAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gIH0pXG5cbiAgaWYgKGV4aXN0aW5nQ291bnQgPiAwKSByZXR1cm4gb3JnYW5pemF0aW9uXG5cbiAgYXdhaXQgcHJpc21hLm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUuY3JlYXRlTWFueSh7XG4gICAgZGF0YTogREVGQVVMVF9PTkJPQVJESU5HX1RBU0tTLm1hcCgodGFzaykgPT4gKHtcbiAgICAgIG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgIHR5cGU6IHRhc2sudHlwZSxcbiAgICAgIGF1dG9tYXRpb25UeXBlOiB0YXNrLmF1dG9tYXRpb25UeXBlID8/IG51bGwsXG4gICAgICBhcHBUeXBlOlxuICAgICAgICB0YXNrLmF1dG9tYXRpb25UeXBlID09PSAncHJvdmlzaW9uX2dvb2dsZSdcbiAgICAgICAgICA/ICdHT09HTEVfV09SS1NQQUNFJ1xuICAgICAgICAgIDogdGFzay5hdXRvbWF0aW9uVHlwZSA9PT0gJ3Byb3Zpc2lvbl9zbGFjaydcbiAgICAgICAgICAgID8gJ1NMQUNLJ1xuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgc29ydE9yZGVyOiB0YXNrLnNvcnRPcmRlcixcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIH0pKSxcbiAgfSlcblxuICByZXR1cm4gb3JnYW5pemF0aW9uXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldERlZmF1bHRPbmJvYXJkaW5nVGFza3MocHJpc21hOiBhbnksIGVtcGxveWVlPzogYW55KSB7XG4gIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGVuc3VyZURlZmF1bHRPbmJvYXJkaW5nVGVtcGxhdGVzKHByaXNtYSlcbiAgY29uc3QgdGVtcGxhdGVzID0gYXdhaXQgcHJpc21hLm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gIH0pXG5cbiAgY29uc3QgdGFza3M6IEFycmF5PHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB0eXBlOiAnTUFOVUFMJyB8ICdBVVRPTUFURUQnXG4gICAgYXV0b21hdGlvblR5cGU/OiBzdHJpbmdcbiAgICBhdXRvbWF0aW9uQ29uZmlnPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICBzb3J0T3JkZXI6IG51bWJlclxuICB9PiA9IFtdXG5cbiAgbGV0IG9yZGVyID0gMVxuICBjb25zdCBoYW5kbGVkQXBwSWRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgZm9yIChjb25zdCB0IG9mIHRlbXBsYXRlcykge1xuICAgIGlmICh0LnR5cGUgPT09ICdNQU5VQUwnKSB7XG4gICAgICB0YXNrcy5wdXNoKHtcbiAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICB0eXBlOiB0LnR5cGUsXG4gICAgICAgIGF1dG9tYXRpb25UeXBlOiB0LmF1dG9tYXRpb25UeXBlID8/IHVuZGVmaW5lZCxcbiAgICAgICAgYXV0b21hdGlvbkNvbmZpZzogdC5hcHBJZFxuICAgICAgICAgID8geyBhcHBJZDogdC5hcHBJZCwgYXBwVHlwZTogdC5hcHBUeXBlID8/IHVuZGVmaW5lZCB9XG4gICAgICAgICAgOiB0LmFwcFR5cGVcbiAgICAgICAgICAgID8geyBhcHBUeXBlOiB0LmFwcFR5cGUgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIHNvcnRPcmRlcjogb3JkZXIrKyxcbiAgICAgIH0pXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGNvbnN0IGFwcCA9XG4gICAgICB0LmFwcElkXG4gICAgICAgID8gYXdhaXQgcHJpc21hLmFwcC5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHQuYXBwSWQgfSB9KVxuICAgICAgICA6IHQuYXBwVHlwZVxuICAgICAgICAgID8gYXdhaXQgcHJpc21hLmFwcC5maW5kRmlyc3QoeyB3aGVyZTogeyB0eXBlOiB0LmFwcFR5cGUgfSB9KVxuICAgICAgICAgIDogbnVsbFxuICAgIGlmICghYXBwKSBjb250aW51ZVxuXG4gICAgaWYgKGVtcGxveWVlKSB7XG4gICAgICBjb25zdCBydWxlcyA9IGF3YWl0IHByaXNtYS5hcHBQcm92aXNpb25pbmdSdWxlLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHsgYXBwSWQ6IGFwcC5pZCwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIH0pXG4gICAgICBpZiAoIWhhc01hdGNoaW5nUHJvdmlzaW9uaW5nUnVsZShlbXBsb3llZSwgcnVsZXMpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGFza3MucHVzaCh7XG4gICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICB0eXBlOiB0LnR5cGUsXG4gICAgICBhdXRvbWF0aW9uVHlwZTogdC5hdXRvbWF0aW9uVHlwZSA/PyB1bmRlZmluZWQsXG4gICAgICBhdXRvbWF0aW9uQ29uZmlnOiB0LmFwcElkXG4gICAgICAgID8geyBhcHBJZDogdC5hcHBJZCwgYXBwVHlwZTogdC5hcHBUeXBlID8/IHVuZGVmaW5lZCB9XG4gICAgICAgIDogdC5hcHBUeXBlXG4gICAgICAgICAgPyB7IGFwcFR5cGU6IHQuYXBwVHlwZSB9XG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBzb3J0T3JkZXI6IG9yZGVyKyssXG4gICAgfSlcbiAgICBoYW5kbGVkQXBwSWRzLmFkZChhcHAuaWQpXG4gIH1cblxuICBpZiAoZW1wbG95ZWUpIHtcbiAgICBjb25zdCBleHRyYVRhc2tzID0gYXdhaXQgZ2V0UHJvdmlzaW9uaW5nVGFza3NGb3JFbXBsb3llZShwcmlzbWEsIGVtcGxveWVlLCB0YXNrcylcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgZXh0cmFUYXNrcykge1xuICAgICAgaWYgKGhhbmRsZWRBcHBJZHMuaGFzKHRhc2suYXBwSWQpKSBjb250aW51ZVxuICAgICAgdGFza3MucHVzaCh7XG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcbiAgICAgICAgdHlwZTogJ0FVVE9NQVRFRCcsXG4gICAgICAgIGF1dG9tYXRpb25UeXBlOiB0YXNrLmF1dG9tYXRpb25UeXBlLFxuICAgICAgICBhdXRvbWF0aW9uQ29uZmlnOiB0YXNrLmF1dG9tYXRpb25Db25maWcsXG4gICAgICAgIHNvcnRPcmRlcjogb3JkZXIrKyxcbiAgICAgIH0pXG4gICAgICBoYW5kbGVkQXBwSWRzLmFkZCh0YXNrLmFwcElkKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXNrc1xufVxuXG50eXBlIFByb3Zpc2lvbmluZ1Rhc2tJbnB1dCA9IHtcbiAgYXBwSWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgYXV0b21hdGlvblR5cGU6IHN0cmluZ1xuICBhdXRvbWF0aW9uQ29uZmlnOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxufVxuXG5mdW5jdGlvbiBnZXRBcHBJZEZyb21UYXNrKFxuICB0YXNrOiB7IGF1dG9tYXRpb25UeXBlPzogc3RyaW5nIHwgbnVsbDsgYXV0b21hdGlvbkNvbmZpZz86IHVua25vd24gfSxcbiAgYXBwQnlUeXBlOiBNYXA8c3RyaW5nLCB7IGlkOiBzdHJpbmcgfT5cbikge1xuICBjb25zdCBjZmcgPSAodGFzay5hdXRvbWF0aW9uQ29uZmlnID8/IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICBjb25zdCBhcHBJZCA9IHR5cGVvZiBjZmcuYXBwSWQgPT09ICdzdHJpbmcnID8gY2ZnLmFwcElkIDogbnVsbFxuICBpZiAoYXBwSWQpIHJldHVybiBhcHBJZFxuXG4gIGNvbnN0IGFwcFR5cGUgPSB0eXBlb2YgY2ZnLmFwcFR5cGUgPT09ICdzdHJpbmcnID8gY2ZnLmFwcFR5cGUgOiBudWxsXG4gIGlmIChhcHBUeXBlKSB7XG4gICAgY29uc3QgYXBwID0gYXBwQnlUeXBlLmdldChhcHBUeXBlKVxuICAgIHJldHVybiBhcHA/LmlkID8/IG51bGxcbiAgfVxuXG4gIGlmICh0YXNrLmF1dG9tYXRpb25UeXBlID09PSAncHJvdmlzaW9uX2dvb2dsZScpIHtcbiAgICBjb25zdCBhcHAgPSBhcHBCeVR5cGUuZ2V0KCdHT09HTEVfV09SS1NQQUNFJylcbiAgICByZXR1cm4gYXBwPy5pZCA/PyBudWxsXG4gIH1cblxuICBpZiAodGFzay5hdXRvbWF0aW9uVHlwZSA9PT0gJ3Byb3Zpc2lvbl9zbGFjaycpIHtcbiAgICBjb25zdCBhcHAgPSBhcHBCeVR5cGUuZ2V0KCdTTEFDSycpXG4gICAgcmV0dXJuIGFwcD8uaWQgPz8gbnVsbFxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvdmlzaW9uaW5nVGFza3NGb3JFbXBsb3llZShcbiAgcHJpc21hOiBhbnksXG4gIGVtcGxveWVlOiBhbnksXG4gIGV4aXN0aW5nVGFza3M6IEFycmF5PHsgYXV0b21hdGlvblR5cGU/OiBzdHJpbmcgfCBudWxsOyBhdXRvbWF0aW9uQ29uZmlnPzogdW5rbm93biB9PlxuKTogUHJvbWlzZTxQcm92aXNpb25pbmdUYXNrSW5wdXRbXT4ge1xuICBjb25zdCBhcHBzV2l0aFJ1bGVzID0gYXdhaXQgcHJpc21hLmFwcC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGFyY2hpdmVkQXQ6IG51bGwsXG4gICAgICBwcm92aXNpb25pbmdSdWxlczogeyBzb21lOiB7IGlzQWN0aXZlOiB0cnVlIH0gfSxcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHByb3Zpc2lvbmluZ1J1bGVzOiB7IHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0gfSxcbiAgICB9LFxuICB9KVxuXG4gIGlmIChhcHBzV2l0aFJ1bGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdXG5cbiAgY29uc3QgYXBwQnlUeXBlID0gbmV3IE1hcDxzdHJpbmcsIHsgaWQ6IHN0cmluZyB9PigpXG4gIGZvciAoY29uc3QgYXBwIG9mIGFwcHNXaXRoUnVsZXMpIHtcbiAgICBhcHBCeVR5cGUuc2V0KGFwcC50eXBlLCB7IGlkOiBhcHAuaWQgfSlcbiAgfVxuXG4gIGNvbnN0IGV4aXN0aW5nQXBwSWRzID0gbmV3IFNldDxzdHJpbmc+KClcbiAgZm9yIChjb25zdCB0YXNrIG9mIGV4aXN0aW5nVGFza3MpIHtcbiAgICBjb25zdCBhcHBJZCA9IGdldEFwcElkRnJvbVRhc2sodGFzaywgYXBwQnlUeXBlKVxuICAgIGlmIChhcHBJZCkgZXhpc3RpbmdBcHBJZHMuYWRkKGFwcElkKVxuICB9XG5cbiAgY29uc3QgdGFza3M6IFByb3Zpc2lvbmluZ1Rhc2tJbnB1dFtdID0gW11cbiAgZm9yIChjb25zdCBhcHAgb2YgYXBwc1dpdGhSdWxlcykge1xuICAgIGlmIChleGlzdGluZ0FwcElkcy5oYXMoYXBwLmlkKSkgY29udGludWVcbiAgICBpZiAoIWhhc01hdGNoaW5nUHJvdmlzaW9uaW5nUnVsZShlbXBsb3llZSwgYXBwLnByb3Zpc2lvbmluZ1J1bGVzKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgdGFza3MucHVzaCh7XG4gICAgICBhcHBJZDogYXBwLmlkLFxuICAgICAgbmFtZTogYFByb3Zpc2lvbiAke2FwcC5uYW1lfSBhY2Nlc3NgLFxuICAgICAgYXV0b21hdGlvblR5cGU6IGFwcFR5cGVUb0F1dG9tYXRpb25UeXBlKGFwcC50eXBlKSxcbiAgICAgIGF1dG9tYXRpb25Db25maWc6IHsgYXBwSWQ6IGFwcC5pZCwgYXBwVHlwZTogYXBwLnR5cGUgfSxcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHRhc2tzXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHN5bmNQcm92aXNpb25pbmdUYXNrc0ZvcldvcmtmbG93KHByaXNtYTogYW55LCB3b3JrZmxvdzogYW55KSB7XG4gIGlmICghd29ya2Zsb3c/LmVtcGxveWVlKSByZXR1cm4gd29ya2Zsb3dcbiAgaWYgKHdvcmtmbG93LnN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcpIHJldHVybiB3b3JrZmxvd1xuXG4gIGNvbnN0IGV4dHJhVGFza3MgPSBhd2FpdCBnZXRQcm92aXNpb25pbmdUYXNrc0ZvckVtcGxveWVlKHByaXNtYSwgd29ya2Zsb3cuZW1wbG95ZWUsIHdvcmtmbG93LnRhc2tzIHx8IFtdKVxuICBpZiAoZXh0cmFUYXNrcy5sZW5ndGggPT09IDApIHJldHVybiB3b3JrZmxvd1xuXG4gIGNvbnN0IG1heFNvcnRPcmRlciA9ICh3b3JrZmxvdy50YXNrcyB8fCBbXSkucmVkdWNlKChtYXg6IG51bWJlciwgdGFzazogYW55KSA9PiB7XG4gICAgcmV0dXJuIE1hdGgubWF4KG1heCwgdGFzay5zb3J0T3JkZXIgfHwgMClcbiAgfSwgMClcblxuICBhd2FpdCBwcmlzbWEub25ib2FyZGluZ1Rhc2suY3JlYXRlTWFueSh7XG4gICAgZGF0YTogZXh0cmFUYXNrcy5tYXAoKHRhc2ssIGluZGV4KSA9PiAoe1xuICAgICAgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQsXG4gICAgICBuYW1lOiB0YXNrLm5hbWUsXG4gICAgICB0eXBlOiAnQVVUT01BVEVEJyxcbiAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgYXV0b21hdGlvblR5cGU6IHRhc2suYXV0b21hdGlvblR5cGUsXG4gICAgICBhdXRvbWF0aW9uQ29uZmlnOiB0YXNrLmF1dG9tYXRpb25Db25maWcsXG4gICAgICBzb3J0T3JkZXI6IG1heFNvcnRPcmRlciArIGluZGV4ICsgMSxcbiAgICB9KSksXG4gIH0pXG5cbiAgcmV0dXJuIHByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHdvcmtmbG93LmlkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgZW1wbG95ZWU6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIG1hbmFnZXI6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgYXBwQWNjb3VudHM6IHsgaW5jbHVkZTogeyBhcHA6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHRhc2tzOiB7IG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9IH0sXG4gICAgfSxcbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IG9uYm9hcmRpbmdSb3V0ZXIgPSByb3V0ZXIoe1xuICBnZXRUYXNrVGVtcGxhdGVzOiBockFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T25ib2FyZGluZ1RlbXBsYXRlcyhjdHgucHJpc21hKVxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQgfSxcbiAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIGNyZWF0ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBraW5kOiB6LmVudW0oWydNQU5VQUwnLCAnSU5URUdSQVRJT04nXSksXG4gICAgICBuYW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbnRlZ3JhdGlvbkFwcElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBpbnRlZ3JhdGlvbkFwcFR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gbGVnYWN5XG4gICAgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9uYm9hcmRpbmdUZW1wbGF0ZXMoY3R4LnByaXNtYSlcblxuICAgICAgbGV0IGFwcDogYW55IHwgbnVsbCA9IG51bGxcbiAgICAgIGlmIChpbnB1dC5raW5kID09PSAnSU5URUdSQVRJT04nKSB7XG4gICAgICAgIGlmIChpbnB1dC5pbnRlZ3JhdGlvbkFwcElkKSB7XG4gICAgICAgICAgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5pbnRlZ3JhdGlvbkFwcElkIH0gfSlcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5pbnRlZ3JhdGlvbkFwcFR5cGUpIHtcbiAgICAgICAgICBhcHAgPSBhd2FpdCByZXNvbHZlSW50ZWdyYXRpb25BcHAoY3R4LnByaXNtYSwgaW5wdXQuaW50ZWdyYXRpb25BcHBUeXBlKVxuICAgICAgICB9XG4gICAgICAgIGlmICghYXBwKSB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ1NlbGVjdCBhbiBpbnRlZ3JhdGlvbiBhcHAnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1heCA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS5hZ2dyZWdhdGUoe1xuICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gICAgICAgIF9tYXg6IHsgc29ydE9yZGVyOiB0cnVlIH0sXG4gICAgICB9KVxuICAgICAgY29uc3QgbmV4dFNvcnQgPSAobWF4Ll9tYXguc29ydE9yZGVyID8/IDApICsgMVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFza1RlbXBsYXRlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uPy50cmltKCkgPyBpbnB1dC5kZXNjcmlwdGlvbi50cmltKCkgOiBudWxsLFxuICAgICAgICAgIHR5cGU6IGlucHV0LmtpbmQgPT09ICdNQU5VQUwnID8gJ01BTlVBTCcgOiAnQVVUT01BVEVEJyxcbiAgICAgICAgICBhcHBJZDogaW5wdXQua2luZCA9PT0gJ0lOVEVHUkFUSU9OJyA/IGFwcCEuaWQgOiBudWxsLFxuICAgICAgICAgIGFwcFR5cGU6IGlucHV0LmtpbmQgPT09ICdJTlRFR1JBVElPTicgPyBhcHAhLnR5cGUgOiBudWxsLFxuICAgICAgICAgIGF1dG9tYXRpb25UeXBlOlxuICAgICAgICAgICAgaW5wdXQua2luZCA9PT0gJ0lOVEVHUkFUSU9OJyA/IGFwcFR5cGVUb0F1dG9tYXRpb25UeXBlKGFwcCEudHlwZSkgOiBudWxsLFxuICAgICAgICAgIHNvcnRPcmRlcjogbmV4dFNvcnQsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIHVwZGF0ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIGtpbmQ6IHouZW51bShbJ01BTlVBTCcsICdJTlRFR1JBVElPTiddKS5vcHRpb25hbCgpLFxuICAgICAgaW50ZWdyYXRpb25BcHBJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgaW50ZWdyYXRpb25BcHBUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIGxlZ2FjeVxuICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkub3B0aW9uYWwoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgIGlzQWN0aXZlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGVuc3VyZURlZmF1bHRPbmJvYXJkaW5nVGVtcGxhdGVzKGN0eC5wcmlzbWEpXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0gfSlcbiAgICAgIGlmICghdGVtcGxhdGUgfHwgdGVtcGxhdGUub3JnYW5pemF0aW9uSWQgIT09IG9yZ2FuaXphdGlvbi5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qga2luZFVwZGF0ZXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgICAgIGlmIChpbnB1dC5raW5kKSB7XG4gICAgICAgIGlmIChpbnB1dC5raW5kID09PSAnTUFOVUFMJykge1xuICAgICAgICAgIGtpbmRVcGRhdGVzLnR5cGUgPSAnTUFOVUFMJ1xuICAgICAgICAgIGtpbmRVcGRhdGVzLmFwcElkID0gbnVsbFxuICAgICAgICAgIGtpbmRVcGRhdGVzLmFwcFR5cGUgPSBudWxsXG4gICAgICAgICAga2luZFVwZGF0ZXMuYXV0b21hdGlvblR5cGUgPSBudWxsXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGFwcDogYW55IHwgbnVsbCA9IG51bGxcbiAgICAgICAgICBpZiAoaW5wdXQuaW50ZWdyYXRpb25BcHBJZCkge1xuICAgICAgICAgICAgYXBwID0gYXdhaXQgY3R4LnByaXNtYS5hcHAuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5pbnRlZ3JhdGlvbkFwcElkIH0gfSlcbiAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmludGVncmF0aW9uQXBwVHlwZSkge1xuICAgICAgICAgICAgYXBwID0gYXdhaXQgcmVzb2x2ZUludGVncmF0aW9uQXBwKGN0eC5wcmlzbWEsIGlucHV0LmludGVncmF0aW9uQXBwVHlwZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFhcHApIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnU2VsZWN0IGFuIGludGVncmF0aW9uIGFwcCcgfSlcbiAgICAgICAgICBraW5kVXBkYXRlcy50eXBlID0gJ0FVVE9NQVRFRCdcbiAgICAgICAgICBraW5kVXBkYXRlcy5hcHBJZCA9IGFwcC5pZFxuICAgICAgICAgIGtpbmRVcGRhdGVzLmFwcFR5cGUgPSBhcHAudHlwZVxuICAgICAgICAgIGtpbmRVcGRhdGVzLmF1dG9tYXRpb25UeXBlID0gYXBwVHlwZVRvQXV0b21hdGlvblR5cGUoYXBwLnR5cGUpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmtpbmRVcGRhdGVzLFxuICAgICAgICAgIC4uLihpbnB1dC5uYW1lID8geyBuYW1lOiBpbnB1dC5uYW1lIH0gOiB7fSksXG4gICAgICAgICAgLi4uKGlucHV0LmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8geyBkZXNjcmlwdGlvbjogaW5wdXQuZGVzY3JpcHRpb24/LnRyaW0oKSA/IGlucHV0LmRlc2NyaXB0aW9uLnRyaW0oKSA6IG51bGwgfVxuICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgLi4uKGlucHV0LmlzQWN0aXZlICE9PSB1bmRlZmluZWQgPyB7IGlzQWN0aXZlOiBpbnB1dC5pc0FjdGl2ZSB9IDoge30pLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBkZWxldGVUYXNrVGVtcGxhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZW5zdXJlRGVmYXVsdE9uYm9hcmRpbmdUZW1wbGF0ZXMoY3R4LnByaXNtYSlcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pXG4gICAgICBpZiAoIXRlbXBsYXRlIHx8IHRlbXBsYXRlLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XG4gICAgICAgIGF3YWl0IHR4Lm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KVxuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBhd2FpdCB0eC5vbmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlIH0sXG4gICAgICAgIH0pXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtYWluaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXdhaXQgdHgub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHJlbWFpbmluZ1tpXS5pZCB9LFxuICAgICAgICAgICAgZGF0YTogeyBzb3J0T3JkZXI6IGkgKyAxIH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgbW92ZVRhc2tUZW1wbGF0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIGRpcmVjdGlvbjogei5lbnVtKFsnVVAnLCAnRE9XTiddKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBlbnN1cmVEZWZhdWx0T25ib2FyZGluZ1RlbXBsYXRlcyhjdHgucHJpc21hKVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHR4Lm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9IH0pXG4gICAgICAgIGlmICghY3VycmVudCB8fCBjdXJyZW50Lm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb24uaWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5laWdoYm9yID0gYXdhaXQgdHgub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgICAgICAgc29ydE9yZGVyOlxuICAgICAgICAgICAgICBpbnB1dC5kaXJlY3Rpb24gPT09ICdVUCdcbiAgICAgICAgICAgICAgICA/IHsgbHQ6IGN1cnJlbnQuc29ydE9yZGVyIH1cbiAgICAgICAgICAgICAgICA6IHsgZ3Q6IGN1cnJlbnQuc29ydE9yZGVyIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHNvcnRPcmRlcjogaW5wdXQuZGlyZWN0aW9uID09PSAnVVAnID8gJ2Rlc2MnIDogJ2FzYycgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIW5laWdoYm9yKSByZXR1cm4gY3VycmVudFxuXG4gICAgICAgIGF3YWl0IHR4Lm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogY3VycmVudC5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc29ydE9yZGVyOiBuZWlnaGJvci5zb3J0T3JkZXIgfSxcbiAgICAgICAgfSlcbiAgICAgICAgYXdhaXQgdHgub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiBuZWlnaGJvci5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgc29ydE9yZGVyOiBjdXJyZW50LnNvcnRPcmRlciB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiB0eC5vbmJvYXJkaW5nVGFza1RlbXBsYXRlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBzb3J0T3JkZXI6ICdhc2MnIH0sXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIHJlc2V0VGFza1RlbXBsYXRlczogaHJBZG1pblByb2NlZHVyZVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgZ2V0T3JnYW5pemF0aW9uKClcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2tUZW1wbGF0ZS5kZWxldGVNYW55KHsgd2hlcmU6IHsgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCB9IH0pXG4gICAgICBhd2FpdCBlbnN1cmVEZWZhdWx0T25ib2FyZGluZ1RlbXBsYXRlcyhjdHgucHJpc21hKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgbGlzdDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHBhZ2U6IHoubnVtYmVyKCkuZGVmYXVsdCgxKSxcbiAgICAgIGxpbWl0OiB6Lm51bWJlcigpLmRlZmF1bHQoMjApLFxuICAgIH0pLm9wdGlvbmFsKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBzdGF0dXMsIHBhZ2UgPSAxLCBsaW1pdCA9IDIwIH0gPSBpbnB1dCB8fCB7fVxuICAgICAgXG4gICAgICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fVxuICAgICAgaWYgKHN0YXR1cykgd2hlcmUuc3RhdHVzID0gc3RhdHVzXG5cbiAgICAgIGNvbnN0IFt3b3JrZmxvd3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIGVtcGxveWVlOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgZnVsbE5hbWU6IHRydWUsIGpvYlRpdGxlOiB0cnVlLCBkZXBhcnRtZW50OiB0cnVlLCBzdGFydERhdGU6IHRydWUsIHN0YXR1czogdHJ1ZSB9IH0sXG4gICAgICAgICAgICB0YXNrczogeyBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICAgIHNraXA6IChwYWdlIC0gMSkgKiBsaW1pdCxcbiAgICAgICAgICB0YWtlOiBsaW1pdCxcbiAgICAgICAgfSksXG4gICAgICAgIGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmNvdW50KHsgd2hlcmUgfSksXG4gICAgICBdKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB3b3JrZmxvd3MsXG4gICAgICAgIHRvdGFsLFxuICAgICAgICBwYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpLFxuICAgICAgfVxuICAgIH0pLFxuXG4gIGdldEJ5SWQ6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3cgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdXb3JrZmxvdy5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGVtcGxveWVlOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIG1hbmFnZXI6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBmdWxsTmFtZTogdHJ1ZSB9IH0sXG4gICAgICAgICAgICAgIGFwcEFjY291bnRzOiB7IGluY2x1ZGU6IHsgYXBwOiB0cnVlIH0gfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YXNrczogeyBvcmRlckJ5OiB7IHNvcnRPcmRlcjogJ2FzYycgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCF3b3JrZmxvdykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3luY2VkID0gYXdhaXQgc3luY1Byb3Zpc2lvbmluZ1Rhc2tzRm9yV29ya2Zsb3coY3R4LnByaXNtYSwgd29ya2Zsb3cpXG4gICAgICByZXR1cm4gc3luY2VkIHx8IHdvcmtmbG93XG4gICAgfSksXG5cbiAgZ2V0QnlFbXBsb3llZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IGVtcGxveWVlSWQgfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IGVtcGxveWVlSWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHRhc2tzOiB7IG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9IH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgc3RhcnROZXc6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgZW1wbG95ZWVJZDogei5zdHJpbmcoKSxcbiAgICAgIHN0YXJ0RGF0ZTogei5zdHJpbmcoKSxcbiAgICAgIG1hbmFnZXJJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZGVwYXJ0bWVudDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgd29ya0VtYWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbWFpbFByb3ZpZGVyOiB6LmVudW0oWydQRVJTT05BTCcsICdHT09HTEVfV09SS1NQQUNFJywgJ0NVU1RPTSddKSxcbiAgICAgIGppcmFCb2FyZElkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBqaXJhTWFuYWdlcjogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgIGN1c3RvbVRhc2tzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsnQVVUT01BVEVEJywgJ01BTlVBTCddKSxcbiAgICAgICAgYXV0b21hdGlvblR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgYXV0b21hdGlvbkNvbmZpZzogei5yZWNvcmQoei51bmtub3duKCkpLm9wdGlvbmFsKCksXG4gICAgICAgIHNvcnRPcmRlcjogei5udW1iZXIoKSxcbiAgICAgIH0pKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGVtcGxveWVlID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmVtcGxveWVlSWQgfSxcbiAgICAgICAgaW5jbHVkZTogeyBtYW5hZ2VyOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWVtcGxveWVlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ0VtcGxveWVlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGVtcGxveWVlIHdpdGggc3RhcnQgZGF0ZSwgbWFuYWdlciwgYW5kIHdvcmsgZW1haWxcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZShpbnB1dC5zdGFydERhdGUpLFxuICAgICAgICBzdGF0dXM6ICdISVJFRF9QRU5ESU5HX1NUQVJUJyxcbiAgICAgIH1cblxuICAgICAgaWYgKGlucHV0Lm1hbmFnZXJJZCkge1xuICAgICAgICB1cGRhdGVEYXRhLm1hbmFnZXJJZCA9IGlucHV0Lm1hbmFnZXJJZFxuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXQuZGVwYXJ0bWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuZGVwYXJ0bWVudCA9IGlucHV0LmRlcGFydG1lbnQgfHwgbnVsbFxuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXQud29ya0VtYWlsKSB7XG4gICAgICAgIHVwZGF0ZURhdGEud29ya0VtYWlsID0gaW5wdXQud29ya0VtYWlsXG4gICAgICB9XG5cbiAgICAgIGlmIChpbnB1dC5qaXJhQm9hcmRJZCAhPT0gdW5kZWZpbmVkIHx8IGlucHV0LmppcmFNYW5hZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IChlbXBsb3llZS5tZXRhID8/IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgICAgICBpZiAoaW5wdXQuamlyYUJvYXJkSWQpIHtcbiAgICAgICAgICBtZXRhLmppcmFCb2FyZElkID0gaW5wdXQuamlyYUJvYXJkSWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgbWV0YS5qaXJhQm9hcmRJZFxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dC5qaXJhTWFuYWdlcikge1xuICAgICAgICAgIG1ldGEuamlyYU1hbmFnZXIgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQuamlyYU1hbmFnZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZGVsZXRlIG1ldGEuamlyYU1hbmFnZXJcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLm1ldGEgPSBtZXRhXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmVtcGxveWVlSWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIENvbnRpbnVlIHdpdGggd29ya2Zsb3cgY3JlYXRpb25cbiAgICAgIGNvbnN0IHVwZGF0ZWRFbXBsb3llZSA9IGF3YWl0IGN0eC5wcmlzbWEuZW1wbG95ZWUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5lbXBsb3llZUlkIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgbWFuYWdlcjogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGFjdGl2ZSB3b3JrZmxvd1xuICAgICAgY29uc3QgZXhpc3RpbmdXb3JrZmxvdyA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgIGVtcGxveWVlSWQ6IGlucHV0LmVtcGxveWVlSWQsXG4gICAgICAgICAgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5fUFJPR1JFU1MnXSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKGV4aXN0aW5nV29ya2Zsb3cpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdFbXBsb3llZSBhbHJlYWR5IGhhcyBhbiBhY3RpdmUgb25ib2FyZGluZyB3b3JrZmxvdycgfSlcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IHdpdGggdGFza3NcbiAgICAgIGNvbnN0IHRhc2tzID0gaW5wdXQuY3VzdG9tVGFza3MgfHwgKGF3YWl0IGdldERlZmF1bHRPbmJvYXJkaW5nVGFza3MoY3R4LnByaXNtYSwgdXBkYXRlZEVtcGxveWVlIHx8IGVtcGxveWVlKSlcblxuICAgICAgY29uc3Qgd29ya2Zsb3cgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdXb3JrZmxvdy5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZW1wbG95ZWVJZDogaW5wdXQuZW1wbG95ZWVJZCxcbiAgICAgICAgICBzdGF0dXM6ICdJTl9QUk9HUkVTUycsXG4gICAgICAgICAgc3RhcnRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyA3IGRheXNcbiAgICAgICAgICB0YXNrczoge1xuICAgICAgICAgICAgY3JlYXRlOiB0YXNrcy5tYXAoKHRhc2s6IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgbmFtZTogdGFzay5uYW1lLFxuICAgICAgICAgICAgICB0eXBlOiB0YXNrLnR5cGUsXG4gICAgICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgICAgICAgICBhdXRvbWF0aW9uVHlwZTogdGFzay5hdXRvbWF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgYXV0b21hdGlvbkNvbmZpZzogdGFzay5hdXRvbWF0aW9uQ29uZmlnLFxuICAgICAgICAgICAgICBzb3J0T3JkZXI6IHRhc2suc29ydE9yZGVyLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgdGFza3M6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbmQgb25ib2FyZGluZyBlbWFpbCB0byBlbXBsb3llZVxuICAgICAgY29uc3Qgb25ib2FyZGluZ0xpbmsgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L3dlbGNvbWUvJHt3b3JrZmxvdy5hY2Nlc3NUb2tlbn1gXG4gICAgICBjb25zdCBvbmJvYXJkaW5nUmVjaXBpZW50ID0gdXBkYXRlZEVtcGxveWVlPy53b3JrRW1haWwgfHwgdXBkYXRlZEVtcGxveWVlIS5wZXJzb25hbEVtYWlsXG4gICAgICBcbiAgICAgIGF3YWl0IHNlbmRPbmJvYXJkaW5nRW1haWwoe1xuICAgICAgICBlbXBsb3llZUVtYWlsOiBvbmJvYXJkaW5nUmVjaXBpZW50LFxuICAgICAgICBlbXBsb3llZU5hbWU6IHVwZGF0ZWRFbXBsb3llZSEuZnVsbE5hbWUsXG4gICAgICAgIG9uYm9hcmRpbmdMaW5rLFxuICAgICAgICBzdGFydERhdGU6IHVwZGF0ZWRFbXBsb3llZSEuc3RhcnREYXRlIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIG1hbmFnZXJOYW1lOiB1cGRhdGVkRW1wbG95ZWUhLm1hbmFnZXI/LmZ1bGxOYW1lLFxuICAgICAgICBjb21wYW55TmFtZTogKGF3YWl0IGdldE9yZ2FuaXphdGlvbigpKS5uYW1lLFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3JlYXRlQXVkaXRMb2coe1xuICAgICAgICBhY3RvcklkOiAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkLFxuICAgICAgICBhY3Rpb246ICdPTkJPQVJESU5HX1NUQVJURUQnLFxuICAgICAgICByZXNvdXJjZVR5cGU6ICdlbXBsb3llZScsXG4gICAgICAgIHJlc291cmNlSWQ6IGlucHV0LmVtcGxveWVlSWQsXG4gICAgICAgIG1ldGFkYXRhOiB7IHdvcmtmbG93SWQ6IHdvcmtmbG93LmlkIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gd29ya2Zsb3dcbiAgICB9KSxcblxuICBzdGFydDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICBlbXBsb3llZUlkOiB6LnN0cmluZygpLFxuICAgICAgY3VzdG9tVGFza3M6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWydBVVRPTUFURUQnLCAnTUFOVUFMJ10pLFxuICAgICAgICBhdXRvbWF0aW9uVHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBhdXRvbWF0aW9uQ29uZmlnOiB6LnJlY29yZCh6LnVua25vd24oKSkub3B0aW9uYWwoKSxcbiAgICAgICAgc29ydE9yZGVyOiB6Lm51bWJlcigpLFxuICAgICAgfSkpLm9wdGlvbmFsKCksXG4gICAgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgZW1wbG95ZWUgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuZW1wbG95ZWVJZCB9LFxuICAgICAgICBpbmNsdWRlOiB7IG1hbmFnZXI6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghZW1wbG95ZWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnRW1wbG95ZWUgbm90IGZvdW5kJyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoIVsnT0ZGRVJfU0lHTkVEJywgJ0hJUkVEX1BFTkRJTkdfU1RBUlQnXS5pbmNsdWRlcyhlbXBsb3llZS5zdGF0dXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBcbiAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLCBcbiAgICAgICAgICBtZXNzYWdlOiAnRW1wbG95ZWUgbXVzdCBiZSBpbiBPRkZFUl9TSUdORUQgb3IgSElSRURfUEVORElOR19TVEFSVCBzdGF0dXMnIFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgYWN0aXZlIHdvcmtmbG93XG4gICAgICBjb25zdCBleGlzdGluZ1dvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgXG4gICAgICAgICAgZW1wbG95ZWVJZDogaW5wdXQuZW1wbG95ZWVJZCxcbiAgICAgICAgICBzdGF0dXM6IHsgaW46IFsnUEVORElORycsICdJTl9QUk9HUkVTUyddIH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoZXhpc3RpbmdXb3JrZmxvdykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ0VtcGxveWVlIGFscmVhZHkgaGFzIGFuIGFjdGl2ZSBvbmJvYXJkaW5nIHdvcmtmbG93JyB9KVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgd2l0aCB0YXNrc1xuICAgICAgY29uc3QgdGFza3MgPSBpbnB1dC5jdXN0b21UYXNrcyB8fCAoYXdhaXQgZ2V0RGVmYXVsdE9uYm9hcmRpbmdUYXNrcyhjdHgucHJpc21hLCBlbXBsb3llZSkpXG5cbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGVtcGxveWVlSWQ6IGlucHV0LmVtcGxveWVlSWQsXG4gICAgICAgICAgc3RhdHVzOiAnSU5fUFJPR1JFU1MnLFxuICAgICAgICAgIHN0YXJ0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gNyBkYXlzXG4gICAgICAgICAgdGFza3M6IHtcbiAgICAgICAgICAgIGNyZWF0ZTogdGFza3MubWFwKCh0YXNrOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgIG5hbWU6IHRhc2submFtZSxcbiAgICAgICAgICAgICAgdHlwZTogdGFzay50eXBlLFxuICAgICAgICAgICAgICBzdGF0dXM6ICdQRU5ESU5HJyxcbiAgICAgICAgICAgICAgYXV0b21hdGlvblR5cGU6IHRhc2suYXV0b21hdGlvblR5cGUsXG4gICAgICAgICAgICAgIGF1dG9tYXRpb25Db25maWc6IHRhc2suYXV0b21hdGlvbkNvbmZpZyxcbiAgICAgICAgICAgICAgc29ydE9yZGVyOiB0YXNrLnNvcnRPcmRlcixcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7IHRhc2tzOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBVcGRhdGUgZW1wbG95ZWUgc3RhdHVzXG4gICAgICBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5lbXBsb3llZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnSElSRURfUEVORElOR19TVEFSVCcgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFNlbmQgb25ib2FyZGluZyBlbWFpbCB0byBlbXBsb3llZVxuICAgICAgY29uc3Qgb25ib2FyZGluZ0xpbmsgPSBgJHtwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkx9L3dlbGNvbWUvJHt3b3JrZmxvdy5hY2Nlc3NUb2tlbn1gXG4gICAgICBjb25zdCBvbmJvYXJkaW5nUmVjaXBpZW50ID0gZW1wbG95ZWUud29ya0VtYWlsIHx8IGVtcGxveWVlLnBlcnNvbmFsRW1haWxcbiAgICAgIFxuICAgICAgYXdhaXQgc2VuZE9uYm9hcmRpbmdFbWFpbCh7XG4gICAgICAgIGVtcGxveWVlRW1haWw6IG9uYm9hcmRpbmdSZWNpcGllbnQsXG4gICAgICAgIGVtcGxveWVlTmFtZTogZW1wbG95ZWUuZnVsbE5hbWUsXG4gICAgICAgIG9uYm9hcmRpbmdMaW5rLFxuICAgICAgICBzdGFydERhdGU6IGVtcGxveWVlLnN0YXJ0RGF0ZSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICBtYW5hZ2VyTmFtZTogZW1wbG95ZWUubWFuYWdlcj8uZnVsbE5hbWUsXG4gICAgICAgIGNvbXBhbnlOYW1lOiAoYXdhaXQgZ2V0T3JnYW5pemF0aW9uKCkpLm5hbWUsXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICAgIGFjdG9ySWQ6IChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQsXG4gICAgICAgIGFjdGlvbjogJ09OQk9BUkRJTkdfU1RBUlRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ2VtcGxveWVlJyxcbiAgICAgICAgcmVzb3VyY2VJZDogaW5wdXQuZW1wbG95ZWVJZCxcbiAgICAgICAgbWV0YWRhdGE6IHsgd29ya2Zsb3dJZDogd29ya2Zsb3cuaWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB3b3JrZmxvd1xuICAgIH0pLFxuXG4gIHJ1bkF1dG9tYXRlZFRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdGFza0lkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQudGFza0lkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB3b3JrZmxvdzogeyBpbmNsdWRlOiB7IGVtcGxveWVlOiB0cnVlIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdGFzaykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRhc2sudHlwZSAhPT0gJ0FVVE9NQVRFRCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdUaGlzIGlzIG5vdCBhbiBhdXRvbWF0ZWQgdGFzaycgfSlcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayBhcyBpbiBwcm9ncmVzc1xuICAgICAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdGFzay5pZCB9LFxuICAgICAgICBkYXRhOiB7IFxuICAgICAgICAgIHN0YXR1czogJ0lOX1BST0dSRVNTJyxcbiAgICAgICAgICBhdHRlbXB0czogdGFzay5hdHRlbXB0cyArIDEsXG4gICAgICAgICAgbGFzdEF0dGVtcHRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IGVtcGxveWVlID0gdGFzay53b3JrZmxvdy5lbXBsb3llZVxuXG4gICAgICB0cnkge1xuICAgICAgICBsZXQgcmVzdWx0OiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH1cblxuICAgICAgICBzd2l0Y2ggKHRhc2suYXV0b21hdGlvblR5cGUpIHtcbiAgICAgICAgICBjYXNlICdwcm92aXNpb25fZ29vZ2xlJzpcbiAgICAgICAgICAgIGlmICgodGFzay5hdXRvbWF0aW9uQ29uZmlnIGFzIGFueSk/LmFwcElkKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHByb3Zpc2lvbkVtcGxveWVlSW5BcHBCeUlkKGVtcGxveWVlLCAodGFzay5hdXRvbWF0aW9uQ29uZmlnIGFzIGFueSkuYXBwSWQsIChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBwcm92aXNpb25FbXBsb3llZUluQXBwKGVtcGxveWVlLCAnR09PR0xFX1dPUktTUEFDRScsIChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3Byb3Zpc2lvbl9zbGFjayc6XG4gICAgICAgICAgICBpZiAoKHRhc2suYXV0b21hdGlvbkNvbmZpZyBhcyBhbnkpPy5hcHBJZCkge1xuICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZChlbXBsb3llZSwgKHRhc2suYXV0b21hdGlvbkNvbmZpZyBhcyBhbnkpLmFwcElkLCAoY3R4LnVzZXIgYXMgeyBpZDogc3RyaW5nIH0pLmlkKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcHJvdmlzaW9uRW1wbG95ZWVJbkFwcChlbXBsb3llZSwgJ1NMQUNLJywgKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBHRU5FUklDX1BST1ZJU0lPTl9BVVRPTUFUSU9OOiB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSAodGFzay5hdXRvbWF0aW9uQ29uZmlnIGFzIGFueSkgPz8ge31cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmFwcElkID09PSAnc3RyaW5nJyAmJiBjb25maWcuYXBwSWQpIHtcbiAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcHJvdmlzaW9uRW1wbG95ZWVJbkFwcEJ5SWQoZW1wbG95ZWUsIGNvbmZpZy5hcHBJZCwgKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZClcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcFR5cGUgPSBjb25maWcuYXBwVHlwZSBhcyBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmICghYXBwVHlwZSkge1xuICAgICAgICAgICAgICByZXN1bHQgPSB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ01pc3NpbmcgYXV0b21hdGlvbkNvbmZpZy5hcHBJZC9hcHBUeXBlIGZvciB0aGlzIHRhc2snIH1cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcCA9IGF3YWl0IHJlc29sdmVJbnRlZ3JhdGlvbkFwcChjdHgucHJpc21hLCBhcHBUeXBlKVxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcHJvdmlzaW9uRW1wbG95ZWVJbkFwcChlbXBsb3llZSwgYXBwLnR5cGUsIChjdHgudXNlciBhcyB7IGlkOiBzdHJpbmcgfSkuaWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmVzdWx0ID0geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbmtub3duIGF1dG9tYXRpb24gdHlwZTogJHt0YXNrLmF1dG9tYXRpb25UeXBlfWAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLmlkIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3RhdHVzOiByZXN1bHQuc3VjY2Vzc1xuICAgICAgICAgICAgICA/ICdTVUNDRVNTJ1xuICAgICAgICAgICAgICA6IHJlc3VsdC5lcnJvcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbm8gYWN0aXZlIGNvbm5lY3Rpb24nKVxuICAgICAgICAgICAgICAgID8gJ1BFTkRJTkcnXG4gICAgICAgICAgICAgICAgOiAnRkFJTEVEJyxcbiAgICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IHJlc3VsdC5zdWNjZXNzXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHJlc3VsdC5lcnJvcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbm8gYWN0aXZlIGNvbm5lY3Rpb24nKVxuICAgICAgICAgICAgICAgID8gJ0FwcGxpY2F0aW9uIG5vdCBjb25uZWN0ZWQuIENvbm5lY3QgaXQgaW4gU2V0dGluZ3Mg4oaSIEFwcGxpY2F0aW9ucywgdGhlbiBydW4gYWdhaW4gKG9yIHNraXApLidcbiAgICAgICAgICAgICAgICA6IHJlc3VsdC5lcnJvcixcbiAgICAgICAgICAgIGNvbXBsZXRlZEF0OiByZXN1bHQuc3VjY2VzcyA/IG5ldyBEYXRlKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICBhd2FpdCBjcmVhdGVBdWRpdExvZyh7XG4gICAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgICBhY3Rpb246ICdPTkJPQVJESU5HX1RBU0tfQ09NUExFVEVEJyxcbiAgICAgICAgICByZXNvdXJjZVR5cGU6ICdvbmJvYXJkaW5nX3Rhc2snLFxuICAgICAgICAgIHJlc291cmNlSWQ6IHRhc2suaWQsXG4gICAgICAgICAgbWV0YWRhdGE6IHsgXG4gICAgICAgICAgICB0YXNrTmFtZTogdGFzay5uYW1lLFxuICAgICAgICAgICAgYXV0b21hdGlvblR5cGU6IHRhc2suYXV0b21hdGlvblR5cGUsXG4gICAgICAgICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgICAgICAgIGVycm9yOiByZXN1bHQuZXJyb3IsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBDaGVjayBpZiBhbGwgdGFza3MgYXJlIGNvbXBsZXRlXG4gICAgICAgIGF3YWl0IGNoZWNrQW5kQ29tcGxldGVXb3JrZmxvdyhjdHgucHJpc21hLCB0YXNrLndvcmtmbG93SWQpXG5cbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsIGVycm9yOiByZXN1bHQuZXJyb3IgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLmlkIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgc3RhdHVzOiAnRkFJTEVEJyxcbiAgICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9KSxcblxuICBjb21wbGV0ZU1hbnVhbFRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdGFza0lkOiB6LnN0cmluZygpLFxuICAgICAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nVGFzay5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LnRhc2tJZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCF0YXNrKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJyB9KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB0YXNrLmlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBzdGF0dXM6ICdTVUNDRVNTJyxcbiAgICAgICAgICBzdGF0dXNNZXNzYWdlOiBpbnB1dC5ub3RlcyxcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBjb21wbGV0ZWRCeTogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgICAgYWN0b3JJZDogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgYWN0aW9uOiAnT05CT0FSRElOR19UQVNLX0NPTVBMRVRFRCcsXG4gICAgICAgIHJlc291cmNlVHlwZTogJ29uYm9hcmRpbmdfdGFzaycsXG4gICAgICAgIHJlc291cmNlSWQ6IHRhc2suaWQsXG4gICAgICAgIG1ldGFkYXRhOiB7IHRhc2tOYW1lOiB0YXNrLm5hbWUsIG1hbnVhbDogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgLy8gQ2hlY2sgaWYgYWxsIHRhc2tzIGFyZSBjb21wbGV0ZVxuICAgICAgYXdhaXQgY2hlY2tBbmRDb21wbGV0ZVdvcmtmbG93KGN0eC5wcmlzbWEsIHRhc2sud29ya2Zsb3dJZClcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgc2tpcFRhc2s6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdGFza0lkOiB6LnN0cmluZygpLFxuICAgICAgcmVhc29uOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdUYXNrLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQudGFza0lkIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1Rhc2sudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRhc2suaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0YXR1czogJ1NLSVBQRUQnLFxuICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IGlucHV0LnJlYXNvbixcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBjb21wbGV0ZWRCeTogKGN0eC51c2VyIGFzIHsgaWQ6IHN0cmluZyB9KS5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIENoZWNrIGlmIGFsbCB0YXNrcyBhcmUgY29tcGxldGVcbiAgICAgIGF3YWl0IGNoZWNrQW5kQ29tcGxldGVXb3JrZmxvdyhjdHgucHJpc21hLCB0YXNrLndvcmtmbG93SWQpXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIC8vIFB1YmxpYyBlbmRwb2ludCBmb3IgZW1wbG95ZWUgc2VsZi1zZXJ2aWNlIG9uYm9hcmRpbmdcbiAgZ2V0QnlUb2tlbjogcHVibGljUHJvY2VkdXJlXG4gICAgLmlucHV0KHouc3RyaW5nKCkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQ6IHRva2VuIH0pID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93ID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGFjY2Vzc1Rva2VuOiB0b2tlbiB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZW1wbG95ZWU6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgZnVsbE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIHBlcnNvbmFsRW1haWw6IHRydWUsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgam9iVGl0bGU6IHRydWUsXG4gICAgICAgICAgICAgIGRlcGFydG1lbnQ6IHRydWUsXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBlbXBsb3ltZW50VHlwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgLy8gUGVyc29uYWwgRGV0YWlsc1xuICAgICAgICAgICAgICBnZW5kZXI6IHRydWUsXG4gICAgICAgICAgICAgIG1hcml0YWxTdGF0dXM6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGVPZkJpcnRoOiB0cnVlLFxuICAgICAgICAgICAgICBuYXRpb25hbGl0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgdGF4SWQ6IHRydWUsXG4gICAgICAgICAgICAgIC8vIEFkZHJlc3MgJiBDb250YWN0XG4gICAgICAgICAgICAgIGFkZHJlc3NTdHJlZXQ6IHRydWUsXG4gICAgICAgICAgICAgIGFkZHJlc3NDaXR5OiB0cnVlLFxuICAgICAgICAgICAgICBhZGRyZXNzU3RhdGU6IHRydWUsXG4gICAgICAgICAgICAgIGFkZHJlc3NQb3N0YWw6IHRydWUsXG4gICAgICAgICAgICAgIGFkZHJlc3NDb3VudHJ5OiB0cnVlLFxuICAgICAgICAgICAgICBwaG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgLy8gRW1lcmdlbmN5IENvbnRhY3RcbiAgICAgICAgICAgICAgZW1lcmdlbmN5Q29udGFjdE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtZXJnZW5jeUNvbnRhY3RSZWxhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgZW1lcmdlbmN5Q29udGFjdFBob25lOiB0cnVlLFxuICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VVcmw6IHRydWUsXG4gICAgICAgICAgICAgIC8vIEJhbmsgRGV0YWlsc1xuICAgICAgICAgICAgICBiYW5rTmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgYWNjb3VudE5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGFjY291bnROdW1iZXI6IHRydWUsXG4gICAgICAgICAgICAgIGFjY291bnRTb3J0Q29kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbWFuYWdlcjogeyBzZWxlY3Q6IHsgZnVsbE5hbWU6IHRydWUgfSB9LFxuICAgICAgICAgICAgICAvLyBGb3JtZXIgRW1wbG95bWVudCAoZm9yIGZ1bGwtdGltZSBlbXBsb3llZXMpXG4gICAgICAgICAgICAgIGZvcm1lck9mZmVyTGV0dGVyVXJsOiB0cnVlLFxuICAgICAgICAgICAgICBmb3JtZXJMYXN0UGF5c2xpcFVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgZm9ybWVyUmVzaWduYXRpb25MZXR0ZXJVcmw6IHRydWUsXG4gICAgICAgICAgICAgIGZvcm1lclJlc2lnbmF0aW9uQ29uZmlybVVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgZm9ybWVySHJDb250YWN0TmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZm9ybWVySHJDb250YWN0UGhvbmU6IHRydWUsXG4gICAgICAgICAgICAgIGZvcm1lckhyQ29udGFjdEVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgICBmb3JtZXJDb21wYW55QWRkcmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgZm9ybWVyRW1wbG95bWVudFN1Ym1pdHRlZEF0OiB0cnVlLFxuICAgICAgICAgICAgICAvLyBQZXJzb25hbGl0eSAmIFZhbHVlc1xuICAgICAgICAgICAgICBsaWZlVmFsdWVzOiB0cnVlLFxuICAgICAgICAgICAgICBrbm93QWJvdXRNZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbWJ0aVR5cGU6IHRydWUsXG4gICAgICAgICAgICAgIG1idGlJbWFnZVVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgYmlnRml2ZVVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgYmlnRml2ZUltYWdlVXJsOiB0cnVlLFxuICAgICAgICAgICAgICBwZXJzb25hbGl0eUNvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgcGVyc29uYWxpdHlDb21wbGV0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0YXNrczoge1xuICAgICAgICAgICAgd2hlcmU6IHsgdHlwZTogJ01BTlVBTCcgfSxcbiAgICAgICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlLCBzdGF0dXM6IHRydWUgfSxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgc29ydE9yZGVyOiAnYXNjJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXdvcmtmbG93KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ0ludmFsaWQgb3IgZXhwaXJlZCBsaW5rJyB9KVxuICAgICAgfVxuXG4gICAgICBpZiAod29ya2Zsb3cuYWNjZXNzVG9rZW5FeHBpcmVzQXQgJiYgd29ya2Zsb3cuYWNjZXNzVG9rZW5FeHBpcmVzQXQgPCBuZXcgRGF0ZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJywgbWVzc2FnZTogJ1RoaXMgbGluayBoYXMgZXhwaXJlZCcgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHdvcmtmbG93XG4gICAgfSksXG5cbiAgdXBkYXRlRW1wbG95ZWVJbmZvOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdG9rZW46IHouc3RyaW5nKCksXG4gICAgICAvLyBQZXJzb25hbCBEZXRhaWxzXG4gICAgICBnZW5kZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIG1hcml0YWxTdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGRhdGVPZkJpcnRoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBuYXRpb25hbGl0eTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgdGF4SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIC8vIEFkZHJlc3MgJiBDb250YWN0XG4gICAgICBhZGRyZXNzU3RyZWV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhZGRyZXNzQ2l0eTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYWRkcmVzc1N0YXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhZGRyZXNzUG9zdGFsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhZGRyZXNzQ291bnRyeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcGhvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIC8vIEVtZXJnZW5jeSBDb250YWN0XG4gICAgICBlbWVyZ2VuY3lDb250YWN0TmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZW1lcmdlbmN5Q29udGFjdFJlbGF0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBlbWVyZ2VuY3lDb250YWN0UGhvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIC8vIEJhbmsgRGV0YWlsc1xuICAgICAgYmFua05hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGFjY291bnROYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhY2NvdW50TnVtYmVyOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhY2NvdW50U29ydENvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHByb2ZpbGVJbWFnZVVybDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgLy8gRm9ybWVyIEVtcGxveW1lbnQgKGZvciBmdWxsLXRpbWUgZW1wbG95ZWVzKVxuICAgICAgZm9ybWVyT2ZmZXJMZXR0ZXJVcmw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGZvcm1lckxhc3RQYXlzbGlwVXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBmb3JtZXJSZXNpZ25hdGlvbkxldHRlclVybDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZm9ybWVyUmVzaWduYXRpb25Db25maXJtVXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBmb3JtZXJIckNvbnRhY3ROYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBmb3JtZXJIckNvbnRhY3RQaG9uZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgZm9ybWVySHJDb250YWN0RW1haWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGZvcm1lckNvbXBhbnlBZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAvLyBQZXJzb25hbGl0eSAmIFZhbHVlc1xuICAgICAgbGlmZVZhbHVlczogei5vYmplY3Qoe1xuICAgICAgICBtb3N0SW1wb3J0YW50OiB6LnN0cmluZygpLFxuICAgICAgICBpbXBvcnRhbnQ6IHouc3RyaW5nKCksXG4gICAgICAgIHNvbWV3aGF0SW1wb3J0YW50OiB6LnN0cmluZygpLFxuICAgICAgICBub3RJbXBvcnRhbnQ6IHouc3RyaW5nKCksXG4gICAgICB9KS5vcHRpb25hbCgpLFxuICAgICAga25vd0Fib3V0TWU6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBxdWVzdGlvbjogei5zdHJpbmcoKSxcbiAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICAgICAgfSkpLm9wdGlvbmFsKCksXG4gICAgICAvLyBNQlRJXG4gICAgICBtYnRpVHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgbWJ0aUltYWdlVXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAvLyBCaWcgRml2ZVxuICAgICAgYmlnRml2ZVVybDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYmlnRml2ZUltYWdlVXJsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwZXJzb25hbGl0eUNvbXBsZXRlZDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHRva2VuLFxuICAgICAgICBwcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgIHBlcnNvbmFsaXR5Q29tcGxldGVkLFxuICAgICAgICBkYXRlT2ZCaXJ0aCxcbiAgICAgICAgZm9ybWVyT2ZmZXJMZXR0ZXJVcmwsXG4gICAgICAgIGZvcm1lckxhc3RQYXlzbGlwVXJsLFxuICAgICAgICBmb3JtZXJSZXNpZ25hdGlvbkxldHRlclVybCxcbiAgICAgICAgZm9ybWVyUmVzaWduYXRpb25Db25maXJtVXJsLFxuICAgICAgICBmb3JtZXJIckNvbnRhY3ROYW1lLFxuICAgICAgICBmb3JtZXJIckNvbnRhY3RQaG9uZSxcbiAgICAgICAgZm9ybWVySHJDb250YWN0RW1haWwsXG4gICAgICAgIGZvcm1lckNvbXBhbnlBZGRyZXNzLFxuICAgICAgICBtYnRpVHlwZSxcbiAgICAgICAgbWJ0aUltYWdlVXJsLFxuICAgICAgICBiaWdGaXZlVXJsLFxuICAgICAgICBiaWdGaXZlSW1hZ2VVcmwsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH0gPSBpbnB1dFxuXG4gICAgICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IGN0eC5wcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBhY2Nlc3NUb2tlbjogdG9rZW4gfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghd29ya2Zsb3cpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIGlmICh3b3JrZmxvdy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCAmJiB3b3JrZmxvdy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA8IG5ldyBEYXRlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnLCBtZXNzYWdlOiAnVGhpcyBsaW5rIGhhcyBleHBpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVEYXRhOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHsgLi4uZGF0YSB9XG5cbiAgICAgIC8vIEhhbmRsZSBwcm9maWxlIGltYWdlIFVSTFxuICAgICAgaWYgKHByb2ZpbGVJbWFnZVVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWQgPSBwcm9maWxlSW1hZ2VVcmwudHJpbSgpXG4gICAgICAgIHVwZGF0ZURhdGEucHJvZmlsZUltYWdlVXJsID0gdHJpbW1lZCA/IHRyaW1tZWQgOiBudWxsXG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBkYXRlIG9mIGJpcnRoIGNvbnZlcnNpb25cbiAgICAgIGlmIChkYXRlT2ZCaXJ0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuZGF0ZU9mQmlydGggPSBkYXRlT2ZCaXJ0aCA/IG5ldyBEYXRlKGRhdGVPZkJpcnRoKSA6IG51bGxcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGZvcm1lciBlbXBsb3ltZW50IGZpZWxkc1xuICAgICAgaWYgKGZvcm1lck9mZmVyTGV0dGVyVXJsICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZm9ybWVyT2ZmZXJMZXR0ZXJVcmwgPSBmb3JtZXJPZmZlckxldHRlclVybCB8fCBudWxsXG4gICAgICBpZiAoZm9ybWVyTGFzdFBheXNsaXBVcmwgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5mb3JtZXJMYXN0UGF5c2xpcFVybCA9IGZvcm1lckxhc3RQYXlzbGlwVXJsIHx8IG51bGxcbiAgICAgIGlmIChmb3JtZXJSZXNpZ25hdGlvbkxldHRlclVybCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmZvcm1lclJlc2lnbmF0aW9uTGV0dGVyVXJsID0gZm9ybWVyUmVzaWduYXRpb25MZXR0ZXJVcmwgfHwgbnVsbFxuICAgICAgaWYgKGZvcm1lclJlc2lnbmF0aW9uQ29uZmlybVVybCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmZvcm1lclJlc2lnbmF0aW9uQ29uZmlybVVybCA9IGZvcm1lclJlc2lnbmF0aW9uQ29uZmlybVVybCB8fCBudWxsXG4gICAgICBpZiAoZm9ybWVySHJDb250YWN0TmFtZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmZvcm1lckhyQ29udGFjdE5hbWUgPSBmb3JtZXJIckNvbnRhY3ROYW1lIHx8IG51bGxcbiAgICAgIGlmIChmb3JtZXJIckNvbnRhY3RQaG9uZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmZvcm1lckhyQ29udGFjdFBob25lID0gZm9ybWVySHJDb250YWN0UGhvbmUgfHwgbnVsbFxuICAgICAgaWYgKGZvcm1lckhyQ29udGFjdEVtYWlsICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZm9ybWVySHJDb250YWN0RW1haWwgPSBmb3JtZXJIckNvbnRhY3RFbWFpbCB8fCBudWxsXG4gICAgICBpZiAoZm9ybWVyQ29tcGFueUFkZHJlc3MgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5mb3JtZXJDb21wYW55QWRkcmVzcyA9IGZvcm1lckNvbXBhbnlBZGRyZXNzIHx8IG51bGxcblxuICAgICAgLy8gVHJhY2sgd2hlbiBmb3JtZXIgZW1wbG95bWVudCBkYXRhIGlzIGZpcnN0IHN1Ym1pdHRlZFxuICAgICAgY29uc3QgaGFzRm9ybWVyRW1wbG95bWVudERhdGEgPSBmb3JtZXJPZmZlckxldHRlclVybCB8fCBmb3JtZXJMYXN0UGF5c2xpcFVybCB8fFxuICAgICAgICBmb3JtZXJSZXNpZ25hdGlvbkxldHRlclVybCB8fCBmb3JtZXJSZXNpZ25hdGlvbkNvbmZpcm1VcmwgfHxcbiAgICAgICAgZm9ybWVySHJDb250YWN0TmFtZSB8fCBmb3JtZXJIckNvbnRhY3RQaG9uZSB8fFxuICAgICAgICBmb3JtZXJIckNvbnRhY3RFbWFpbCB8fCBmb3JtZXJDb21wYW55QWRkcmVzc1xuXG4gICAgICBpZiAoaGFzRm9ybWVyRW1wbG95bWVudERhdGEpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5mb3JtZXJFbXBsb3ltZW50U3VibWl0dGVkQXQgPSBuZXcgRGF0ZSgpXG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBNQlRJIGFuZCBCaWcgRml2ZSBmaWVsZHNcbiAgICAgIGlmIChtYnRpVHlwZSAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLm1idGlUeXBlID0gbWJ0aVR5cGUgfHwgbnVsbFxuICAgICAgaWYgKG1idGlJbWFnZVVybCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLm1idGlJbWFnZVVybCA9IG1idGlJbWFnZVVybCB8fCBudWxsXG4gICAgICBpZiAoYmlnRml2ZVVybCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLmJpZ0ZpdmVVcmwgPSBiaWdGaXZlVXJsIHx8IG51bGxcbiAgICAgIGlmIChiaWdGaXZlSW1hZ2VVcmwgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5iaWdGaXZlSW1hZ2VVcmwgPSBiaWdGaXZlSW1hZ2VVcmwgfHwgbnVsbFxuXG4gICAgICAvLyBIYW5kbGUgcGVyc29uYWxpdHkgY29tcGxldGlvblxuICAgICAgaWYgKHBlcnNvbmFsaXR5Q29tcGxldGVkKSB7XG4gICAgICAgIHVwZGF0ZURhdGEucGVyc29uYWxpdHlDb21wbGV0ZWQgPSB0cnVlXG4gICAgICAgIHVwZGF0ZURhdGEucGVyc29uYWxpdHlDb21wbGV0ZWRBdCA9IG5ldyBEYXRlKClcbiAgICAgIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3cuZW1wbG95ZWVJZCB9LFxuICAgICAgICBkYXRhOiB1cGRhdGVEYXRhLFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIEdvb2dsZSBTaGVldHMtYmFja2VkIG9uYm9hcmRpbmcgZGFzaGJvYXJkXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8vIEZldGNoIG9uYm9hcmRpbmcgcm9zdGVyIGZyb20gR29vZ2xlIFNoZWV0XG4gIGdldFNoZWV0Um9zdGVyOiBockFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KTogUHJvbWlzZTx7IHJvc3RlcjogT25ib2FyZGluZ1Jvc3RlclJvd1tdOyBlcnJvcj86IHN0cmluZzsgZmV0Y2hlZEF0OiBzdHJpbmcgfT4gPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHNoZWV0IElEIGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdTZXR0aW5ncy5maW5kRmlyc3QoKVxuICAgICAgICBjb25zdCBzaGVldElkID0gc2V0dGluZ3M/LnNoZWV0SWQgfHwgdW5kZWZpbmVkXG5cbiAgICAgICAgY29uc3Qgc2hlZXRzU2VydmljZSA9IGdldEdvb2dsZVNoZWV0c1NlcnZpY2Uoc2hlZXRJZCA/IHsgc3ByZWFkc2hlZXRJZDogc2hlZXRJZCB9IDogdW5kZWZpbmVkKVxuICAgICAgICBjb25zdCByb3N0ZXIgPSBhd2FpdCBzaGVldHNTZXJ2aWNlLmZldGNoT25ib2FyZGluZ1Jvc3RlcigpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcm9zdGVyLFxuICAgICAgICAgIGZldGNoZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggb25ib2FyZGluZyByb3N0ZXIgZnJvbSBHb29nbGUgU2hlZXQ6JywgZXJyb3IpXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcm9zdGVyOiBbXSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGZldGNoIHJvc3RlciBmcm9tIEdvb2dsZSBTaGVldCcsXG4gICAgICAgICAgZmV0Y2hlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcblxuICAvLyBHZXQgc3RhdGljIHRhc2sgY2F0YWxvZ1xuICBnZXRUYXNrQ2F0YWxvZzogaHJBZG1pblByb2NlZHVyZVxuICAgIC5xdWVyeSgoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YXNrczogT05CT0FSRElOR19UQVNLUyxcbiAgICAgICAgc2VjdGlvbnM6IFRBU0tfU0VDVElPTlMsXG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gR2V0IGVtcGxveWVlIG9uYm9hcmRpbmcgZGF0YSBmcm9tIEdvb2dsZSBTaGVldCBieSBlbXBsb3llZSBJRFxuICBnZXRFbXBsb3llZVNoZWV0RGF0YTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHZpc0lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIGVtYWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIGZ1bGxOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSk6IFByb21pc2U8eyBkYXRhOiBPbmJvYXJkaW5nUm9zdGVyUm93IHwgbnVsbDsgZXJyb3I/OiBzdHJpbmcgfT4gPT4ge1xuICAgICAgaWYgKCFpbnB1dC52aXNJZCAmJiAhaW5wdXQuZW1haWwgJiYgIWlucHV0LmZ1bGxOYW1lKSB7XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGVycm9yOiAnRWl0aGVyIHZpc0lkLCBlbWFpbCwgb3IgZnVsbE5hbWUgaXMgcmVxdWlyZWQnIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gR2V0IHNoZWV0IElEIGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdTZXR0aW5ncy5maW5kRmlyc3QoKVxuICAgICAgICBjb25zdCBzaGVldElkID0gc2V0dGluZ3M/LnNoZWV0SWQgfHwgdW5kZWZpbmVkXG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tnZXRFbXBsb3llZVNoZWV0RGF0YV0gVXNpbmcgc2hlZXQgSUQ6Jywgc2hlZXRJZCB8fCAnREVGQVVMVCAoZW52KScpXG4gICAgICAgIGNvbnNvbGUubG9nKCdbZ2V0RW1wbG95ZWVTaGVldERhdGFdIFNlYXJjaGluZyBmb3I6JywgeyBmdWxsTmFtZTogaW5wdXQuZnVsbE5hbWUsIGVtYWlsOiBpbnB1dC5lbWFpbCwgdmlzSWQ6IGlucHV0LnZpc0lkIH0pXG5cbiAgICAgICAgY29uc3Qgc2hlZXRzU2VydmljZSA9IGdldEdvb2dsZVNoZWV0c1NlcnZpY2Uoc2hlZXRJZCA/IHsgc3ByZWFkc2hlZXRJZDogc2hlZXRJZCB9IDogdW5kZWZpbmVkKVxuICAgICAgICBjb25zdCByb3N0ZXIgPSBhd2FpdCBzaGVldHNTZXJ2aWNlLmZldGNoT25ib2FyZGluZ1Jvc3RlcigpXG5cbiAgICAgICAgLy8gRGVidWc6IGxvZyB3aGF0J3MgaW4gdGhlIHNoZWV0XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZ2V0RW1wbG95ZWVTaGVldERhdGFdIFNoZWV0IHJldHVybmVkJywgcm9zdGVyLmxlbmd0aCwgJ3Jvd3MnKVxuICAgICAgICBpZiAocm9zdGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW2dldEVtcGxveWVlU2hlZXREYXRhXSBSb3dzOicsIHJvc3Rlci5tYXAociA9PiAoeyB1c2VySWQ6IHIudXNlcklkLCBuYW1lOiByLm5hbWUsIGNvbXBsZXRpb25QZXJjZW50OiByLmNvbXBsZXRpb25QZXJjZW50IH0pKSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIGVtcGxveWVlIGJ5IHZpc0lkLCBmdWxsTmFtZSwgb3IgZW1haWxcbiAgICAgICAgY29uc3QgZW1wbG95ZWUgPSByb3N0ZXIuZmluZCgocm93KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gcm93Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKClcbiAgICAgICAgICBjb25zdCBpbnB1dE5hbWUgPSBpbnB1dC5mdWxsTmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCkgfHwgJydcblxuICAgICAgICAgIC8vIE1hdGNoIGJ5IHZpc0lkICh1c2VySWQgY29sdW1uIGluIHNoZWV0KVxuICAgICAgICAgIGlmIChpbnB1dC52aXNJZCAmJiByb3cudXNlcklkID09PSBpbnB1dC52aXNJZCkgcmV0dXJuIHRydWVcblxuICAgICAgICAgIC8vIE1hdGNoIGJ5IGZ1bGwgbmFtZSAtIGV4YWN0IG1hdGNoXG4gICAgICAgICAgaWYgKGlucHV0TmFtZSAmJiBzaGVldE5hbWUgPT09IGlucHV0TmFtZSkgcmV0dXJuIHRydWVcblxuICAgICAgICAgIC8vIE1hdGNoIGJ5IGZ1bGwgbmFtZSAtIHNoZWV0IG5hbWUgaXMgY29udGFpbmVkIGluIGlucHV0IChlLmcuLCBzaGVldCBoYXMgXCJHb29keVwiLCBkYiBoYXMgXCJHb29keSBBZGVsZWtlXCIpXG4gICAgICAgICAgaWYgKGlucHV0TmFtZSAmJiBpbnB1dE5hbWUuaW5jbHVkZXMoc2hlZXROYW1lKSAmJiBzaGVldE5hbWUubGVuZ3RoID4gMikgcmV0dXJuIHRydWVcblxuICAgICAgICAgIC8vIE1hdGNoIGJ5IGZ1bGwgbmFtZSAtIGlucHV0IGlzIGNvbnRhaW5lZCBpbiBzaGVldCBuYW1lIChlLmcuLCBkYiBoYXMgXCJHb29keVwiLCBzaGVldCBoYXMgXCJHb29keSBBZGVsZWtlXCIpXG4gICAgICAgICAgaWYgKGlucHV0TmFtZSAmJiBzaGVldE5hbWUuaW5jbHVkZXMoaW5wdXROYW1lKSAmJiBpbnB1dE5hbWUubGVuZ3RoID4gMikgcmV0dXJuIHRydWVcblxuICAgICAgICAgIC8vIE1hdGNoIGJ5IGZpcnN0IG5hbWUgKGZpcnN0IHdvcmQgb2YgZnVsbCBuYW1lKVxuICAgICAgICAgIGlmIChpbnB1dE5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0Rmlyc3ROYW1lID0gaW5wdXROYW1lLnNwbGl0KCcgJylbMF1cbiAgICAgICAgICAgIGNvbnN0IHNoZWV0Rmlyc3ROYW1lID0gc2hlZXROYW1lLnNwbGl0KCcgJylbMF1cbiAgICAgICAgICAgIGlmIChpbnB1dEZpcnN0TmFtZSA9PT0gc2hlZXRGaXJzdE5hbWUgJiYgaW5wdXRGaXJzdE5hbWUubGVuZ3RoID4gMikgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBGYWxsYmFjazogbWF0Y2ggZW1haWwgcHJlZml4IGluIG5hbWUgY29sdW1uXG4gICAgICAgICAgaWYgKGlucHV0LmVtYWlsICYmIHNoZWV0TmFtZS5pbmNsdWRlcyhpbnB1dC5lbWFpbC50b0xvd2VyQ2FzZSgpLnNwbGl0KCdAJylbMF0pKSByZXR1cm4gdHJ1ZVxuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGVtcGxveWVlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tnZXRFbXBsb3llZVNoZWV0RGF0YV0gRm91bmQgbWF0Y2g6JywgZW1wbG95ZWUubmFtZSwgJ2NvbXBsZXRpb246JywgZW1wbG95ZWUuY29tcGxldGlvblBlcmNlbnQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tnZXRFbXBsb3llZVNoZWV0RGF0YV0gTm8gbWF0Y2ggZm91bmQgZm9yOicsIGlucHV0LmZ1bGxOYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogZW1wbG95ZWUgfHwgbnVsbCB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZW1wbG95ZWUgc2hlZXQgZGF0YTonLCBlcnJvcilcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggZnJvbSBHb29nbGUgU2hlZXQnLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIE9uYm9hcmRpbmcgU2V0dGluZ3NcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLy8gR2V0IG9uYm9hcmRpbmcgc2V0dGluZ3NcbiAgZ2V0U2V0dGluZ3M6IGhyQWRtaW5Qcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBsZXQgc2V0dGluZ3MgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdTZXR0aW5ncy5maW5kRmlyc3QoKVxuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgc2V0dGluZ3MgaWYgbm9uZSBleGlzdFxuICAgIGlmICghc2V0dGluZ3MpIHtcbiAgICAgIHNldHRpbmdzID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nU2V0dGluZ3MuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNoZWV0SWQ6IG51bGwsXG4gICAgICAgICAgc2hlZXRSb3N0ZXJSYW5nZTogJ1N0YXR1cyFBMjpKJyxcbiAgICAgICAgICBzaGVldFJlZnJlc2hNczogMzAwMDAsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBzZXR0aW5nc1xuICB9KSxcblxuICAvLyBVcGRhdGUgb25ib2FyZGluZyBzZXR0aW5nc1xuICB1cGRhdGVTZXR0aW5nczogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgc2hlZXRJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIHNoZWV0Um9zdGVyUmFuZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgc2hlZXRSZWZyZXNoTXM6IHoubnVtYmVyKCkubWluKDUwMDApLm1heCgzMDAwMDApLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBsZXQgc2V0dGluZ3MgPSBhd2FpdCBjdHgucHJpc21hLm9uYm9hcmRpbmdTZXR0aW5ncy5maW5kRmlyc3QoKVxuXG4gICAgICBpZiAoIXNldHRpbmdzKSB7XG4gICAgICAgIHNldHRpbmdzID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nU2V0dGluZ3MuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzaGVldElkOiBpbnB1dC5zaGVldElkID8/IG51bGwsXG4gICAgICAgICAgICBzaGVldFJvc3RlclJhbmdlOiBpbnB1dC5zaGVldFJvc3RlclJhbmdlID8/ICdTdGF0dXMhQTI6SicsXG4gICAgICAgICAgICBzaGVldFJlZnJlc2hNczogaW5wdXQuc2hlZXRSZWZyZXNoTXMgPz8gMzAwMDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldHRpbmdzID0gYXdhaXQgY3R4LnByaXNtYS5vbmJvYXJkaW5nU2V0dGluZ3MudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogc2V0dGluZ3MuaWQgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAuLi4oaW5wdXQuc2hlZXRJZCAhPT0gdW5kZWZpbmVkICYmIHsgc2hlZXRJZDogaW5wdXQuc2hlZXRJZCB9KSxcbiAgICAgICAgICAgIC4uLihpbnB1dC5zaGVldFJvc3RlclJhbmdlICYmIHsgc2hlZXRSb3N0ZXJSYW5nZTogaW5wdXQuc2hlZXRSb3N0ZXJSYW5nZSB9KSxcbiAgICAgICAgICAgIC4uLihpbnB1dC5zaGVldFJlZnJlc2hNcyAmJiB7IHNoZWV0UmVmcmVzaE1zOiBpbnB1dC5zaGVldFJlZnJlc2hNcyB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2V0dGluZ3NcbiAgICB9KSxcblxuICAvLyBUZXN0IEdvb2dsZSBTaGVldCBjb25uZWN0aW9uXG4gIHRlc3RTaGVldENvbm5lY3Rpb246IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBzaGVldElkOiB6LnN0cmluZygpIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCB9KTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IHJvd0NvdW50PzogbnVtYmVyOyBlcnJvcj86IHN0cmluZyB9PiA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzaGVldHNTZXJ2aWNlID0gZ2V0R29vZ2xlU2hlZXRzU2VydmljZSh7IHNwcmVhZHNoZWV0SWQ6IGlucHV0LnNoZWV0SWQgfSlcbiAgICAgICAgY29uc3Qgcm9zdGVyID0gYXdhaXQgc2hlZXRzU2VydmljZS5mZXRjaE9uYm9hcmRpbmdSb3N0ZXIoKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgcm93Q291bnQ6IHJvc3Rlci5sZW5ndGgsXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjb25uZWN0IHRvIEdvb2dsZSBTaGVldCcsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbn0pXG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQW5kQ29tcGxldGVXb3JrZmxvdyhwcmlzbWE6IHR5cGVvZiBpbXBvcnQoJ0AvbGliL3ByaXNtYScpLmRlZmF1bHQsIHdvcmtmbG93SWQ6IHN0cmluZykge1xuICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IHByaXNtYS5vbmJvYXJkaW5nV29ya2Zsb3cuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHdvcmtmbG93SWQgfSxcbiAgICBpbmNsdWRlOiB7IHRhc2tzOiB0cnVlIH0sXG4gIH0pXG5cbiAgaWYgKCF3b3JrZmxvdykgcmV0dXJuXG5cbiAgY29uc3QgaW5jb21wbGV0ZVRhc2tzID0gd29ya2Zsb3cudGFza3MuZmlsdGVyKFxuICAgICh0KSA9PiB0LnN0YXR1cyA9PT0gJ1BFTkRJTkcnIHx8IHQuc3RhdHVzID09PSAnSU5fUFJPR1JFU1MnIHx8IHQuc3RhdHVzID09PSAnRkFJTEVEJ1xuICApXG5cbiAgaWYgKGluY29tcGxldGVUYXNrcy5sZW5ndGggPT09IDApIHtcbiAgICBhd2FpdCBwcmlzbWEub25ib2FyZGluZ1dvcmtmbG93LnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3dJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIC8vIFVwZGF0ZSBlbXBsb3llZSBzdGF0dXMgdG8gQUNUSVZFXG4gICAgYXdhaXQgcHJpc21hLmVtcGxveWVlLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogd29ya2Zsb3cuZW1wbG95ZWVJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdBQ1RJVkUnIH0sXG4gICAgfSlcblxuICAgIGF3YWl0IGNyZWF0ZUF1ZGl0TG9nKHtcbiAgICAgIGFjdG9yVHlwZTogJ3N5c3RlbScsXG4gICAgICBhY3Rpb246ICdPTkJPQVJESU5HX0NPTVBMRVRFRCcsXG4gICAgICByZXNvdXJjZVR5cGU6ICdlbXBsb3llZScsXG4gICAgICByZXNvdXJjZUlkOiB3b3JrZmxvdy5lbXBsb3llZUlkLFxuICAgICAgbWV0YWRhdGE6IHsgd29ya2Zsb3dJZCB9LFxuICAgIH0pXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiaHJBZG1pblByb2NlZHVyZSIsInByb3RlY3RlZFByb2NlZHVyZSIsInB1YmxpY1Byb2NlZHVyZSIsIlRSUENFcnJvciIsImNyZWF0ZUF1ZGl0TG9nIiwic2VuZE9uYm9hcmRpbmdFbWFpbCIsInByb3Zpc2lvbkVtcGxveWVlSW5BcHAiLCJwcm92aXNpb25FbXBsb3llZUluQXBwQnlJZCIsImhhc01hdGNoaW5nUHJvdmlzaW9uaW5nUnVsZSIsImdldE9yZ2FuaXphdGlvbiIsImdldEdvb2dsZVNoZWV0c1NlcnZpY2UiLCJPTkJPQVJESU5HX1RBU0tTIiwiVEFTS19TRUNUSU9OUyIsIkRFRkFVTFRfT05CT0FSRElOR19UQVNLUyIsIm5hbWUiLCJ0eXBlIiwiYXV0b21hdGlvblR5cGUiLCJzb3J0T3JkZXIiLCJHRU5FUklDX1BST1ZJU0lPTl9BVVRPTUFUSU9OIiwiYXBwVHlwZVRvQXV0b21hdGlvblR5cGUiLCJhcHBUeXBlIiwicmVzb2x2ZUludGVncmF0aW9uQXBwIiwicHJpc21hIiwiYXBwIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJjb2RlIiwibWVzc2FnZSIsImVuc3VyZURlZmF1bHRPbmJvYXJkaW5nVGVtcGxhdGVzIiwib3JnYW5pemF0aW9uIiwiZXhpc3RpbmdDb3VudCIsIm9uYm9hcmRpbmdUYXNrVGVtcGxhdGUiLCJjb3VudCIsIm9yZ2FuaXphdGlvbklkIiwiaWQiLCJjcmVhdGVNYW55IiwiZGF0YSIsIm1hcCIsInRhc2siLCJkZXNjcmlwdGlvbiIsImlzQWN0aXZlIiwiZ2V0RGVmYXVsdE9uYm9hcmRpbmdUYXNrcyIsImVtcGxveWVlIiwidGVtcGxhdGVzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwidGFza3MiLCJvcmRlciIsImhhbmRsZWRBcHBJZHMiLCJTZXQiLCJ0IiwicHVzaCIsInVuZGVmaW5lZCIsImF1dG9tYXRpb25Db25maWciLCJhcHBJZCIsImZpbmRVbmlxdWUiLCJydWxlcyIsImFwcFByb3Zpc2lvbmluZ1J1bGUiLCJhZGQiLCJleHRyYVRhc2tzIiwiZ2V0UHJvdmlzaW9uaW5nVGFza3NGb3JFbXBsb3llZSIsImhhcyIsImdldEFwcElkRnJvbVRhc2siLCJhcHBCeVR5cGUiLCJjZmciLCJnZXQiLCJleGlzdGluZ1Rhc2tzIiwiYXBwc1dpdGhSdWxlcyIsImFyY2hpdmVkQXQiLCJwcm92aXNpb25pbmdSdWxlcyIsInNvbWUiLCJpbmNsdWRlIiwibGVuZ3RoIiwiTWFwIiwic2V0IiwiZXhpc3RpbmdBcHBJZHMiLCJzeW5jUHJvdmlzaW9uaW5nVGFza3NGb3JXb3JrZmxvdyIsIndvcmtmbG93Iiwic3RhdHVzIiwibWF4U29ydE9yZGVyIiwicmVkdWNlIiwibWF4IiwiTWF0aCIsIm9uYm9hcmRpbmdUYXNrIiwiaW5kZXgiLCJ3b3JrZmxvd0lkIiwib25ib2FyZGluZ1dvcmtmbG93IiwibWFuYWdlciIsInNlbGVjdCIsImZ1bGxOYW1lIiwiYXBwQWNjb3VudHMiLCJvbmJvYXJkaW5nUm91dGVyIiwiZ2V0VGFza1RlbXBsYXRlcyIsInF1ZXJ5IiwiY3R4IiwiY3JlYXRlVGFza1RlbXBsYXRlIiwiaW5wdXQiLCJvYmplY3QiLCJraW5kIiwiZW51bSIsInN0cmluZyIsIm1pbiIsIm9wdGlvbmFsIiwiaW50ZWdyYXRpb25BcHBJZCIsImludGVncmF0aW9uQXBwVHlwZSIsIm11dGF0aW9uIiwiYWdncmVnYXRlIiwiX21heCIsIm5leHRTb3J0IiwiY3JlYXRlIiwidHJpbSIsInVwZGF0ZVRhc2tUZW1wbGF0ZSIsIm51bGxhYmxlIiwiYm9vbGVhbiIsInRlbXBsYXRlIiwia2luZFVwZGF0ZXMiLCJ1cGRhdGUiLCJkZWxldGVUYXNrVGVtcGxhdGUiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsImRlbGV0ZSIsInJlbWFpbmluZyIsImkiLCJzdWNjZXNzIiwibW92ZVRhc2tUZW1wbGF0ZSIsImRpcmVjdGlvbiIsImN1cnJlbnQiLCJuZWlnaGJvciIsImx0IiwiZ3QiLCJyZXNldFRhc2tUZW1wbGF0ZXMiLCJkZWxldGVNYW55IiwibGlzdCIsInBhZ2UiLCJudW1iZXIiLCJkZWZhdWx0IiwibGltaXQiLCJ3b3JrZmxvd3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJqb2JUaXRsZSIsImRlcGFydG1lbnQiLCJzdGFydERhdGUiLCJjcmVhdGVkQXQiLCJza2lwIiwidGFrZSIsInBhZ2VzIiwiY2VpbCIsImdldEJ5SWQiLCJzeW5jZWQiLCJnZXRCeUVtcGxveWVlIiwiZW1wbG95ZWVJZCIsInN0YXJ0TmV3IiwibWFuYWdlcklkIiwid29ya0VtYWlsIiwiZW1haWxQcm92aWRlciIsImppcmFCb2FyZElkIiwiamlyYU1hbmFnZXIiLCJjdXN0b21UYXNrcyIsImFycmF5IiwicmVjb3JkIiwidW5rbm93biIsInVwZGF0ZURhdGEiLCJEYXRlIiwibWV0YSIsInVwZGF0ZWRFbXBsb3llZSIsImV4aXN0aW5nV29ya2Zsb3ciLCJpbiIsInN0YXJ0ZWRBdCIsImFjY2Vzc1Rva2VuRXhwaXJlc0F0Iiwibm93Iiwib25ib2FyZGluZ0xpbmsiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfVVJMIiwiYWNjZXNzVG9rZW4iLCJvbmJvYXJkaW5nUmVjaXBpZW50IiwicGVyc29uYWxFbWFpbCIsImVtcGxveWVlRW1haWwiLCJlbXBsb3llZU5hbWUiLCJtYW5hZ2VyTmFtZSIsImNvbXBhbnlOYW1lIiwiYWN0b3JJZCIsInVzZXIiLCJhY3Rpb24iLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwibWV0YWRhdGEiLCJzdGFydCIsImluY2x1ZGVzIiwicnVuQXV0b21hdGVkVGFzayIsInRhc2tJZCIsImF0dGVtcHRzIiwibGFzdEF0dGVtcHRBdCIsInJlc3VsdCIsImNvbmZpZyIsImVycm9yIiwidG9Mb3dlckNhc2UiLCJzdGF0dXNNZXNzYWdlIiwiY29tcGxldGVkQXQiLCJ0YXNrTmFtZSIsImNoZWNrQW5kQ29tcGxldGVXb3JrZmxvdyIsIkVycm9yIiwiY29tcGxldGVNYW51YWxUYXNrIiwibm90ZXMiLCJjb21wbGV0ZWRCeSIsIm1hbnVhbCIsInNraXBUYXNrIiwicmVhc29uIiwiZ2V0QnlUb2tlbiIsInRva2VuIiwibG9jYXRpb24iLCJlbXBsb3ltZW50VHlwZSIsImdlbmRlciIsIm1hcml0YWxTdGF0dXMiLCJkYXRlT2ZCaXJ0aCIsIm5hdGlvbmFsaXR5IiwidGF4SWQiLCJhZGRyZXNzU3RyZWV0IiwiYWRkcmVzc0NpdHkiLCJhZGRyZXNzU3RhdGUiLCJhZGRyZXNzUG9zdGFsIiwiYWRkcmVzc0NvdW50cnkiLCJwaG9uZSIsImVtZXJnZW5jeUNvbnRhY3ROYW1lIiwiZW1lcmdlbmN5Q29udGFjdFJlbGF0aW9uIiwiZW1lcmdlbmN5Q29udGFjdFBob25lIiwicHJvZmlsZUltYWdlVXJsIiwiYmFua05hbWUiLCJhY2NvdW50TmFtZSIsImFjY291bnROdW1iZXIiLCJhY2NvdW50U29ydENvZGUiLCJmb3JtZXJPZmZlckxldHRlclVybCIsImZvcm1lckxhc3RQYXlzbGlwVXJsIiwiZm9ybWVyUmVzaWduYXRpb25MZXR0ZXJVcmwiLCJmb3JtZXJSZXNpZ25hdGlvbkNvbmZpcm1VcmwiLCJmb3JtZXJIckNvbnRhY3ROYW1lIiwiZm9ybWVySHJDb250YWN0UGhvbmUiLCJmb3JtZXJIckNvbnRhY3RFbWFpbCIsImZvcm1lckNvbXBhbnlBZGRyZXNzIiwiZm9ybWVyRW1wbG95bWVudFN1Ym1pdHRlZEF0IiwibGlmZVZhbHVlcyIsImtub3dBYm91dE1lIiwibWJ0aVR5cGUiLCJtYnRpSW1hZ2VVcmwiLCJiaWdGaXZlVXJsIiwiYmlnRml2ZUltYWdlVXJsIiwicGVyc29uYWxpdHlDb21wbGV0ZWQiLCJwZXJzb25hbGl0eUNvbXBsZXRlZEF0IiwidXBkYXRlRW1wbG95ZWVJbmZvIiwibW9zdEltcG9ydGFudCIsImltcG9ydGFudCIsInNvbWV3aGF0SW1wb3J0YW50Iiwibm90SW1wb3J0YW50IiwicXVlc3Rpb24iLCJhbnN3ZXIiLCJ0cmltbWVkIiwiaGFzRm9ybWVyRW1wbG95bWVudERhdGEiLCJnZXRTaGVldFJvc3RlciIsInNldHRpbmdzIiwib25ib2FyZGluZ1NldHRpbmdzIiwic2hlZXRJZCIsInNoZWV0c1NlcnZpY2UiLCJzcHJlYWRzaGVldElkIiwicm9zdGVyIiwiZmV0Y2hPbmJvYXJkaW5nUm9zdGVyIiwiZmV0Y2hlZEF0IiwidG9JU09TdHJpbmciLCJjb25zb2xlIiwiZ2V0VGFza0NhdGFsb2ciLCJzZWN0aW9ucyIsImdldEVtcGxveWVlU2hlZXREYXRhIiwidmlzSWQiLCJlbWFpbCIsImxvZyIsInIiLCJ1c2VySWQiLCJjb21wbGV0aW9uUGVyY2VudCIsImZpbmQiLCJyb3ciLCJzaGVldE5hbWUiLCJpbnB1dE5hbWUiLCJpbnB1dEZpcnN0TmFtZSIsInNwbGl0Iiwic2hlZXRGaXJzdE5hbWUiLCJnZXRTZXR0aW5ncyIsInNoZWV0Um9zdGVyUmFuZ2UiLCJzaGVldFJlZnJlc2hNcyIsInVwZGF0ZVNldHRpbmdzIiwidGVzdFNoZWV0Q29ubmVjdGlvbiIsInJvd0NvdW50IiwiaW5jb21wbGV0ZVRhc2tzIiwiZmlsdGVyIiwiYWN0b3JUeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/onboarding.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/organization.ts":
/*!********************************************!*\
  !*** ./src/server/routers/organization.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   organizationRouter: () => (/* binding */ organizationRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _lib_letterhead__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/letterhead */ \"(rsc)/./src/lib/letterhead.ts\");\n\n\n\nfunction computeDefaultLetterhead() {\n    const companyDomain = (process.env.COMPANY_DOMAIN ?? \"\").trim();\n    const envEmail = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeEmailForStorage)(process.env.COMPANY_EMAIL);\n    const envWebsite = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeWebsiteForStorage)(process.env.COMPANY_WEBSITE);\n    const envPhone = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizePhoneForStorage)(process.env.COMPANY_PHONE);\n    const envAddress = (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeAddressForStorage)(process.env.COMPANY_ADDRESS);\n    const defaultEmail = envEmail ?? (companyDomain ? `info@${companyDomain}` : null);\n    const defaultWebsite = envWebsite ?? (companyDomain ? `https://${companyDomain}` : null);\n    return {\n        letterheadEmail: defaultEmail,\n        letterheadWebsite: defaultWebsite,\n        letterheadPhone: envPhone,\n        letterheadAddress: envAddress\n    };\n}\nasync function ensureOrganizationLetterhead(ctx, org) {\n    const defaults = computeDefaultLetterhead();\n    const needsEmail = !org.letterheadEmail && defaults.letterheadEmail;\n    const needsWebsite = !org.letterheadWebsite && defaults.letterheadWebsite;\n    const needsPhone = !org.letterheadPhone && defaults.letterheadPhone;\n    const needsAddress = !org.letterheadAddress && defaults.letterheadAddress;\n    if (!needsEmail && !needsWebsite && !needsPhone && !needsAddress) return org;\n    return ctx.prisma.organization.update({\n        where: {\n            id: org.id\n        },\n        data: {\n            ...needsEmail ? {\n                letterheadEmail: defaults.letterheadEmail\n            } : {},\n            ...needsWebsite ? {\n                letterheadWebsite: defaults.letterheadWebsite\n            } : {},\n            ...needsPhone ? {\n                letterheadPhone: defaults.letterheadPhone\n            } : {},\n            ...needsAddress ? {\n                letterheadAddress: defaults.letterheadAddress\n            } : {}\n        }\n    });\n}\nconst organizationRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    getName: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(async ({ ctx })=>{\n        // Get or create organization (singleton)\n        let org = await ctx.prisma.organization.findFirst();\n        if (!org) {\n            // Create default organization\n            org = await ctx.prisma.organization.create({\n                data: {\n                    name: process.env.COMPANY_NAME || \"Curacel\",\n                    oneSentenceDescription: process.env.COMPANY_NAME ? `${process.env.COMPANY_NAME} is an insurtech infrastructure company that helps insurers & partners in Africa and other emerging.` : null,\n                    careerPageUrl: process.env.COMPANY_DOMAIN ? `https://curacel.ai/careers/${process.env.COMPANY_DOMAIN}` : null\n                }\n            });\n        }\n        org = await ensureOrganizationLetterhead(ctx, org);\n        if (!org) {\n            throw new Error(\"Organization not found\");\n        }\n        return org.name;\n    }),\n    get: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        // Get or create organization (singleton)\n        let org = await ctx.prisma.organization.findFirst();\n        if (!org) {\n            // Create default organization\n            org = await ctx.prisma.organization.create({\n                data: {\n                    name: process.env.COMPANY_NAME || \"Curacel\",\n                    oneSentenceDescription: process.env.COMPANY_NAME ? `${process.env.COMPANY_NAME} is an insurtech infrastructure company that helps insurers & partners in Africa and other emerging.` : null,\n                    careerPageUrl: process.env.COMPANY_DOMAIN ? `https://curacel.ai/careers/${process.env.COMPANY_DOMAIN}` : null\n                }\n            });\n        }\n        org = await ensureOrganizationLetterhead(ctx, org);\n        if (!org) {\n            throw new Error(\"Organization not found\");\n        }\n        return org;\n    }),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(1),\n        logoUrl: zod__WEBPACK_IMPORTED_MODULE_2__.string().url().optional().nullable(),\n        oneSentenceDescription: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        careerPageUrl: zod__WEBPACK_IMPORTED_MODULE_2__.string().url().optional().nullable(),\n        detailedDescription: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        letterheadEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        letterheadWebsite: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        letterheadAddress: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        letterheadPhone: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable(),\n        googleWorkspaceTransferToEmail: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional().nullable()\n    })).mutation(async ({ ctx, input })=>{\n        const normalized = {\n            ...input,\n            letterheadEmail: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeEmailForStorage)(input.letterheadEmail),\n            letterheadWebsite: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeWebsiteForStorage)(input.letterheadWebsite),\n            letterheadAddress: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeAddressForStorage)(input.letterheadAddress),\n            letterheadPhone: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizePhoneForStorage)(input.letterheadPhone),\n            googleWorkspaceTransferToEmail: (0,_lib_letterhead__WEBPACK_IMPORTED_MODULE_1__.normalizeEmailForStorage)(input.googleWorkspaceTransferToEmail)\n        };\n        // Get or create organization\n        let org = await ctx.prisma.organization.findFirst();\n        if (!org) {\n            org = await ctx.prisma.organization.create({\n                data: normalized\n            });\n        } else {\n            org = await ctx.prisma.organization.update({\n                where: {\n                    id: org.id\n                },\n                data: normalized\n            });\n        }\n        return org;\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZLENBQUNDLE1BQU0sQ0FBQztnQkFDekNDLE9BQU87b0JBQUVDLElBQUlWLElBQUlVLEVBQUU7Z0JBQUM7Z0JBQ3BCQyxNQUFNdUI7WUFDUjtRQUNGO1FBRUEsT0FBT2xDO0lBQ1Q7QUFDSixHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvb3JnYW5pemF0aW9uLnRzP2NiNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgYWRtaW5Qcm9jZWR1cmUsIHB1YmxpY1Byb2NlZHVyZSB9IGZyb20gJ0AvbGliL3RycGMnXG5pbXBvcnQge1xuICBub3JtYWxpemVBZGRyZXNzRm9yU3RvcmFnZSxcbiAgbm9ybWFsaXplRW1haWxGb3JTdG9yYWdlLFxuICBub3JtYWxpemVQaG9uZUZvclN0b3JhZ2UsXG4gIG5vcm1hbGl6ZVdlYnNpdGVGb3JTdG9yYWdlLFxufSBmcm9tICdAL2xpYi9sZXR0ZXJoZWFkJ1xuXG5mdW5jdGlvbiBjb21wdXRlRGVmYXVsdExldHRlcmhlYWQoKSB7XG4gIGNvbnN0IGNvbXBhbnlEb21haW4gPSAocHJvY2Vzcy5lbnYuQ09NUEFOWV9ET01BSU4gPz8gJycpLnRyaW0oKVxuXG4gIGNvbnN0IGVudkVtYWlsID0gbm9ybWFsaXplRW1haWxGb3JTdG9yYWdlKHByb2Nlc3MuZW52LkNPTVBBTllfRU1BSUwpXG4gIGNvbnN0IGVudldlYnNpdGUgPSBub3JtYWxpemVXZWJzaXRlRm9yU3RvcmFnZShwcm9jZXNzLmVudi5DT01QQU5ZX1dFQlNJVEUpXG4gIGNvbnN0IGVudlBob25lID0gbm9ybWFsaXplUGhvbmVGb3JTdG9yYWdlKHByb2Nlc3MuZW52LkNPTVBBTllfUEhPTkUpXG4gIGNvbnN0IGVudkFkZHJlc3MgPSBub3JtYWxpemVBZGRyZXNzRm9yU3RvcmFnZShwcm9jZXNzLmVudi5DT01QQU5ZX0FERFJFU1MpXG5cbiAgY29uc3QgZGVmYXVsdEVtYWlsID0gZW52RW1haWwgPz8gKGNvbXBhbnlEb21haW4gPyBgaW5mb0Ake2NvbXBhbnlEb21haW59YCA6IG51bGwpXG4gIGNvbnN0IGRlZmF1bHRXZWJzaXRlID0gZW52V2Vic2l0ZSA/PyAoY29tcGFueURvbWFpbiA/IGBodHRwczovLyR7Y29tcGFueURvbWFpbn1gIDogbnVsbClcblxuICByZXR1cm4ge1xuICAgIGxldHRlcmhlYWRFbWFpbDogZGVmYXVsdEVtYWlsLFxuICAgIGxldHRlcmhlYWRXZWJzaXRlOiBkZWZhdWx0V2Vic2l0ZSxcbiAgICBsZXR0ZXJoZWFkUGhvbmU6IGVudlBob25lLFxuICAgIGxldHRlcmhlYWRBZGRyZXNzOiBlbnZBZGRyZXNzLFxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZU9yZ2FuaXphdGlvbkxldHRlcmhlYWQoY3R4OiB7IHByaXNtYTogYW55IH0sIG9yZzogYW55KSB7XG4gIGNvbnN0IGRlZmF1bHRzID0gY29tcHV0ZURlZmF1bHRMZXR0ZXJoZWFkKClcblxuICBjb25zdCBuZWVkc0VtYWlsID0gIW9yZy5sZXR0ZXJoZWFkRW1haWwgJiYgZGVmYXVsdHMubGV0dGVyaGVhZEVtYWlsXG4gIGNvbnN0IG5lZWRzV2Vic2l0ZSA9ICFvcmcubGV0dGVyaGVhZFdlYnNpdGUgJiYgZGVmYXVsdHMubGV0dGVyaGVhZFdlYnNpdGVcbiAgY29uc3QgbmVlZHNQaG9uZSA9ICFvcmcubGV0dGVyaGVhZFBob25lICYmIGRlZmF1bHRzLmxldHRlcmhlYWRQaG9uZVxuICBjb25zdCBuZWVkc0FkZHJlc3MgPSAhb3JnLmxldHRlcmhlYWRBZGRyZXNzICYmIGRlZmF1bHRzLmxldHRlcmhlYWRBZGRyZXNzXG5cbiAgaWYgKCFuZWVkc0VtYWlsICYmICFuZWVkc1dlYnNpdGUgJiYgIW5lZWRzUGhvbmUgJiYgIW5lZWRzQWRkcmVzcykgcmV0dXJuIG9yZ1xuXG4gIHJldHVybiBjdHgucHJpc21hLm9yZ2FuaXphdGlvbi51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiBvcmcuaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICAuLi4obmVlZHNFbWFpbCA/IHsgbGV0dGVyaGVhZEVtYWlsOiBkZWZhdWx0cy5sZXR0ZXJoZWFkRW1haWwgfSA6IHt9KSxcbiAgICAgIC4uLihuZWVkc1dlYnNpdGUgPyB7IGxldHRlcmhlYWRXZWJzaXRlOiBkZWZhdWx0cy5sZXR0ZXJoZWFkV2Vic2l0ZSB9IDoge30pLFxuICAgICAgLi4uKG5lZWRzUGhvbmUgPyB7IGxldHRlcmhlYWRQaG9uZTogZGVmYXVsdHMubGV0dGVyaGVhZFBob25lIH0gOiB7fSksXG4gICAgICAuLi4obmVlZHNBZGRyZXNzID8geyBsZXR0ZXJoZWFkQWRkcmVzczogZGVmYXVsdHMubGV0dGVyaGVhZEFkZHJlc3MgfSA6IHt9KSxcbiAgICB9LFxuICB9KVxufVxuXG5leHBvcnQgY29uc3Qgb3JnYW5pemF0aW9uUm91dGVyID0gcm91dGVyKHtcbiAgZ2V0TmFtZTogcHVibGljUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBvcmdhbml6YXRpb24gKHNpbmdsZXRvbilcbiAgICBsZXQgb3JnID0gYXdhaXQgY3R4LnByaXNtYS5vcmdhbml6YXRpb24uZmluZEZpcnN0KClcbiAgICBcbiAgICBpZiAoIW9yZykge1xuICAgICAgLy8gQ3JlYXRlIGRlZmF1bHQgb3JnYW5pemF0aW9uXG4gICAgICBvcmcgPSBhd2FpdCBjdHgucHJpc21hLm9yZ2FuaXphdGlvbi5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogcHJvY2Vzcy5lbnYuQ09NUEFOWV9OQU1FIHx8ICdDdXJhY2VsJyxcbiAgICAgICAgICBvbmVTZW50ZW5jZURlc2NyaXB0aW9uOiBwcm9jZXNzLmVudi5DT01QQU5ZX05BTUUgXG4gICAgICAgICAgICA/IGAke3Byb2Nlc3MuZW52LkNPTVBBTllfTkFNRX0gaXMgYW4gaW5zdXJ0ZWNoIGluZnJhc3RydWN0dXJlIGNvbXBhbnkgdGhhdCBoZWxwcyBpbnN1cmVycyAmIHBhcnRuZXJzIGluIEFmcmljYSBhbmQgb3RoZXIgZW1lcmdpbmcuYFxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIGNhcmVlclBhZ2VVcmw6IHByb2Nlc3MuZW52LkNPTVBBTllfRE9NQUlOIFxuICAgICAgICAgICAgPyBgaHR0cHM6Ly9jdXJhY2VsLmFpL2NhcmVlcnMvJHtwcm9jZXNzLmVudi5DT01QQU5ZX0RPTUFJTn1gXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIG9yZyA9IGF3YWl0IGVuc3VyZU9yZ2FuaXphdGlvbkxldHRlcmhlYWQoY3R4LCBvcmcpXG4gICAgaWYgKCFvcmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT3JnYW5pemF0aW9uIG5vdCBmb3VuZCcpXG4gICAgfVxuICAgIHJldHVybiBvcmcubmFtZVxuICB9KSxcblxuICBnZXQ6IGFkbWluUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBvcmdhbml6YXRpb24gKHNpbmdsZXRvbilcbiAgICBsZXQgb3JnID0gYXdhaXQgY3R4LnByaXNtYS5vcmdhbml6YXRpb24uZmluZEZpcnN0KClcbiAgICBcbiAgICBpZiAoIW9yZykge1xuICAgICAgLy8gQ3JlYXRlIGRlZmF1bHQgb3JnYW5pemF0aW9uXG4gICAgICBvcmcgPSBhd2FpdCBjdHgucHJpc21hLm9yZ2FuaXphdGlvbi5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogcHJvY2Vzcy5lbnYuQ09NUEFOWV9OQU1FIHx8ICdDdXJhY2VsJyxcbiAgICAgICAgICBvbmVTZW50ZW5jZURlc2NyaXB0aW9uOiBwcm9jZXNzLmVudi5DT01QQU5ZX05BTUUgXG4gICAgICAgICAgICA/IGAke3Byb2Nlc3MuZW52LkNPTVBBTllfTkFNRX0gaXMgYW4gaW5zdXJ0ZWNoIGluZnJhc3RydWN0dXJlIGNvbXBhbnkgdGhhdCBoZWxwcyBpbnN1cmVycyAmIHBhcnRuZXJzIGluIEFmcmljYSBhbmQgb3RoZXIgZW1lcmdpbmcuYFxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIGNhcmVlclBhZ2VVcmw6IHByb2Nlc3MuZW52LkNPTVBBTllfRE9NQUlOIFxuICAgICAgICAgICAgPyBgaHR0cHM6Ly9jdXJhY2VsLmFpL2NhcmVlcnMvJHtwcm9jZXNzLmVudi5DT01QQU5ZX0RPTUFJTn1gXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH1cblxuICAgIG9yZyA9IGF3YWl0IGVuc3VyZU9yZ2FuaXphdGlvbkxldHRlcmhlYWQoY3R4LCBvcmcpXG4gICAgaWYgKCFvcmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT3JnYW5pemF0aW9uIG5vdCBmb3VuZCcpXG4gICAgfVxuICAgIHJldHVybiBvcmdcbiAgfSksXG5cbiAgdXBkYXRlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSksXG4gICAgICAgIGxvZ29Vcmw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvbmVTZW50ZW5jZURlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgY2FyZWVyUGFnZVVybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIGRldGFpbGVkRGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBsZXR0ZXJoZWFkRW1haWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBsZXR0ZXJoZWFkV2Vic2l0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIGxldHRlcmhlYWRBZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgbGV0dGVyaGVhZFBob25lOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgZ29vZ2xlV29ya3NwYWNlVHJhbnNmZXJUb0VtYWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7XG4gICAgICAgIC4uLmlucHV0LFxuICAgICAgICBsZXR0ZXJoZWFkRW1haWw6IG5vcm1hbGl6ZUVtYWlsRm9yU3RvcmFnZShpbnB1dC5sZXR0ZXJoZWFkRW1haWwpLFxuICAgICAgICBsZXR0ZXJoZWFkV2Vic2l0ZTogbm9ybWFsaXplV2Vic2l0ZUZvclN0b3JhZ2UoaW5wdXQubGV0dGVyaGVhZFdlYnNpdGUpLFxuICAgICAgICBsZXR0ZXJoZWFkQWRkcmVzczogbm9ybWFsaXplQWRkcmVzc0ZvclN0b3JhZ2UoaW5wdXQubGV0dGVyaGVhZEFkZHJlc3MpLFxuICAgICAgICBsZXR0ZXJoZWFkUGhvbmU6IG5vcm1hbGl6ZVBob25lRm9yU3RvcmFnZShpbnB1dC5sZXR0ZXJoZWFkUGhvbmUpLFxuICAgICAgICBnb29nbGVXb3Jrc3BhY2VUcmFuc2ZlclRvRW1haWw6IG5vcm1hbGl6ZUVtYWlsRm9yU3RvcmFnZShpbnB1dC5nb29nbGVXb3Jrc3BhY2VUcmFuc2ZlclRvRW1haWwpLFxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgb3IgY3JlYXRlIG9yZ2FuaXphdGlvblxuICAgICAgbGV0IG9yZyA9IGF3YWl0IGN0eC5wcmlzbWEub3JnYW5pemF0aW9uLmZpbmRGaXJzdCgpXG4gICAgICBcbiAgICAgIGlmICghb3JnKSB7XG4gICAgICAgIG9yZyA9IGF3YWl0IGN0eC5wcmlzbWEub3JnYW5pemF0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YTogbm9ybWFsaXplZCxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yZyA9IGF3YWl0IGN0eC5wcmlzbWEub3JnYW5pemF0aW9uLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IG9yZy5pZCB9LFxuICAgICAgICAgIGRhdGE6IG5vcm1hbGl6ZWQsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBvcmdcbiAgICB9KSxcbn0pXG4iXSwibmFtZXMiOlsieiIsInJvdXRlciIsImFkbWluUHJvY2VkdXJlIiwicHVibGljUHJvY2VkdXJlIiwibm9ybWFsaXplQWRkcmVzc0ZvclN0b3JhZ2UiLCJub3JtYWxpemVFbWFpbEZvclN0b3JhZ2UiLCJub3JtYWxpemVQaG9uZUZvclN0b3JhZ2UiLCJub3JtYWxpemVXZWJzaXRlRm9yU3RvcmFnZSIsImNvbXB1dGVEZWZhdWx0TGV0dGVyaGVhZCIsImNvbXBhbnlEb21haW4iLCJwcm9jZXNzIiwiZW52IiwiQ09NUEFOWV9ET01BSU4iLCJ0cmltIiwiZW52RW1haWwiLCJDT01QQU5ZX0VNQUlMIiwiZW52V2Vic2l0ZSIsIkNPTVBBTllfV0VCU0lURSIsImVudlBob25lIiwiQ09NUEFOWV9QSE9ORSIsImVudkFkZHJlc3MiLCJDT01QQU5ZX0FERFJFU1MiLCJkZWZhdWx0RW1haWwiLCJkZWZhdWx0V2Vic2l0ZSIsImxldHRlcmhlYWRFbWFpbCIsImxldHRlcmhlYWRXZWJzaXRlIiwibGV0dGVyaGVhZFBob25lIiwibGV0dGVyaGVhZEFkZHJlc3MiLCJlbnN1cmVPcmdhbml6YXRpb25MZXR0ZXJoZWFkIiwiY3R4Iiwib3JnIiwiZGVmYXVsdHMiLCJuZWVkc0VtYWlsIiwibmVlZHNXZWJzaXRlIiwibmVlZHNQaG9uZSIsIm5lZWRzQWRkcmVzcyIsInByaXNtYSIsIm9yZ2FuaXphdGlvbiIsInVwZGF0ZSIsIndoZXJlIiwiaWQiLCJkYXRhIiwib3JnYW5pemF0aW9uUm91dGVyIiwiZ2V0TmFtZSIsInF1ZXJ5IiwiZmluZEZpcnN0IiwiY3JlYXRlIiwibmFtZSIsIkNPTVBBTllfTkFNRSIsIm9uZVNlbnRlbmNlRGVzY3JpcHRpb24iLCJjYXJlZXJQYWdlVXJsIiwiRXJyb3IiLCJnZXQiLCJpbnB1dCIsIm9iamVjdCIsInN0cmluZyIsIm1pbiIsImxvZ29VcmwiLCJ1cmwiLCJvcHRpb25hbCIsIm51bGxhYmxlIiwiZGV0YWlsZWREZXNjcmlwdGlvbiIsImdvb2dsZVdvcmtzcGFjZVRyYW5zZmVyVG9FbWFpbCIsIm11dGF0aW9uIiwibm9ybWFsaXplZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/organization.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/signature.ts":
/*!*****************************************!*\
  !*** ./src/server/routers/signature.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signatureRouter: () => (/* binding */ signatureRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n\n\n\nconst signatureBlockSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    signatoryName: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, \"Signatory name is required\"),\n    signatoryTitle: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, \"Signatory title is required\"),\n    signatureText: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    signatureImageUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_1__.literal(\"\")),\n    isDefault: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\nconst signatureRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.signatureBlock.findMany({\n            orderBy: [\n                {\n                    isDefault: \"desc\"\n                },\n                {\n                    createdAt: \"desc\"\n                }\n            ]\n        });\n    }),\n    get: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).query(async ({ ctx, input: id })=>{\n        const signatureBlock = await ctx.prisma.signatureBlock.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!signatureBlock) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Signature block not found\"\n            });\n        }\n        return signatureBlock;\n    }),\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(signatureBlockSchema).mutation(async ({ ctx, input })=>{\n        if (input.isDefault) {\n            await ctx.prisma.signatureBlock.updateMany({\n                data: {\n                    isDefault: false\n                }\n            });\n        }\n        const signatureBlock = await ctx.prisma.signatureBlock.create({\n            data: {\n                signatoryName: input.signatoryName,\n                signatoryTitle: input.signatoryTitle,\n                signatureText: input.signatureText || undefined,\n                signatureImageUrl: input.signatureImageUrl || undefined,\n                isDefault: input.isDefault ?? false\n            }\n        });\n        return signatureBlock;\n    }),\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        signatoryName: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).optional(),\n        signatoryTitle: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).optional(),\n        signatureText: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        signatureImageUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_1__.literal(\"\")),\n        isDefault: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const { id, ...data } = input;\n        const existing = await ctx.prisma.signatureBlock.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existing) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Signature block not found\"\n            });\n        }\n        const updateData = {};\n        if (data.signatoryName !== undefined) {\n            updateData.signatoryName = data.signatoryName;\n        }\n        if (data.signatoryTitle !== undefined) {\n            updateData.signatoryTitle = data.signatoryTitle;\n        }\n        if (data.signatureText !== undefined) {\n            updateData.signatureText = data.signatureText || null;\n        }\n        if (data.signatureImageUrl !== undefined) {\n            updateData.signatureImageUrl = data.signatureImageUrl || null;\n        }\n        if (data.isDefault !== undefined) {\n            updateData.isDefault = data.isDefault;\n            if (data.isDefault) {\n                await ctx.prisma.signatureBlock.updateMany({\n                    data: {\n                        isDefault: false\n                    },\n                    where: {\n                        NOT: {\n                            id\n                        }\n                    }\n                });\n            }\n        }\n        const signatureBlock = await ctx.prisma.signatureBlock.update({\n            where: {\n                id\n            },\n            data: updateData\n        });\n        return signatureBlock;\n    }),\n    delete: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).mutation(async ({ ctx, input: id })=>{\n        const existing = await ctx.prisma.signatureBlock.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existing) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Signature block not found\"\n            });\n        }\n        await ctx.prisma.signatureBlock.delete({\n            where: {\n                id\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    setDefault: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.hrAdminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.string()).mutation(async ({ ctx, input: id })=>{\n        const existing = await ctx.prisma.signatureBlock.findUnique({\n            where: {\n                id\n            }\n        });\n        if (!existing) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Signature block not found\"\n            });\n        }\n        await ctx.prisma.signatureBlock.updateMany({\n            data: {\n                isDefault: false\n            }\n        });\n        await ctx.prisma.signatureBlock.update({\n            where: {\n                id\n            },\n            data: {\n                isDefault: true\n            }\n        });\n        return {\n            success: true\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dmVyL3JvdXRlcnMvc2lnbmF0dXJlLnRzPzllMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IHJvdXRlciwgaHJBZG1pblByb2NlZHVyZSB9IGZyb20gJ0AvbGliL3RycGMnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5cbmNvbnN0IHNpZ25hdHVyZUJsb2NrU2NoZW1hID0gei5vYmplY3Qoe1xuICBzaWduYXRvcnlOYW1lOiB6LnN0cmluZygpLm1pbigxLCAnU2lnbmF0b3J5IG5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgc2lnbmF0b3J5VGl0bGU6IHouc3RyaW5nKCkubWluKDEsICdTaWduYXRvcnkgdGl0bGUgaXMgcmVxdWlyZWQnKSxcbiAgc2lnbmF0dXJlVGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzaWduYXR1cmVJbWFnZVVybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLm9yKHoubGl0ZXJhbCgnJykpLFxuICBpc0RlZmF1bHQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG59KVxuXG5leHBvcnQgY29uc3Qgc2lnbmF0dXJlUm91dGVyID0gcm91dGVyKHtcbiAgbGlzdDogaHJBZG1pblByb2NlZHVyZVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suZmluZE1hbnkoe1xuICAgICAgICBvcmRlckJ5OiBbeyBpc0RlZmF1bHQ6ICdkZXNjJyB9LCB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1dLFxuICAgICAgfSlcbiAgICB9KSxcblxuICBnZXQ6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3Qgc2lnbmF0dXJlQmxvY2sgPSBhd2FpdCBjdHgucHJpc21hLnNpZ25hdHVyZUJsb2NrLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFzaWduYXR1cmVCbG9jaykge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ05PVF9GT1VORCcsIG1lc3NhZ2U6ICdTaWduYXR1cmUgYmxvY2sgbm90IGZvdW5kJyB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2lnbmF0dXJlQmxvY2tcbiAgICB9KSxcblxuICBjcmVhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoc2lnbmF0dXJlQmxvY2tTY2hlbWEpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKGlucHV0LmlzRGVmYXVsdCkge1xuICAgICAgICBhd2FpdCBjdHgucHJpc21hLnNpZ25hdHVyZUJsb2NrLnVwZGF0ZU1hbnkoe1xuICAgICAgICAgIGRhdGE6IHsgaXNEZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzaWduYXR1cmVCbG9jayA9IGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNpZ25hdG9yeU5hbWU6IGlucHV0LnNpZ25hdG9yeU5hbWUsXG4gICAgICAgICAgc2lnbmF0b3J5VGl0bGU6IGlucHV0LnNpZ25hdG9yeVRpdGxlLFxuICAgICAgICAgIHNpZ25hdHVyZVRleHQ6IGlucHV0LnNpZ25hdHVyZVRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIHNpZ25hdHVyZUltYWdlVXJsOiBpbnB1dC5zaWduYXR1cmVJbWFnZVVybCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgaXNEZWZhdWx0OiBpbnB1dC5pc0RlZmF1bHQgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gc2lnbmF0dXJlQmxvY2tcbiAgICB9KSxcblxuICB1cGRhdGU6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICBzaWduYXRvcnlOYW1lOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpLFxuICAgICAgICBzaWduYXRvcnlUaXRsZTogei5zdHJpbmcoKS5taW4oMSkub3B0aW9uYWwoKSxcbiAgICAgICAgc2lnbmF0dXJlVGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBzaWduYXR1cmVJbWFnZVVybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLm9yKHoubGl0ZXJhbCgnJykpLFxuICAgICAgICBpc0RlZmF1bHQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IGlkLCAuLi5kYXRhIH0gPSBpbnB1dFxuXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NpZ25hdHVyZSBibG9jayBub3QgZm91bmQnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IHtcbiAgICAgICAgc2lnbmF0b3J5TmFtZT86IHN0cmluZ1xuICAgICAgICBzaWduYXRvcnlUaXRsZT86IHN0cmluZ1xuICAgICAgICBzaWduYXR1cmVUZXh0Pzogc3RyaW5nIHwgbnVsbFxuICAgICAgICBzaWduYXR1cmVJbWFnZVVybD86IHN0cmluZyB8IG51bGxcbiAgICAgICAgaXNEZWZhdWx0PzogYm9vbGVhblxuICAgICAgfSA9IHt9XG5cbiAgICAgIGlmIChkYXRhLnNpZ25hdG9yeU5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVEYXRhLnNpZ25hdG9yeU5hbWUgPSBkYXRhLnNpZ25hdG9yeU5hbWVcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLnNpZ25hdG9yeVRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5zaWduYXRvcnlUaXRsZSA9IGRhdGEuc2lnbmF0b3J5VGl0bGVcbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLnNpZ25hdHVyZVRleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVEYXRhLnNpZ25hdHVyZVRleHQgPSBkYXRhLnNpZ25hdHVyZVRleHQgfHwgbnVsbFxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuc2lnbmF0dXJlSW1hZ2VVcmwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVEYXRhLnNpZ25hdHVyZUltYWdlVXJsID0gZGF0YS5zaWduYXR1cmVJbWFnZVVybCB8fCBudWxsXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5pc0RlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1cGRhdGVEYXRhLmlzRGVmYXVsdCA9IGRhdGEuaXNEZWZhdWx0XG4gICAgICAgIGlmIChkYXRhLmlzRGVmYXVsdCkge1xuICAgICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2sudXBkYXRlTWFueSh7XG4gICAgICAgICAgICBkYXRhOiB7IGlzRGVmYXVsdDogZmFsc2UgfSxcbiAgICAgICAgICAgIHdoZXJlOiB7IE5PVDogeyBpZCB9IH0sXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzaWduYXR1cmVCbG9jayA9IGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2sudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogdXBkYXRlRGF0YSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBzaWduYXR1cmVCbG9ja1xuICAgIH0pLFxuXG4gIGRlbGV0ZTogaHJBZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6LnN0cmluZygpKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0OiBpZCB9KSA9PiB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NpZ25hdHVyZSBibG9jayBub3QgZm91bmQnIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2suZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIHNldERlZmF1bHQ6IGhyQWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dDogaWQgfSkgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBjdHgucHJpc21hLnNpZ25hdHVyZUJsb2NrLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9IH0pXG4gICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnTk9UX0ZPVU5EJywgbWVzc2FnZTogJ1NpZ25hdHVyZSBibG9jayBub3QgZm91bmQnIH0pXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEuc2lnbmF0dXJlQmxvY2sudXBkYXRlTWFueSh7XG4gICAgICAgIGRhdGE6IHsgaXNEZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS5zaWduYXR1cmVCbG9jay51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBkYXRhOiB7IGlzRGVmYXVsdDogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgfSksXG59KVxuXG5cbiJdLCJuYW1lcyI6WyJ6Iiwicm91dGVyIiwiaHJBZG1pblByb2NlZHVyZSIsIlRSUENFcnJvciIsInNpZ25hdHVyZUJsb2NrU2NoZW1hIiwib2JqZWN0Iiwic2lnbmF0b3J5TmFtZSIsInN0cmluZyIsIm1pbiIsInNpZ25hdG9yeVRpdGxlIiwic2lnbmF0dXJlVGV4dCIsIm9wdGlvbmFsIiwic2lnbmF0dXJlSW1hZ2VVcmwiLCJ1cmwiLCJvciIsImxpdGVyYWwiLCJpc0RlZmF1bHQiLCJib29sZWFuIiwic2lnbmF0dXJlUm91dGVyIiwibGlzdCIsInF1ZXJ5IiwiY3R4IiwicHJpc21hIiwic2lnbmF0dXJlQmxvY2siLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJnZXQiLCJpbnB1dCIsImlkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiY29kZSIsIm1lc3NhZ2UiLCJjcmVhdGUiLCJtdXRhdGlvbiIsInVwZGF0ZU1hbnkiLCJkYXRhIiwidW5kZWZpbmVkIiwidXBkYXRlIiwiZXhpc3RpbmciLCJ1cGRhdGVEYXRhIiwiTk9UIiwiZGVsZXRlIiwic3VjY2VzcyIsInNldERlZmF1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/signature.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/team.ts":
/*!************************************!*\
  !*** ./src/server/routers/team.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   teamRouter: () => (/* binding */ teamRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n\n\n\nconst teamRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    // List all active teams\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const teams = await ctx.prisma.team.findMany({\n            where: {\n                isActive: true\n            },\n            orderBy: {\n                name: \"asc\"\n            }\n        });\n        // Get employee counts per team (by matching department name)\n        const teamCounts = await Promise.all(teams.map(async (team)=>{\n            const count = await ctx.prisma.employee.count({\n                where: {\n                    department: team.name\n                }\n            });\n            return {\n                teamId: team.id,\n                count\n            };\n        }));\n        const countMap = new Map(teamCounts.map((tc)=>[\n                tc.teamId,\n                tc.count\n            ]));\n        return teams.map((team)=>({\n                ...team,\n                employeeCount: countMap.get(team.id) || 0\n            }));\n    }),\n    // Get a single team by ID\n    get: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).query(async ({ ctx, input })=>{\n        const team = await ctx.prisma.team.findUnique({\n            where: {\n                id: input.id\n            }\n        });\n        if (!team) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Team not found\"\n            });\n        }\n        // Get employee count\n        const employeeCount = await ctx.prisma.employee.count({\n            where: {\n                department: team.name\n            }\n        });\n        // Get employees in this team\n        const employees = await ctx.prisma.employee.findMany({\n            where: {\n                department: team.name\n            },\n            select: {\n                id: true,\n                fullName: true,\n                jobTitle: true,\n                status: true,\n                profileImageUrl: true\n            },\n            orderBy: {\n                fullName: \"asc\"\n            }\n        });\n        return {\n            ...team,\n            employeeCount,\n            employees\n        };\n    }),\n    // Create a new team\n    create: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(2).max(100),\n        description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).optional(),\n        color: zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^#[0-9A-Fa-f]{6}$/).optional(),\n        leaderId: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        // Check if team name already exists\n        const existing = await ctx.prisma.team.findFirst({\n            where: {\n                name: {\n                    equals: input.name,\n                    mode: \"insensitive\"\n                }\n            }\n        });\n        if (existing) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"CONFLICT\",\n                message: \"A team with this name already exists\"\n            });\n        }\n        return ctx.prisma.team.create({\n            data: {\n                name: input.name.trim(),\n                description: input.description?.trim(),\n                color: input.color,\n                leaderId: input.leaderId\n            }\n        });\n    }),\n    // Update a team\n    update: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(2).max(100).optional(),\n        description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).optional().nullable(),\n        color: zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^#[0-9A-Fa-f]{6}$/).optional().nullable(),\n        leaderId: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional().nullable()\n    })).mutation(async ({ ctx, input })=>{\n        const { id, ...data } = input;\n        // If name is being changed, check for duplicates\n        if (data.name) {\n            const existing = await ctx.prisma.team.findFirst({\n                where: {\n                    name: {\n                        equals: data.name,\n                        mode: \"insensitive\"\n                    },\n                    id: {\n                        not: id\n                    }\n                }\n            });\n            if (existing) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                    code: \"CONFLICT\",\n                    message: \"A team with this name already exists\"\n                });\n            }\n        }\n        return ctx.prisma.team.update({\n            where: {\n                id\n            },\n            data: {\n                ...data.name && {\n                    name: data.name.trim()\n                },\n                ...data.description !== undefined && {\n                    description: data.description?.trim() || null\n                },\n                ...data.color !== undefined && {\n                    color: data.color\n                },\n                ...data.leaderId !== undefined && {\n                    leaderId: data.leaderId\n                }\n            }\n        });\n    }),\n    // Delete (soft delete) a team\n    delete: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ ctx, input })=>{\n        await ctx.prisma.team.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                isActive: false\n            }\n        });\n        return {\n            success: true\n        };\n    }),\n    // Sync teams from existing employee departments\n    syncFromDepartments: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.mutation(async ({ ctx })=>{\n        // Get all unique departments from employees\n        const employees = await ctx.prisma.employee.findMany({\n            where: {\n                department: {\n                    not: null\n                }\n            },\n            select: {\n                department: true\n            }\n        });\n        const uniqueDepartments = Array.from(new Set(employees.map((e)=>e.department).filter(Boolean)));\n        // Create teams for departments that don't exist yet\n        const created = [];\n        for (const dept of uniqueDepartments){\n            const existing = await ctx.prisma.team.findFirst({\n                where: {\n                    name: {\n                        equals: dept,\n                        mode: \"insensitive\"\n                    }\n                }\n            });\n            if (!existing) {\n                await ctx.prisma.team.create({\n                    data: {\n                        name: dept\n                    }\n                });\n                created.push(dept);\n            }\n        }\n        return {\n            synced: created.length,\n            teams: created,\n            total: uniqueDepartments.length\n        };\n    }),\n    // Get teams for dropdown/select (minimal data)\n    listForSelect: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        return ctx.prisma.team.findMany({\n            where: {\n                isActive: true\n            },\n            select: {\n                id: true,\n                name: true,\n                color: true\n            },\n            orderBy: {\n                name: \"asc\"\n            }\n        });\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNHLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNwRCxPQUFPQSxJQUFJRSxNQUFNLENBQUNDLElBQUksQ0FBQ0MsUUFBUSxDQUFDO1lBQzlCQyxPQUFPO2dCQUFFQyxVQUFVO1lBQUs7WUFDeEJ3QixRQUFRO2dCQUFFYixJQUFJO2dCQUFNVCxNQUFNO2dCQUFNZ0MsT0FBTztZQUFLO1lBQzVDakMsU0FBUztnQkFBRUMsTUFBTTtZQUFNO1FBQ3pCO0lBQ0Y7QUFDRixHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VyYWNlbC1wZW9wbGUvLi9zcmMvc2VydmVyL3JvdXRlcnMvdGVhbS50cz9hNWRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tICdAdHJwYy9zZXJ2ZXInXG5pbXBvcnQgeyByb3V0ZXIsIGFkbWluUHJvY2VkdXJlLCBwcm90ZWN0ZWRQcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuXG5leHBvcnQgY29uc3QgdGVhbVJvdXRlciA9IHJvdXRlcih7XG4gIC8vIExpc3QgYWxsIGFjdGl2ZSB0ZWFtc1xuICBsaXN0OiBwcm90ZWN0ZWRQcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBjb25zdCB0ZWFtcyA9IGF3YWl0IGN0eC5wcmlzbWEudGVhbS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBpc0FjdGl2ZTogdHJ1ZSB9LFxuICAgICAgb3JkZXJCeTogeyBuYW1lOiAnYXNjJyB9LFxuICAgIH0pXG5cbiAgICAvLyBHZXQgZW1wbG95ZWUgY291bnRzIHBlciB0ZWFtIChieSBtYXRjaGluZyBkZXBhcnRtZW50IG5hbWUpXG4gICAgY29uc3QgdGVhbUNvdW50cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgdGVhbXMubWFwKGFzeW5jICh0ZWFtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHsgZGVwYXJ0bWVudDogdGVhbS5uYW1lIH0sXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB7IHRlYW1JZDogdGVhbS5pZCwgY291bnQgfVxuICAgICAgfSlcbiAgICApXG5cbiAgICBjb25zdCBjb3VudE1hcCA9IG5ldyBNYXAodGVhbUNvdW50cy5tYXAoKHRjKSA9PiBbdGMudGVhbUlkLCB0Yy5jb3VudF0pKVxuXG4gICAgcmV0dXJuIHRlYW1zLm1hcCgodGVhbSkgPT4gKHtcbiAgICAgIC4uLnRlYW0sXG4gICAgICBlbXBsb3llZUNvdW50OiBjb3VudE1hcC5nZXQodGVhbS5pZCkgfHwgMCxcbiAgICB9KSlcbiAgfSksXG5cbiAgLy8gR2V0IGEgc2luZ2xlIHRlYW0gYnkgSURcbiAgZ2V0OiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB0ZWFtID0gYXdhaXQgY3R4LnByaXNtYS50ZWFtLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdGVhbSkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVGVhbSBub3QgZm91bmQnLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgZW1wbG95ZWUgY291bnRcbiAgICAgIGNvbnN0IGVtcGxveWVlQ291bnQgPSBhd2FpdCBjdHgucHJpc21hLmVtcGxveWVlLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHsgZGVwYXJ0bWVudDogdGVhbS5uYW1lIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBHZXQgZW1wbG95ZWVzIGluIHRoaXMgdGVhbVxuICAgICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IGRlcGFydG1lbnQ6IHRlYW0ubmFtZSB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBmdWxsTmFtZTogdHJ1ZSxcbiAgICAgICAgICBqb2JUaXRsZTogdHJ1ZSxcbiAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgcHJvZmlsZUltYWdlVXJsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IGZ1bGxOYW1lOiAnYXNjJyB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udGVhbSxcbiAgICAgICAgZW1wbG95ZWVDb3VudCxcbiAgICAgICAgZW1wbG95ZWVzLFxuICAgICAgfVxuICAgIH0pLFxuXG4gIC8vIENyZWF0ZSBhIG5ldyB0ZWFtXG4gIGNyZWF0ZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDIpLm1heCgxMDApLFxuICAgICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuICAgICAgICBjb2xvcjogei5zdHJpbmcoKS5yZWdleCgvXiNbMC05QS1GYS1mXXs2fSQvKS5vcHRpb25hbCgpLFxuICAgICAgICBsZWFkZXJJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgLy8gQ2hlY2sgaWYgdGVhbSBuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGN0eC5wcmlzbWEudGVhbS5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGVxdWFsczogaW5wdXQubmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0NPTkZMSUNUJyxcbiAgICAgICAgICBtZXNzYWdlOiAnQSB0ZWFtIHdpdGggdGhpcyBuYW1lIGFscmVhZHkgZXhpc3RzJyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEudGVhbS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZS50cmltKCksXG4gICAgICAgICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uPy50cmltKCksXG4gICAgICAgICAgY29sb3I6IGlucHV0LmNvbG9yLFxuICAgICAgICAgIGxlYWRlcklkOiBpbnB1dC5sZWFkZXJJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgLy8gVXBkYXRlIGEgdGVhbVxuICB1cGRhdGU6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKS5taW4oMikubWF4KDEwMCkub3B0aW9uYWwoKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDUwMCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBjb2xvcjogei5zdHJpbmcoKS5yZWdleCgvXiNbMC05QS1GYS1mXXs2fSQvKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIGxlYWRlcklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgaWQsIC4uLmRhdGEgfSA9IGlucHV0XG5cbiAgICAgIC8vIElmIG5hbWUgaXMgYmVpbmcgY2hhbmdlZCwgY2hlY2sgZm9yIGR1cGxpY2F0ZXNcbiAgICAgIGlmIChkYXRhLm5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBjdHgucHJpc21hLnRlYW0uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgbmFtZTogeyBlcXVhbHM6IGRhdGEubmFtZSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9LFxuICAgICAgICAgICAgaWQ6IHsgbm90OiBpZCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnQ09ORkxJQ1QnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0EgdGVhbSB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cycsXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS50ZWFtLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi4oZGF0YS5uYW1lICYmIHsgbmFtZTogZGF0YS5uYW1lLnRyaW0oKSB9KSxcbiAgICAgICAgICAuLi4oZGF0YS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHsgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24/LnRyaW0oKSB8fCBudWxsIH0pLFxuICAgICAgICAgIC4uLihkYXRhLmNvbG9yICE9PSB1bmRlZmluZWQgJiYgeyBjb2xvcjogZGF0YS5jb2xvciB9KSxcbiAgICAgICAgICAuLi4oZGF0YS5sZWFkZXJJZCAhPT0gdW5kZWZpbmVkICYmIHsgbGVhZGVySWQ6IGRhdGEubGVhZGVySWQgfSksXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgIH0pLFxuXG4gIC8vIERlbGV0ZSAoc29mdCBkZWxldGUpIGEgdGVhbVxuICBkZWxldGU6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgYXdhaXQgY3R4LnByaXNtYS50ZWFtLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9LFxuICAgICAgICBkYXRhOiB7IGlzQWN0aXZlOiBmYWxzZSB9LFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfVxuICAgIH0pLFxuXG4gIC8vIFN5bmMgdGVhbXMgZnJvbSBleGlzdGluZyBlbXBsb3llZSBkZXBhcnRtZW50c1xuICBzeW5jRnJvbURlcGFydG1lbnRzOiBhZG1pblByb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIC8vIEdldCBhbGwgdW5pcXVlIGRlcGFydG1lbnRzIGZyb20gZW1wbG95ZWVzXG4gICAgY29uc3QgZW1wbG95ZWVzID0gYXdhaXQgY3R4LnByaXNtYS5lbXBsb3llZS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBkZXBhcnRtZW50OiB7IG5vdDogbnVsbCB9IH0sXG4gICAgICBzZWxlY3Q6IHsgZGVwYXJ0bWVudDogdHJ1ZSB9LFxuICAgIH0pXG5cbiAgICBjb25zdCB1bmlxdWVEZXBhcnRtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICBuZXcgU2V0KGVtcGxveWVlcy5tYXAoKGUpID0+IGUuZGVwYXJ0bWVudCkuZmlsdGVyKEJvb2xlYW4pKVxuICAgICkgYXMgc3RyaW5nW11cblxuICAgIC8vIENyZWF0ZSB0ZWFtcyBmb3IgZGVwYXJ0bWVudHMgdGhhdCBkb24ndCBleGlzdCB5ZXRcbiAgICBjb25zdCBjcmVhdGVkOiBzdHJpbmdbXSA9IFtdXG4gICAgZm9yIChjb25zdCBkZXB0IG9mIHVuaXF1ZURlcGFydG1lbnRzKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IGN0eC5wcmlzbWEudGVhbS5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZTogeyBuYW1lOiB7IGVxdWFsczogZGVwdCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEudGVhbS5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHsgbmFtZTogZGVwdCB9LFxuICAgICAgICB9KVxuICAgICAgICBjcmVhdGVkLnB1c2goZGVwdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3luY2VkOiBjcmVhdGVkLmxlbmd0aCxcbiAgICAgIHRlYW1zOiBjcmVhdGVkLFxuICAgICAgdG90YWw6IHVuaXF1ZURlcGFydG1lbnRzLmxlbmd0aCxcbiAgICB9XG4gIH0pLFxuXG4gIC8vIEdldCB0ZWFtcyBmb3IgZHJvcGRvd24vc2VsZWN0IChtaW5pbWFsIGRhdGEpXG4gIGxpc3RGb3JTZWxlY3Q6IHByb3RlY3RlZFByb2NlZHVyZS5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIHJldHVybiBjdHgucHJpc21hLnRlYW0uZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgY29sb3I6IHRydWUgfSxcbiAgICAgIG9yZGVyQnk6IHsgbmFtZTogJ2FzYycgfSxcbiAgICB9KVxuICB9KSxcbn0pXG4iXSwibmFtZXMiOlsieiIsIlRSUENFcnJvciIsInJvdXRlciIsImFkbWluUHJvY2VkdXJlIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwidGVhbVJvdXRlciIsImxpc3QiLCJxdWVyeSIsImN0eCIsInRlYW1zIiwicHJpc21hIiwidGVhbSIsImZpbmRNYW55Iiwid2hlcmUiLCJpc0FjdGl2ZSIsIm9yZGVyQnkiLCJuYW1lIiwidGVhbUNvdW50cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjb3VudCIsImVtcGxveWVlIiwiZGVwYXJ0bWVudCIsInRlYW1JZCIsImlkIiwiY291bnRNYXAiLCJNYXAiLCJ0YyIsImVtcGxveWVlQ291bnQiLCJnZXQiLCJpbnB1dCIsIm9iamVjdCIsInN0cmluZyIsImZpbmRVbmlxdWUiLCJjb2RlIiwibWVzc2FnZSIsImVtcGxveWVlcyIsInNlbGVjdCIsImZ1bGxOYW1lIiwiam9iVGl0bGUiLCJzdGF0dXMiLCJwcm9maWxlSW1hZ2VVcmwiLCJjcmVhdGUiLCJtaW4iLCJtYXgiLCJkZXNjcmlwdGlvbiIsIm9wdGlvbmFsIiwiY29sb3IiLCJyZWdleCIsImxlYWRlcklkIiwibXV0YXRpb24iLCJleGlzdGluZyIsImZpbmRGaXJzdCIsImVxdWFscyIsIm1vZGUiLCJkYXRhIiwidHJpbSIsInVwZGF0ZSIsIm51bGxhYmxlIiwibm90IiwidW5kZWZpbmVkIiwiZGVsZXRlIiwic3VjY2VzcyIsInN5bmNGcm9tRGVwYXJ0bWVudHMiLCJ1bmlxdWVEZXBhcnRtZW50cyIsIkFycmF5IiwiZnJvbSIsIlNldCIsImUiLCJmaWx0ZXIiLCJCb29sZWFuIiwiY3JlYXRlZCIsImRlcHQiLCJwdXNoIiwic3luY2VkIiwibGVuZ3RoIiwidG90YWwiLCJsaXN0Rm9yU2VsZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/team.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/routers/user.ts":
/*!************************************!*\
  !*** ./src/server/routers/user.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userRouter: () => (/* binding */ userRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/trpc */ \"(rsc)/./src/lib/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/tracked-DBSMdVzR.mjs\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_password__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/password */ \"(rsc)/./src/lib/password.ts\");\n\n\n\n\n\n\nconst userSelect = {\n    id: true,\n    email: true,\n    name: true,\n    image: true,\n    role: true,\n    employeeId: true,\n    passwordSetAt: true,\n    createdAt: true,\n    updatedAt: true,\n    employee: {\n        select: {\n            id: true,\n            fullName: true,\n            jobTitle: true,\n            department: true,\n            status: true\n        }\n    }\n};\nfunction getAppUrl() {\n    const raw = \"http://localhost:3001\" || 0;\n    return raw || \"http://localhost:3000\";\n}\nfunction normalizeEmail(email) {\n    return email.trim().toLowerCase();\n}\nconst userRouter = (0,_lib_trpc__WEBPACK_IMPORTED_MODULE_0__.router)({\n    me: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const user = await ctx.prisma.user.findUnique({\n            where: {\n                email: ctx.user?.email\n            },\n            select: userSelect\n        });\n        if (!user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\"\n            });\n        }\n        return user;\n    }),\n    list: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        role: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        search: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n        page: zod__WEBPACK_IMPORTED_MODULE_5__.number().default(1),\n        limit: zod__WEBPACK_IMPORTED_MODULE_5__.number().default(20)\n    }).optional()).query(async ({ ctx, input })=>{\n        const { role, search, page = 1, limit = 20 } = input || {};\n        const where = {};\n        if (role) where.role = role;\n        if (search) {\n            where.OR = [\n                {\n                    name: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                },\n                {\n                    email: {\n                        contains: search,\n                        mode: \"insensitive\"\n                    }\n                }\n            ];\n        }\n        const [users, total] = await Promise.all([\n            ctx.prisma.user.findMany({\n                where,\n                select: userSelect,\n                orderBy: {\n                    name: \"asc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            ctx.prisma.user.count({\n                where\n            })\n        ]);\n        return {\n            users,\n            total,\n            pages: Math.ceil(total / limit)\n        };\n    }),\n    updateRole: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        role: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"SUPER_ADMIN\",\n            \"HR_ADMIN\",\n            \"IT_ADMIN\",\n            \"MANAGER\",\n            \"EMPLOYEE\"\n        ])\n    })).mutation(async ({ ctx, input })=>{\n        const user = ctx.user;\n        // Only SUPER_ADMIN can create other SUPER_ADMINs\n        if (input.role === \"SUPER_ADMIN\" && user.role !== \"SUPER_ADMIN\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Only Super Admins can grant Super Admin role\"\n            });\n        }\n        return ctx.prisma.user.update({\n            where: {\n                id: input.userId\n            },\n            data: {\n                role: input.role\n            },\n            select: userSelect\n        });\n    }),\n    linkEmployee: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n        employeeId: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        // Check if employee is already linked\n        const existingLink = await ctx.prisma.user.findFirst({\n            where: {\n                employeeId: input.employeeId\n            }\n        });\n        if (existingLink && existingLink.id !== input.userId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"This employee is already linked to another user\"\n            });\n        }\n        return ctx.prisma.user.update({\n            where: {\n                id: input.userId\n            },\n            data: {\n                employeeId: input.employeeId\n            },\n            select: userSelect\n        });\n    }),\n    delete: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        userId: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const user = await ctx.prisma.user.findUnique({\n            where: {\n                id: ctx.user.id\n            },\n            select: {\n                id: true,\n                role: true\n            }\n        });\n        // Only SUPER_ADMIN can delete users\n        if (user?.role !== \"SUPER_ADMIN\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Only Super Admins can delete users\"\n            });\n        }\n        // Prevent deleting yourself\n        if (input.userId === ctx.user.id) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"You cannot delete yourself\"\n            });\n        }\n        const userToDelete = await ctx.prisma.user.findUnique({\n            where: {\n                id: input.userId\n            },\n            select: {\n                email: true\n            }\n        });\n        if (!userToDelete) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"User not found\"\n            });\n        }\n        await ctx.prisma.user.delete({\n            where: {\n                id: input.userId\n            }\n        });\n        return {\n            email: userToDelete.email\n        };\n    }),\n    createInvite: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        email: zod__WEBPACK_IMPORTED_MODULE_5__.string().email(),\n        role: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n            \"SUPER_ADMIN\",\n            \"HR_ADMIN\",\n            \"IT_ADMIN\",\n            \"MANAGER\",\n            \"EMPLOYEE\"\n        ])\n    })).mutation(async ({ ctx, input })=>{\n        const email = normalizeEmail(input.email);\n        const existingUser = await ctx.prisma.user.findUnique({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"CONFLICT\",\n                message: \"A user with this email already exists. Update their role instead.\"\n            });\n        }\n        // Revoke any existing pending invites to this email\n        await ctx.prisma.userInvite.updateMany({\n            where: {\n                email,\n                acceptedAt: null,\n                revokedAt: null,\n                expiresAt: {\n                    gt: new Date()\n                }\n            },\n            data: {\n                revokedAt: new Date()\n            }\n        });\n        const token = crypto__WEBPACK_IMPORTED_MODULE_1___default().randomBytes(32).toString(\"hex\");\n        const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);\n        const invite = await ctx.prisma.userInvite.create({\n            data: {\n                email,\n                role: input.role,\n                token,\n                expiresAt,\n                invitedById: ctx.user.id\n            },\n            select: {\n                id: true,\n                email: true,\n                role: true,\n                expiresAt: true,\n                acceptedAt: true,\n                revokedAt: true,\n                createdAt: true,\n                invitedBy: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        const acceptUrl = `${getAppUrl()}/auth/accept-invite?token=${token}`;\n        let emailSent = true;\n        try {\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_2__.sendTeamInviteEmail)({\n                to: email,\n                invitedByName: invite.invitedBy.name || invite.invitedBy.email,\n                role: invite.role,\n                acceptUrl\n            });\n        } catch (err) {\n            emailSent = false;\n            console.warn(\"Invite created but email send failed:\", err);\n        }\n        return {\n            ...invite,\n            acceptUrl,\n            emailSent\n        };\n    }),\n    listInvites: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.query(async ({ ctx })=>{\n        const invites = await ctx.prisma.userInvite.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            select: {\n                id: true,\n                email: true,\n                role: true,\n                expiresAt: true,\n                acceptedAt: true,\n                revokedAt: true,\n                createdAt: true,\n                invitedBy: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        return invites;\n    }),\n    revokeInvite: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        inviteId: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const invite = await ctx.prisma.userInvite.findUnique({\n            where: {\n                id: input.inviteId\n            },\n            select: {\n                id: true,\n                revokedAt: true,\n                acceptedAt: true\n            }\n        });\n        if (!invite) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Invite not found\"\n            });\n        }\n        if (invite.acceptedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Invite already accepted\"\n            });\n        }\n        if (invite.revokedAt) return {\n            ok: true\n        };\n        await ctx.prisma.userInvite.update({\n            where: {\n                id: input.inviteId\n            },\n            data: {\n                revokedAt: new Date()\n            }\n        });\n        return {\n            ok: true\n        };\n    }),\n    resendInvite: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        inviteId: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n    })).mutation(async ({ ctx, input })=>{\n        const invite = await ctx.prisma.userInvite.findUnique({\n            where: {\n                id: input.inviteId\n            },\n            select: {\n                id: true,\n                email: true,\n                role: true,\n                acceptedAt: true,\n                revokedAt: true,\n                invitedBy: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        if (!invite) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Invite not found\"\n            });\n        }\n        if (invite.acceptedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Invite already accepted\"\n            });\n        }\n        if (invite.revokedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Invite has been revoked\"\n            });\n        }\n        const token = crypto__WEBPACK_IMPORTED_MODULE_1___default().randomBytes(32).toString(\"hex\");\n        const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);\n        await ctx.prisma.userInvite.update({\n            where: {\n                id: input.inviteId\n            },\n            data: {\n                token,\n                expiresAt\n            }\n        });\n        const acceptUrl = `${getAppUrl()}/auth/accept-invite?token=${token}`;\n        let emailSent = true;\n        try {\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_2__.sendTeamInviteEmail)({\n                to: invite.email,\n                invitedByName: invite.invitedBy.name || invite.invitedBy.email,\n                role: invite.role,\n                acceptUrl\n            });\n        } catch (err) {\n            emailSent = false;\n            console.warn(\"Invite updated but email send failed:\", err);\n        }\n        return {\n            ok: true,\n            acceptUrl,\n            emailSent\n        };\n    }),\n    getInvite: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        token: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(10)\n    })).query(async ({ ctx, input })=>{\n        const invite = await ctx.prisma.userInvite.findUnique({\n            where: {\n                token: input.token\n            },\n            select: {\n                email: true,\n                role: true,\n                expiresAt: true,\n                acceptedAt: true,\n                revokedAt: true,\n                invitedBy: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        if (!invite) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Invite not found\"\n            });\n        }\n        if (invite.revokedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite has been revoked\"\n            });\n        }\n        if (invite.acceptedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite already accepted\"\n            });\n        }\n        if (invite.expiresAt.getTime() <= Date.now()) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite has expired\"\n            });\n        }\n        return invite;\n    }),\n    acceptInvite: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        token: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(10),\n        name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1).max(200),\n        password: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(8),\n        confirmPassword: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(8)\n    })).mutation(async ({ ctx, input })=>{\n        if (input.password !== input.confirmPassword) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Passwords do not match\"\n            });\n        }\n        const invite = await ctx.prisma.userInvite.findUnique({\n            where: {\n                token: input.token\n            },\n            select: {\n                id: true,\n                email: true,\n                role: true,\n                expiresAt: true,\n                acceptedAt: true,\n                revokedAt: true\n            }\n        });\n        if (!invite) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Invite not found\"\n            });\n        }\n        if (invite.revokedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite has been revoked\"\n            });\n        }\n        if (invite.acceptedAt) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite already accepted\"\n            });\n        }\n        if (invite.expiresAt.getTime() <= Date.now()) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Invite has expired\"\n            });\n        }\n        const existingUser = await ctx.prisma.user.findUnique({\n            where: {\n                email: invite.email\n            }\n        });\n        if (existingUser) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"CONFLICT\",\n                message: \"A user with this email already exists. Sign in instead.\"\n            });\n        }\n        const passwordHash = await (0,_lib_password__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(input.password);\n        await ctx.prisma.$transaction([\n            ctx.prisma.user.create({\n                data: {\n                    email: invite.email,\n                    name: input.name,\n                    role: invite.role,\n                    passwordHash,\n                    passwordSetAt: new Date()\n                }\n            }),\n            ctx.prisma.userInvite.update({\n                where: {\n                    id: invite.id\n                },\n                data: {\n                    acceptedAt: new Date()\n                }\n            })\n        ]);\n        return {\n            email: invite.email\n        };\n    }),\n    updatePassword: _lib_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_5__.object({\n        currentPassword: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1).nullable(),\n        newPassword: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(8),\n        confirmPassword: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(8)\n    })).mutation(async ({ ctx, input })=>{\n        if (input.newPassword !== input.confirmPassword) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Passwords do not match\"\n            });\n        }\n        const user = await ctx.prisma.user.findUnique({\n            where: {\n                id: ctx.user.id\n            },\n            select: {\n                id: true,\n                passwordHash: true,\n                passwordSetAt: true\n            }\n        });\n        if (!user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                code: \"UNAUTHORIZED\"\n            });\n        }\n        if (user.passwordHash) {\n            if (!input.currentPassword) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Current password is required\"\n                });\n            }\n            const ok = await (0,_lib_password__WEBPACK_IMPORTED_MODULE_3__.verifyPassword)({\n                password: input.currentPassword,\n                passwordHash: user.passwordHash\n            });\n            if (!ok) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Current password is incorrect\"\n                });\n            }\n        }\n        const passwordHash = await (0,_lib_password__WEBPACK_IMPORTED_MODULE_3__.hashPassword)(input.newPassword);\n        await ctx.prisma.user.update({\n            where: {\n                id: user.id\n            },\n            data: {\n                passwordHash,\n                passwordSetAt: new Date()\n            }\n        });\n        return {\n            ok: true\n        };\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JvdXRlcnMvdXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1QjtBQUNpRTtBQUNoRDtBQUNiO0FBQ3NCO0FBQ1k7QUFHN0QsTUFBTVUsYUFBYTtJQUNqQkMsSUFBSTtJQUNKQyxPQUFPO0lBQ1BDLE1BQU07SUFDTkMsT0FBTztJQUNQQyxNQUFNO0lBQ05DLFlBQVk7SUFDWkMsZUFBZTtJQUNmQyxXQUFXO0lBQ1hDLFdBQVc7SUFDWEMsVUFBVTtRQUNSQyxRQUFRO1lBQ05WLElBQUk7WUFDSlcsVUFBVTtZQUNWQyxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsUUFBUTtRQUNWO0lBQ0Y7QUFDRjtBQUVBLFNBQVNDO0lBQ1AsTUFBTUMsTUFBTUMsdUJBQStCLElBQUlBLENBQXdCO0lBQ3ZFLE9BQU9ELE9BQU87QUFDaEI7QUFFQSxTQUFTSyxlQUFlcEIsS0FBYTtJQUNuQyxPQUFPQSxNQUFNcUIsSUFBSSxHQUFHQyxXQUFXO0FBQ2pDO0FBRU8sTUFBTUMsYUFBYWxDLGlEQUFNQSxDQUFDO0lBQy9CbUMsSUFBSWpDLHlEQUFrQkEsQ0FDbkJrQyxLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7UUFDbkIsTUFBTUMsT0FBTyxNQUFNRCxJQUFJRSxNQUFNLENBQUNELElBQUksQ0FBQ0UsVUFBVSxDQUFDO1lBQzVDQyxPQUFPO2dCQUFFOUIsT0FBTzBCLElBQUlDLElBQUksRUFBRTNCO1lBQU87WUFDakNTLFFBQVFYO1FBQ1Y7UUFFQSxJQUFJLENBQUM2QixNQUFNO1lBQ1QsTUFBTSxJQUFJbEMsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO1lBQVk7UUFDMUM7UUFFQSxPQUFPSjtJQUNUO0lBRUZLLE1BQU14QyxxREFBY0EsQ0FDakJ5QyxLQUFLLENBQUM3Qyx1Q0FBUSxDQUFDO1FBQ2RlLE1BQU1mLHVDQUFRLEdBQUdnRCxRQUFRO1FBQ3pCQyxRQUFRakQsdUNBQVEsR0FBR2dELFFBQVE7UUFDM0JFLE1BQU1sRCx1Q0FBUSxHQUFHb0QsT0FBTyxDQUFDO1FBQ3pCQyxPQUFPckQsdUNBQVEsR0FBR29ELE9BQU8sQ0FBQztJQUM1QixHQUFHSixRQUFRLElBQ1ZYLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRU8sS0FBSyxFQUFFO1FBQzFCLE1BQU0sRUFBRTlCLElBQUksRUFBRWtDLE1BQU0sRUFBRUMsT0FBTyxDQUFDLEVBQUVHLFFBQVEsRUFBRSxFQUFFLEdBQUdSLFNBQVMsQ0FBQztRQUV6RCxNQUFNSCxRQUFpQyxDQUFDO1FBRXhDLElBQUkzQixNQUFNMkIsTUFBTTNCLElBQUksR0FBR0E7UUFDdkIsSUFBSWtDLFFBQVE7WUFDVlAsTUFBTVksRUFBRSxHQUFHO2dCQUNUO29CQUFFekMsTUFBTTt3QkFBRTBDLFVBQVVOO3dCQUFRTyxNQUFNO29CQUFjO2dCQUFFO2dCQUNsRDtvQkFBRTVDLE9BQU87d0JBQUUyQyxVQUFVTjt3QkFBUU8sTUFBTTtvQkFBYztnQkFBRTthQUNwRDtRQUNIO1FBRUEsTUFBTSxDQUFDQyxPQUFPQyxNQUFNLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1lBQ3ZDdEIsSUFBSUUsTUFBTSxDQUFDRCxJQUFJLENBQUNzQixRQUFRLENBQUM7Z0JBQ3ZCbkI7Z0JBQ0FyQixRQUFRWDtnQkFDUm9ELFNBQVM7b0JBQUVqRCxNQUFNO2dCQUFNO2dCQUN2QmtELE1BQU0sQ0FBQ2IsT0FBTyxLQUFLRztnQkFDbkJXLE1BQU1YO1lBQ1I7WUFDQWYsSUFBSUUsTUFBTSxDQUFDRCxJQUFJLENBQUMwQixLQUFLLENBQUM7Z0JBQUV2QjtZQUFNO1NBQy9CO1FBRUQsT0FBTztZQUNMZTtZQUNBQztZQUNBUSxPQUFPQyxLQUFLQyxJQUFJLENBQUNWLFFBQVFMO1FBQzNCO0lBQ0Y7SUFFRmdCLFlBQVlqRSxxREFBY0EsQ0FDdkJ5QyxLQUFLLENBQUM3Qyx1Q0FBUSxDQUFDO1FBQ2RzRSxRQUFRdEUsdUNBQVE7UUFDaEJlLE1BQU1mLHdDQUFNLENBQUM7WUFBQztZQUFlO1lBQVk7WUFBWTtZQUFXO1NBQVc7SUFDN0UsSUFDQ3dFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixNQUFNTixPQUFPRCxJQUFJQyxJQUFJO1FBRXJCLGlEQUFpRDtRQUNqRCxJQUFJTSxNQUFNOUIsSUFBSSxLQUFLLGlCQUFpQndCLEtBQUt4QixJQUFJLEtBQUssZUFBZTtZQUMvRCxNQUFNLElBQUlWLG1EQUFTQSxDQUFDO2dCQUNsQnNDLE1BQU07Z0JBQ044QixTQUFTO1lBQ1g7UUFDRjtRQUVBLE9BQU9uQyxJQUFJRSxNQUFNLENBQUNELElBQUksQ0FBQ21DLE1BQU0sQ0FBQztZQUM1QmhDLE9BQU87Z0JBQUUvQixJQUFJa0MsTUFBTXlCLE1BQU07WUFBQztZQUMxQkssTUFBTTtnQkFBRTVELE1BQU04QixNQUFNOUIsSUFBSTtZQUFDO1lBQ3pCTSxRQUFRWDtRQUNWO0lBQ0Y7SUFFRmtFLGNBQWN4RSxxREFBY0EsQ0FDekJ5QyxLQUFLLENBQUM3Qyx1Q0FBUSxDQUFDO1FBQ2RzRSxRQUFRdEUsdUNBQVE7UUFDaEJnQixZQUFZaEIsdUNBQVE7SUFDdEIsSUFDQ3dFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixzQ0FBc0M7UUFDdEMsTUFBTWdDLGVBQWUsTUFBTXZDLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDdUMsU0FBUyxDQUFDO1lBQ25EcEMsT0FBTztnQkFBRTFCLFlBQVk2QixNQUFNN0IsVUFBVTtZQUFDO1FBQ3hDO1FBRUEsSUFBSTZELGdCQUFnQkEsYUFBYWxFLEVBQUUsS0FBS2tDLE1BQU15QixNQUFNLEVBQUU7WUFDcEQsTUFBTSxJQUFJakUsbURBQVNBLENBQUM7Z0JBQ2xCc0MsTUFBTTtnQkFDTjhCLFNBQVM7WUFDWDtRQUNGO1FBRUEsT0FBT25DLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDbUMsTUFBTSxDQUFDO1lBQzVCaEMsT0FBTztnQkFBRS9CLElBQUlrQyxNQUFNeUIsTUFBTTtZQUFDO1lBQzFCSyxNQUFNO2dCQUFFM0QsWUFBWTZCLE1BQU03QixVQUFVO1lBQUM7WUFDckNLLFFBQVFYO1FBQ1Y7SUFDRjtJQUVGcUUsUUFBUTNFLHFEQUFjQSxDQUNuQnlDLEtBQUssQ0FBQzdDLHVDQUFRLENBQUM7UUFDZHNFLFFBQVF0RSx1Q0FBUTtJQUNsQixJQUNDd0UsUUFBUSxDQUFDLE9BQU8sRUFBRWxDLEdBQUcsRUFBRU8sS0FBSyxFQUFFO1FBQzdCLE1BQU1OLE9BQU8sTUFBTUQsSUFBSUUsTUFBTSxDQUFDRCxJQUFJLENBQUNFLFVBQVUsQ0FBQztZQUM1Q0MsT0FBTztnQkFBRS9CLElBQUkyQixJQUFJQyxJQUFJLENBQUM1QixFQUFFO1lBQUM7WUFDekJVLFFBQVE7Z0JBQUVWLElBQUk7Z0JBQU1JLE1BQU07WUFBSztRQUNqQztRQUVBLG9DQUFvQztRQUNwQyxJQUFJd0IsTUFBTXhCLFNBQVMsZUFBZTtZQUNoQyxNQUFNLElBQUlWLG1EQUFTQSxDQUFDO2dCQUNsQnNDLE1BQU07Z0JBQ044QixTQUFTO1lBQ1g7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixJQUFJNUIsTUFBTXlCLE1BQU0sS0FBS2hDLElBQUlDLElBQUksQ0FBQzVCLEVBQUUsRUFBRTtZQUNoQyxNQUFNLElBQUlOLG1EQUFTQSxDQUFDO2dCQUNsQnNDLE1BQU07Z0JBQ044QixTQUFTO1lBQ1g7UUFDRjtRQUVBLE1BQU1PLGVBQWUsTUFBTTFDLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDRSxVQUFVLENBQUM7WUFDcERDLE9BQU87Z0JBQUUvQixJQUFJa0MsTUFBTXlCLE1BQU07WUFBQztZQUMxQmpELFFBQVE7Z0JBQUVULE9BQU87WUFBSztRQUN4QjtRQUVBLElBQUksQ0FBQ29FLGNBQWM7WUFDakIsTUFBTSxJQUFJM0UsbURBQVNBLENBQUM7Z0JBQ2xCc0MsTUFBTTtnQkFDTjhCLFNBQVM7WUFDWDtRQUNGO1FBRUEsTUFBTW5DLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDd0MsTUFBTSxDQUFDO1lBQzNCckMsT0FBTztnQkFBRS9CLElBQUlrQyxNQUFNeUIsTUFBTTtZQUFDO1FBQzVCO1FBRUEsT0FBTztZQUFFMUQsT0FBT29FLGFBQWFwRSxLQUFLO1FBQUM7SUFDckM7SUFFRnFFLGNBQWM3RSxxREFBY0EsQ0FDekJ5QyxLQUFLLENBQ0o3Qyx1Q0FBUSxDQUFDO1FBQ1BZLE9BQU9aLHVDQUFRLEdBQUdZLEtBQUs7UUFDdkJHLE1BQU1mLHdDQUFNLENBQUM7WUFBQztZQUFlO1lBQVk7WUFBWTtZQUFXO1NBQVc7SUFDN0UsSUFFRHdFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixNQUFNakMsUUFBUW9CLGVBQWVhLE1BQU1qQyxLQUFLO1FBRXhDLE1BQU1zRSxlQUFlLE1BQU01QyxJQUFJRSxNQUFNLENBQUNELElBQUksQ0FBQ0UsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUU5QjtZQUFNO1FBQUU7UUFDekUsSUFBSXNFLGNBQWM7WUFDaEIsTUFBTSxJQUFJN0UsbURBQVNBLENBQUM7Z0JBQ2xCc0MsTUFBTTtnQkFDTjhCLFNBQVM7WUFDWDtRQUNGO1FBRUEsb0RBQW9EO1FBQ3BELE1BQU1uQyxJQUFJRSxNQUFNLENBQUMyQyxVQUFVLENBQUNDLFVBQVUsQ0FBQztZQUNyQzFDLE9BQU87Z0JBQ0w5QjtnQkFDQXlFLFlBQVk7Z0JBQ1pDLFdBQVc7Z0JBQ1hDLFdBQVc7b0JBQUVDLElBQUksSUFBSUM7Z0JBQU87WUFDOUI7WUFDQWQsTUFBTTtnQkFBRVcsV0FBVyxJQUFJRztZQUFPO1FBQ2hDO1FBRUEsTUFBTUMsUUFBUXBGLHlEQUFrQixDQUFDLElBQUlzRixRQUFRLENBQUM7UUFDOUMsTUFBTUwsWUFBWSxJQUFJRSxLQUFLQSxLQUFLSSxHQUFHLEtBQUssSUFBSSxLQUFLLEtBQUssS0FBSztRQUUzRCxNQUFNQyxTQUFTLE1BQU14RCxJQUFJRSxNQUFNLENBQUMyQyxVQUFVLENBQUNZLE1BQU0sQ0FBQztZQUNoRHBCLE1BQU07Z0JBQ0ovRDtnQkFDQUcsTUFBTThCLE1BQU05QixJQUFJO2dCQUNoQjJFO2dCQUNBSDtnQkFDQVMsYUFBYTFELElBQUlDLElBQUksQ0FBQzVCLEVBQUU7WUFDMUI7WUFDQVUsUUFBUTtnQkFDTlYsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEcsTUFBTTtnQkFDTndFLFdBQVc7Z0JBQ1hGLFlBQVk7Z0JBQ1pDLFdBQVc7Z0JBQ1hwRSxXQUFXO2dCQUNYK0UsV0FBVztvQkFBRTVFLFFBQVE7d0JBQUVSLE1BQU07d0JBQU1ELE9BQU87b0JBQUs7Z0JBQUU7WUFDbkQ7UUFDRjtRQUVBLE1BQU1zRixZQUFZLENBQUMsRUFBRXhFLFlBQVksMEJBQTBCLEVBQUVnRSxNQUFNLENBQUM7UUFDcEUsSUFBSVMsWUFBWTtRQUNoQixJQUFJO1lBQ0YsTUFBTTVGLCtEQUFtQkEsQ0FBQztnQkFDeEI2RixJQUFJeEY7Z0JBQ0p5RixlQUFlUCxPQUFPRyxTQUFTLENBQUNwRixJQUFJLElBQUlpRixPQUFPRyxTQUFTLENBQUNyRixLQUFLO2dCQUM5REcsTUFBTStFLE9BQU8vRSxJQUFJO2dCQUNqQm1GO1lBQ0Y7UUFDRixFQUFFLE9BQU9JLEtBQUs7WUFDWkgsWUFBWTtZQUNaSSxRQUFRQyxJQUFJLENBQUMseUNBQXlDRjtRQUN4RDtRQUVBLE9BQU87WUFBRSxHQUFHUixNQUFNO1lBQUVJO1lBQVdDO1FBQVU7SUFDM0M7SUFFRk0sYUFBYXJHLHFEQUFjQSxDQUN4QmlDLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNuQixNQUFNb0UsVUFBVSxNQUFNcEUsSUFBSUUsTUFBTSxDQUFDMkMsVUFBVSxDQUFDdEIsUUFBUSxDQUFDO1lBQ25EQyxTQUFTO2dCQUFFNUMsV0FBVztZQUFPO1lBQzdCRyxRQUFRO2dCQUNOVixJQUFJO2dCQUNKQyxPQUFPO2dCQUNQRyxNQUFNO2dCQUNOd0UsV0FBVztnQkFDWEYsWUFBWTtnQkFDWkMsV0FBVztnQkFDWHBFLFdBQVc7Z0JBQ1grRSxXQUFXO29CQUFFNUUsUUFBUTt3QkFBRVIsTUFBTTt3QkFBTUQsT0FBTztvQkFBSztnQkFBRTtZQUNuRDtRQUNGO1FBRUEsT0FBTzhGO0lBQ1Q7SUFFRkMsY0FBY3ZHLHFEQUFjQSxDQUN6QnlDLEtBQUssQ0FBQzdDLHVDQUFRLENBQUM7UUFBRTRHLFVBQVU1Ryx1Q0FBUTtJQUFHLElBQ3RDd0UsUUFBUSxDQUFDLE9BQU8sRUFBRWxDLEdBQUcsRUFBRU8sS0FBSyxFQUFFO1FBQzdCLE1BQU1pRCxTQUFTLE1BQU14RCxJQUFJRSxNQUFNLENBQUMyQyxVQUFVLENBQUMxQyxVQUFVLENBQUM7WUFDcERDLE9BQU87Z0JBQUUvQixJQUFJa0MsTUFBTStELFFBQVE7WUFBQztZQUM1QnZGLFFBQVE7Z0JBQUVWLElBQUk7Z0JBQU0yRSxXQUFXO2dCQUFNRCxZQUFZO1lBQUs7UUFDeEQ7UUFFQSxJQUFJLENBQUNTLFFBQVE7WUFDWCxNQUFNLElBQUl6RixtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWE4QixTQUFTO1lBQW1CO1FBQ3ZFO1FBQ0EsSUFBSXFCLE9BQU9ULFVBQVUsRUFBRTtZQUNyQixNQUFNLElBQUloRixtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWU4QixTQUFTO1lBQTBCO1FBQ2hGO1FBQ0EsSUFBSXFCLE9BQU9SLFNBQVMsRUFBRSxPQUFPO1lBQUV1QixJQUFJO1FBQUs7UUFFeEMsTUFBTXZFLElBQUlFLE1BQU0sQ0FBQzJDLFVBQVUsQ0FBQ1QsTUFBTSxDQUFDO1lBQ2pDaEMsT0FBTztnQkFBRS9CLElBQUlrQyxNQUFNK0QsUUFBUTtZQUFDO1lBQzVCakMsTUFBTTtnQkFBRVcsV0FBVyxJQUFJRztZQUFPO1FBQ2hDO1FBRUEsT0FBTztZQUFFb0IsSUFBSTtRQUFLO0lBQ3BCO0lBRUZDLGNBQWMxRyxxREFBY0EsQ0FDekJ5QyxLQUFLLENBQUM3Qyx1Q0FBUSxDQUFDO1FBQUU0RyxVQUFVNUcsdUNBQVE7SUFBRyxJQUN0Q3dFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixNQUFNaUQsU0FBUyxNQUFNeEQsSUFBSUUsTUFBTSxDQUFDMkMsVUFBVSxDQUFDMUMsVUFBVSxDQUFDO1lBQ3BEQyxPQUFPO2dCQUFFL0IsSUFBSWtDLE1BQU0rRCxRQUFRO1lBQUM7WUFDNUJ2RixRQUFRO2dCQUNOVixJQUFJO2dCQUNKQyxPQUFPO2dCQUNQRyxNQUFNO2dCQUNOc0UsWUFBWTtnQkFDWkMsV0FBVztnQkFDWFcsV0FBVztvQkFBRTVFLFFBQVE7d0JBQUVSLE1BQU07d0JBQU1ELE9BQU87b0JBQUs7Z0JBQUU7WUFDbkQ7UUFDRjtRQUVBLElBQUksQ0FBQ2tGLFFBQVE7WUFDWCxNQUFNLElBQUl6RixtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWE4QixTQUFTO1lBQW1CO1FBQ3ZFO1FBQ0EsSUFBSXFCLE9BQU9ULFVBQVUsRUFBRTtZQUNyQixNQUFNLElBQUloRixtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWU4QixTQUFTO1lBQTBCO1FBQ2hGO1FBQ0EsSUFBSXFCLE9BQU9SLFNBQVMsRUFBRTtZQUNwQixNQUFNLElBQUlqRixtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWU4QixTQUFTO1lBQTBCO1FBQ2hGO1FBRUEsTUFBTWlCLFFBQVFwRix5REFBa0IsQ0FBQyxJQUFJc0YsUUFBUSxDQUFDO1FBQzlDLE1BQU1MLFlBQVksSUFBSUUsS0FBS0EsS0FBS0ksR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLEtBQUs7UUFFM0QsTUFBTXZELElBQUlFLE1BQU0sQ0FBQzJDLFVBQVUsQ0FBQ1QsTUFBTSxDQUFDO1lBQ2pDaEMsT0FBTztnQkFBRS9CLElBQUlrQyxNQUFNK0QsUUFBUTtZQUFDO1lBQzVCakMsTUFBTTtnQkFBRWU7Z0JBQU9IO1lBQVU7UUFDM0I7UUFFQSxNQUFNVyxZQUFZLENBQUMsRUFBRXhFLFlBQVksMEJBQTBCLEVBQUVnRSxNQUFNLENBQUM7UUFDcEUsSUFBSVMsWUFBWTtRQUNoQixJQUFJO1lBQ0YsTUFBTTVGLCtEQUFtQkEsQ0FBQztnQkFDeEI2RixJQUFJTixPQUFPbEYsS0FBSztnQkFDaEJ5RixlQUFlUCxPQUFPRyxTQUFTLENBQUNwRixJQUFJLElBQUlpRixPQUFPRyxTQUFTLENBQUNyRixLQUFLO2dCQUM5REcsTUFBTStFLE9BQU8vRSxJQUFJO2dCQUNqQm1GO1lBQ0Y7UUFDRixFQUFFLE9BQU9JLEtBQUs7WUFDWkgsWUFBWTtZQUNaSSxRQUFRQyxJQUFJLENBQUMseUNBQXlDRjtRQUN4RDtRQUVBLE9BQU87WUFBRU8sSUFBSTtZQUFNWDtZQUFXQztRQUFVO0lBQzFDO0lBRUZZLFdBQVc3RyxzREFBZUEsQ0FDdkIyQyxLQUFLLENBQUM3Qyx1Q0FBUSxDQUFDO1FBQUUwRixPQUFPMUYsdUNBQVEsR0FBR2dILEdBQUcsQ0FBQztJQUFJLElBQzNDM0UsS0FBSyxDQUFDLE9BQU8sRUFBRUMsR0FBRyxFQUFFTyxLQUFLLEVBQUU7UUFDMUIsTUFBTWlELFNBQVMsTUFBTXhELElBQUlFLE1BQU0sQ0FBQzJDLFVBQVUsQ0FBQzFDLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRWdELE9BQU83QyxNQUFNNkMsS0FBSztZQUFDO1lBQzVCckUsUUFBUTtnQkFDTlQsT0FBTztnQkFDUEcsTUFBTTtnQkFDTndFLFdBQVc7Z0JBQ1hGLFlBQVk7Z0JBQ1pDLFdBQVc7Z0JBQ1hXLFdBQVc7b0JBQUU1RSxRQUFRO3dCQUFFUixNQUFNO3dCQUFNRCxPQUFPO29CQUFLO2dCQUFFO1lBQ25EO1FBQ0Y7UUFFQSxJQUFJLENBQUNrRixRQUFRO1lBQ1gsTUFBTSxJQUFJekYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUFtQjtRQUN2RTtRQUNBLElBQUlxQixPQUFPUixTQUFTLEVBQUU7WUFDcEIsTUFBTSxJQUFJakYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUEwQjtRQUM5RTtRQUNBLElBQUlxQixPQUFPVCxVQUFVLEVBQUU7WUFDckIsTUFBTSxJQUFJaEYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUEwQjtRQUM5RTtRQUNBLElBQUlxQixPQUFPUCxTQUFTLENBQUMwQixPQUFPLE1BQU14QixLQUFLSSxHQUFHLElBQUk7WUFDNUMsTUFBTSxJQUFJeEYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUFxQjtRQUN6RTtRQUVBLE9BQU9xQjtJQUNUO0lBRUZvQixjQUFjaEgsc0RBQWVBLENBQzFCMkMsS0FBSyxDQUNKN0MsdUNBQVEsQ0FBQztRQUNQMEYsT0FBTzFGLHVDQUFRLEdBQUdnSCxHQUFHLENBQUM7UUFDdEJuRyxNQUFNYix1Q0FBUSxHQUFHZ0gsR0FBRyxDQUFDLEdBQUdHLEdBQUcsQ0FBQztRQUM1QkMsVUFBVXBILHVDQUFRLEdBQUdnSCxHQUFHLENBQUM7UUFDekJLLGlCQUFpQnJILHVDQUFRLEdBQUdnSCxHQUFHLENBQUM7SUFDbEMsSUFFRHhDLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixJQUFJQSxNQUFNdUUsUUFBUSxLQUFLdkUsTUFBTXdFLGVBQWUsRUFBRTtZQUM1QyxNQUFNLElBQUloSCxtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWU4QixTQUFTO1lBQXlCO1FBQy9FO1FBRUEsTUFBTXFCLFNBQVMsTUFBTXhELElBQUlFLE1BQU0sQ0FBQzJDLFVBQVUsQ0FBQzFDLFVBQVUsQ0FBQztZQUNwREMsT0FBTztnQkFBRWdELE9BQU83QyxNQUFNNkMsS0FBSztZQUFDO1lBQzVCckUsUUFBUTtnQkFDTlYsSUFBSTtnQkFDSkMsT0FBTztnQkFDUEcsTUFBTTtnQkFDTndFLFdBQVc7Z0JBQ1hGLFlBQVk7Z0JBQ1pDLFdBQVc7WUFDYjtRQUNGO1FBRUEsSUFBSSxDQUFDUSxRQUFRO1lBQ1gsTUFBTSxJQUFJekYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUFtQjtRQUN2RTtRQUNBLElBQUlxQixPQUFPUixTQUFTLEVBQUU7WUFDcEIsTUFBTSxJQUFJakYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUEwQjtRQUM5RTtRQUNBLElBQUlxQixPQUFPVCxVQUFVLEVBQUU7WUFDckIsTUFBTSxJQUFJaEYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUEwQjtRQUM5RTtRQUNBLElBQUlxQixPQUFPUCxTQUFTLENBQUMwQixPQUFPLE1BQU14QixLQUFLSSxHQUFHLElBQUk7WUFDNUMsTUFBTSxJQUFJeEYsbURBQVNBLENBQUM7Z0JBQUVzQyxNQUFNO2dCQUFhOEIsU0FBUztZQUFxQjtRQUN6RTtRQUVBLE1BQU1TLGVBQWUsTUFBTTVDLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDRSxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRTlCLE9BQU9rRixPQUFPbEYsS0FBSztZQUFDO1FBQUU7UUFDdkYsSUFBSXNFLGNBQWM7WUFDaEIsTUFBTSxJQUFJN0UsbURBQVNBLENBQUM7Z0JBQ2xCc0MsTUFBTTtnQkFDTjhCLFNBQVM7WUFDWDtRQUNGO1FBRUEsTUFBTTZDLGVBQWUsTUFBTTlHLDJEQUFZQSxDQUFDcUMsTUFBTXVFLFFBQVE7UUFDdEQsTUFBTTlFLElBQUlFLE1BQU0sQ0FBQytFLFlBQVksQ0FBQztZQUM1QmpGLElBQUlFLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDd0QsTUFBTSxDQUFDO2dCQUNyQnBCLE1BQU07b0JBQ0ovRCxPQUFPa0YsT0FBT2xGLEtBQUs7b0JBQ25CQyxNQUFNZ0MsTUFBTWhDLElBQUk7b0JBQ2hCRSxNQUFNK0UsT0FBTy9FLElBQUk7b0JBQ2pCdUc7b0JBQ0FyRyxlQUFlLElBQUl3RTtnQkFDckI7WUFDRjtZQUNBbkQsSUFBSUUsTUFBTSxDQUFDMkMsVUFBVSxDQUFDVCxNQUFNLENBQUM7Z0JBQzNCaEMsT0FBTztvQkFBRS9CLElBQUltRixPQUFPbkYsRUFBRTtnQkFBQztnQkFDdkJnRSxNQUFNO29CQUFFVSxZQUFZLElBQUlJO2dCQUFPO1lBQ2pDO1NBQ0Q7UUFFRCxPQUFPO1lBQUU3RSxPQUFPa0YsT0FBT2xGLEtBQUs7UUFBQztJQUMvQjtJQUVGNEcsZ0JBQWdCckgseURBQWtCQSxDQUMvQjBDLEtBQUssQ0FDSjdDLHVDQUFRLENBQUM7UUFDUHlILGlCQUFpQnpILHVDQUFRLEdBQUdnSCxHQUFHLENBQUMsR0FBR1UsUUFBUTtRQUMzQ0MsYUFBYTNILHVDQUFRLEdBQUdnSCxHQUFHLENBQUM7UUFDNUJLLGlCQUFpQnJILHVDQUFRLEdBQUdnSCxHQUFHLENBQUM7SUFDbEMsSUFFRHhDLFFBQVEsQ0FBQyxPQUFPLEVBQUVsQyxHQUFHLEVBQUVPLEtBQUssRUFBRTtRQUM3QixJQUFJQSxNQUFNOEUsV0FBVyxLQUFLOUUsTUFBTXdFLGVBQWUsRUFBRTtZQUMvQyxNQUFNLElBQUloSCxtREFBU0EsQ0FBQztnQkFBRXNDLE1BQU07Z0JBQWU4QixTQUFTO1lBQXlCO1FBQy9FO1FBRUEsTUFBTWxDLE9BQU8sTUFBTUQsSUFBSUUsTUFBTSxDQUFDRCxJQUFJLENBQUNFLFVBQVUsQ0FBQztZQUM1Q0MsT0FBTztnQkFBRS9CLElBQUkyQixJQUFJQyxJQUFJLENBQUM1QixFQUFFO1lBQUM7WUFDekJVLFFBQVE7Z0JBQUVWLElBQUk7Z0JBQU0yRyxjQUFjO2dCQUFNckcsZUFBZTtZQUFLO1FBQzlEO1FBRUEsSUFBSSxDQUFDc0IsTUFBTTtZQUNULE1BQU0sSUFBSWxDLG1EQUFTQSxDQUFDO2dCQUFFc0MsTUFBTTtZQUFlO1FBQzdDO1FBRUEsSUFBSUosS0FBSytFLFlBQVksRUFBRTtZQUNyQixJQUFJLENBQUN6RSxNQUFNNEUsZUFBZSxFQUFFO2dCQUMxQixNQUFNLElBQUlwSCxtREFBU0EsQ0FBQztvQkFBRXNDLE1BQU07b0JBQWU4QixTQUFTO2dCQUErQjtZQUNyRjtZQUVBLE1BQU1vQyxLQUFLLE1BQU1wRyw2REFBY0EsQ0FBQztnQkFBRTJHLFVBQVV2RSxNQUFNNEUsZUFBZTtnQkFBRUgsY0FBYy9FLEtBQUsrRSxZQUFZO1lBQUM7WUFDbkcsSUFBSSxDQUFDVCxJQUFJO2dCQUNQLE1BQU0sSUFBSXhHLG1EQUFTQSxDQUFDO29CQUFFc0MsTUFBTTtvQkFBZThCLFNBQVM7Z0JBQWdDO1lBQ3RGO1FBQ0Y7UUFFQSxNQUFNNkMsZUFBZSxNQUFNOUcsMkRBQVlBLENBQUNxQyxNQUFNOEUsV0FBVztRQUN6RCxNQUFNckYsSUFBSUUsTUFBTSxDQUFDRCxJQUFJLENBQUNtQyxNQUFNLENBQUM7WUFDM0JoQyxPQUFPO2dCQUFFL0IsSUFBSTRCLEtBQUs1QixFQUFFO1lBQUM7WUFDckJnRSxNQUFNO2dCQUFFMkM7Z0JBQWNyRyxlQUFlLElBQUl3RTtZQUFPO1FBQ2xEO1FBRUEsT0FBTztZQUFFb0IsSUFBSTtRQUFLO0lBQ3BCO0FBQ0osR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2N1cmFjZWwtcGVvcGxlLy4vc3JjL3NlcnZlci9yb3V0ZXJzL3VzZXIudHM/YzQ0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuaW1wb3J0IHsgcm91dGVyLCBwdWJsaWNQcm9jZWR1cmUsIHByb3RlY3RlZFByb2NlZHVyZSwgYWRtaW5Qcm9jZWR1cmUgfSBmcm9tICdAL2xpYi90cnBjJ1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJ1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5pbXBvcnQgeyBzZW5kVGVhbUludml0ZUVtYWlsIH0gZnJvbSAnQC9saWIvZW1haWwnXG5pbXBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSAnQC9saWIvcGFzc3dvcmQnXG5pbXBvcnQgeyBQcmlzbWEsIHR5cGUgUm9sZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG5jb25zdCB1c2VyU2VsZWN0ID0ge1xuICBpZDogdHJ1ZSxcbiAgZW1haWw6IHRydWUsXG4gIG5hbWU6IHRydWUsXG4gIGltYWdlOiB0cnVlLFxuICByb2xlOiB0cnVlLFxuICBlbXBsb3llZUlkOiB0cnVlLFxuICBwYXNzd29yZFNldEF0OiB0cnVlLFxuICBjcmVhdGVkQXQ6IHRydWUsXG4gIHVwZGF0ZWRBdDogdHJ1ZSxcbiAgZW1wbG95ZWU6IHtcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgZnVsbE5hbWU6IHRydWUsXG4gICAgICBqb2JUaXRsZTogdHJ1ZSxcbiAgICAgIGRlcGFydG1lbnQ6IHRydWUsXG4gICAgICBzdGF0dXM6IHRydWUsXG4gICAgfSxcbiAgfSxcbn0gc2F0aXNmaWVzIFByaXNtYS5Vc2VyU2VsZWN0XG5cbmZ1bmN0aW9uIGdldEFwcFVybCgpOiBzdHJpbmcge1xuICBjb25zdCByYXcgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTFxuICByZXR1cm4gcmF3IHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gZW1haWwudHJpbSgpLnRvTG93ZXJDYXNlKClcbn1cblxuZXhwb3J0IGNvbnN0IHVzZXJSb3V0ZXIgPSByb3V0ZXIoe1xuICBtZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBlbWFpbDogY3R4LnVzZXI/LmVtYWlsISB9LFxuICAgICAgICBzZWxlY3Q6IHVzZXJTZWxlY3QsXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1c2VyXG4gICAgfSksXG5cbiAgbGlzdDogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgcm9sZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgc2VhcmNoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBwYWdlOiB6Lm51bWJlcigpLmRlZmF1bHQoMSksXG4gICAgICBsaW1pdDogei5udW1iZXIoKS5kZWZhdWx0KDIwKSxcbiAgICB9KS5vcHRpb25hbCgpKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgcm9sZSwgc2VhcmNoLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gaW5wdXQgfHwge31cbiAgICAgIFxuICAgICAgY29uc3Qgd2hlcmU6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbiAgICAgIFxuICAgICAgaWYgKHJvbGUpIHdoZXJlLnJvbGUgPSByb2xlXG4gICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgIHdoZXJlLk9SID0gW1xuICAgICAgICAgIHsgbmFtZTogeyBjb250YWluczogc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgICB7IGVtYWlsOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICBdXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IFt1c2VycywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBjdHgucHJpc21hLnVzZXIuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlLFxuICAgICAgICAgIHNlbGVjdDogdXNlclNlbGVjdCxcbiAgICAgICAgICBvcmRlckJ5OiB7IG5hbWU6ICdhc2MnIH0sXG4gICAgICAgICAgc2tpcDogKHBhZ2UgLSAxKSAqIGxpbWl0LFxuICAgICAgICAgIHRha2U6IGxpbWl0LFxuICAgICAgICB9KSxcbiAgICAgICAgY3R4LnByaXNtYS51c2VyLmNvdW50KHsgd2hlcmUgfSksXG4gICAgICBdKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VycyxcbiAgICAgICAgdG90YWwsXG4gICAgICAgIHBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgICB9XG4gICAgfSksXG5cbiAgdXBkYXRlUm9sZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgdXNlcklkOiB6LnN0cmluZygpLFxuICAgICAgcm9sZTogei5lbnVtKFsnU1VQRVJfQURNSU4nLCAnSFJfQURNSU4nLCAnSVRfQURNSU4nLCAnTUFOQUdFUicsICdFTVBMT1lFRSddKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3R4LnVzZXIgYXMgeyByb2xlOiBzdHJpbmcgfVxuICAgICAgXG4gICAgICAvLyBPbmx5IFNVUEVSX0FETUlOIGNhbiBjcmVhdGUgb3RoZXIgU1VQRVJfQURNSU5zXG4gICAgICBpZiAoaW5wdXQucm9sZSA9PT0gJ1NVUEVSX0FETUlOJyAmJiB1c2VyLnJvbGUgIT09ICdTVVBFUl9BRE1JTicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IFxuICAgICAgICAgIGNvZGU6ICdGT1JCSURERU4nLCBcbiAgICAgICAgICBtZXNzYWdlOiAnT25seSBTdXBlciBBZG1pbnMgY2FuIGdyYW50IFN1cGVyIEFkbWluIHJvbGUnIFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC51c2VySWQgfSxcbiAgICAgICAgZGF0YTogeyByb2xlOiBpbnB1dC5yb2xlIH0sXG4gICAgICAgIHNlbGVjdDogdXNlclNlbGVjdCxcbiAgICAgIH0pXG4gICAgfSksXG5cbiAgbGlua0VtcGxveWVlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7XG4gICAgICB1c2VySWQ6IHouc3RyaW5nKCksXG4gICAgICBlbXBsb3llZUlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIGVtcGxveWVlIGlzIGFscmVhZHkgbGlua2VkXG4gICAgICBjb25zdCBleGlzdGluZ0xpbmsgPSBhd2FpdCBjdHgucHJpc21hLnVzZXIuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgZW1wbG95ZWVJZDogaW5wdXQuZW1wbG95ZWVJZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKGV4aXN0aW5nTGluayAmJiBleGlzdGluZ0xpbmsuaWQgIT09IGlucHV0LnVzZXJJZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIGVtcGxveWVlIGlzIGFscmVhZHkgbGlua2VkIHRvIGFub3RoZXIgdXNlcicsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LnVzZXJJZCB9LFxuICAgICAgICBkYXRhOiB7IGVtcGxveWVlSWQ6IGlucHV0LmVtcGxveWVlSWQgfSxcbiAgICAgICAgc2VsZWN0OiB1c2VyU2VsZWN0LFxuICAgICAgfSlcbiAgICB9KSxcblxuICBkZWxldGU6IGFkbWluUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIHVzZXJJZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCByb2xlOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICAvLyBPbmx5IFNVUEVSX0FETUlOIGNhbiBkZWxldGUgdXNlcnNcbiAgICAgIGlmICh1c2VyPy5yb2xlICE9PSAnU1VQRVJfQURNSU4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6ICdGT1JCSURERU4nLFxuICAgICAgICAgIG1lc3NhZ2U6ICdPbmx5IFN1cGVyIEFkbWlucyBjYW4gZGVsZXRlIHVzZXJzJyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgLy8gUHJldmVudCBkZWxldGluZyB5b3Vyc2VsZlxuICAgICAgaWYgKGlucHV0LnVzZXJJZCA9PT0gY3R4LnVzZXIuaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogJ0JBRF9SRVFVRVNUJyxcbiAgICAgICAgICBtZXNzYWdlOiAnWW91IGNhbm5vdCBkZWxldGUgeW91cnNlbGYnLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyVG9EZWxldGUgPSBhd2FpdCBjdHgucHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC51c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGVtYWlsOiB0cnVlIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIXVzZXJUb0RlbGV0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLnVzZXIuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LnVzZXJJZCB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgZW1haWw6IHVzZXJUb0RlbGV0ZS5lbWFpbCB9XG4gICAgfSksXG5cbiAgY3JlYXRlSW52aXRlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgICAgICAgcm9sZTogei5lbnVtKFsnU1VQRVJfQURNSU4nLCAnSFJfQURNSU4nLCAnSVRfQURNSU4nLCAnTUFOQUdFUicsICdFTVBMT1lFRSddKSxcbiAgICAgIH0pXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGVtYWlsID0gbm9ybWFsaXplRW1haWwoaW5wdXQuZW1haWwpXG5cbiAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGN0eC5wcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KVxuICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnQ09ORkxJQ1QnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBIHVzZXIgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzLiBVcGRhdGUgdGhlaXIgcm9sZSBpbnN0ZWFkLicsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIFJldm9rZSBhbnkgZXhpc3RpbmcgcGVuZGluZyBpbnZpdGVzIHRvIHRoaXMgZW1haWxcbiAgICAgIGF3YWl0IGN0eC5wcmlzbWEudXNlckludml0ZS51cGRhdGVNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICBhY2NlcHRlZEF0OiBudWxsLFxuICAgICAgICAgIHJldm9rZWRBdDogbnVsbCxcbiAgICAgICAgICBleHBpcmVzQXQ6IHsgZ3Q6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogeyByZXZva2VkQXQ6IG5ldyBEYXRlKCkgfSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHRva2VuID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZygnaGV4JylcbiAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMClcblxuICAgICAgY29uc3QgaW52aXRlID0gYXdhaXQgY3R4LnByaXNtYS51c2VySW52aXRlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICByb2xlOiBpbnB1dC5yb2xlIGFzIFJvbGUsXG4gICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgZXhwaXJlc0F0LFxuICAgICAgICAgIGludml0ZWRCeUlkOiBjdHgudXNlci5pZCxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICBleHBpcmVzQXQ6IHRydWUsXG4gICAgICAgICAgYWNjZXB0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICByZXZva2VkQXQ6IHRydWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiB0cnVlLFxuICAgICAgICAgIGludml0ZWRCeTogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgY29uc3QgYWNjZXB0VXJsID0gYCR7Z2V0QXBwVXJsKCl9L2F1dGgvYWNjZXB0LWludml0ZT90b2tlbj0ke3Rva2VufWBcbiAgICAgIGxldCBlbWFpbFNlbnQgPSB0cnVlXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBzZW5kVGVhbUludml0ZUVtYWlsKHtcbiAgICAgICAgICB0bzogZW1haWwsXG4gICAgICAgICAgaW52aXRlZEJ5TmFtZTogaW52aXRlLmludml0ZWRCeS5uYW1lIHx8IGludml0ZS5pbnZpdGVkQnkuZW1haWwsXG4gICAgICAgICAgcm9sZTogaW52aXRlLnJvbGUsXG4gICAgICAgICAgYWNjZXB0VXJsLFxuICAgICAgICB9KVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVtYWlsU2VudCA9IGZhbHNlXG4gICAgICAgIGNvbnNvbGUud2FybignSW52aXRlIGNyZWF0ZWQgYnV0IGVtYWlsIHNlbmQgZmFpbGVkOicsIGVycilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgLi4uaW52aXRlLCBhY2NlcHRVcmwsIGVtYWlsU2VudCB9XG4gICAgfSksXG5cbiAgbGlzdEludml0ZXM6IGFkbWluUHJvY2VkdXJlXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBpbnZpdGVzID0gYXdhaXQgY3R4LnByaXNtYS51c2VySW52aXRlLmZpbmRNYW55KHtcbiAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICAgIGV4cGlyZXNBdDogdHJ1ZSxcbiAgICAgICAgICBhY2NlcHRlZEF0OiB0cnVlLFxuICAgICAgICAgIHJldm9rZWRBdDogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICAgICAgaW52aXRlZEJ5OiB7IHNlbGVjdDogeyBuYW1lOiB0cnVlLCBlbWFpbDogdHJ1ZSB9IH0sXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gaW52aXRlc1xuICAgIH0pLFxuXG4gIHJldm9rZUludml0ZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpbnZpdGVJZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBpbnZpdGUgPSBhd2FpdCBjdHgucHJpc21hLnVzZXJJbnZpdGUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pbnZpdGVJZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIHJldm9rZWRBdDogdHJ1ZSwgYWNjZXB0ZWRBdDogdHJ1ZSB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFpbnZpdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnSW52aXRlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbnZpdGUuYWNjZXB0ZWRBdCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ0ludml0ZSBhbHJlYWR5IGFjY2VwdGVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5yZXZva2VkQXQpIHJldHVybiB7IG9rOiB0cnVlIH1cblxuICAgICAgYXdhaXQgY3R4LnByaXNtYS51c2VySW52aXRlLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pbnZpdGVJZCB9LFxuICAgICAgICBkYXRhOiB7IHJldm9rZWRBdDogbmV3IERhdGUoKSB9LFxuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHsgb2s6IHRydWUgfVxuICAgIH0pLFxuXG4gIHJlc2VuZEludml0ZTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpbnZpdGVJZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBpbnZpdGUgPSBhd2FpdCBjdHgucHJpc21hLnVzZXJJbnZpdGUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pbnZpdGVJZCB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICAgIGFjY2VwdGVkQXQ6IHRydWUsXG4gICAgICAgICAgcmV2b2tlZEF0OiB0cnVlLFxuICAgICAgICAgIGludml0ZWRCeTogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFpbnZpdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnSW52aXRlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbnZpdGUuYWNjZXB0ZWRBdCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ0ludml0ZSBhbHJlYWR5IGFjY2VwdGVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5yZXZva2VkQXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdJbnZpdGUgaGFzIGJlZW4gcmV2b2tlZCcgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgdG9rZW4gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKVxuICAgICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLnVzZXJJbnZpdGUudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0Lmludml0ZUlkIH0sXG4gICAgICAgIGRhdGE6IHsgdG9rZW4sIGV4cGlyZXNBdCB9LFxuICAgICAgfSlcblxuICAgICAgY29uc3QgYWNjZXB0VXJsID0gYCR7Z2V0QXBwVXJsKCl9L2F1dGgvYWNjZXB0LWludml0ZT90b2tlbj0ke3Rva2VufWBcbiAgICAgIGxldCBlbWFpbFNlbnQgPSB0cnVlXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBzZW5kVGVhbUludml0ZUVtYWlsKHtcbiAgICAgICAgICB0bzogaW52aXRlLmVtYWlsLFxuICAgICAgICAgIGludml0ZWRCeU5hbWU6IGludml0ZS5pbnZpdGVkQnkubmFtZSB8fCBpbnZpdGUuaW52aXRlZEJ5LmVtYWlsLFxuICAgICAgICAgIHJvbGU6IGludml0ZS5yb2xlLFxuICAgICAgICAgIGFjY2VwdFVybCxcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlbWFpbFNlbnQgPSBmYWxzZVxuICAgICAgICBjb25zb2xlLndhcm4oJ0ludml0ZSB1cGRhdGVkIGJ1dCBlbWFpbCBzZW5kIGZhaWxlZDonLCBlcnIpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IG9rOiB0cnVlLCBhY2NlcHRVcmwsIGVtYWlsU2VudCB9XG4gICAgfSksXG5cbiAgZ2V0SW52aXRlOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyB0b2tlbjogei5zdHJpbmcoKS5taW4oMTApIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IGludml0ZSA9IGF3YWl0IGN0eC5wcmlzbWEudXNlckludml0ZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgdG9rZW46IGlucHV0LnRva2VuIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgICAgZXhwaXJlc0F0OiB0cnVlLFxuICAgICAgICAgIGFjY2VwdGVkQXQ6IHRydWUsXG4gICAgICAgICAgcmV2b2tlZEF0OiB0cnVlLFxuICAgICAgICAgIGludml0ZWRCeTogeyBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgZW1haWw6IHRydWUgfSB9LFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFpbnZpdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnSW52aXRlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbnZpdGUucmV2b2tlZEF0KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnRk9SQklEREVOJywgbWVzc2FnZTogJ0ludml0ZSBoYXMgYmVlbiByZXZva2VkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5hY2NlcHRlZEF0KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnRk9SQklEREVOJywgbWVzc2FnZTogJ0ludml0ZSBhbHJlYWR5IGFjY2VwdGVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5leHBpcmVzQXQuZ2V0VGltZSgpIDw9IERhdGUubm93KCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdGT1JCSURERU4nLCBtZXNzYWdlOiAnSW52aXRlIGhhcyBleHBpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW52aXRlXG4gICAgfSksXG5cbiAgYWNjZXB0SW52aXRlOiBwdWJsaWNQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHRva2VuOiB6LnN0cmluZygpLm1pbigxMCksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgyMDApLFxuICAgICAgICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oOCksXG4gICAgICAgIGNvbmZpcm1QYXNzd29yZDogei5zdHJpbmcoKS5taW4oOCksXG4gICAgICB9KVxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBpZiAoaW5wdXQucGFzc3dvcmQgIT09IGlucHV0LmNvbmZpcm1QYXNzd29yZCkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ0JBRF9SRVFVRVNUJywgbWVzc2FnZTogJ1Bhc3N3b3JkcyBkbyBub3QgbWF0Y2gnIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGludml0ZSA9IGF3YWl0IGN0eC5wcmlzbWEudXNlckludml0ZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgdG9rZW46IGlucHV0LnRva2VuIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgICAgZXhwaXJlc0F0OiB0cnVlLFxuICAgICAgICAgIGFjY2VwdGVkQXQ6IHRydWUsXG4gICAgICAgICAgcmV2b2tlZEF0OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFpbnZpdGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdOT1RfRk9VTkQnLCBtZXNzYWdlOiAnSW52aXRlIG5vdCBmb3VuZCcgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbnZpdGUucmV2b2tlZEF0KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnRk9SQklEREVOJywgbWVzc2FnZTogJ0ludml0ZSBoYXMgYmVlbiByZXZva2VkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5hY2NlcHRlZEF0KSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnRk9SQklEREVOJywgbWVzc2FnZTogJ0ludml0ZSBhbHJlYWR5IGFjY2VwdGVkJyB9KVxuICAgICAgfVxuICAgICAgaWYgKGludml0ZS5leHBpcmVzQXQuZ2V0VGltZSgpIDw9IERhdGUubm93KCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdGT1JCSURERU4nLCBtZXNzYWdlOiAnSW52aXRlIGhhcyBleHBpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBjdHgucHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGVtYWlsOiBpbnZpdGUuZW1haWwgfSB9KVxuICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiAnQ09ORkxJQ1QnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdBIHVzZXIgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzLiBTaWduIGluIGluc3RlYWQuJyxcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKGlucHV0LnBhc3N3b3JkKVxuICAgICAgYXdhaXQgY3R4LnByaXNtYS4kdHJhbnNhY3Rpb24oW1xuICAgICAgICBjdHgucHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBlbWFpbDogaW52aXRlLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICAgIHJvbGU6IGludml0ZS5yb2xlLFxuICAgICAgICAgICAgcGFzc3dvcmRIYXNoLFxuICAgICAgICAgICAgcGFzc3dvcmRTZXRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgY3R4LnByaXNtYS51c2VySW52aXRlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGludml0ZS5pZCB9LFxuICAgICAgICAgIGRhdGE6IHsgYWNjZXB0ZWRBdDogbmV3IERhdGUoKSB9LFxuICAgICAgICB9KSxcbiAgICAgIF0pXG5cbiAgICAgIHJldHVybiB7IGVtYWlsOiBpbnZpdGUuZW1haWwgfVxuICAgIH0pLFxuXG4gIHVwZGF0ZVBhc3N3b3JkOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGN1cnJlbnRQYXNzd29yZDogei5zdHJpbmcoKS5taW4oMSkubnVsbGFibGUoKSxcbiAgICAgICAgbmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDgpLFxuICAgICAgICBjb25maXJtUGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDgpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgaWYgKGlucHV0Lm5ld1Bhc3N3b3JkICE9PSBpbnB1dC5jb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdQYXNzd29yZHMgZG8gbm90IG1hdGNoJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogY3R4LnVzZXIuaWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBwYXNzd29yZEhhc2g6IHRydWUsIHBhc3N3b3JkU2V0QXQ6IHRydWUgfSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZXIucGFzc3dvcmRIYXNoKSB7XG4gICAgICAgIGlmICghaW5wdXQuY3VycmVudFBhc3N3b3JkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdCQURfUkVRVUVTVCcsIG1lc3NhZ2U6ICdDdXJyZW50IHBhc3N3b3JkIGlzIHJlcXVpcmVkJyB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2sgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZCh7IHBhc3N3b3JkOiBpbnB1dC5jdXJyZW50UGFzc3dvcmQsIHBhc3N3b3JkSGFzaDogdXNlci5wYXNzd29yZEhhc2ggfSlcbiAgICAgICAgaWYgKCFvaykge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnQkFEX1JFUVVFU1QnLCBtZXNzYWdlOiAnQ3VycmVudCBwYXNzd29yZCBpcyBpbmNvcnJlY3QnIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKGlucHV0Lm5ld1Bhc3N3b3JkKVxuICAgICAgYXdhaXQgY3R4LnByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXG4gICAgICAgIGRhdGE6IHsgcGFzc3dvcmRIYXNoLCBwYXNzd29yZFNldEF0OiBuZXcgRGF0ZSgpIH0sXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4geyBvazogdHJ1ZSB9XG4gICAgfSksXG59KVxuIl0sIm5hbWVzIjpbInoiLCJyb3V0ZXIiLCJwdWJsaWNQcm9jZWR1cmUiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJhZG1pblByb2NlZHVyZSIsIlRSUENFcnJvciIsImNyeXB0byIsInNlbmRUZWFtSW52aXRlRW1haWwiLCJoYXNoUGFzc3dvcmQiLCJ2ZXJpZnlQYXNzd29yZCIsInVzZXJTZWxlY3QiLCJpZCIsImVtYWlsIiwibmFtZSIsImltYWdlIiwicm9sZSIsImVtcGxveWVlSWQiLCJwYXNzd29yZFNldEF0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiZW1wbG95ZWUiLCJzZWxlY3QiLCJmdWxsTmFtZSIsImpvYlRpdGxlIiwiZGVwYXJ0bWVudCIsInN0YXR1cyIsImdldEFwcFVybCIsInJhdyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwiTkVYVEFVVEhfVVJMIiwibm9ybWFsaXplRW1haWwiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJ1c2VyUm91dGVyIiwibWUiLCJxdWVyeSIsImN0eCIsInVzZXIiLCJwcmlzbWEiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJjb2RlIiwibGlzdCIsImlucHV0Iiwib2JqZWN0Iiwic3RyaW5nIiwib3B0aW9uYWwiLCJzZWFyY2giLCJwYWdlIiwibnVtYmVyIiwiZGVmYXVsdCIsImxpbWl0IiwiT1IiLCJjb250YWlucyIsIm1vZGUiLCJ1c2VycyIsInRvdGFsIiwiUHJvbWlzZSIsImFsbCIsImZpbmRNYW55Iiwib3JkZXJCeSIsInNraXAiLCJ0YWtlIiwiY291bnQiLCJwYWdlcyIsIk1hdGgiLCJjZWlsIiwidXBkYXRlUm9sZSIsInVzZXJJZCIsImVudW0iLCJtdXRhdGlvbiIsIm1lc3NhZ2UiLCJ1cGRhdGUiLCJkYXRhIiwibGlua0VtcGxveWVlIiwiZXhpc3RpbmdMaW5rIiwiZmluZEZpcnN0IiwiZGVsZXRlIiwidXNlclRvRGVsZXRlIiwiY3JlYXRlSW52aXRlIiwiZXhpc3RpbmdVc2VyIiwidXNlckludml0ZSIsInVwZGF0ZU1hbnkiLCJhY2NlcHRlZEF0IiwicmV2b2tlZEF0IiwiZXhwaXJlc0F0IiwiZ3QiLCJEYXRlIiwidG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwibm93IiwiaW52aXRlIiwiY3JlYXRlIiwiaW52aXRlZEJ5SWQiLCJpbnZpdGVkQnkiLCJhY2NlcHRVcmwiLCJlbWFpbFNlbnQiLCJ0byIsImludml0ZWRCeU5hbWUiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsImxpc3RJbnZpdGVzIiwiaW52aXRlcyIsInJldm9rZUludml0ZSIsImludml0ZUlkIiwib2siLCJyZXNlbmRJbnZpdGUiLCJnZXRJbnZpdGUiLCJtaW4iLCJnZXRUaW1lIiwiYWNjZXB0SW52aXRlIiwibWF4IiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJwYXNzd29yZEhhc2giLCIkdHJhbnNhY3Rpb24iLCJ1cGRhdGVQYXNzd29yZCIsImN1cnJlbnRQYXNzd29yZCIsIm51bGxhYmxlIiwibmV3UGFzc3dvcmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/routers/user.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/@auth","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/preact-render-to-string","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/@trpc","vendor-chunks/tailwind-merge","vendor-chunks/superjson","vendor-chunks/copy-anything","vendor-chunks/is-what","vendor-chunks/clsx","vendor-chunks/googleapis","vendor-chunks/@slack","vendor-chunks/postmark","vendor-chunks/google-auth-library","vendor-chunks/bluebird","vendor-chunks/nodemailer","vendor-chunks/handlebars","vendor-chunks/cssom","vendor-chunks/@jonkemp","vendor-chunks/uuid","vendor-chunks/readable-stream","vendor-chunks/inline-css","vendor-chunks/cheerio","vendor-chunks/asynckit","vendor-chunks/googleapis-common","vendor-chunks/math-intrinsics","vendor-chunks/htmlparser2","vendor-chunks/entities","vendor-chunks/zod","vendor-chunks/gaxios","vendor-chunks/es-errors","vendor-chunks/domutils","vendor-chunks/css-select","vendor-chunks/whatwg-url","vendor-chunks/qs","vendor-chunks/jws","vendor-chunks/call-bind-apply-helpers","vendor-chunks/p-queue","vendor-chunks/debug","vendor-chunks/slick","vendor-chunks/retry","vendor-chunks/nth-check","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/get-proto","vendor-chunks/domhandler","vendor-chunks/tr46","vendor-chunks/object-inspect","vendor-chunks/mime-db","vendor-chunks/inherits","vendor-chunks/https-proxy-agent","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/gcp-metadata","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/specificity","vendor-chunks/node-fetch","vendor-chunks/axios","vendor-chunks/webidl-conversions","vendor-chunks/util-deprecate","vendor-chunks/url-template","vendor-chunks/supports-color","vendor-chunks/style-data","vendor-chunks/string_decoder","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/safe-buffer","vendor-chunks/remote-content","vendor-chunks/proxy-from-env","vendor-chunks/pick-util","vendor-chunks/p-timeout","vendor-chunks/p-retry","vendor-chunks/p-finally","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/mediaquery-text","vendor-chunks/lodash.some","vendor-chunks/lodash.reject","vendor-chunks/lodash.reduce","vendor-chunks/lodash.pick","vendor-chunks/lodash.merge","vendor-chunks/lodash.map","vendor-chunks/lodash.foreach","vendor-chunks/lodash.flatten","vendor-chunks/lodash.filter","vendor-chunks/lodash.defaults","vendor-chunks/lodash.bind","vendor-chunks/lodash.assignin","vendor-chunks/list-stylesheets","vendor-chunks/jwa","vendor-chunks/is-stream","vendor-chunks/is-electron","vendor-chunks/html-pdf-node","vendor-chunks/href-content","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/get-intrinsic","vendor-chunks/flat-util","vendor-chunks/extract-css","vendor-chunks/extend","vendor-chunks/eventemitter3","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/emitter","vendor-chunks/dunder-proto","vendor-chunks/domelementtype","vendor-chunks/dom-serializer","vendor-chunks/delayed-stream","vendor-chunks/css-what","vendor-chunks/css-rules","vendor-chunks/combined-stream","vendor-chunks/call-bound","vendor-chunks/buffer-equal-constant-time","vendor-chunks/boolbase","vendor-chunks/bignumber.js","vendor-chunks/batch","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fhenrymascot%2FCode%2FCuracelPeople&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();